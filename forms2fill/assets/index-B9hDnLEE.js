var xn=Object.defineProperty;var wn=Object.getPrototypeOf;var Sn=Reflect.get;var Fr=a=>{throw TypeError(a)};var Cn=(a,e,n)=>e in a?xn(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n;var rt=(a,e,n)=>Cn(a,typeof e!="symbol"?e+"":e,n),tr=(a,e,n)=>e.has(a)||Fr("Cannot "+n);var W=(a,e,n)=>(tr(a,e,"read from private field"),n?n.call(a):e.get(a)),Re=(a,e,n)=>e.has(a)?Fr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,n),Ie=(a,e,n,s)=>(tr(a,e,"write to private field"),s?s.call(a,n):e.set(a,n),n),Ee=(a,e,n)=>(tr(a,e,"access private method"),n);var Wt=(a,e,n,s)=>({set _(o){Ie(a,e,o,n)},get _(){return W(a,e,s)}}),Dr=(a,e,n)=>Sn(wn(a),n,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();const DEV=!1;var is_array=Array.isArray,index_of=Array.prototype.indexOf,array_from=Array.from,define_property=Object.defineProperty,get_descriptor=Object.getOwnPropertyDescriptor,get_descriptors=Object.getOwnPropertyDescriptors,object_prototype=Object.prototype,array_prototype=Array.prototype,get_prototype_of=Object.getPrototypeOf,is_extensible=Object.isExtensible;function is_function(a){return typeof a=="function"}const noop$1=()=>{};function is_promise(a){return typeof(a==null?void 0:a.then)=="function"}function run(a){return a()}function run_all(a){for(var e=0;e<a.length;e++)a[e]()}function fallback(a,e,n=!1){return a===void 0?n?e():e:a}const DERIVED=2,EFFECT=4,RENDER_EFFECT=8,BLOCK_EFFECT=16,BRANCH_EFFECT=32,ROOT_EFFECT=64,BOUNDARY_EFFECT=128,UNOWNED=256,DISCONNECTED=512,CLEAN=1024,DIRTY=2048,MAYBE_DIRTY=4096,INERT=8192,DESTROYED=16384,EFFECT_RAN=32768,EFFECT_TRANSPARENT=65536,LEGACY_DERIVED_PROP=1<<17,HEAD_EFFECT=1<<19,EFFECT_HAS_DERIVED=1<<20,EFFECT_IS_UPDATING=1<<21,STATE_SYMBOL=Symbol("$state"),LEGACY_PROPS=Symbol("legacy props"),LOADING_ATTR_SYMBOL=Symbol("");function equals(a){return a===this.v}function safe_not_equal(a,e){return a!=a?e==e:a!==e||a!==null&&typeof a=="object"||typeof a=="function"}function not_equal(a,e){return a!==e}function safe_equals(a){return!safe_not_equal(a,this.v)}function effect_in_teardown(a){throw new Error("https://svelte.dev/e/effect_in_teardown")}function effect_in_unowned_derived(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function effect_orphan(a){throw new Error("https://svelte.dev/e/effect_orphan")}function effect_update_depth_exceeded(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function props_invalid_value(a){throw new Error("https://svelte.dev/e/props_invalid_value")}function state_descriptors_fixed(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function state_prototype_fixed(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function state_unsafe_mutation(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let legacy_mode_flag=!1,tracing_mode_flag=!1;function enable_legacy_mode_flag(){legacy_mode_flag=!0}const EACH_ITEM_REACTIVE=1,EACH_INDEX_REACTIVE=2,EACH_IS_CONTROLLED=4,EACH_IS_ANIMATED=8,EACH_ITEM_IMMUTABLE=16,PROPS_IS_IMMUTABLE=1,PROPS_IS_RUNES=2,PROPS_IS_UPDATED=4,PROPS_IS_BINDABLE=8,PROPS_IS_LAZY_INITIAL=16,TRANSITION_IN=1,TRANSITION_OUT=2,TRANSITION_GLOBAL=4,TEMPLATE_FRAGMENT=1,TEMPLATE_USE_IMPORT_NODE=2,UNINITIALIZED=Symbol(),NAMESPACE_HTML="http://www.w3.org/1999/xhtml",NAMESPACE_SVG="http://www.w3.org/2000/svg",empty$1=[];function snapshot(a,e=!1){return clone(a,new Map,"",empty$1)}function clone(a,e,n,s,o=null){if(typeof a=="object"&&a!==null){var l=e.get(a);if(l!==void 0)return l;if(a instanceof Map)return new Map(a);if(a instanceof Set)return new Set(a);if(is_array(a)){var c=Array(a.length);e.set(a,c),o!==null&&e.set(o,c);for(var u=0;u<a.length;u+=1){var h=a[u];u in a&&(c[u]=clone(h,e,n,s))}return c}if(get_prototype_of(a)===object_prototype){c={},e.set(a,c),o!==null&&e.set(o,c);for(var f in a)c[f]=clone(a[f],e,n,s);return c}if(a instanceof Date)return structuredClone(a);if(typeof a.toJSON=="function")return clone(a.toJSON(),e,n,s,a)}if(a instanceof EventTarget)return a;try{return structuredClone(a)}catch{return a}}function lifecycle_outside_component(a){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let component_context=null;function set_component_context(a){component_context=a}function getContext(a){return get_or_init_context_map().get(a)}function setContext(a,e){return get_or_init_context_map().set(a,e),e}function push(a,e=!1,n){var s=component_context={p:component_context,c:null,d:!1,e:null,m:!1,s:a,x:null,l:null};legacy_mode_flag&&!e&&(component_context.l={s:null,u:null,r1:[],r2:source(!1)}),teardown(()=>{s.d=!0})}function pop(a){const e=component_context;if(e!==null){a!==void 0&&(e.x=a);const c=e.e;if(c!==null){var n=active_effect,s=active_reaction;e.e=null;try{for(var o=0;o<c.length;o++){var l=c[o];set_active_effect(l.effect),set_active_reaction(l.reaction),effect(l.fn)}}finally{set_active_effect(n),set_active_reaction(s)}}component_context=e.p,e.m=!0}return a||{}}function is_runes(){return!legacy_mode_flag||component_context!==null&&component_context.l===null}function get_or_init_context_map(a){return component_context===null&&lifecycle_outside_component(),component_context.c??(component_context.c=new Map(get_parent_context(component_context)||void 0))}function get_parent_context(a){let e=a.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}function proxy(a){if(typeof a!="object"||a===null||STATE_SYMBOL in a)return a;const e=get_prototype_of(a);if(e!==object_prototype&&e!==array_prototype)return a;var n=new Map,s=is_array(a),o=state(0),l=active_reaction,c=u=>{var h=active_reaction;set_active_reaction(l);var f=u();return set_active_reaction(h),f};return s&&n.set("length",state(a.length)),new Proxy(a,{defineProperty(u,h,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&state_descriptors_fixed();var d=n.get(h);return d===void 0?(d=c(()=>state(f.value)),n.set(h,d)):set(d,c(()=>proxy(f.value))),!0},deleteProperty(u,h){var f=n.get(h);if(f===void 0)h in u&&(n.set(h,c(()=>state(UNINITIALIZED))),update_version(o));else{if(s&&typeof h=="string"){var d=n.get("length"),p=Number(h);Number.isInteger(p)&&p<d.v&&set(d,p)}set(f,UNINITIALIZED),update_version(o)}return!0},get(u,h,f){var m;if(h===STATE_SYMBOL)return a;var d=n.get(h),p=h in u;if(d===void 0&&(!p||(m=get_descriptor(u,h))!=null&&m.writable)&&(d=c(()=>state(proxy(p?u[h]:UNINITIALIZED))),n.set(h,d)),d!==void 0){var g=get$3(d);return g===UNINITIALIZED?void 0:g}return Reflect.get(u,h,f)},getOwnPropertyDescriptor(u,h){var f=Reflect.getOwnPropertyDescriptor(u,h);if(f&&"value"in f){var d=n.get(h);d&&(f.value=get$3(d))}else if(f===void 0){var p=n.get(h),g=p==null?void 0:p.v;if(p!==void 0&&g!==UNINITIALIZED)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return f},has(u,h){var g;if(h===STATE_SYMBOL)return!0;var f=n.get(h),d=f!==void 0&&f.v!==UNINITIALIZED||Reflect.has(u,h);if(f!==void 0||active_effect!==null&&(!d||(g=get_descriptor(u,h))!=null&&g.writable)){f===void 0&&(f=c(()=>state(d?proxy(u[h]):UNINITIALIZED)),n.set(h,f));var p=get$3(f);if(p===UNINITIALIZED)return!1}return d},set(u,h,f,d){var P;var p=n.get(h),g=h in u;if(s&&h==="length")for(var m=f;m<p.v;m+=1){var y=n.get(m+"");y!==void 0?set(y,UNINITIALIZED):m in u&&(y=c(()=>state(UNINITIALIZED)),n.set(m+"",y))}p===void 0?(!g||(P=get_descriptor(u,h))!=null&&P.writable)&&(p=c(()=>state(void 0)),set(p,c(()=>proxy(f))),n.set(h,p)):(g=p.v!==UNINITIALIZED,set(p,c(()=>proxy(f))));var _=Reflect.getOwnPropertyDescriptor(u,h);if(_!=null&&_.set&&_.set.call(d,f),!g){if(s&&typeof h=="string"){var b=n.get("length"),x=Number(h);Number.isInteger(x)&&x>=b.v&&set(b,x+1)}update_version(o)}return!0},ownKeys(u){get$3(o);var h=Reflect.ownKeys(u).filter(p=>{var g=n.get(p);return g===void 0||g.v!==UNINITIALIZED});for(var[f,d]of n)d.v!==UNINITIALIZED&&!(f in u)&&h.push(f);return h},setPrototypeOf(){state_prototype_fixed()}})}function update_version(a,e=1){set(a,a.v+e)}function get_proxied_value(a){try{if(a!==null&&typeof a=="object"&&STATE_SYMBOL in a)return a[STATE_SYMBOL]}catch{}return a}function is(a,e){return Object.is(get_proxied_value(a),get_proxied_value(e))}function derived(a){var e=DERIVED|DIRTY,n=active_reaction!==null&&(active_reaction.f&DERIVED)!==0?active_reaction:null;return active_effect===null||n!==null&&(n.f&UNOWNED)!==0?e|=UNOWNED:active_effect.f|=EFFECT_HAS_DERIVED,{ctx:component_context,deps:null,effects:null,equals,f:e,fn:a,reactions:null,rv:0,v:null,wv:0,parent:n??active_effect}}function user_derived(a){const e=derived(a);return push_reaction_value(e),e}function derived_safe_equal(a){const e=derived(a);return e.equals=safe_equals,e}function destroy_derived_effects(a){var e=a.effects;if(e!==null){a.effects=null;for(var n=0;n<e.length;n+=1)destroy_effect(e[n])}}function get_derived_parent_effect(a){for(var e=a.parent;e!==null;){if((e.f&DERIVED)===0)return e;e=e.parent}return null}function execute_derived(a){var e,n=active_effect;set_active_effect(get_derived_parent_effect(a));try{destroy_derived_effects(a),e=update_reaction(a)}finally{set_active_effect(n)}return e}function update_derived(a){var e=execute_derived(a),n=(skip_reaction||(a.f&UNOWNED)!==0)&&a.deps!==null?MAYBE_DIRTY:CLEAN;set_signal_status(a,n),a.equals(e)||(a.v=e,a.wv=increment_write_version())}const old_values=new Map;function source(a,e){var n={f:0,v:a,reactions:null,equals,rv:0,wv:0};return n}function state(a,e){const n=source(a);return push_reaction_value(n),n}function mutable_source(a,e=!1){var s;const n=source(a);return e||(n.equals=safe_equals),legacy_mode_flag&&component_context!==null&&component_context.l!==null&&((s=component_context.l).s??(s.s=[])).push(n),n}function set(a,e,n=!1){active_reaction!==null&&!untracking&&is_runes()&&(active_reaction.f&(DERIVED|BLOCK_EFFECT))!==0&&!(reaction_sources!=null&&reaction_sources.includes(a))&&state_unsafe_mutation();let s=n?proxy(e):e;return internal_set(a,s)}function internal_set(a,e){if(!a.equals(e)){var n=a.v;is_destroying_effect?old_values.set(a,e):old_values.set(a,n),a.v=e,(a.f&DERIVED)!==0&&((a.f&DIRTY)!==0&&execute_derived(a),set_signal_status(a,(a.f&UNOWNED)===0?CLEAN:MAYBE_DIRTY)),a.wv=increment_write_version(),mark_reactions(a,DIRTY),is_runes()&&active_effect!==null&&(active_effect.f&CLEAN)!==0&&(active_effect.f&(BRANCH_EFFECT|ROOT_EFFECT))===0&&(untracked_writes===null?set_untracked_writes([a]):untracked_writes.push(a))}return e}function mark_reactions(a,e){var n=a.reactions;if(n!==null)for(var s=is_runes(),o=n.length,l=0;l<o;l++){var c=n[l],u=c.f;(u&DIRTY)===0&&(!s&&c===active_effect||(set_signal_status(c,e),(u&(CLEAN|UNOWNED))!==0&&((u&DERIVED)!==0?mark_reactions(c,MAYBE_DIRTY):schedule_effect(c))))}}let hydrating=!1;var $window,$document,is_firefox,first_child_getter,next_sibling_getter;function init_operations(){if($window===void 0){$window=window,$document=document,is_firefox=/Firefox/.test(navigator.userAgent);var a=Element.prototype,e=Node.prototype,n=Text.prototype;first_child_getter=get_descriptor(e,"firstChild").get,next_sibling_getter=get_descriptor(e,"nextSibling").get,is_extensible(a)&&(a.__click=void 0,a.__className=void 0,a.__attributes=null,a.__style=void 0,a.__e=void 0),is_extensible(n)&&(n.__t=void 0)}}function create_text(a=""){return document.createTextNode(a)}function get_first_child(a){return first_child_getter.call(a)}function get_next_sibling(a){return next_sibling_getter.call(a)}function child(a,e){return get_first_child(a)}function first_child(a,e){{var n=get_first_child(a);return n instanceof Comment&&n.data===""?get_next_sibling(n):n}}function sibling(a,e=1,n=!1){let s=a;for(;e--;)s=get_next_sibling(s);return s}function clear_text_content(a){a.textContent=""}function validate_effect(a){active_effect===null&&active_reaction===null&&effect_orphan(),active_reaction!==null&&(active_reaction.f&UNOWNED)!==0&&active_effect===null&&effect_in_unowned_derived(),is_destroying_effect&&effect_in_teardown()}function push_effect(a,e){var n=e.last;n===null?e.last=e.first=a:(n.next=a,a.prev=n,e.last=a)}function create_effect(a,e,n,s=!0){var o=active_effect,l={ctx:component_context,deps:null,nodes_start:null,nodes_end:null,f:a|DIRTY,first:null,fn:e,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(n)try{update_effect(l),l.f|=EFFECT_RAN}catch(h){throw destroy_effect(l),h}else e!==null&&schedule_effect(l);var c=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(EFFECT_HAS_DERIVED|BOUNDARY_EFFECT))===0;if(!c&&s&&(o!==null&&push_effect(l,o),active_reaction!==null&&(active_reaction.f&DERIVED)!==0)){var u=active_reaction;(u.effects??(u.effects=[])).push(l)}return l}function teardown(a){const e=create_effect(RENDER_EFFECT,null,!1);return set_signal_status(e,CLEAN),e.teardown=a,e}function user_effect(a){validate_effect();var e=active_effect!==null&&(active_effect.f&BRANCH_EFFECT)!==0&&component_context!==null&&!component_context.m;if(e){var n=component_context;(n.e??(n.e=[])).push({fn:a,effect:active_effect,reaction:active_reaction})}else{var s=effect(a);return s}}function user_pre_effect(a){return validate_effect(),render_effect(a)}function component_root(a){const e=create_effect(ROOT_EFFECT,a,!0);return(n={})=>new Promise(s=>{n.outro?pause_effect(e,()=>{destroy_effect(e),s(void 0)}):(destroy_effect(e),s(void 0))})}function effect(a){return create_effect(EFFECT,a,!1)}function legacy_pre_effect(a,e){var n=component_context,s={effect:null,ran:!1};n.l.r1.push(s),s.effect=render_effect(()=>{a(),!s.ran&&(s.ran=!0,set(n.l.r2,!0),untrack(e))})}function legacy_pre_effect_reset(){var a=component_context;render_effect(()=>{if(get$3(a.l.r2)){for(var e of a.l.r1){var n=e.effect;(n.f&CLEAN)!==0&&set_signal_status(n,MAYBE_DIRTY),check_dirtiness(n)&&update_effect(n),e.ran=!1}a.l.r2.v=!1}})}function render_effect(a){return create_effect(RENDER_EFFECT,a,!0)}function template_effect(a,e=[],n=derived){const s=e.map(n);return block(()=>a(...s.map(get$3)))}function block(a,e=0){return create_effect(RENDER_EFFECT|BLOCK_EFFECT|e,a,!0)}function branch(a,e=!0){return create_effect(RENDER_EFFECT|BRANCH_EFFECT,a,!0,e)}function execute_effect_teardown(a){var e=a.teardown;if(e!==null){const n=is_destroying_effect,s=active_reaction;set_is_destroying_effect(!0),set_active_reaction(null);try{e.call(null)}finally{set_is_destroying_effect(n),set_active_reaction(s)}}}function destroy_effect_children(a,e=!1){var n=a.first;for(a.first=a.last=null;n!==null;){var s=n.next;(n.f&ROOT_EFFECT)!==0?n.parent=null:destroy_effect(n,e),n=s}}function destroy_block_effect_children(a){for(var e=a.first;e!==null;){var n=e.next;(e.f&BRANCH_EFFECT)===0&&destroy_effect(e),e=n}}function destroy_effect(a,e=!0){var n=!1;(e||(a.f&HEAD_EFFECT)!==0)&&a.nodes_start!==null&&(remove_effect_dom(a.nodes_start,a.nodes_end),n=!0),destroy_effect_children(a,e&&!n),remove_reactions(a,0),set_signal_status(a,DESTROYED);var s=a.transitions;if(s!==null)for(const l of s)l.stop();execute_effect_teardown(a);var o=a.parent;o!==null&&o.first!==null&&unlink_effect(a),a.next=a.prev=a.teardown=a.ctx=a.deps=a.fn=a.nodes_start=a.nodes_end=null}function remove_effect_dom(a,e){for(;a!==null;){var n=a===e?null:get_next_sibling(a);a.remove(),a=n}}function unlink_effect(a){var e=a.parent,n=a.prev,s=a.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),e!==null&&(e.first===a&&(e.first=s),e.last===a&&(e.last=n))}function pause_effect(a,e){var n=[];pause_children(a,n,!0),run_out_transitions(n,()=>{destroy_effect(a),e&&e()})}function run_out_transitions(a,e){var n=a.length;if(n>0){var s=()=>--n||e();for(var o of a)o.out(s)}else e()}function pause_children(a,e,n){if((a.f&INERT)===0){if(a.f^=INERT,a.transitions!==null)for(const c of a.transitions)(c.is_global||n)&&e.push(c);for(var s=a.first;s!==null;){var o=s.next,l=(s.f&EFFECT_TRANSPARENT)!==0||(s.f&BRANCH_EFFECT)!==0;pause_children(s,e,l?n:!1),s=o}}}function resume_effect(a){resume_children(a,!0)}function resume_children(a,e){if((a.f&INERT)!==0){a.f^=INERT,(a.f&CLEAN)===0&&(a.f^=CLEAN),check_dirtiness(a)&&(set_signal_status(a,DIRTY),schedule_effect(a));for(var n=a.first;n!==null;){var s=n.next,o=(n.f&EFFECT_TRANSPARENT)!==0||(n.f&BRANCH_EFFECT)!==0;resume_children(n,o?e:!1),n=s}if(a.transitions!==null)for(const l of a.transitions)(l.is_global||e)&&l.in()}}let micro_tasks=[],idle_tasks=[];function run_micro_tasks(){var a=micro_tasks;micro_tasks=[],run_all(a)}function run_idle_tasks(){var a=idle_tasks;idle_tasks=[],run_all(a)}function queue_micro_task(a){micro_tasks.length===0&&queueMicrotask(run_micro_tasks),micro_tasks.push(a)}function flush_tasks(){micro_tasks.length>0&&run_micro_tasks(),idle_tasks.length>0&&run_idle_tasks()}let is_throwing_error=!1,is_flushing=!1,last_scheduled_effect=null,is_updating_effect=!1,is_destroying_effect=!1;function set_is_destroying_effect(a){is_destroying_effect=a}let queued_root_effects=[],dev_effect_stack=[],active_reaction=null,untracking=!1;function set_active_reaction(a){active_reaction=a}let active_effect=null;function set_active_effect(a){active_effect=a}let reaction_sources=null;function push_reaction_value(a){active_reaction!==null&&active_reaction.f&EFFECT_IS_UPDATING&&(reaction_sources===null?reaction_sources=[a]:reaction_sources.push(a))}let new_deps=null,skipped_deps=0,untracked_writes=null;function set_untracked_writes(a){untracked_writes=a}let write_version=1,read_version=0,skip_reaction=!1;function increment_write_version(){return++write_version}function check_dirtiness(a){var p;var e=a.f;if((e&DIRTY)!==0)return!0;if((e&MAYBE_DIRTY)!==0){var n=a.deps,s=(e&UNOWNED)!==0;if(n!==null){var o,l,c=(e&DISCONNECTED)!==0,u=s&&active_effect!==null&&!skip_reaction,h=n.length;if(c||u){var f=a,d=f.parent;for(o=0;o<h;o++)l=n[o],(c||!((p=l==null?void 0:l.reactions)!=null&&p.includes(f)))&&(l.reactions??(l.reactions=[])).push(f);c&&(f.f^=DISCONNECTED),u&&d!==null&&(d.f&UNOWNED)===0&&(f.f^=UNOWNED)}for(o=0;o<h;o++)if(l=n[o],check_dirtiness(l)&&update_derived(l),l.wv>a.wv)return!0}(!s||active_effect!==null&&!skip_reaction)&&set_signal_status(a,CLEAN)}return!1}function propagate_error(a,e){for(var n=e;n!==null;){if((n.f&BOUNDARY_EFFECT)!==0)try{n.fn(a);return}catch{n.f^=BOUNDARY_EFFECT}n=n.parent}throw is_throwing_error=!1,a}function should_rethrow_error(a){return(a.f&DESTROYED)===0&&(a.parent===null||(a.parent.f&BOUNDARY_EFFECT)===0)}function reset_is_throwing_error(){is_throwing_error=!1}function handle_error(a,e,n,s){if(is_throwing_error){if(n===null&&(is_throwing_error=!1),should_rethrow_error(e))throw a;return}if(n!==null&&(is_throwing_error=!0),propagate_error(a,e),should_rethrow_error(e))throw a}function schedule_possible_effect_self_invalidation(a,e,n=!0){var s=a.reactions;if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];reaction_sources!=null&&reaction_sources.includes(a)||((l.f&DERIVED)!==0?schedule_possible_effect_self_invalidation(l,e,!1):e===l&&(n?set_signal_status(l,DIRTY):(l.f&CLEAN)!==0&&set_signal_status(l,MAYBE_DIRTY),schedule_effect(l)))}}function update_reaction(a){var m;var e=new_deps,n=skipped_deps,s=untracked_writes,o=active_reaction,l=skip_reaction,c=reaction_sources,u=component_context,h=untracking,f=a.f;new_deps=null,skipped_deps=0,untracked_writes=null,skip_reaction=(f&UNOWNED)!==0&&(untracking||!is_updating_effect||active_reaction===null),active_reaction=(f&(BRANCH_EFFECT|ROOT_EFFECT))===0?a:null,reaction_sources=null,set_component_context(a.ctx),untracking=!1,read_version++,a.f|=EFFECT_IS_UPDATING;try{var d=(0,a.fn)(),p=a.deps;if(new_deps!==null){var g;if(remove_reactions(a,skipped_deps),p!==null&&skipped_deps>0)for(p.length=skipped_deps+new_deps.length,g=0;g<new_deps.length;g++)p[skipped_deps+g]=new_deps[g];else a.deps=p=new_deps;if(!skip_reaction)for(g=skipped_deps;g<p.length;g++)((m=p[g]).reactions??(m.reactions=[])).push(a)}else p!==null&&skipped_deps<p.length&&(remove_reactions(a,skipped_deps),p.length=skipped_deps);if(is_runes()&&untracked_writes!==null&&!untracking&&p!==null&&(a.f&(DERIVED|MAYBE_DIRTY|DIRTY))===0)for(g=0;g<untracked_writes.length;g++)schedule_possible_effect_self_invalidation(untracked_writes[g],a);return o!==null&&o!==a&&(read_version++,untracked_writes!==null&&(s===null?s=untracked_writes:s.push(...untracked_writes))),d}finally{new_deps=e,skipped_deps=n,untracked_writes=s,active_reaction=o,skip_reaction=l,reaction_sources=c,set_component_context(u),untracking=h,a.f^=EFFECT_IS_UPDATING}}function remove_reaction(a,e){let n=e.reactions;if(n!==null){var s=index_of.call(n,a);if(s!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[s]=n[o],n.pop())}}n===null&&(e.f&DERIVED)!==0&&(new_deps===null||!new_deps.includes(e))&&(set_signal_status(e,MAYBE_DIRTY),(e.f&(UNOWNED|DISCONNECTED))===0&&(e.f^=DISCONNECTED),destroy_derived_effects(e),remove_reactions(e,0))}function remove_reactions(a,e){var n=a.deps;if(n!==null)for(var s=e;s<n.length;s++)remove_reaction(a,n[s])}function update_effect(a){var e=a.f;if((e&DESTROYED)===0){set_signal_status(a,CLEAN);var n=active_effect,s=component_context,o=is_updating_effect;active_effect=a,is_updating_effect=!0;try{(e&BLOCK_EFFECT)!==0?destroy_block_effect_children(a):destroy_effect_children(a),execute_effect_teardown(a);var l=update_reaction(a);a.teardown=typeof l=="function"?l:null,a.wv=write_version;var c=a.deps,u;DEV&&tracing_mode_flag&&a.f&DIRTY}catch(h){handle_error(h,a,n,s||a.ctx)}finally{is_updating_effect=o,active_effect=n}}}function infinite_loop_guard(){try{effect_update_depth_exceeded()}catch(a){if(last_scheduled_effect!==null)handle_error(a,last_scheduled_effect,null);else throw a}}function flush_queued_root_effects(){var a=is_updating_effect;try{var e=0;for(is_updating_effect=!0;queued_root_effects.length>0;){e++>1e3&&infinite_loop_guard();var n=queued_root_effects,s=n.length;queued_root_effects=[];for(var o=0;o<s;o++){var l=process_effects(n[o]);flush_queued_effects(l)}old_values.clear()}}finally{is_flushing=!1,is_updating_effect=a,last_scheduled_effect=null}}function flush_queued_effects(a){var e=a.length;if(e!==0)for(var n=0;n<e;n++){var s=a[n];if((s.f&(DESTROYED|INERT))===0)try{check_dirtiness(s)&&(update_effect(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?unlink_effect(s):s.fn=null))}catch(o){handle_error(o,s,null,s.ctx)}}}function schedule_effect(a){is_flushing||(is_flushing=!0,queueMicrotask(flush_queued_root_effects));for(var e=last_scheduled_effect=a;e.parent!==null;){e=e.parent;var n=e.f;if((n&(ROOT_EFFECT|BRANCH_EFFECT))!==0){if((n&CLEAN)===0)return;e.f^=CLEAN}}queued_root_effects.push(e)}function process_effects(a){for(var e=[],n=a;n!==null;){var s=n.f,o=(s&(BRANCH_EFFECT|ROOT_EFFECT))!==0,l=o&&(s&CLEAN)!==0;if(!l&&(s&INERT)===0){if((s&EFFECT)!==0)e.push(n);else if(o)n.f^=CLEAN;else try{check_dirtiness(n)&&update_effect(n)}catch(h){handle_error(h,n,null,n.ctx)}var c=n.first;if(c!==null){n=c;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}return e}function flushSync(a){for(var e;;){if(flush_tasks(),queued_root_effects.length===0)return e;is_flushing=!0,flush_queued_root_effects()}}async function tick(){await Promise.resolve(),flushSync()}function get$3(a){var e=a.f,n=(e&DERIVED)!==0;if(active_reaction!==null&&!untracking){if(!(reaction_sources!=null&&reaction_sources.includes(a))){var s=active_reaction.deps;a.rv<read_version&&(a.rv=read_version,new_deps===null&&s!==null&&s[skipped_deps]===a?skipped_deps++:new_deps===null?new_deps=[a]:(!skip_reaction||!new_deps.includes(a))&&new_deps.push(a))}}else if(n&&a.deps===null&&a.effects===null){var o=a,l=o.parent;l!==null&&(l.f&UNOWNED)===0&&(o.f^=UNOWNED)}return n&&(o=a,check_dirtiness(o)&&update_derived(o)),is_destroying_effect&&old_values.has(a)?old_values.get(a):a.v}function untrack(a){var e=untracking;try{return untracking=!0,a()}finally{untracking=e}}const STATUS_MASK=-7169;function set_signal_status(a,e){a.f=a.f&STATUS_MASK|e}function deep_read_state(a){if(!(typeof a!="object"||!a||a instanceof EventTarget)){if(STATE_SYMBOL in a)deep_read(a);else if(!Array.isArray(a))for(let e in a){const n=a[e];typeof n=="object"&&n&&STATE_SYMBOL in n&&deep_read(n)}}}function deep_read(a,e=new Set){if(typeof a=="object"&&a!==null&&!(a instanceof EventTarget)&&!e.has(a)){e.add(a),a instanceof Date&&a.getTime();for(let s in a)try{deep_read(a[s],e)}catch{}const n=get_prototype_of(a);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=get_descriptors(n);for(let o in s){const l=s[o].get;if(l)try{l.call(a)}catch{}}}}}function is_capture_event(a){return a.endsWith("capture")&&a!=="gotpointercapture"&&a!=="lostpointercapture"}const DELEGATED_EVENTS=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function is_delegated(a){return DELEGATED_EVENTS.includes(a)}const ATTRIBUTE_ALIASES={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function normalize_attribute(a){return a=a.toLowerCase(),ATTRIBUTE_ALIASES[a]??a}const PASSIVE_EVENTS=["touchstart","touchmove"];function is_passive_event(a){return PASSIVE_EVENTS.includes(a)}function autofocus(a,e){if(e){const n=document.body;a.autofocus=!0,queue_micro_task(()=>{document.activeElement===n&&a.focus()})}}let listening_to_form_reset=!1;function add_form_reset_listener(){listening_to_form_reset||(listening_to_form_reset=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{var e;if(!a.defaultPrevented)for(const n of a.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function without_reactive_context(a){var e=active_reaction,n=active_effect;set_active_reaction(null),set_active_effect(null);try{return a()}finally{set_active_reaction(e),set_active_effect(n)}}function listen_to_event_and_reset_event(a,e,n,s=n){a.addEventListener(e,()=>without_reactive_context(n));const o=a.__on_r;o?a.__on_r=()=>{o(),s(!0)}:a.__on_r=()=>s(!0),add_form_reset_listener()}const all_registered_events=new Set,root_event_handles=new Set;function create_event(a,e,n,s={}){function o(l){if(s.capture||handle_event_propagation.call(e,l),!l.cancelBubble)return without_reactive_context(()=>n==null?void 0:n.call(this,l))}return a.startsWith("pointer")||a.startsWith("touch")||a==="wheel"?queue_micro_task(()=>{e.addEventListener(a,o,s)}):e.addEventListener(a,o,s),o}function on$1(a,e,n,s={}){var o=create_event(e,a,n,s);return()=>{a.removeEventListener(e,o,s)}}function event(a,e,n,s,o){var l={capture:s,passive:o},c=create_event(a,e,n,l);(e===document.body||e===window||e===document)&&teardown(()=>{e.removeEventListener(a,c,l)})}function delegate(a){for(var e=0;e<a.length;e++)all_registered_events.add(a[e]);for(var n of root_event_handles)n(a)}function handle_event_propagation(a){var P;var e=this,n=e.ownerDocument,s=a.type,o=((P=a.composedPath)==null?void 0:P.call(a))||[],l=o[0]||a.target,c=0,u=a.__root;if(u){var h=o.indexOf(u);if(h!==-1&&(e===document||e===window)){a.__root=e;return}var f=o.indexOf(e);if(f===-1)return;h<=f&&(c=h)}if(l=o[c]||a.target,l!==e){define_property(a,"currentTarget",{configurable:!0,get(){return l||n}});var d=active_reaction,p=active_effect;set_active_reaction(null),set_active_effect(null);try{for(var g,m=[];l!==null;){var y=l.assignedSlot||l.parentNode||l.host||null;try{var _=l["__"+s];if(_!=null&&(!l.disabled||a.target===l))if(is_array(_)){var[b,...x]=_;b.apply(l,[a,...x])}else _.call(l,a)}catch(T){g?m.push(T):g=T}if(a.cancelBubble||y===e||y===null)break;l=y}if(g){for(let T of m)queueMicrotask(()=>{throw T});throw g}}finally{a.__root=e,delete a.currentTarget,set_active_reaction(d),set_active_effect(p)}}}function head(a){var e;e=document.head.appendChild(create_text());try{block(()=>a(e),HEAD_EFFECT)}finally{}}function create_fragment_from_html(a){var e=document.createElement("template");return e.innerHTML=a,e.content}function assign_nodes(a,e){var n=active_effect;n.nodes_start===null&&(n.nodes_start=a,n.nodes_end=e)}function template(a,e){var n=(e&TEMPLATE_FRAGMENT)!==0,s=(e&TEMPLATE_USE_IMPORT_NODE)!==0,o,l=!a.startsWith("<!>");return()=>{o===void 0&&(o=create_fragment_from_html(l?a:"<!>"+a),n||(o=get_first_child(o)));var c=s||is_firefox?document.importNode(o,!0):o.cloneNode(!0);if(n){var u=get_first_child(c),h=c.lastChild;assign_nodes(u,h)}else assign_nodes(c,c);return c}}function ns_template(a,e,n="svg"){var s=!a.startsWith("<!>"),o=`<${n}>${s?a:"<!>"+a}</${n}>`,l;return()=>{if(!l){var c=create_fragment_from_html(o),u=get_first_child(c);l=get_first_child(u)}var h=l.cloneNode(!0);return assign_nodes(h,h),h}}function text$5(a=""){{var e=create_text(a+"");return assign_nodes(e,e),e}}function comment$1(){var a=document.createDocumentFragment(),e=document.createComment(""),n=create_text();return a.append(e,n),assign_nodes(e,n),a}function append(a,e){a!==null&&a.before(e)}function props_id(){var a;return(a=window.__svelte??(window.__svelte={})).uid??(a.uid=1),`c${window.__svelte.uid++}`}let should_intro=!0;function set_should_intro(a){should_intro=a}function set_text(a,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(a.__t??(a.__t=a.nodeValue))&&(a.__t=n,a.nodeValue=n+"")}function mount(a,e){return _mount(a,e)}const document_listeners=new Map;function _mount(a,{target:e,anchor:n,props:s={},events:o,context:l,intro:c=!0}){init_operations();var u=new Set,h=p=>{for(var g=0;g<p.length;g++){var m=p[g];if(!u.has(m)){u.add(m);var y=is_passive_event(m);e.addEventListener(m,handle_event_propagation,{passive:y});var _=document_listeners.get(m);_===void 0?(document.addEventListener(m,handle_event_propagation,{passive:y}),document_listeners.set(m,1)):document_listeners.set(m,_+1)}}};h(array_from(all_registered_events)),root_event_handles.add(h);var f=void 0,d=component_root(()=>{var p=n??e.appendChild(create_text());return branch(()=>{if(l){push({});var g=component_context;g.c=l}o&&(s.$$events=o),should_intro=c,f=a(p,s)||{},should_intro=!0,l&&pop()}),()=>{var y;for(var g of u){e.removeEventListener(g,handle_event_propagation);var m=document_listeners.get(g);--m===0?(document.removeEventListener(g,handle_event_propagation),document_listeners.delete(g)):document_listeners.set(g,m)}root_event_handles.delete(h),p!==n&&((y=p.parentNode)==null||y.removeChild(p))}});return mounted_components.set(f,d),f}let mounted_components=new WeakMap;const PENDING=0,THEN=1,CATCH=2;function await_block(a,e,n,s,o){var l=a,c=is_runes(),u=component_context,h=UNINITIALIZED,f,d,p,g=(c?source:mutable_source)(void 0),m=(c?source:mutable_source)(void 0),y=!1;function _(x,P){y=!0,P&&(set_active_effect(b),set_active_reaction(b),set_component_context(u));try{x===THEN&&s&&(d?resume_effect(d):d=branch(()=>s(l,g))),x!==PENDING&&f&&pause_effect(f,()=>f=null),x!==THEN&&d&&pause_effect(d,()=>d=null),x!==CATCH&&p&&pause_effect(p,()=>p=null)}finally{P&&(set_component_context(null),set_active_reaction(null),set_active_effect(null),flushSync())}}var b=block(()=>{if(h!==(h=e())){if(is_promise(h)){var x=h;y=!1,x.then(P=>{x===h&&(internal_set(g,P),_(THEN,!0))},P=>{if(x===h)throw internal_set(m,P),_(CATCH,!0),m.v}),queue_micro_task(()=>{y||_(PENDING,!0)})}else internal_set(g,h),_(THEN,!1);return()=>h=UNINITIALIZED}})}function if_block(a,e,[n,s]=[0,0]){var o=a,l=null,c=null,u=UNINITIALIZED,h=n>0?EFFECT_TRANSPARENT:0,f=!1;const d=(g,m=!0)=>{f=!0,p(m,g)},p=(g,m)=>{u!==(u=g)&&(u?(l?resume_effect(l):m&&(l=branch(()=>m(o))),c&&pause_effect(c,()=>{c=null})):(c?resume_effect(c):m&&(c=branch(()=>m(o,[n+1,s]))),l&&pause_effect(l,()=>{l=null})))};block(()=>{f=!1,e(d),f||p(null,null)},h)}function key_block(a,e,n){var s=a,o=UNINITIALIZED,l,c=is_runes()?not_equal:safe_not_equal;block(()=>{c(o,o=e())&&(l&&pause_effect(l),l=branch(()=>n(s)))})}function index(a,e){return e}function pause_effects(a,e,n,s){for(var o=[],l=e.length,c=0;c<l;c++)pause_children(e[c].e,o,!0);var u=l>0&&o.length===0&&n!==null;if(u){var h=n.parentNode;clear_text_content(h),h.append(n),s.clear(),link(a,e[0].prev,e[l-1].next)}run_out_transitions(o,()=>{for(var f=0;f<l;f++){var d=e[f];u||(s.delete(d.k),link(a,d.prev,d.next)),destroy_effect(d.e,!u)}})}function each(a,e,n,s,o,l=null){var c=a,u={flags:e,items:new Map,first:null},h=(e&EACH_IS_CONTROLLED)!==0;if(h){var f=a;c=f.appendChild(create_text())}var d=null,p=!1,g=derived_safe_equal(()=>{var m=n();return is_array(m)?m:m==null?[]:array_from(m)});block(()=>{var m=get$3(g),y=m.length;p&&y===0||(p=y===0,reconcile(m,u,c,o,e,s,n),l!==null&&(y===0?d?resume_effect(d):d=branch(()=>l(c)):d!==null&&pause_effect(d,()=>{d=null})),get$3(g))})}function reconcile(a,e,n,s,o,l,c){var te,ce,se,le;var u=(o&EACH_IS_ANIMATED)!==0,h=(o&(EACH_ITEM_REACTIVE|EACH_INDEX_REACTIVE))!==0,f=a.length,d=e.items,p=e.first,g=p,m,y=null,_,b=[],x=[],P,T,k,S;if(u)for(S=0;S<f;S+=1)P=a[S],T=l(P,S),k=d.get(T),k!==void 0&&((te=k.a)==null||te.measure(),(_??(_=new Set)).add(k));for(S=0;S<f;S+=1){if(P=a[S],T=l(P,S),k=d.get(T),k===void 0){var A=g?g.e.nodes_start:n;y=create_item(A,e,y,y===null?e.first:y.next,P,T,S,s,o,c),d.set(T,y),b=[],x=[],g=y.next;continue}if(h&&update_item(k,P,S,o),(k.e.f&INERT)!==0&&(resume_effect(k.e),u&&((ce=k.a)==null||ce.unfix(),(_??(_=new Set)).delete(k))),k!==g){if(m!==void 0&&m.has(k)){if(b.length<x.length){var w=x[0],E;y=w.prev;var F=b[0],O=b[b.length-1];for(E=0;E<b.length;E+=1)move(b[E],w,n);for(E=0;E<x.length;E+=1)m.delete(x[E]);link(e,F.prev,O.next),link(e,y,F),link(e,O,w),g=w,y=O,S-=1,b=[],x=[]}else m.delete(k),move(k,g,n),link(e,k.prev,k.next),link(e,k,y===null?e.first:y.next),link(e,y,k),y=k;continue}for(b=[],x=[];g!==null&&g.k!==T;)(g.e.f&INERT)===0&&(m??(m=new Set)).add(g),x.push(g),g=g.next;if(g===null)continue;k=g}b.push(k),y=k,g=k.next}if(g!==null||m!==void 0){for(var M=m===void 0?[]:array_from(m);g!==null;)(g.e.f&INERT)===0&&M.push(g),g=g.next;var V=M.length;if(V>0){var G=(o&EACH_IS_CONTROLLED)!==0&&f===0?n:null;if(u){for(S=0;S<V;S+=1)(se=M[S].a)==null||se.measure();for(S=0;S<V;S+=1)(le=M[S].a)==null||le.fix()}pause_effects(e,M,G,d)}}u&&queue_micro_task(()=>{var fe;if(_!==void 0)for(k of _)(fe=k.a)==null||fe.apply()}),active_effect.first=e.first&&e.first.e,active_effect.last=y&&y.e}function update_item(a,e,n,s){(s&EACH_ITEM_REACTIVE)!==0&&internal_set(a.v,e),(s&EACH_INDEX_REACTIVE)!==0?internal_set(a.i,n):a.i=n}function create_item(a,e,n,s,o,l,c,u,h,f){var d=(h&EACH_ITEM_REACTIVE)!==0,p=(h&EACH_ITEM_IMMUTABLE)===0,g=d?p?mutable_source(o):source(o):o,m=(h&EACH_INDEX_REACTIVE)===0?c:source(c),y={i:m,v:g,k:l,a:null,e:null,prev:n,next:s};try{return y.e=branch(()=>u(a,g,m,f),hydrating),y.e.prev=n&&n.e,y.e.next=s&&s.e,n===null?e.first=y:(n.next=y,n.e.next=y.e),s!==null&&(s.prev=y,s.e.prev=y.e),y}finally{}}function move(a,e,n){for(var s=a.next?a.next.e.nodes_start:n,o=e?e.e.nodes_start:n,l=a.e.nodes_start;l!==s;){var c=get_next_sibling(l);o.before(l),l=c}}function link(a,e,n){e===null?a.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function html(a,e,n=!1,s=!1,o=!1){var l=a,c="";template_effect(()=>{var u=active_effect;if(c!==(c=e()??"")&&(u.nodes_start!==null&&(remove_effect_dom(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),c!=="")){var h=c+"";n?h=`<svg>${h}</svg>`:s&&(h=`<math>${h}</math>`);var f=create_fragment_from_html(h);if((n||s)&&(f=get_first_child(f)),assign_nodes(get_first_child(f),f.lastChild),n||s)for(;get_first_child(f);)l.before(get_first_child(f));else l.before(f)}})}function snippet(a,e,...n){var s=a,o=noop$1,l;block(()=>{o!==(o=e())&&(l&&(destroy_effect(l),l=null),l=branch(()=>o(s,...n)))},EFFECT_TRANSPARENT)}function component(a,e,n){var s=a,o,l;block(()=>{o!==(o=e())&&(l&&(pause_effect(l),l=null),o&&(l=branch(()=>n(s,o))))},EFFECT_TRANSPARENT)}function element(a,e,n,s,o,l){var c,u,h=null,f=a,d;block(()=>{const p=e()||null;var g=p==="svg"?NAMESPACE_SVG:null;p!==c&&(d&&(p===null?pause_effect(d,()=>{d=null,u=null}):p===u?resume_effect(d):(destroy_effect(d),set_should_intro(!1))),p&&p!==u&&(d=branch(()=>{if(h=g?document.createElementNS(g,p):document.createElement(p),assign_nodes(h,h),s){var m=h.appendChild(create_text());s(h,m)}active_effect.nodes_end=h,f.before(h)})),c=p,c&&(u=c),set_should_intro(!0))},EFFECT_TRANSPARENT)}function action(a,e,n){effect(()=>{var s=untrack(()=>e(a,n==null?void 0:n())||{});if(n&&(s!=null&&s.update)){var o=!1,l={};render_effect(()=>{var c=n();deep_read_state(c),o&&safe_not_equal(l,c)&&(l=c,s.update(c))}),o=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function r(a){var e,n,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(e=0;e<o;e++)a[e]&&(n=r(a[e]))&&(s&&(s+=" "),s+=n)}else for(n in a)a[n]&&(s&&(s+=" "),s+=n);return s}function clsx$1(){for(var a,e,n=0,s="",o=arguments.length;n<o;n++)(a=arguments[n])&&(e=r(a))&&(s&&(s+=" "),s+=e);return s}function clsx(a){return typeof a=="object"?clsx$1(a):a??""}const whitespace=[...` 	
\r\f \v\uFEFF`];function to_class(a,e,n){var s=a==null?"":""+a;if(e&&(s=s?s+" "+e:e),n){for(var o in n)if(n[o])s=s?s+" "+o:o;else if(s.length)for(var l=o.length,c=0;(c=s.indexOf(o,c))>=0;){var u=c+l;(c===0||whitespace.includes(s[c-1]))&&(u===s.length||whitespace.includes(s[u]))?s=(c===0?"":s.substring(0,c))+s.substring(u+1):c=u}}return s===""?null:s}function append_styles(a,e=!1){var n=e?" !important;":";",s="";for(var o in a){var l=a[o];l!=null&&l!==""&&(s+=" "+o+": "+l+n)}return s}function to_css_name(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function to_style(a,e){if(e){var n="",s,o;if(Array.isArray(e)?(s=e[0],o=e[1]):s=e,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,c=0,u=!1,h=[];s&&h.push(...Object.keys(s).map(to_css_name)),o&&h.push(...Object.keys(o).map(to_css_name));var f=0,d=-1;const _=a.length;for(var p=0;p<_;p++){var g=a[p];if(u?g==="/"&&a[p-1]==="*"&&(u=!1):l?l===g&&(l=!1):g==="/"&&a[p+1]==="*"?u=!0:g==='"'||g==="'"?l=g:g==="("?c++:g===")"&&c--,!u&&l===!1&&c===0){if(g===":"&&d===-1)d=p;else if(g===";"||p===_-1){if(d!==-1){var m=to_css_name(a.substring(f,d).trim());if(!h.includes(m)){g!==";"&&p++;var y=a.substring(f,p).trim();n+=" "+y+";"}}f=p+1,d=-1}}}}return s&&(n+=append_styles(s)),o&&(n+=append_styles(o,!0)),n=n.trim(),n===""?null:n}return a==null?null:String(a)}function set_class(a,e,n,s,o,l){var c=a.__className;if(c!==n||c===void 0){var u=to_class(n,s,l);u==null?a.removeAttribute("class"):e?a.className=u:a.setAttribute("class",u),a.__className=n}else if(l&&o!==l)for(var h in l){var f=!!l[h];(o==null||f!==!!o[h])&&a.classList.toggle(h,f)}return l}function update_styles(a,e={},n,s){for(var o in n){var l=n[o];e[o]!==l&&(n[o]==null?a.style.removeProperty(o):a.style.setProperty(o,l,s))}}function set_style(a,e,n,s){var o=a.__style;if(o!==e){var l=to_style(e,s);l==null?a.removeAttribute("style"):a.style.cssText=l,a.__style=e}else s&&(Array.isArray(s)?(update_styles(a,n==null?void 0:n[0],s[0]),update_styles(a,n==null?void 0:n[1],s[1],"important")):update_styles(a,n,s));return s}const CLASS=Symbol("class"),STYLE=Symbol("style"),IS_CUSTOM_ELEMENT=Symbol("is custom element"),IS_HTML=Symbol("is html");function set_selected(a,e){e?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}function set_attribute(a,e,n,s){var o=get_attributes(a);o[e]!==(o[e]=n)&&(e==="loading"&&(a[LOADING_ATTR_SYMBOL]=n),n==null?a.removeAttribute(e):typeof n!="string"&&get_setters(a).includes(e)?a[e]=n:a.setAttribute(e,n))}function set_attributes(a,e,n,s,o=!1){var l=get_attributes(a),c=l[IS_CUSTOM_ELEMENT],u=!l[IS_HTML],h=e||{},f=a.tagName==="OPTION";for(var d in e)d in n||(n[d]=null);n.class?n.class=clsx(n.class):(s||n[CLASS])&&(n.class=null),n[STYLE]&&(n.style??(n.style=null));var p=get_setters(a);for(const P in n){let T=n[P];if(f&&P==="value"&&T==null){a.value=a.__value="",h[P]=T;continue}if(P==="class"){var g=a.namespaceURI==="http://www.w3.org/1999/xhtml";set_class(a,g,T,s,e==null?void 0:e[CLASS],n[CLASS]),h[P]=T,h[CLASS]=n[CLASS];continue}if(P==="style"){set_style(a,T,e==null?void 0:e[STYLE],n[STYLE]),h[P]=T,h[STYLE]=n[STYLE];continue}var m=h[P];if(T!==m){h[P]=T;var y=P[0]+P[1];if(y!=="$$")if(y==="on"){const k={},S="$$"+P;let A=P.slice(2);var _=is_delegated(A);if(is_capture_event(A)&&(A=A.slice(0,-7),k.capture=!0),!_&&m){if(T!=null)continue;a.removeEventListener(A,h[S],k),h[S]=null}if(T!=null)if(_)a[`__${A}`]=T,delegate([A]);else{let w=function(E){h[P].call(this,E)};h[S]=create_event(A,a,w,k)}else _&&(a[`__${A}`]=void 0)}else if(P==="style")set_attribute(a,P,T);else if(P==="autofocus")autofocus(a,!!T);else if(!c&&(P==="__value"||P==="value"&&T!=null))a.value=a.__value=T;else if(P==="selected"&&f)set_selected(a,T);else{var b=P;u||(b=normalize_attribute(b));var x=b==="defaultValue"||b==="defaultChecked";if(T==null&&!c&&!x)if(l[P]=null,b==="value"||b==="checked"){let k=a;const S=e===void 0;if(b==="value"){let A=k.defaultValue;k.removeAttribute(b),k.defaultValue=A,k.value=k.__value=S?A:null}else{let A=k.defaultChecked;k.removeAttribute(b),k.defaultChecked=A,k.checked=S?A:!1}}else a.removeAttribute(P);else x||p.includes(b)&&(c||typeof T!="string")?a[b]=T:typeof T!="function"&&set_attribute(a,b,T)}}}return h}function get_attributes(a){return a.__attributes??(a.__attributes={[IS_CUSTOM_ELEMENT]:a.nodeName.includes("-"),[IS_HTML]:a.namespaceURI===NAMESPACE_HTML})}var setters_cache=new Map;function get_setters(a){var e=setters_cache.get(a.nodeName);if(e)return e;setters_cache.set(a.nodeName,e=[]);for(var n,s=a,o=Element.prototype;o!==s;){n=get_descriptors(s);for(var l in n)n[l].set&&e.push(l);s=get_prototype_of(s)}return e}const now=()=>performance.now(),raf={tick:a=>requestAnimationFrame(a),now:()=>now(),tasks:new Set};function run_tasks(){const a=raf.now();raf.tasks.forEach(e=>{e.c(a)||(raf.tasks.delete(e),e.f())}),raf.tasks.size!==0&&raf.tick(run_tasks)}function loop(a){let e;return raf.tasks.size===0&&raf.tick(run_tasks),{promise:new Promise(n=>{raf.tasks.add(e={c:a,f:n})}),abort(){raf.tasks.delete(e)}}}function dispatch_event(a,e){without_reactive_context(()=>{a.dispatchEvent(new CustomEvent(e))})}function css_property_to_camelcase(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const e=a.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function css_to_keyframe(a){const e={},n=a.split(";");for(const s of n){const[o,l]=s.split(":");if(!o||l===void 0)break;const c=css_property_to_camelcase(o.trim());e[c]=l.trim()}return e}const linear$1=a=>a;function transition(a,e,n,s){var o=(a&TRANSITION_IN)!==0,l=(a&TRANSITION_OUT)!==0,c=o&&l,u=(a&TRANSITION_GLOBAL)!==0,h=c?"both":o?"in":"out",f,d=e.inert,p=e.style.overflow,g,m;function y(){var T=active_reaction,k=active_effect;set_active_reaction(null),set_active_effect(null);try{return f??(f=n()(e,(s==null?void 0:s())??{},{direction:h}))}finally{set_active_reaction(T),set_active_effect(k)}}var _={is_global:u,in(){var T;if(e.inert=d,!o){m==null||m.abort(),(T=m==null?void 0:m.reset)==null||T.call(m);return}l||g==null||g.abort(),dispatch_event(e,"introstart"),g=animate(e,y(),m,1,()=>{dispatch_event(e,"introend"),g==null||g.abort(),g=f=void 0,e.style.overflow=p})},out(T){if(!l){T==null||T(),f=void 0;return}e.inert=!0,dispatch_event(e,"outrostart"),m=animate(e,y(),g,0,()=>{dispatch_event(e,"outroend"),T==null||T()})},stop:()=>{g==null||g.abort(),m==null||m.abort()}},b=active_effect;if((b.transitions??(b.transitions=[])).push(_),o&&should_intro){var x=u;if(!x){for(var P=b.parent;P&&(P.f&EFFECT_TRANSPARENT)!==0;)for(;(P=P.parent)&&(P.f&BLOCK_EFFECT)===0;);x=!P||(P.f&EFFECT_RAN)!==0}x&&effect(()=>{untrack(()=>_.in())})}}function animate(a,e,n,s,o){var l=s===1;if(is_function(e)){var c,u=!1;return queue_micro_task(()=>{if(!u){var b=e({direction:l?"in":"out"});c=animate(a,b,n,s,o)}}),{abort:()=>{u=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return o(),{abort:noop$1,deactivate:noop$1,reset:noop$1,t:()=>s};const{delay:h=0,css:f,tick:d,easing:p=linear$1}=e;var g=[];if(l&&n===void 0&&(d&&d(0,1),f)){var m=css_to_keyframe(f(0,1));g.push(m,m)}var y=()=>1-s,_=a.animate(g,{duration:h});return _.onfinish=()=>{var b=(n==null?void 0:n.t())??1-s;n==null||n.abort();var x=s-b,P=e.duration*Math.abs(x),T=[];if(P>0){var k=!1;if(f)for(var S=Math.ceil(P/16.666666666666668),A=0;A<=S;A+=1){var w=b+x*p(A/S),E=css_to_keyframe(f(w,1-w));T.push(E),k||(k=E.overflow==="hidden")}k&&(a.style.overflow="hidden"),y=()=>{var F=_.currentTime;return b+x*p(F/P)},d&&loop(()=>{if(_.playState!=="running")return!1;var F=y();return d(F,1-F),!0})}_=a.animate(T,{duration:P,fill:"forwards"}),_.onfinish=()=>{y=()=>s,d==null||d(s,1-s),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=noop$1)},deactivate:()=>{o=noop$1},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>y()}}function bind_value(a,e,n=e){var s=is_runes();listen_to_event_and_reset_event(a,"input",o=>{var l=o?a.defaultValue:a.value;if(l=is_numberlike_input(a)?to_number(l):l,n(l),s&&l!==(l=e())){var c=a.selectionStart,u=a.selectionEnd;a.value=l??"",u!==null&&(a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length))}}),untrack(e)==null&&a.value&&n(is_numberlike_input(a)?to_number(a.value):a.value),render_effect(()=>{var o=e();is_numberlike_input(a)&&o===to_number(a.value)||a.type==="date"&&!o&&!a.value||o!==a.value&&(a.value=o??"")})}const pending=new Set;function bind_group(a,e,n,s,o=s){var l=n.getAttribute("type")==="checkbox",c=a;if(e!==null)for(var u of e)c=c[u]??(c[u]=[]);c.push(n),listen_to_event_and_reset_event(n,"change",()=>{var h=n.__value;l&&(h=get_binding_group_value(c,h,n.checked)),o(h)},()=>o(l?[]:null)),render_effect(()=>{var h=s();l?(h=h||[],n.checked=h.includes(n.__value)):n.checked=is(n.__value,h)}),teardown(()=>{var h=c.indexOf(n);h!==-1&&c.splice(h,1)}),pending.has(c)||(pending.add(c),queue_micro_task(()=>{c.sort((h,f)=>h.compareDocumentPosition(f)===4?-1:1),pending.delete(c)})),queue_micro_task(()=>{})}function get_binding_group_value(a,e,n){for(var s=new Set,o=0;o<a.length;o+=1)a[o].checked&&s.add(a[o].__value);return n||s.delete(e),Array.from(s)}function is_numberlike_input(a){var e=a.type;return e==="number"||e==="range"}function to_number(a){return a===""?null:+a}function select_option(a,e,n){if(a.multiple)return select_options(a,e);for(var s of a.options){var o=get_option_value(s);if(is(o,e)){s.selected=!0;return}}(!n||e!==void 0)&&(a.selectedIndex=-1)}function init_select(a,e){effect(()=>{var n=new MutationObserver(()=>{var s=a.__value;select_option(a,s)});return n.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function bind_select_value(a,e,n=e){var s=!0;listen_to_event_and_reset_event(a,"change",o=>{var l=o?"[selected]":":checked",c;if(a.multiple)c=[].map.call(a.querySelectorAll(l),get_option_value);else{var u=a.querySelector(l)??a.querySelector("option:not([disabled])");c=u&&get_option_value(u)}n(c)}),effect(()=>{var o=e();if(select_option(a,o,s),s&&o===void 0){var l=a.querySelector(":checked");l!==null&&(o=get_option_value(l),n(o))}a.__value=o,s=!1}),init_select(a)}function select_options(a,e){for(var n of a.options)n.selected=~e.indexOf(get_option_value(n))}function get_option_value(a){return"__value"in a?a.__value:a.value}function is_bound_this(a,e){return a===e||(a==null?void 0:a[STATE_SYMBOL])===e}function bind_this(a={},e,n,s){return effect(()=>{var o,l;return render_effect(()=>{o=l,l=[],untrack(()=>{a!==n(...l)&&(e(a,...l),o&&is_bound_this(n(...o),a)&&e(null,...o))})}),()=>{queue_micro_task(()=>{l&&is_bound_this(n(...l),a)&&e(null,...l)})}}),a}function init$1(a=!1){const e=component_context,n=e.l.u;if(!n)return;let s=()=>deep_read_state(e.s);if(a){let o=0,l={};const c=derived(()=>{let u=!1;const h=e.s;for(const f in h)h[f]!==l[f]&&(l[f]=h[f],u=!0);return u&&o++,o});s=()=>get$3(c)}n.b.length&&user_pre_effect(()=>{observe_all(e,s),run_all(n.b)}),user_effect(()=>{const o=untrack(()=>n.m.map(run));return()=>{for(const l of o)typeof l=="function"&&l()}}),n.a.length&&user_effect(()=>{observe_all(e,s),run_all(n.a)})}function observe_all(a,e){if(a.l.s)for(const n of a.l.s)get$3(n);e()}function subscribe_to_store(a,e,n){if(a==null)return e(void 0),noop$1;const s=untrack(()=>a.subscribe(e,n));return s.unsubscribe?()=>s.unsubscribe():s}function get$2(a){let e;return subscribe_to_store(a,n=>e=n)(),e}let is_store_binding=!1,IS_UNMOUNTED=Symbol();function store_get(a,e,n){const s=n[e]??(n[e]={store:null,source:mutable_source(void 0),unsubscribe:noop$1});if(s.store!==a&&!(IS_UNMOUNTED in n))if(s.unsubscribe(),s.store=a??null,a==null)s.source.v=void 0,s.unsubscribe=noop$1;else{var o=!0;s.unsubscribe=subscribe_to_store(a,l=>{o?s.source.v=l:set(s.source,l)}),o=!1}return a&&IS_UNMOUNTED in n?get$2(a):get$3(s.source)}function setup_stores(){const a={};function e(){teardown(()=>{for(var n in a)a[n].unsubscribe();define_property(a,IS_UNMOUNTED,{enumerable:!1,value:!0})})}return[a,e]}function capture_store_binding(a){var e=is_store_binding;try{return is_store_binding=!1,[a(),is_store_binding]}finally{is_store_binding=e}}const rest_props_handler={get(a,e){if(!a.exclude.includes(e))return a.props[e]},set(a,e){return!1},getOwnPropertyDescriptor(a,e){if(!a.exclude.includes(e)&&e in a.props)return{enumerable:!0,configurable:!0,value:a.props[e]}},has(a,e){return a.exclude.includes(e)?!1:e in a.props},ownKeys(a){return Reflect.ownKeys(a.props).filter(e=>!a.exclude.includes(e))}};function rest_props(a,e,n){return new Proxy({props:a,exclude:e},rest_props_handler)}const spread_props_handler={get(a,e){let n=a.props.length;for(;n--;){let s=a.props[n];if(is_function(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(a,e,n){let s=a.props.length;for(;s--;){let o=a.props[s];is_function(o)&&(o=o());const l=get_descriptor(o,e);if(l&&l.set)return l.set(n),!0}return!1},getOwnPropertyDescriptor(a,e){let n=a.props.length;for(;n--;){let s=a.props[n];if(is_function(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const o=get_descriptor(s,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(a,e){if(e===STATE_SYMBOL||e===LEGACY_PROPS)return!1;for(let n of a.props)if(is_function(n)&&(n=n()),n!=null&&e in n)return!0;return!1},ownKeys(a){const e=[];for(let n of a.props){is_function(n)&&(n=n());for(const s in n)e.includes(s)||e.push(s)}return e}};function spread_props(...a){return new Proxy({props:a},spread_props_handler)}function has_destroyed_component_ctx(a){var e;return((e=a.ctx)==null?void 0:e.d)??!1}function prop(a,e,n,s){var A;var o=(n&PROPS_IS_IMMUTABLE)!==0,l=!legacy_mode_flag||(n&PROPS_IS_RUNES)!==0,c=(n&PROPS_IS_BINDABLE)!==0,u=(n&PROPS_IS_LAZY_INITIAL)!==0,h=!1,f;c?[f,h]=capture_store_binding(()=>a[e]):f=a[e];var d=STATE_SYMBOL in a||LEGACY_PROPS in a,p=c&&(((A=get_descriptor(a,e))==null?void 0:A.set)??(d&&e in a&&(w=>a[e]=w)))||void 0,g=s,m=!0,y=!1,_=()=>(y=!0,m&&(m=!1,u?g=untrack(s):g=s),g);f===void 0&&s!==void 0&&(p&&l&&props_invalid_value(),f=_(),p&&p(f));var b;if(l)b=()=>{var w=a[e];return w===void 0?_():(m=!0,y=!1,w)};else{var x=(o?derived:derived_safe_equal)(()=>a[e]);x.f|=LEGACY_DERIVED_PROP,b=()=>{var w=get$3(x);return w!==void 0&&(g=void 0),w===void 0?g:w}}if((n&PROPS_IS_UPDATED)===0)return b;if(p){var P=a.$$legacy;return function(w,E){return arguments.length>0?((!l||!E||P||h)&&p(E?b():w),w):b()}}var T=!1,k=mutable_source(f),S=derived(()=>{var w=b(),E=get$3(k);return T?(T=!1,E):k.v=w});return c&&get$3(S),o||(S.equals=safe_equals),function(w,E){if(arguments.length>0){const F=E?get$3(S):l&&c?proxy(w):w;if(!S.equals(F)){if(T=!0,set(k,F),y&&g!==void 0&&(g=F),has_destroyed_component_ctx(S))return w;untrack(()=>get$3(S))}return w}return has_destroyed_component_ctx(S)?S.v:get$3(S)}}function with_boundary(a,e){var n=active_effect,s=active_reaction,o=component_context;set_active_effect(a),set_active_reaction(a),set_component_context(a.ctx);try{e()}finally{set_active_effect(n),set_active_reaction(s),set_component_context(o)}}function boundary(a,e,n){var s=a,o;block(()=>{var l=active_effect,c=!1;l.fn=u=>{var h=e.onerror;let f=e.failed;if(!h&&!f||c)throw u;var d=()=>{pause_effect(o),with_boundary(l,()=>{c=!1,o=branch(()=>n(s)),reset_is_throwing_error()})};h==null||h(u,d),o&&destroy_effect(o),f&&queue_micro_task(()=>{with_boundary(l,()=>{c=!0;try{o=branch(()=>{f(s,()=>u,()=>d)})}catch(p){handle_error(p,l,null,l.ctx)}reset_is_throwing_error(),c=!1})})},o=branch(()=>n(s)),reset_is_throwing_error()},EFFECT_TRANSPARENT|BOUNDARY_EFFECT)}function onMount(a){component_context===null&&lifecycle_outside_component(),legacy_mode_flag&&component_context.l!==null?init_update_callbacks(component_context).m.push(a):user_effect(()=>{const e=untrack(a);if(typeof e=="function")return e})}function onDestroy(a){component_context===null&&lifecycle_outside_component(),onMount(()=>()=>untrack(a))}function create_custom_event(a,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(a,{detail:e,bubbles:n,cancelable:s})}function createEventDispatcher(){const a=component_context;return a===null&&lifecycle_outside_component(),(e,n,s)=>{var l;const o=(l=a.s.$$events)==null?void 0:l[e];if(o){const c=is_array(o)?o.slice():[o],u=create_custom_event(e,n,s);for(const h of c)h.call(a.x,u);return!u.defaultPrevented}return!0}}function init_update_callbacks(a){var e=a.l;return e.u??(e.u={a:[],b:[],m:[]})}const PUBLIC_VERSION="5";var Rr;typeof window<"u"&&((Rr=window.__svelte??(window.__svelte={})).v??(Rr.v=new Set)).add(PUBLIC_VERSION);const logo$4=a=>{var e=root_1$h();append(a,e)},label$4="Data",prefix$4=label$4.slice(0,1),text$4="Stammdaten";var root_1$h=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M406.5 399.6C387.4 352.9 341.5 320 288 320l-64 0c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3l64 0c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z"></path></svg>'),root_3$8=template('<label class="inset svelte-10i5tqr"> </label> <input class="main block placeholder:text-gray-300 svelte-10i5tqr">',1),on_click$4=(a,e,n,s)=>e().fields[get$3(n).id]=get$3(s),root_6$3=template('<label> </label> <input class="radio mr-16 svelte-10i5tqr" style="min-width: unset" type="radio">',1),root_5$6=template('<label class="inset svelte-10i5tqr"> </label> <span class="main block svelte-10i5tqr"></span>',1),root_8$3=template('<div><label class="inset svelte-10i5tqr"> </label> <textarea class="main block resize-none svelte-10i5tqr"></textarea></div>'),root$t=template('<div class="flex flex-row"><img id="myimage" class="m-4 flex-1 object-contain"> <canvas class="m-4"></canvas> <div class="flex-2 inline-block"></div></div>');function _1_Data_panel(a,e){push(e,!0);const n=[],s=prop(e,"G",7);let o=null,l=state(null);const c=g=>{g.src=new URL(""+new URL("perso1-CZB1rUkI.jpg",import.meta.url).href,import.meta.url).href},u=g=>{user_effect(()=>{let{height:m,width:y}=getComputedStyle(myimage);if(console.log(m,y),m=parseInt(m.replace("px","")),y=parseInt(y.replace("px","")),o=g,o.width=y,o.height=m,o.style.width=`${y}px`,o.style.height=`${m}px`,get$3(l)){const _=o.getContext("2d");_.fillStyle="rgba(0,0,0,0.5)",_.fillRect(0,0,y,m),_.clearRect(get$3(l).x*2,get$3(l).y,get$3(l).width*2,get$3(l).height*2)}return()=>{}})};var h=root$t(),f=child(h);action(f,g=>c==null?void 0:c(g));var d=sibling(f,2);set_style(d,"",{},{position:"absolute"}),action(d,g=>u==null?void 0:u(g));var p=sibling(d,2);each(p,21,()=>s().inputslist,index,(g,m,y)=>{var _=comment$1(),b=first_child(_);{var x=T=>{var k=root_3$8(),S=first_child(k),A=child(S),w=sibling(S,2);template_effect(()=>{set_attribute(S,"for",get$3(m).id),set_text(A,get$3(m).label),set_attribute(w,"maxlength",get$3(m).maxlength),set_attribute(w,"id",get$3(m).id),set_attribute(w,"placeholder",get$3(m).placeholder)}),event("focus",w,()=>{get$3(m).crop?set(l,JSON.parse(get$3(m).crop),!0):set(l,null)}),event("blur",w,()=>{set(l,null)}),bind_value(w,()=>s().fields[get$3(m).id],E=>s().fields[get$3(m).id]=E),append(T,k)},P=(T,k)=>{{var S=w=>{var E=root_5$6(),F=first_child(E),O=child(F),M=sibling(F,2);each(M,21,()=>JSON.parse(get$3(m).option),index,(V,G)=>{var te=root_6$3(),ce=first_child(te),se=child(ce),le=sibling(ce,2),fe;le.__click=[on_click$4,s,m,G],template_effect(()=>{set_attribute(ce,"for",get$3(G)),set_text(se,get$3(G)),fe!==(fe=get$3(G))&&(le.value=(le.__value=get$3(G))??""),set_attribute(le,"name",get$3(m).label)}),bind_group(n,[y],le,()=>(get$3(G),s().fields[get$3(m).id]),ge=>s().fields[get$3(m).id]=ge),append(V,te)}),template_effect(()=>{set_attribute(F,"for",get$3(m).id),set_text(O,get$3(m).label),set_attribute(M,"id",get$3(m).id)}),append(w,E)},A=(w,E)=>{{var F=O=>{var M=root_8$3(),V=child(M),G=child(V),te=sibling(V,2);template_effect(()=>{set_attribute(V,"for",get$3(m).id),set_text(G,get$3(m).label),set_attribute(te,"id",get$3(m).id)}),append(O,M)};if_block(w,O=>{get$3(m).tag=="textarea"&&O(F)},E)}};if_block(T,w=>{get$3(m).tag=="radios"?w(S):w(A,!1)},k)}};if_block(b,T=>{get$3(m).tag=="input"?T(x):T(P,!1)})}append(g,_)}),append(a,h),pop()}delegate(["click"]);const __vite_glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,default:_1_Data_panel,label:label$4,logo:logo$4,prefix:prefix$4,text:text$4},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},extendStatics(a,e)};function __extends(a,e){extendStatics(a,e);function n(){this.constructor=a}a.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var __assign=function(){return __assign=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},__assign.apply(this,arguments)};function __rest(a,e){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&e.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(a);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(a,s[o])&&(n[s[o]]=a[s[o]]);return n}function __awaiter(a,e,n,s){function o(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function u(d){try{f(s.next(d))}catch(p){c(p)}}function h(d){try{f(s.throw(d))}catch(p){c(p)}}function f(d){d.done?l(d.value):o(d.value).then(u,h)}f((s=s.apply(a,[])).next())})}function __generator(a,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(d){return h([f,d])}}function h(f){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,o=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){n.label=f[1];break}if(f[0]===6&&n.label<l[1]){n.label=l[1],l=f;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(f);break}l[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(a,n)}catch(d){f=[6,d],o=0}finally{s=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function __spreadArrays(){for(var a=0,e=0,n=arguments.length;e<n;e++)a+=arguments[e].length;for(var s=Array(a),o=0,e=0;e<n;e++)for(var l=arguments[e],c=0,u=l.length;c<u;c++,o++)s[o]=l[c];return s}var chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=new Uint8Array(256);for(var i$2=0;i$2<chars$1.length;i$2++)lookup$2[chars$1.charCodeAt(i$2)]=i$2;var encodeToBase64=function(a){for(var e="",n=a.length,s=0;s<n;s+=3)e+=chars$1[a[s]>>2],e+=chars$1[(a[s]&3)<<4|a[s+1]>>4],e+=chars$1[(a[s+1]&15)<<2|a[s+2]>>6],e+=chars$1[a[s+2]&63];return n%3===2?e=e.substring(0,e.length-1)+"=":n%3===1&&(e=e.substring(0,e.length-2)+"=="),e},decodeFromBase64$1=function(a){var e=a.length*.75,n=a.length,s,o=0,l,c,u,h;a[a.length-1]==="="&&(e--,a[a.length-2]==="="&&e--);var f=new Uint8Array(e);for(s=0;s<n;s+=4)l=lookup$2[a.charCodeAt(s)],c=lookup$2[a.charCodeAt(s+1)],u=lookup$2[a.charCodeAt(s+2)],h=lookup$2[a.charCodeAt(s+3)],f[o++]=l<<2|c>>4,f[o++]=(c&15)<<4|u>>2,f[o++]=(u&3)<<6|h&63;return f},DATA_URI_PREFIX_REGEX=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,decodeFromBase64DataUri=function(a){var e=a.trim(),n=e.substring(0,100),s=n.match(DATA_URI_PREFIX_REGEX);if(!s)return decodeFromBase64$1(e);var o=s[0],l=e.substring(o.length);return decodeFromBase64$1(l)},toCharCode=function(a){return a.charCodeAt(0)},toCodePoint=function(a){return a.codePointAt(0)},toHexStringOfMinLength=function(a,e){return padStart$1(a.toString(16),e,"0").toUpperCase()},toHexString=function(a){return toHexStringOfMinLength(a,2)},charFromCode=function(a){return String.fromCharCode(a)},charFromHexCode=function(a){return charFromCode(parseInt(a,16))},padStart$1=function(a,e,n){for(var s="",o=0,l=e-a.length;o<l;o++)s+=n;return s+a},copyStringIntoBuffer=function(a,e,n){for(var s=a.length,o=0;o<s;o++)e[n++]=a.charCodeAt(o);return s},escapeRegExp=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},cleanText=function(a){return a.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},escapedNewlineChars=["\\n","\\f","\\r","\\u000B"],isNewlineChar=function(a){return/^[\n\f\r\u000B]$/.test(a)},lineSplit=function(a){return a.split(/[\n\f\r\u000B]/)},mergeLines=function(a){return a.replace(/[\n\f\r\u000B]/g," ")},charAtIndex=function(a,e){var n=a.charCodeAt(e),s,o=e+1,l=1;return n>=55296&&n<=56319&&a.length>o&&(s=a.charCodeAt(o),s>=56320&&s<=57343&&(l=2)),[a.slice(e,e+l),l]},charSplit=function(a){for(var e=[],n=0,s=a.length;n<s;){var o=charAtIndex(a,n),l=o[0],c=o[1];e.push(l),n+=c}return e},buildWordBreakRegex=function(a){for(var e=escapedNewlineChars.join("|"),n=["$"],s=0,o=a.length;s<o;s++){var l=a[s];if(isNewlineChar(l))throw new TypeError("`wordBreak` must not include "+e);n.push(l===""?".":escapeRegExp(l))}var c=n.join("|");return new RegExp("("+e+")|((.*?)("+c+"))","gm")},breakTextIntoLines=function(a,e,n,s){for(var o=buildWordBreakRegex(e),l=cleanText(a).match(o),c="",u=0,h=[],f=function(){c!==""&&h.push(c),c="",u=0},d=0,p=l.length;d<p;d++){var g=l[d];if(isNewlineChar(g))f();else{var m=s(g);u+m>n&&f(),c+=g,u+=m}}return f(),h},dateRegex=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,parseDate=function(a){var e=a.match(dateRegex);if(e){var n=e[1],s=e[2],o=s===void 0?"01":s,l=e[3],c=l===void 0?"01":l,u=e[4],h=u===void 0?"00":u,f=e[5],d=f===void 0?"00":f,p=e[6],g=p===void 0?"00":p,m=e[7],y=m===void 0?"Z":m,_=e[8],b=_===void 0?"00":_,x=e[9],P=x===void 0?"00":x,T=y==="Z"?"Z":""+y+b+":"+P,k=new Date(n+"-"+o+"-"+c+"T"+h+":"+d+":"+g+T);return k}},findLastMatch=function(a,e){for(var n,s=0,o;s<a.length;){var l=a.substring(s).match(e);if(!l)return{match:o,pos:s};o=l,s+=((n=l.index)!==null&&n!==void 0?n:0)+l[0].length}return{match:o,pos:s}},last=function(a){return a[a.length-1]},typedArrayFor=function(a){if(a instanceof Uint8Array)return a;for(var e=a.length,n=new Uint8Array(e),s=0;s<e;s++)n[s]=a.charCodeAt(s);return n},mergeIntoTypedArray=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];for(var n=a.length,s=[],o=0;o<n;o++){var l=a[o];s[o]=l instanceof Uint8Array?l:typedArrayFor(l)}for(var c=0,o=0;o<n;o++)c+=a[o].length;for(var u=new Uint8Array(c),h=0,f=0;f<n;f++)for(var d=s[f],p=0,g=d.length;p<g;p++)u[h++]=d[p];return u},mergeUint8Arrays=function(a){for(var e=0,n=0,s=a.length;n<s;n++)e+=a[n].length;for(var o=new Uint8Array(e),l=0,n=0,s=a.length;n<s;n++){var c=a[n];o.set(c,l),l+=c.length}return o},arrayAsString=function(a){for(var e="",n=0,s=a.length;n<s;n++)e+=charFromCode(a[n]);return e},byAscendingId=function(a,e){return a.id-e.id},sortedUniq=function(a,e){for(var n=[],s=0,o=a.length;s<o;s++){var l=a[s],c=a[s-1];(s===0||e(l)!==e(c))&&n.push(l)}return n},reverseArray=function(a){for(var e=a.length,n=0,s=Math.floor(e/2);n<s;n++){var o=n,l=e-n-1,c=a[n];a[o]=a[l],a[l]=c}return a},sum=function(a){for(var e=0,n=0,s=a.length;n<s;n++)e+=a[n];return e},range=function(a,e){for(var n=new Array(e-a),s=0,o=n.length;s<o;s++)n[s]=a+s;return n},pluckIndices=function(a,e){for(var n=new Array(e.length),s=0,o=e.length;s<o;s++)n[s]=a[e[s]];return n},canBeConvertedToUint8Array=function(a){return a instanceof Uint8Array||a instanceof ArrayBuffer||typeof a=="string"},toUint8Array=function(a){if(typeof a=="string")return decodeFromBase64DataUri(a);if(a instanceof ArrayBuffer)return new Uint8Array(a);if(a instanceof Uint8Array)return a;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},waitForTick=function(){return new Promise(function(a){setTimeout(function(){return a()},0)})},utf16Encode=function(a,e){e===void 0&&(e=!0);var n=[];e&&n.push(65279);for(var s=0,o=a.length;s<o;){var l=a.codePointAt(s);if(l<65536)n.push(l),s+=1;else if(l<1114112)n.push(highSurrogate(l),lowSurrogate(l)),s+=2;else throw new Error("Invalid code point: 0x"+toHexString(l))}return new Uint16Array(n)},isWithinBMP=function(a){return a>=0&&a<=65535},hasSurrogates=function(a){return a>=65536&&a<=1114111},highSurrogate=function(a){return Math.floor((a-65536)/1024)+55296},lowSurrogate=function(a){return(a-65536)%1024+56320},ByteOrder;(function(a){a.BigEndian="BigEndian",a.LittleEndian="LittleEndian"})(ByteOrder||(ByteOrder={}));var REPLACEMENT="�".codePointAt(0),utf16Decode=function(a,e){if(e===void 0&&(e=!0),a.length<=1)return String.fromCodePoint(REPLACEMENT);for(var n=e?readBOM(a):ByteOrder.BigEndian,s=e?2:0,o=[];a.length-s>=2;){var l=decodeValues(a[s++],a[s++],n);if(isHighSurrogate(l))if(a.length-s<2)o.push(REPLACEMENT);else{var c=decodeValues(a[s++],a[s++],n);isLowSurrogate(c)?o.push(l,c):o.push(REPLACEMENT)}else isLowSurrogate(l)?(s+=2,o.push(REPLACEMENT)):o.push(l)}return s<a.length&&o.push(REPLACEMENT),String.fromCodePoint.apply(String,o)},isHighSurrogate=function(a){return a>=55296&&a<=56319},isLowSurrogate=function(a){return a>=56320&&a<=57343},decodeValues=function(a,e,n){if(n===ByteOrder.LittleEndian)return e<<8|a;if(n===ByteOrder.BigEndian)return a<<8|e;throw new Error("Invalid byteOrder: "+n)},readBOM=function(a){return hasUtf16BigEndianBOM(a)?ByteOrder.BigEndian:hasUtf16LittleEndianBOM(a)?ByteOrder.LittleEndian:ByteOrder.BigEndian},hasUtf16BigEndianBOM=function(a){return a[0]===254&&a[1]===255},hasUtf16LittleEndianBOM=function(a){return a[0]===255&&a[1]===254},hasUtf16BOM=function(a){return hasUtf16BigEndianBOM(a)||hasUtf16LittleEndianBOM(a)},numberToString=function(a){var e=String(a);if(Math.abs(a)<1){var n=parseInt(a.toString().split("e-")[1]);if(n){var s=a<0;s&&(a*=-1),a*=Math.pow(10,n-1),e="0."+new Array(n).join("0")+a.toString().substring(2),s&&(e="-"+e)}}else{var n=parseInt(a.toString().split("+")[1]);n>20&&(n-=20,a/=Math.pow(10,n),e=a.toString()+new Array(n+1).join("0"))}return e},sizeInBytes=function(a){return Math.ceil(a.toString(2).length/8)},bytesFor=function(a){for(var e=new Uint8Array(sizeInBytes(a)),n=1;n<=e.length;n++)e[n-1]=a>>(e.length-n)*8;return e},error$1=function(a){throw new Error(a)};function getDefaultExportFromCjs$1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(a){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(l,c){return Object.prototype.hasOwnProperty.call(l,c)}a.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)n(u,h)&&(l[h]=u[h])}}return l},a.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var s={arraySet:function(l,c,u,h,f){if(c.subarray&&l.subarray){l.set(c.subarray(u,u+h),f);return}for(var d=0;d<h;d++)l[f+d]=c[u+d]},flattenChunks:function(l){var c,u,h,f,d,p;for(h=0,c=0,u=l.length;c<u;c++)h+=l[c].length;for(p=new Uint8Array(h),f=0,c=0,u=l.length;c<u;c++)d=l[c],p.set(d,f),f+=d.length;return p}},o={arraySet:function(l,c,u,h,f){for(var d=0;d<h;d++)l[f+d]=c[u+d]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(e)}(common)),common}var deflate$3={},deflate$2={},trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var a=requireCommon(),e=4,n=0,s=1,o=2;function l(Y){for(var Te=Y.length;--Te>=0;)Y[Te]=0}var c=0,u=1,h=2,f=3,d=258,p=29,g=256,m=g+1+p,y=30,_=19,b=2*m+1,x=15,P=16,T=7,k=256,S=16,A=17,w=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=512,G=new Array((m+2)*2);l(G);var te=new Array(y*2);l(te);var ce=new Array(V);l(ce);var se=new Array(d-f+1);l(se);var le=new Array(p);l(le);var fe=new Array(y);l(fe);function ge(Y,Te,Pe,Oe,re){this.static_tree=Y,this.extra_bits=Te,this.extra_base=Pe,this.elems=Oe,this.max_length=re,this.has_stree=Y&&Y.length}var xe,_e,Ce;function ae(Y,Te){this.dyn_tree=Y,this.max_code=0,this.stat_desc=Te}function B(Y){return Y<256?ce[Y]:ce[256+(Y>>>7)]}function I(Y,Te){Y.pending_buf[Y.pending++]=Te&255,Y.pending_buf[Y.pending++]=Te>>>8&255}function q(Y,Te,Pe){Y.bi_valid>P-Pe?(Y.bi_buf|=Te<<Y.bi_valid&65535,I(Y,Y.bi_buf),Y.bi_buf=Te>>P-Y.bi_valid,Y.bi_valid+=Pe-P):(Y.bi_buf|=Te<<Y.bi_valid&65535,Y.bi_valid+=Pe)}function K(Y,Te,Pe){q(Y,Pe[Te*2],Pe[Te*2+1])}function Q(Y,Te){var Pe=0;do Pe|=Y&1,Y>>>=1,Pe<<=1;while(--Te>0);return Pe>>>1}function $(Y){Y.bi_valid===16?(I(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):Y.bi_valid>=8&&(Y.pending_buf[Y.pending++]=Y.bi_buf&255,Y.bi_buf>>=8,Y.bi_valid-=8)}function Z(Y,Te){var Pe=Te.dyn_tree,Oe=Te.max_code,re=Te.stat_desc.static_tree,oe=Te.stat_desc.has_stree,N=Te.stat_desc.extra_bits,be=Te.stat_desc.extra_base,Ne=Te.stat_desc.max_length,D,we,Ae,X,H,ue,ke=0;for(X=0;X<=x;X++)Y.bl_count[X]=0;for(Pe[Y.heap[Y.heap_max]*2+1]=0,D=Y.heap_max+1;D<b;D++)we=Y.heap[D],X=Pe[Pe[we*2+1]*2+1]+1,X>Ne&&(X=Ne,ke++),Pe[we*2+1]=X,!(we>Oe)&&(Y.bl_count[X]++,H=0,we>=be&&(H=N[we-be]),ue=Pe[we*2],Y.opt_len+=ue*(X+H),oe&&(Y.static_len+=ue*(re[we*2+1]+H)));if(ke!==0){do{for(X=Ne-1;Y.bl_count[X]===0;)X--;Y.bl_count[X]--,Y.bl_count[X+1]+=2,Y.bl_count[Ne]--,ke-=2}while(ke>0);for(X=Ne;X!==0;X--)for(we=Y.bl_count[X];we!==0;)Ae=Y.heap[--D],!(Ae>Oe)&&(Pe[Ae*2+1]!==X&&(Y.opt_len+=(X-Pe[Ae*2+1])*Pe[Ae*2],Pe[Ae*2+1]=X),we--)}}function J(Y,Te,Pe){var Oe=new Array(x+1),re=0,oe,N;for(oe=1;oe<=x;oe++)Oe[oe]=re=re+Pe[oe-1]<<1;for(N=0;N<=Te;N++){var be=Y[N*2+1];be!==0&&(Y[N*2]=Q(Oe[be]++,be))}}function R(){var Y,Te,Pe,Oe,re,oe=new Array(x+1);for(Pe=0,Oe=0;Oe<p-1;Oe++)for(le[Oe]=Pe,Y=0;Y<1<<E[Oe];Y++)se[Pe++]=Oe;for(se[Pe-1]=Oe,re=0,Oe=0;Oe<16;Oe++)for(fe[Oe]=re,Y=0;Y<1<<F[Oe];Y++)ce[re++]=Oe;for(re>>=7;Oe<y;Oe++)for(fe[Oe]=re<<7,Y=0;Y<1<<F[Oe]-7;Y++)ce[256+re++]=Oe;for(Te=0;Te<=x;Te++)oe[Te]=0;for(Y=0;Y<=143;)G[Y*2+1]=8,Y++,oe[8]++;for(;Y<=255;)G[Y*2+1]=9,Y++,oe[9]++;for(;Y<=279;)G[Y*2+1]=7,Y++,oe[7]++;for(;Y<=287;)G[Y*2+1]=8,Y++,oe[8]++;for(J(G,m+1,oe),Y=0;Y<y;Y++)te[Y*2+1]=5,te[Y*2]=Q(Y,5);xe=new ge(G,E,g+1,m,x),_e=new ge(te,F,0,y,x),Ce=new ge(new Array(0),O,0,_,T)}function U(Y){var Te;for(Te=0;Te<m;Te++)Y.dyn_ltree[Te*2]=0;for(Te=0;Te<y;Te++)Y.dyn_dtree[Te*2]=0;for(Te=0;Te<_;Te++)Y.bl_tree[Te*2]=0;Y.dyn_ltree[k*2]=1,Y.opt_len=Y.static_len=0,Y.last_lit=Y.matches=0}function z(Y){Y.bi_valid>8?I(Y,Y.bi_buf):Y.bi_valid>0&&(Y.pending_buf[Y.pending++]=Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0}function L(Y,Te,Pe,Oe){z(Y),I(Y,Pe),I(Y,~Pe),a.arraySet(Y.pending_buf,Y.window,Te,Pe,Y.pending),Y.pending+=Pe}function j(Y,Te,Pe,Oe){var re=Te*2,oe=Pe*2;return Y[re]<Y[oe]||Y[re]===Y[oe]&&Oe[Te]<=Oe[Pe]}function ee(Y,Te,Pe){for(var Oe=Y.heap[Pe],re=Pe<<1;re<=Y.heap_len&&(re<Y.heap_len&&j(Te,Y.heap[re+1],Y.heap[re],Y.depth)&&re++,!j(Te,Oe,Y.heap[re],Y.depth));)Y.heap[Pe]=Y.heap[re],Pe=re,re<<=1;Y.heap[Pe]=Oe}function he(Y,Te,Pe){var Oe,re,oe=0,N,be;if(Y.last_lit!==0)do Oe=Y.pending_buf[Y.d_buf+oe*2]<<8|Y.pending_buf[Y.d_buf+oe*2+1],re=Y.pending_buf[Y.l_buf+oe],oe++,Oe===0?K(Y,re,Te):(N=se[re],K(Y,N+g+1,Te),be=E[N],be!==0&&(re-=le[N],q(Y,re,be)),Oe--,N=B(Oe),K(Y,N,Pe),be=F[N],be!==0&&(Oe-=fe[N],q(Y,Oe,be)));while(oe<Y.last_lit);K(Y,k,Te)}function ye(Y,Te){var Pe=Te.dyn_tree,Oe=Te.stat_desc.static_tree,re=Te.stat_desc.has_stree,oe=Te.stat_desc.elems,N,be,Ne=-1,D;for(Y.heap_len=0,Y.heap_max=b,N=0;N<oe;N++)Pe[N*2]!==0?(Y.heap[++Y.heap_len]=Ne=N,Y.depth[N]=0):Pe[N*2+1]=0;for(;Y.heap_len<2;)D=Y.heap[++Y.heap_len]=Ne<2?++Ne:0,Pe[D*2]=1,Y.depth[D]=0,Y.opt_len--,re&&(Y.static_len-=Oe[D*2+1]);for(Te.max_code=Ne,N=Y.heap_len>>1;N>=1;N--)ee(Y,Pe,N);D=oe;do N=Y.heap[1],Y.heap[1]=Y.heap[Y.heap_len--],ee(Y,Pe,1),be=Y.heap[1],Y.heap[--Y.heap_max]=N,Y.heap[--Y.heap_max]=be,Pe[D*2]=Pe[N*2]+Pe[be*2],Y.depth[D]=(Y.depth[N]>=Y.depth[be]?Y.depth[N]:Y.depth[be])+1,Pe[N*2+1]=Pe[be*2+1]=D,Y.heap[1]=D++,ee(Y,Pe,1);while(Y.heap_len>=2);Y.heap[--Y.heap_max]=Y.heap[1],Z(Y,Te),J(Pe,Ne,Y.bl_count)}function pe(Y,Te,Pe){var Oe,re=-1,oe,N=Te[0*2+1],be=0,Ne=7,D=4;for(N===0&&(Ne=138,D=3),Te[(Pe+1)*2+1]=65535,Oe=0;Oe<=Pe;Oe++)oe=N,N=Te[(Oe+1)*2+1],!(++be<Ne&&oe===N)&&(be<D?Y.bl_tree[oe*2]+=be:oe!==0?(oe!==re&&Y.bl_tree[oe*2]++,Y.bl_tree[S*2]++):be<=10?Y.bl_tree[A*2]++:Y.bl_tree[w*2]++,be=0,re=oe,N===0?(Ne=138,D=3):oe===N?(Ne=6,D=3):(Ne=7,D=4))}function ne(Y,Te,Pe){var Oe,re=-1,oe,N=Te[0*2+1],be=0,Ne=7,D=4;for(N===0&&(Ne=138,D=3),Oe=0;Oe<=Pe;Oe++)if(oe=N,N=Te[(Oe+1)*2+1],!(++be<Ne&&oe===N)){if(be<D)do K(Y,oe,Y.bl_tree);while(--be!==0);else oe!==0?(oe!==re&&(K(Y,oe,Y.bl_tree),be--),K(Y,S,Y.bl_tree),q(Y,be-3,2)):be<=10?(K(Y,A,Y.bl_tree),q(Y,be-3,3)):(K(Y,w,Y.bl_tree),q(Y,be-11,7));be=0,re=oe,N===0?(Ne=138,D=3):oe===N?(Ne=6,D=3):(Ne=7,D=4)}}function de(Y){var Te;for(pe(Y,Y.dyn_ltree,Y.l_desc.max_code),pe(Y,Y.dyn_dtree,Y.d_desc.max_code),ye(Y,Y.bl_desc),Te=_-1;Te>=3&&Y.bl_tree[M[Te]*2+1]===0;Te--);return Y.opt_len+=3*(Te+1)+5+5+4,Te}function me(Y,Te,Pe,Oe){var re;for(q(Y,Te-257,5),q(Y,Pe-1,5),q(Y,Oe-4,4),re=0;re<Oe;re++)q(Y,Y.bl_tree[M[re]*2+1],3);ne(Y,Y.dyn_ltree,Te-1),ne(Y,Y.dyn_dtree,Pe-1)}function ve(Y){var Te=4093624447,Pe;for(Pe=0;Pe<=31;Pe++,Te>>>=1)if(Te&1&&Y.dyn_ltree[Pe*2]!==0)return n;if(Y.dyn_ltree[9*2]!==0||Y.dyn_ltree[10*2]!==0||Y.dyn_ltree[13*2]!==0)return s;for(Pe=32;Pe<g;Pe++)if(Y.dyn_ltree[Pe*2]!==0)return s;return n}var Se=!1;function De(Y){Se||(R(),Se=!0),Y.l_desc=new ae(Y.dyn_ltree,xe),Y.d_desc=new ae(Y.dyn_dtree,_e),Y.bl_desc=new ae(Y.bl_tree,Ce),Y.bi_buf=0,Y.bi_valid=0,U(Y)}function Me(Y,Te,Pe,Oe){q(Y,(c<<1)+(Oe?1:0),3),L(Y,Te,Pe)}function Le(Y){q(Y,u<<1,3),K(Y,k,G),$(Y)}function qe(Y,Te,Pe,Oe){var re,oe,N=0;Y.level>0?(Y.strm.data_type===o&&(Y.strm.data_type=ve(Y)),ye(Y,Y.l_desc),ye(Y,Y.d_desc),N=de(Y),re=Y.opt_len+3+7>>>3,oe=Y.static_len+3+7>>>3,oe<=re&&(re=oe)):re=oe=Pe+5,Pe+4<=re&&Te!==-1?Me(Y,Te,Pe,Oe):Y.strategy===e||oe===re?(q(Y,(u<<1)+(Oe?1:0),3),he(Y,G,te)):(q(Y,(h<<1)+(Oe?1:0),3),me(Y,Y.l_desc.max_code+1,Y.d_desc.max_code+1,N+1),he(Y,Y.dyn_ltree,Y.dyn_dtree)),U(Y),Oe&&z(Y)}function Ke(Y,Te,Pe){return Y.pending_buf[Y.d_buf+Y.last_lit*2]=Te>>>8&255,Y.pending_buf[Y.d_buf+Y.last_lit*2+1]=Te&255,Y.pending_buf[Y.l_buf+Y.last_lit]=Pe&255,Y.last_lit++,Te===0?Y.dyn_ltree[Pe*2]++:(Y.matches++,Te--,Y.dyn_ltree[(se[Pe]+g+1)*2]++,Y.dyn_dtree[B(Te)*2]++),Y.last_lit===Y.lit_bufsize-1}return trees._tr_init=De,trees._tr_stored_block=Me,trees._tr_flush_block=qe,trees._tr_tally=Ke,trees._tr_align=Le,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){if(hasRequiredAdler32)return adler32_1;hasRequiredAdler32=1;function a(e,n,s,o){for(var l=e&65535|0,c=e>>>16&65535|0,u=0;s!==0;){u=s>2e3?2e3:s,s-=u;do l=l+n[o++]|0,c=c+l|0;while(--u);l%=65521,c%=65521}return l|c<<16|0}return adler32_1=a,adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;function a(){for(var s,o=[],l=0;l<256;l++){s=l;for(var c=0;c<8;c++)s=s&1?3988292384^s>>>1:s>>>1;o[l]=s}return o}var e=a();function n(s,o,l,c){var u=e,h=c+l;s^=-1;for(var f=c;f<h;f++)s=s>>>8^u[(s^o[f])&255];return s^-1}return crc32_1=n,crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var hasRequiredDeflate$1;function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate$2;hasRequiredDeflate$1=1;var a=requireCommon(),e=requireTrees(),n=requireAdler32(),s=requireCrc32(),o=requireMessages(),l=0,c=1,u=3,h=4,f=5,d=0,p=1,g=-2,m=-3,y=-5,_=-1,b=1,x=2,P=3,T=4,k=0,S=2,A=8,w=9,E=15,F=8,O=29,M=256,V=M+1+O,G=30,te=19,ce=2*V+1,se=15,le=3,fe=258,ge=fe+le+1,xe=32,_e=42,Ce=69,ae=73,B=91,I=103,q=113,K=666,Q=1,$=2,Z=3,J=4,R=3;function U(D,we){return D.msg=o[we],we}function z(D){return(D<<1)-(D>4?9:0)}function L(D){for(var we=D.length;--we>=0;)D[we]=0}function j(D){var we=D.state,Ae=we.pending;Ae>D.avail_out&&(Ae=D.avail_out),Ae!==0&&(a.arraySet(D.output,we.pending_buf,we.pending_out,Ae,D.next_out),D.next_out+=Ae,we.pending_out+=Ae,D.total_out+=Ae,D.avail_out-=Ae,we.pending-=Ae,we.pending===0&&(we.pending_out=0))}function ee(D,we){e._tr_flush_block(D,D.block_start>=0?D.block_start:-1,D.strstart-D.block_start,we),D.block_start=D.strstart,j(D.strm)}function he(D,we){D.pending_buf[D.pending++]=we}function ye(D,we){D.pending_buf[D.pending++]=we>>>8&255,D.pending_buf[D.pending++]=we&255}function pe(D,we,Ae,X){var H=D.avail_in;return H>X&&(H=X),H===0?0:(D.avail_in-=H,a.arraySet(we,D.input,D.next_in,H,Ae),D.state.wrap===1?D.adler=n(D.adler,we,H,Ae):D.state.wrap===2&&(D.adler=s(D.adler,we,H,Ae)),D.next_in+=H,D.total_in+=H,H)}function ne(D,we){var Ae=D.max_chain_length,X=D.strstart,H,ue,ke=D.prev_length,Fe=D.nice_match,Be=D.strstart>D.w_size-ge?D.strstart-(D.w_size-ge):0,Ve=D.window,je=D.w_mask,Ue=D.prev,He=D.strstart+fe,Je=Ve[X+ke-1],Ze=Ve[X+ke];D.prev_length>=D.good_match&&(Ae>>=2),Fe>D.lookahead&&(Fe=D.lookahead);do if(H=we,!(Ve[H+ke]!==Ze||Ve[H+ke-1]!==Je||Ve[H]!==Ve[X]||Ve[++H]!==Ve[X+1])){X+=2,H++;do;while(Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&Ve[++X]===Ve[++H]&&X<He);if(ue=fe-(He-X),X=He-fe,ue>ke){if(D.match_start=we,ke=ue,ue>=Fe)break;Je=Ve[X+ke-1],Ze=Ve[X+ke]}}while((we=Ue[we&je])>Be&&--Ae!==0);return ke<=D.lookahead?ke:D.lookahead}function de(D){var we=D.w_size,Ae,X,H,ue,ke;do{if(ue=D.window_size-D.lookahead-D.strstart,D.strstart>=we+(we-ge)){a.arraySet(D.window,D.window,we,we,0),D.match_start-=we,D.strstart-=we,D.block_start-=we,X=D.hash_size,Ae=X;do H=D.head[--Ae],D.head[Ae]=H>=we?H-we:0;while(--X);X=we,Ae=X;do H=D.prev[--Ae],D.prev[Ae]=H>=we?H-we:0;while(--X);ue+=we}if(D.strm.avail_in===0)break;if(X=pe(D.strm,D.window,D.strstart+D.lookahead,ue),D.lookahead+=X,D.lookahead+D.insert>=le)for(ke=D.strstart-D.insert,D.ins_h=D.window[ke],D.ins_h=(D.ins_h<<D.hash_shift^D.window[ke+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[ke+le-1])&D.hash_mask,D.prev[ke&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=ke,ke++,D.insert--,!(D.lookahead+D.insert<le)););}while(D.lookahead<ge&&D.strm.avail_in!==0)}function me(D,we){var Ae=65535;for(Ae>D.pending_buf_size-5&&(Ae=D.pending_buf_size-5);;){if(D.lookahead<=1){if(de(D),D.lookahead===0&&we===l)return Q;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var X=D.block_start+Ae;if((D.strstart===0||D.strstart>=X)&&(D.lookahead=D.strstart-X,D.strstart=X,ee(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-ge&&(ee(D,!1),D.strm.avail_out===0))return Q}return D.insert=0,we===h?(ee(D,!0),D.strm.avail_out===0?Z:J):(D.strstart>D.block_start&&(ee(D,!1),D.strm.avail_out===0),Q)}function ve(D,we){for(var Ae,X;;){if(D.lookahead<ge){if(de(D),D.lookahead<ge&&we===l)return Q;if(D.lookahead===0)break}if(Ae=0,D.lookahead>=le&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+le-1])&D.hash_mask,Ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),Ae!==0&&D.strstart-Ae<=D.w_size-ge&&(D.match_length=ne(D,Ae)),D.match_length>=le)if(X=e._tr_tally(D,D.strstart-D.match_start,D.match_length-le),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=le){D.match_length--;do D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+le-1])&D.hash_mask,Ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart;while(--D.match_length!==0);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else X=e._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(X&&(ee(D,!1),D.strm.avail_out===0))return Q}return D.insert=D.strstart<le-1?D.strstart:le-1,we===h?(ee(D,!0),D.strm.avail_out===0?Z:J):D.last_lit&&(ee(D,!1),D.strm.avail_out===0)?Q:$}function Se(D,we){for(var Ae,X,H;;){if(D.lookahead<ge){if(de(D),D.lookahead<ge&&we===l)return Q;if(D.lookahead===0)break}if(Ae=0,D.lookahead>=le&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+le-1])&D.hash_mask,Ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=le-1,Ae!==0&&D.prev_length<D.max_lazy_match&&D.strstart-Ae<=D.w_size-ge&&(D.match_length=ne(D,Ae),D.match_length<=5&&(D.strategy===b||D.match_length===le&&D.strstart-D.match_start>4096)&&(D.match_length=le-1)),D.prev_length>=le&&D.match_length<=D.prev_length){H=D.strstart+D.lookahead-le,X=e._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-le),D.lookahead-=D.prev_length-1,D.prev_length-=2;do++D.strstart<=H&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+le-1])&D.hash_mask,Ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart);while(--D.prev_length!==0);if(D.match_available=0,D.match_length=le-1,D.strstart++,X&&(ee(D,!1),D.strm.avail_out===0))return Q}else if(D.match_available){if(X=e._tr_tally(D,0,D.window[D.strstart-1]),X&&ee(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return Q}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(X=e._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<le-1?D.strstart:le-1,we===h?(ee(D,!0),D.strm.avail_out===0?Z:J):D.last_lit&&(ee(D,!1),D.strm.avail_out===0)?Q:$}function De(D,we){for(var Ae,X,H,ue,ke=D.window;;){if(D.lookahead<=fe){if(de(D),D.lookahead<=fe&&we===l)return Q;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=le&&D.strstart>0&&(H=D.strstart-1,X=ke[H],X===ke[++H]&&X===ke[++H]&&X===ke[++H])){ue=D.strstart+fe;do;while(X===ke[++H]&&X===ke[++H]&&X===ke[++H]&&X===ke[++H]&&X===ke[++H]&&X===ke[++H]&&X===ke[++H]&&X===ke[++H]&&H<ue);D.match_length=fe-(ue-H),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=le?(Ae=e._tr_tally(D,1,D.match_length-le),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(Ae=e._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),Ae&&(ee(D,!1),D.strm.avail_out===0))return Q}return D.insert=0,we===h?(ee(D,!0),D.strm.avail_out===0?Z:J):D.last_lit&&(ee(D,!1),D.strm.avail_out===0)?Q:$}function Me(D,we){for(var Ae;;){if(D.lookahead===0&&(de(D),D.lookahead===0)){if(we===l)return Q;break}if(D.match_length=0,Ae=e._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,Ae&&(ee(D,!1),D.strm.avail_out===0))return Q}return D.insert=0,we===h?(ee(D,!0),D.strm.avail_out===0?Z:J):D.last_lit&&(ee(D,!1),D.strm.avail_out===0)?Q:$}function Le(D,we,Ae,X,H){this.good_length=D,this.max_lazy=we,this.nice_length=Ae,this.max_chain=X,this.func=H}var qe;qe=[new Le(0,0,0,0,me),new Le(4,4,8,4,ve),new Le(4,5,16,8,ve),new Le(4,6,32,32,ve),new Le(4,4,16,16,Se),new Le(8,16,32,32,Se),new Le(8,16,128,128,Se),new Le(8,32,128,256,Se),new Le(32,128,258,1024,Se),new Le(32,258,258,4096,Se)];function Ke(D){D.window_size=2*D.w_size,L(D.head),D.max_lazy_match=qe[D.level].max_lazy,D.good_match=qe[D.level].good_length,D.nice_match=qe[D.level].nice_length,D.max_chain_length=qe[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=le-1,D.match_available=0,D.ins_h=0}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(ce*2),this.dyn_dtree=new a.Buf16((2*G+1)*2),this.bl_tree=new a.Buf16((2*te+1)*2),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(se+1),this.heap=new a.Buf16(2*V+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*V+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Te(D){var we;return!D||!D.state?U(D,g):(D.total_in=D.total_out=0,D.data_type=S,we=D.state,we.pending=0,we.pending_out=0,we.wrap<0&&(we.wrap=-we.wrap),we.status=we.wrap?_e:q,D.adler=we.wrap===2?0:1,we.last_flush=l,e._tr_init(we),d)}function Pe(D){var we=Te(D);return we===d&&Ke(D.state),we}function Oe(D,we){return!D||!D.state||D.state.wrap!==2?g:(D.state.gzhead=we,d)}function re(D,we,Ae,X,H,ue){if(!D)return g;var ke=1;if(we===_&&(we=6),X<0?(ke=0,X=-X):X>15&&(ke=2,X-=16),H<1||H>w||Ae!==A||X<8||X>15||we<0||we>9||ue<0||ue>T)return U(D,g);X===8&&(X=9);var Fe=new Y;return D.state=Fe,Fe.strm=D,Fe.wrap=ke,Fe.gzhead=null,Fe.w_bits=X,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=H+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+le-1)/le),Fe.window=new a.Buf8(Fe.w_size*2),Fe.head=new a.Buf16(Fe.hash_size),Fe.prev=new a.Buf16(Fe.w_size),Fe.lit_bufsize=1<<H+6,Fe.pending_buf_size=Fe.lit_bufsize*4,Fe.pending_buf=new a.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=we,Fe.strategy=ue,Fe.method=Ae,Pe(D)}function oe(D,we){return re(D,we,A,E,F,k)}function N(D,we){var Ae,X,H,ue;if(!D||!D.state||we>f||we<0)return D?U(D,g):g;if(X=D.state,!D.output||!D.input&&D.avail_in!==0||X.status===K&&we!==h)return U(D,D.avail_out===0?y:g);if(X.strm=D,Ae=X.last_flush,X.last_flush=we,X.status===_e)if(X.wrap===2)D.adler=0,he(X,31),he(X,139),he(X,8),X.gzhead?(he(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),he(X,X.gzhead.time&255),he(X,X.gzhead.time>>8&255),he(X,X.gzhead.time>>16&255),he(X,X.gzhead.time>>24&255),he(X,X.level===9?2:X.strategy>=x||X.level<2?4:0),he(X,X.gzhead.os&255),X.gzhead.extra&&X.gzhead.extra.length&&(he(X,X.gzhead.extra.length&255),he(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(D.adler=s(D.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=Ce):(he(X,0),he(X,0),he(X,0),he(X,0),he(X,0),he(X,X.level===9?2:X.strategy>=x||X.level<2?4:0),he(X,R),X.status=q);else{var ke=A+(X.w_bits-8<<4)<<8,Fe=-1;X.strategy>=x||X.level<2?Fe=0:X.level<6?Fe=1:X.level===6?Fe=2:Fe=3,ke|=Fe<<6,X.strstart!==0&&(ke|=xe),ke+=31-ke%31,X.status=q,ye(X,ke),X.strstart!==0&&(ye(X,D.adler>>>16),ye(X,D.adler&65535)),D.adler=1}if(X.status===Ce)if(X.gzhead.extra){for(H=X.pending;X.gzindex<(X.gzhead.extra.length&65535)&&!(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>H&&(D.adler=s(D.adler,X.pending_buf,X.pending-H,H)),j(D),H=X.pending,X.pending===X.pending_buf_size));)he(X,X.gzhead.extra[X.gzindex]&255),X.gzindex++;X.gzhead.hcrc&&X.pending>H&&(D.adler=s(D.adler,X.pending_buf,X.pending-H,H)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=ae)}else X.status=ae;if(X.status===ae)if(X.gzhead.name){H=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>H&&(D.adler=s(D.adler,X.pending_buf,X.pending-H,H)),j(D),H=X.pending,X.pending===X.pending_buf_size)){ue=1;break}X.gzindex<X.gzhead.name.length?ue=X.gzhead.name.charCodeAt(X.gzindex++)&255:ue=0,he(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>H&&(D.adler=s(D.adler,X.pending_buf,X.pending-H,H)),ue===0&&(X.gzindex=0,X.status=B)}else X.status=B;if(X.status===B)if(X.gzhead.comment){H=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>H&&(D.adler=s(D.adler,X.pending_buf,X.pending-H,H)),j(D),H=X.pending,X.pending===X.pending_buf_size)){ue=1;break}X.gzindex<X.gzhead.comment.length?ue=X.gzhead.comment.charCodeAt(X.gzindex++)&255:ue=0,he(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>H&&(D.adler=s(D.adler,X.pending_buf,X.pending-H,H)),ue===0&&(X.status=I)}else X.status=I;if(X.status===I&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&j(D),X.pending+2<=X.pending_buf_size&&(he(X,D.adler&255),he(X,D.adler>>8&255),D.adler=0,X.status=q)):X.status=q),X.pending!==0){if(j(D),D.avail_out===0)return X.last_flush=-1,d}else if(D.avail_in===0&&z(we)<=z(Ae)&&we!==h)return U(D,y);if(X.status===K&&D.avail_in!==0)return U(D,y);if(D.avail_in!==0||X.lookahead!==0||we!==l&&X.status!==K){var Be=X.strategy===x?Me(X,we):X.strategy===P?De(X,we):qe[X.level].func(X,we);if((Be===Z||Be===J)&&(X.status=K),Be===Q||Be===Z)return D.avail_out===0&&(X.last_flush=-1),d;if(Be===$&&(we===c?e._tr_align(X):we!==f&&(e._tr_stored_block(X,0,0,!1),we===u&&(L(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),j(D),D.avail_out===0))return X.last_flush=-1,d}return we!==h?d:X.wrap<=0?p:(X.wrap===2?(he(X,D.adler&255),he(X,D.adler>>8&255),he(X,D.adler>>16&255),he(X,D.adler>>24&255),he(X,D.total_in&255),he(X,D.total_in>>8&255),he(X,D.total_in>>16&255),he(X,D.total_in>>24&255)):(ye(X,D.adler>>>16),ye(X,D.adler&65535)),j(D),X.wrap>0&&(X.wrap=-X.wrap),X.pending!==0?d:p)}function be(D){var we;return!D||!D.state?g:(we=D.state.status,we!==_e&&we!==Ce&&we!==ae&&we!==B&&we!==I&&we!==q&&we!==K?U(D,g):(D.state=null,we===q?U(D,m):d))}function Ne(D,we){var Ae=we.length,X,H,ue,ke,Fe,Be,Ve,je;if(!D||!D.state||(X=D.state,ke=X.wrap,ke===2||ke===1&&X.status!==_e||X.lookahead))return g;for(ke===1&&(D.adler=n(D.adler,we,Ae,0)),X.wrap=0,Ae>=X.w_size&&(ke===0&&(L(X.head),X.strstart=0,X.block_start=0,X.insert=0),je=new a.Buf8(X.w_size),a.arraySet(je,we,Ae-X.w_size,X.w_size,0),we=je,Ae=X.w_size),Fe=D.avail_in,Be=D.next_in,Ve=D.input,D.avail_in=Ae,D.next_in=0,D.input=we,de(X);X.lookahead>=le;){H=X.strstart,ue=X.lookahead-(le-1);do X.ins_h=(X.ins_h<<X.hash_shift^X.window[H+le-1])&X.hash_mask,X.prev[H&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=H,H++;while(--ue);X.strstart=H,X.lookahead=le-1,de(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=le-1,X.match_available=0,D.next_in=Be,D.input=Ve,D.avail_in=Fe,X.wrap=ke,d}return deflate$2.deflateInit=oe,deflate$2.deflateInit2=re,deflate$2.deflateReset=Pe,deflate$2.deflateResetKeep=Te,deflate$2.deflateSetHeader=Oe,deflate$2.deflate=N,deflate$2.deflateEnd=be,deflate$2.deflateSetDictionary=Ne,deflate$2.deflateInfo="pako deflate (from Nodeca project)",deflate$2}var strings={},hasRequiredStrings;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;var a=requireCommon(),e=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var s=new a.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;s[254]=s[254]=1,strings.string2buf=function(c){var u,h,f,d,p,g=c.length,m=0;for(d=0;d<g;d++)h=c.charCodeAt(d),(h&64512)===55296&&d+1<g&&(f=c.charCodeAt(d+1),(f&64512)===56320&&(h=65536+(h-55296<<10)+(f-56320),d++)),m+=h<128?1:h<2048?2:h<65536?3:4;for(u=new a.Buf8(m),p=0,d=0;p<m;d++)h=c.charCodeAt(d),(h&64512)===55296&&d+1<g&&(f=c.charCodeAt(d+1),(f&64512)===56320&&(h=65536+(h-55296<<10)+(f-56320),d++)),h<128?u[p++]=h:h<2048?(u[p++]=192|h>>>6,u[p++]=128|h&63):h<65536?(u[p++]=224|h>>>12,u[p++]=128|h>>>6&63,u[p++]=128|h&63):(u[p++]=240|h>>>18,u[p++]=128|h>>>12&63,u[p++]=128|h>>>6&63,u[p++]=128|h&63);return u};function l(c,u){if(u<65534&&(c.subarray&&n||!c.subarray&&e))return String.fromCharCode.apply(null,a.shrinkBuf(c,u));for(var h="",f=0;f<u;f++)h+=String.fromCharCode(c[f]);return h}return strings.buf2binstring=function(c){return l(c,c.length)},strings.binstring2buf=function(c){for(var u=new a.Buf8(c.length),h=0,f=u.length;h<f;h++)u[h]=c.charCodeAt(h);return u},strings.buf2string=function(c,u){var h,f,d,p,g=u||c.length,m=new Array(g*2);for(f=0,h=0;h<g;){if(d=c[h++],d<128){m[f++]=d;continue}if(p=s[d],p>4){m[f++]=65533,h+=p-1;continue}for(d&=p===2?31:p===3?15:7;p>1&&h<g;)d=d<<6|c[h++]&63,p--;if(p>1){m[f++]=65533;continue}d<65536?m[f++]=d:(d-=65536,m[f++]=55296|d>>10&1023,m[f++]=56320|d&1023)}return l(m,f)},strings.utf8border=function(c,u){var h;for(u=u||c.length,u>c.length&&(u=c.length),h=u-1;h>=0&&(c[h]&192)===128;)h--;return h<0||h===0?u:h+s[c[h]]>u?h:u},strings}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=a,zstream}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate$3;hasRequiredDeflate=1;var a=requireDeflate$1(),e=requireCommon(),n=requireStrings(),s=requireMessages(),o=requireZstream(),l=Object.prototype.toString,c=0,u=4,h=0,f=1,d=2,p=-1,g=0,m=8;function y(P){if(!(this instanceof y))return new y(P);this.options=e.assign({level:p,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},P||{});var T=this.options;T.raw&&T.windowBits>0?T.windowBits=-T.windowBits:T.gzip&&T.windowBits>0&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var k=a.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(k!==h)throw new Error(s[k]);if(T.header&&a.deflateSetHeader(this.strm,T.header),T.dictionary){var S;if(typeof T.dictionary=="string"?S=n.string2buf(T.dictionary):l.call(T.dictionary)==="[object ArrayBuffer]"?S=new Uint8Array(T.dictionary):S=T.dictionary,k=a.deflateSetDictionary(this.strm,S),k!==h)throw new Error(s[k]);this._dict_set=!0}}y.prototype.push=function(P,T){var k=this.strm,S=this.options.chunkSize,A,w;if(this.ended)return!1;w=T===~~T?T:T===!0?u:c,typeof P=="string"?k.input=n.string2buf(P):l.call(P)==="[object ArrayBuffer]"?k.input=new Uint8Array(P):k.input=P,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new e.Buf8(S),k.next_out=0,k.avail_out=S),A=a.deflate(k,w),A!==f&&A!==h)return this.onEnd(A),this.ended=!0,!1;(k.avail_out===0||k.avail_in===0&&(w===u||w===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(e.shrinkBuf(k.output,k.next_out))):this.onData(e.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&A!==f);return w===u?(A=a.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===h):(w===d&&(this.onEnd(h),k.avail_out=0),!0)},y.prototype.onData=function(P){this.chunks.push(P)},y.prototype.onEnd=function(P){P===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=P,this.msg=this.strm.msg};function _(P,T){var k=new y(T);if(k.push(P,!0),k.err)throw k.msg||s[k.err];return k.result}function b(P,T){return T=T||{},T.raw=!0,_(P,T)}function x(P,T){return T=T||{},T.gzip=!0,_(P,T)}return deflate$3.Deflate=y,deflate$3.deflate=_,deflate$3.deflateRaw=b,deflate$3.gzip=x,deflate$3}var inflate$3={},inflate$2={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;var a=30,e=12;return inffast=function(s,o){var l,c,u,h,f,d,p,g,m,y,_,b,x,P,T,k,S,A,w,E,F,O,M,V,G;l=s.state,c=s.next_in,V=s.input,u=c+(s.avail_in-5),h=s.next_out,G=s.output,f=h-(o-s.avail_out),d=h+(s.avail_out-257),p=l.dmax,g=l.wsize,m=l.whave,y=l.wnext,_=l.window,b=l.hold,x=l.bits,P=l.lencode,T=l.distcode,k=(1<<l.lenbits)-1,S=(1<<l.distbits)-1;e:do{x<15&&(b+=V[c++]<<x,x+=8,b+=V[c++]<<x,x+=8),A=P[b&k];t:for(;;){if(w=A>>>24,b>>>=w,x-=w,w=A>>>16&255,w===0)G[h++]=A&65535;else if(w&16){E=A&65535,w&=15,w&&(x<w&&(b+=V[c++]<<x,x+=8),E+=b&(1<<w)-1,b>>>=w,x-=w),x<15&&(b+=V[c++]<<x,x+=8,b+=V[c++]<<x,x+=8),A=T[b&S];r:for(;;){if(w=A>>>24,b>>>=w,x-=w,w=A>>>16&255,w&16){if(F=A&65535,w&=15,x<w&&(b+=V[c++]<<x,x+=8,x<w&&(b+=V[c++]<<x,x+=8)),F+=b&(1<<w)-1,F>p){s.msg="invalid distance too far back",l.mode=a;break e}if(b>>>=w,x-=w,w=h-f,F>w){if(w=F-w,w>m&&l.sane){s.msg="invalid distance too far back",l.mode=a;break e}if(O=0,M=_,y===0){if(O+=g-w,w<E){E-=w;do G[h++]=_[O++];while(--w);O=h-F,M=G}}else if(y<w){if(O+=g+y-w,w-=y,w<E){E-=w;do G[h++]=_[O++];while(--w);if(O=0,y<E){w=y,E-=w;do G[h++]=_[O++];while(--w);O=h-F,M=G}}}else if(O+=y-w,w<E){E-=w;do G[h++]=_[O++];while(--w);O=h-F,M=G}for(;E>2;)G[h++]=M[O++],G[h++]=M[O++],G[h++]=M[O++],E-=3;E&&(G[h++]=M[O++],E>1&&(G[h++]=M[O++]))}else{O=h-F;do G[h++]=G[O++],G[h++]=G[O++],G[h++]=G[O++],E-=3;while(E>2);E&&(G[h++]=G[O++],E>1&&(G[h++]=G[O++]))}}else if((w&64)===0){A=T[(A&65535)+(b&(1<<w)-1)];continue r}else{s.msg="invalid distance code",l.mode=a;break e}break}}else if((w&64)===0){A=P[(A&65535)+(b&(1<<w)-1)];continue t}else if(w&32){l.mode=e;break e}else{s.msg="invalid literal/length code",l.mode=a;break e}break}}while(c<u&&h<d);E=x>>3,c-=E,x-=E<<3,b&=(1<<x)-1,s.next_in=c,s.next_out=h,s.avail_in=c<u?5+(u-c):5-(c-u),s.avail_out=h<d?257+(d-h):257-(h-d),l.hold=b,l.bits=x},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var a=requireCommon(),e=15,n=852,s=592,o=0,l=1,c=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(g,m,y,_,b,x,P,T){var k=T.bits,S=0,A=0,w=0,E=0,F=0,O=0,M=0,V=0,G=0,te=0,ce,se,le,fe,ge,xe=null,_e=0,Ce,ae=new a.Buf16(e+1),B=new a.Buf16(e+1),I=null,q=0,K,Q,$;for(S=0;S<=e;S++)ae[S]=0;for(A=0;A<_;A++)ae[m[y+A]]++;for(F=k,E=e;E>=1&&ae[E]===0;E--);if(F>E&&(F=E),E===0)return b[x++]=1<<24|64<<16|0,b[x++]=1<<24|64<<16|0,T.bits=1,0;for(w=1;w<E&&ae[w]===0;w++);for(F<w&&(F=w),V=1,S=1;S<=e;S++)if(V<<=1,V-=ae[S],V<0)return-1;if(V>0&&(g===o||E!==1))return-1;for(B[1]=0,S=1;S<e;S++)B[S+1]=B[S]+ae[S];for(A=0;A<_;A++)m[y+A]!==0&&(P[B[m[y+A]]++]=A);if(g===o?(xe=I=P,Ce=19):g===l?(xe=u,_e-=257,I=h,q-=257,Ce=256):(xe=f,I=d,Ce=-1),te=0,A=0,S=w,ge=x,O=F,M=0,le=-1,G=1<<F,fe=G-1,g===l&&G>n||g===c&&G>s)return 1;for(;;){K=S-M,P[A]<Ce?(Q=0,$=P[A]):P[A]>Ce?(Q=I[q+P[A]],$=xe[_e+P[A]]):(Q=96,$=0),ce=1<<S-M,se=1<<O,w=se;do se-=ce,b[ge+(te>>M)+se]=K<<24|Q<<16|$|0;while(se!==0);for(ce=1<<S-1;te&ce;)ce>>=1;if(ce!==0?(te&=ce-1,te+=ce):te=0,A++,--ae[S]===0){if(S===E)break;S=m[y+P[A]]}if(S>F&&(te&fe)!==le){for(M===0&&(M=F),ge+=w,O=S-M,V=1<<O;O+M<E&&(V-=ae[O+M],!(V<=0));)O++,V<<=1;if(G+=1<<O,g===l&&G>n||g===c&&G>s)return 1;le=te&fe,b[le]=F<<24|O<<16|ge-x|0}}return te!==0&&(b[ge+te]=S-M<<24|64<<16|0),T.bits=F,0},inftrees}var hasRequiredInflate$1;function requireInflate$1(){if(hasRequiredInflate$1)return inflate$2;hasRequiredInflate$1=1;var a=requireCommon(),e=requireAdler32(),n=requireCrc32(),s=requireInffast(),o=requireInftrees(),l=0,c=1,u=2,h=4,f=5,d=6,p=0,g=1,m=2,y=-2,_=-3,b=-4,x=-5,P=8,T=1,k=2,S=3,A=4,w=5,E=6,F=7,O=8,M=9,V=10,G=11,te=12,ce=13,se=14,le=15,fe=16,ge=17,xe=18,_e=19,Ce=20,ae=21,B=22,I=23,q=24,K=25,Q=26,$=27,Z=28,J=29,R=30,U=31,z=32,L=852,j=592,ee=15,he=ee;function ye(re){return(re>>>24&255)+(re>>>8&65280)+((re&65280)<<8)+((re&255)<<24)}function pe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ne(re){var oe;return!re||!re.state?y:(oe=re.state,re.total_in=re.total_out=oe.total=0,re.msg="",oe.wrap&&(re.adler=oe.wrap&1),oe.mode=T,oe.last=0,oe.havedict=0,oe.dmax=32768,oe.head=null,oe.hold=0,oe.bits=0,oe.lencode=oe.lendyn=new a.Buf32(L),oe.distcode=oe.distdyn=new a.Buf32(j),oe.sane=1,oe.back=-1,p)}function de(re){var oe;return!re||!re.state?y:(oe=re.state,oe.wsize=0,oe.whave=0,oe.wnext=0,ne(re))}function me(re,oe){var N,be;return!re||!re.state||(be=re.state,oe<0?(N=0,oe=-oe):(N=(oe>>4)+1,oe<48&&(oe&=15)),oe&&(oe<8||oe>15))?y:(be.window!==null&&be.wbits!==oe&&(be.window=null),be.wrap=N,be.wbits=oe,de(re))}function ve(re,oe){var N,be;return re?(be=new pe,re.state=be,be.window=null,N=me(re,oe),N!==p&&(re.state=null),N):y}function Se(re){return ve(re,he)}var De=!0,Me,Le;function qe(re){if(De){var oe;for(Me=new a.Buf32(512),Le=new a.Buf32(32),oe=0;oe<144;)re.lens[oe++]=8;for(;oe<256;)re.lens[oe++]=9;for(;oe<280;)re.lens[oe++]=7;for(;oe<288;)re.lens[oe++]=8;for(o(c,re.lens,0,288,Me,0,re.work,{bits:9}),oe=0;oe<32;)re.lens[oe++]=5;o(u,re.lens,0,32,Le,0,re.work,{bits:5}),De=!1}re.lencode=Me,re.lenbits=9,re.distcode=Le,re.distbits=5}function Ke(re,oe,N,be){var Ne,D=re.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new a.Buf8(D.wsize)),be>=D.wsize?(a.arraySet(D.window,oe,N-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(Ne=D.wsize-D.wnext,Ne>be&&(Ne=be),a.arraySet(D.window,oe,N-be,Ne,D.wnext),be-=Ne,be?(a.arraySet(D.window,oe,N-be,be,0),D.wnext=be,D.whave=D.wsize):(D.wnext+=Ne,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=Ne))),0}function Y(re,oe){var N,be,Ne,D,we,Ae,X,H,ue,ke,Fe,Be,Ve,je,Ue=0,He,Je,Ze,et,ht,dt,at,ct,st=new a.Buf8(4),mt,pt,It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!re||!re.state||!re.output||!re.input&&re.avail_in!==0)return y;N=re.state,N.mode===te&&(N.mode=ce),we=re.next_out,Ne=re.output,X=re.avail_out,D=re.next_in,be=re.input,Ae=re.avail_in,H=N.hold,ue=N.bits,ke=Ae,Fe=X,ct=p;e:for(;;)switch(N.mode){case T:if(N.wrap===0){N.mode=ce;break}for(;ue<16;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(N.wrap&2&&H===35615){N.check=0,st[0]=H&255,st[1]=H>>>8&255,N.check=n(N.check,st,2,0),H=0,ue=0,N.mode=k;break}if(N.flags=0,N.head&&(N.head.done=!1),!(N.wrap&1)||(((H&255)<<8)+(H>>8))%31){re.msg="incorrect header check",N.mode=R;break}if((H&15)!==P){re.msg="unknown compression method",N.mode=R;break}if(H>>>=4,ue-=4,at=(H&15)+8,N.wbits===0)N.wbits=at;else if(at>N.wbits){re.msg="invalid window size",N.mode=R;break}N.dmax=1<<at,re.adler=N.check=1,N.mode=H&512?V:te,H=0,ue=0;break;case k:for(;ue<16;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(N.flags=H,(N.flags&255)!==P){re.msg="unknown compression method",N.mode=R;break}if(N.flags&57344){re.msg="unknown header flags set",N.mode=R;break}N.head&&(N.head.text=H>>8&1),N.flags&512&&(st[0]=H&255,st[1]=H>>>8&255,N.check=n(N.check,st,2,0)),H=0,ue=0,N.mode=S;case S:for(;ue<32;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}N.head&&(N.head.time=H),N.flags&512&&(st[0]=H&255,st[1]=H>>>8&255,st[2]=H>>>16&255,st[3]=H>>>24&255,N.check=n(N.check,st,4,0)),H=0,ue=0,N.mode=A;case A:for(;ue<16;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}N.head&&(N.head.xflags=H&255,N.head.os=H>>8),N.flags&512&&(st[0]=H&255,st[1]=H>>>8&255,N.check=n(N.check,st,2,0)),H=0,ue=0,N.mode=w;case w:if(N.flags&1024){for(;ue<16;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}N.length=H,N.head&&(N.head.extra_len=H),N.flags&512&&(st[0]=H&255,st[1]=H>>>8&255,N.check=n(N.check,st,2,0)),H=0,ue=0}else N.head&&(N.head.extra=null);N.mode=E;case E:if(N.flags&1024&&(Be=N.length,Be>Ae&&(Be=Ae),Be&&(N.head&&(at=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),a.arraySet(N.head.extra,be,D,Be,at)),N.flags&512&&(N.check=n(N.check,be,Be,D)),Ae-=Be,D+=Be,N.length-=Be),N.length))break e;N.length=0,N.mode=F;case F:if(N.flags&2048){if(Ae===0)break e;Be=0;do at=be[D+Be++],N.head&&at&&N.length<65536&&(N.head.name+=String.fromCharCode(at));while(at&&Be<Ae);if(N.flags&512&&(N.check=n(N.check,be,Be,D)),Ae-=Be,D+=Be,at)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=O;case O:if(N.flags&4096){if(Ae===0)break e;Be=0;do at=be[D+Be++],N.head&&at&&N.length<65536&&(N.head.comment+=String.fromCharCode(at));while(at&&Be<Ae);if(N.flags&512&&(N.check=n(N.check,be,Be,D)),Ae-=Be,D+=Be,at)break e}else N.head&&(N.head.comment=null);N.mode=M;case M:if(N.flags&512){for(;ue<16;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(H!==(N.check&65535)){re.msg="header crc mismatch",N.mode=R;break}H=0,ue=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),re.adler=N.check=0,N.mode=te;break;case V:for(;ue<32;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}re.adler=N.check=ye(H),H=0,ue=0,N.mode=G;case G:if(N.havedict===0)return re.next_out=we,re.avail_out=X,re.next_in=D,re.avail_in=Ae,N.hold=H,N.bits=ue,m;re.adler=N.check=1,N.mode=te;case te:if(oe===f||oe===d)break e;case ce:if(N.last){H>>>=ue&7,ue-=ue&7,N.mode=$;break}for(;ue<3;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}switch(N.last=H&1,H>>>=1,ue-=1,H&3){case 0:N.mode=se;break;case 1:if(qe(N),N.mode=Ce,oe===d){H>>>=2,ue-=2;break e}break;case 2:N.mode=ge;break;case 3:re.msg="invalid block type",N.mode=R}H>>>=2,ue-=2;break;case se:for(H>>>=ue&7,ue-=ue&7;ue<32;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if((H&65535)!==(H>>>16^65535)){re.msg="invalid stored block lengths",N.mode=R;break}if(N.length=H&65535,H=0,ue=0,N.mode=le,oe===d)break e;case le:N.mode=fe;case fe:if(Be=N.length,Be){if(Be>Ae&&(Be=Ae),Be>X&&(Be=X),Be===0)break e;a.arraySet(Ne,be,D,Be,we),Ae-=Be,D+=Be,X-=Be,we+=Be,N.length-=Be;break}N.mode=te;break;case ge:for(;ue<14;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(N.nlen=(H&31)+257,H>>>=5,ue-=5,N.ndist=(H&31)+1,H>>>=5,ue-=5,N.ncode=(H&15)+4,H>>>=4,ue-=4,N.nlen>286||N.ndist>30){re.msg="too many length or distance symbols",N.mode=R;break}N.have=0,N.mode=xe;case xe:for(;N.have<N.ncode;){for(;ue<3;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}N.lens[It[N.have++]]=H&7,H>>>=3,ue-=3}for(;N.have<19;)N.lens[It[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,mt={bits:N.lenbits},ct=o(l,N.lens,0,19,N.lencode,0,N.work,mt),N.lenbits=mt.bits,ct){re.msg="invalid code lengths set",N.mode=R;break}N.have=0,N.mode=_e;case _e:for(;N.have<N.nlen+N.ndist;){for(;Ue=N.lencode[H&(1<<N.lenbits)-1],He=Ue>>>24,Je=Ue>>>16&255,Ze=Ue&65535,!(He<=ue);){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(Ze<16)H>>>=He,ue-=He,N.lens[N.have++]=Ze;else{if(Ze===16){for(pt=He+2;ue<pt;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(H>>>=He,ue-=He,N.have===0){re.msg="invalid bit length repeat",N.mode=R;break}at=N.lens[N.have-1],Be=3+(H&3),H>>>=2,ue-=2}else if(Ze===17){for(pt=He+3;ue<pt;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}H>>>=He,ue-=He,at=0,Be=3+(H&7),H>>>=3,ue-=3}else{for(pt=He+7;ue<pt;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}H>>>=He,ue-=He,at=0,Be=11+(H&127),H>>>=7,ue-=7}if(N.have+Be>N.nlen+N.ndist){re.msg="invalid bit length repeat",N.mode=R;break}for(;Be--;)N.lens[N.have++]=at}}if(N.mode===R)break;if(N.lens[256]===0){re.msg="invalid code -- missing end-of-block",N.mode=R;break}if(N.lenbits=9,mt={bits:N.lenbits},ct=o(c,N.lens,0,N.nlen,N.lencode,0,N.work,mt),N.lenbits=mt.bits,ct){re.msg="invalid literal/lengths set",N.mode=R;break}if(N.distbits=6,N.distcode=N.distdyn,mt={bits:N.distbits},ct=o(u,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,mt),N.distbits=mt.bits,ct){re.msg="invalid distances set",N.mode=R;break}if(N.mode=Ce,oe===d)break e;case Ce:N.mode=ae;case ae:if(Ae>=6&&X>=258){re.next_out=we,re.avail_out=X,re.next_in=D,re.avail_in=Ae,N.hold=H,N.bits=ue,s(re,Fe),we=re.next_out,Ne=re.output,X=re.avail_out,D=re.next_in,be=re.input,Ae=re.avail_in,H=N.hold,ue=N.bits,N.mode===te&&(N.back=-1);break}for(N.back=0;Ue=N.lencode[H&(1<<N.lenbits)-1],He=Ue>>>24,Je=Ue>>>16&255,Ze=Ue&65535,!(He<=ue);){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(Je&&(Je&240)===0){for(et=He,ht=Je,dt=Ze;Ue=N.lencode[dt+((H&(1<<et+ht)-1)>>et)],He=Ue>>>24,Je=Ue>>>16&255,Ze=Ue&65535,!(et+He<=ue);){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}H>>>=et,ue-=et,N.back+=et}if(H>>>=He,ue-=He,N.back+=He,N.length=Ze,Je===0){N.mode=Q;break}if(Je&32){N.back=-1,N.mode=te;break}if(Je&64){re.msg="invalid literal/length code",N.mode=R;break}N.extra=Je&15,N.mode=B;case B:if(N.extra){for(pt=N.extra;ue<pt;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}N.length+=H&(1<<N.extra)-1,H>>>=N.extra,ue-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=I;case I:for(;Ue=N.distcode[H&(1<<N.distbits)-1],He=Ue>>>24,Je=Ue>>>16&255,Ze=Ue&65535,!(He<=ue);){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if((Je&240)===0){for(et=He,ht=Je,dt=Ze;Ue=N.distcode[dt+((H&(1<<et+ht)-1)>>et)],He=Ue>>>24,Je=Ue>>>16&255,Ze=Ue&65535,!(et+He<=ue);){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}H>>>=et,ue-=et,N.back+=et}if(H>>>=He,ue-=He,N.back+=He,Je&64){re.msg="invalid distance code",N.mode=R;break}N.offset=Ze,N.extra=Je&15,N.mode=q;case q:if(N.extra){for(pt=N.extra;ue<pt;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}N.offset+=H&(1<<N.extra)-1,H>>>=N.extra,ue-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){re.msg="invalid distance too far back",N.mode=R;break}N.mode=K;case K:if(X===0)break e;if(Be=Fe-X,N.offset>Be){if(Be=N.offset-Be,Be>N.whave&&N.sane){re.msg="invalid distance too far back",N.mode=R;break}Be>N.wnext?(Be-=N.wnext,Ve=N.wsize-Be):Ve=N.wnext-Be,Be>N.length&&(Be=N.length),je=N.window}else je=Ne,Ve=we-N.offset,Be=N.length;Be>X&&(Be=X),X-=Be,N.length-=Be;do Ne[we++]=je[Ve++];while(--Be);N.length===0&&(N.mode=ae);break;case Q:if(X===0)break e;Ne[we++]=N.length,X--,N.mode=ae;break;case $:if(N.wrap){for(;ue<32;){if(Ae===0)break e;Ae--,H|=be[D++]<<ue,ue+=8}if(Fe-=X,re.total_out+=Fe,N.total+=Fe,Fe&&(re.adler=N.check=N.flags?n(N.check,Ne,Fe,we-Fe):e(N.check,Ne,Fe,we-Fe)),Fe=X,(N.flags?H:ye(H))!==N.check){re.msg="incorrect data check",N.mode=R;break}H=0,ue=0}N.mode=Z;case Z:if(N.wrap&&N.flags){for(;ue<32;){if(Ae===0)break e;Ae--,H+=be[D++]<<ue,ue+=8}if(H!==(N.total&4294967295)){re.msg="incorrect length check",N.mode=R;break}H=0,ue=0}N.mode=J;case J:ct=g;break e;case R:ct=_;break e;case U:return b;case z:default:return y}return re.next_out=we,re.avail_out=X,re.next_in=D,re.avail_in=Ae,N.hold=H,N.bits=ue,(N.wsize||Fe!==re.avail_out&&N.mode<R&&(N.mode<$||oe!==h))&&Ke(re,re.output,re.next_out,Fe-re.avail_out),ke-=re.avail_in,Fe-=re.avail_out,re.total_in+=ke,re.total_out+=Fe,N.total+=Fe,N.wrap&&Fe&&(re.adler=N.check=N.flags?n(N.check,Ne,Fe,re.next_out-Fe):e(N.check,Ne,Fe,re.next_out-Fe)),re.data_type=N.bits+(N.last?64:0)+(N.mode===te?128:0)+(N.mode===Ce||N.mode===le?256:0),(ke===0&&Fe===0||oe===h)&&ct===p&&(ct=x),ct}function Te(re){if(!re||!re.state)return y;var oe=re.state;return oe.window&&(oe.window=null),re.state=null,p}function Pe(re,oe){var N;return!re||!re.state||(N=re.state,(N.wrap&2)===0)?y:(N.head=oe,oe.done=!1,p)}function Oe(re,oe){var N=oe.length,be,Ne,D;return!re||!re.state||(be=re.state,be.wrap!==0&&be.mode!==G)?y:be.mode===G&&(Ne=1,Ne=e(Ne,oe,N,0),Ne!==be.check)?_:(D=Ke(re,oe,N,N),D?(be.mode=U,b):(be.havedict=1,p))}return inflate$2.inflateReset=de,inflate$2.inflateReset2=me,inflate$2.inflateResetKeep=ne,inflate$2.inflateInit=Se,inflate$2.inflateInit2=ve,inflate$2.inflate=Y,inflate$2.inflateEnd=Te,inflate$2.inflateGetHeader=Pe,inflate$2.inflateSetDictionary=Oe,inflate$2.inflateInfo="pako inflate (from Nodeca project)",inflate$2}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var gzheader,hasRequiredGzheader;function requireGzheader(){if(hasRequiredGzheader)return gzheader;hasRequiredGzheader=1;function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return gzheader=a,gzheader}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate$3;hasRequiredInflate=1;var a=requireInflate$1(),e=requireCommon(),n=requireStrings(),s=requireConstants(),o=requireMessages(),l=requireZstream(),c=requireGzheader(),u=Object.prototype.toString;function h(p){if(!(this instanceof h))return new h(p);this.options=e.assign({chunkSize:16384,windowBits:0,to:""},p||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(p&&p.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15)===0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=a.inflateInit2(this.strm,g.windowBits);if(m!==s.Z_OK)throw new Error(o[m]);if(this.header=new c,a.inflateGetHeader(this.strm,this.header),g.dictionary&&(typeof g.dictionary=="string"?g.dictionary=n.string2buf(g.dictionary):u.call(g.dictionary)==="[object ArrayBuffer]"&&(g.dictionary=new Uint8Array(g.dictionary)),g.raw&&(m=a.inflateSetDictionary(this.strm,g.dictionary),m!==s.Z_OK)))throw new Error(o[m])}h.prototype.push=function(p,g){var m=this.strm,y=this.options.chunkSize,_=this.options.dictionary,b,x,P,T,k,S=!1;if(this.ended)return!1;x=g===~~g?g:g===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof p=="string"?m.input=n.binstring2buf(p):u.call(p)==="[object ArrayBuffer]"?m.input=new Uint8Array(p):m.input=p,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new e.Buf8(y),m.next_out=0,m.avail_out=y),b=a.inflate(m,s.Z_NO_FLUSH),b===s.Z_NEED_DICT&&_&&(b=a.inflateSetDictionary(this.strm,_)),b===s.Z_BUF_ERROR&&S===!0&&(b=s.Z_OK,S=!1),b!==s.Z_STREAM_END&&b!==s.Z_OK)return this.onEnd(b),this.ended=!0,!1;m.next_out&&(m.avail_out===0||b===s.Z_STREAM_END||m.avail_in===0&&(x===s.Z_FINISH||x===s.Z_SYNC_FLUSH))&&(this.options.to==="string"?(P=n.utf8border(m.output,m.next_out),T=m.next_out-P,k=n.buf2string(m.output,P),m.next_out=T,m.avail_out=y-T,T&&e.arraySet(m.output,m.output,P,T,0),this.onData(k)):this.onData(e.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(S=!0)}while((m.avail_in>0||m.avail_out===0)&&b!==s.Z_STREAM_END);return b===s.Z_STREAM_END&&(x=s.Z_FINISH),x===s.Z_FINISH?(b=a.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===s.Z_OK):(x===s.Z_SYNC_FLUSH&&(this.onEnd(s.Z_OK),m.avail_out=0),!0)},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function f(p,g){var m=new h(g);if(m.push(p,!0),m.err)throw m.msg||o[m.err];return m.result}function d(p,g){return g=g||{},g.raw=!0,f(p,g)}return inflate$3.Inflate=h,inflate$3.inflate=f,inflate$3.inflateRaw=d,inflate$3.ungzip=f,inflate$3}var pako_1,hasRequiredPako;function requirePako(){if(hasRequiredPako)return pako_1;hasRequiredPako=1;var a=requireCommon().assign,e=requireDeflate(),n=requireInflate(),s=requireConstants(),o={};return a(o,e,n,s),pako_1=o,pako_1}var pakoExports=requirePako();const pako=getDefaultExportFromCjs$1(pakoExports);var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=new Uint8Array(256);for(var i$1=0;i$1<chars.length;i$1++)lookup$1[chars.charCodeAt(i$1)]=i$1;var decodeFromBase64=function(a){var e=a.length*.75,n=a.length,s,o=0,l,c,u,h;a[a.length-1]==="="&&(e--,a[a.length-2]==="="&&e--);var f=new Uint8Array(e);for(s=0;s<n;s+=4)l=lookup$1[a.charCodeAt(s)],c=lookup$1[a.charCodeAt(s+1)],u=lookup$1[a.charCodeAt(s+2)],h=lookup$1[a.charCodeAt(s+3)],f[o++]=l<<2|c>>4,f[o++]=(c&15)<<4|u>>2,f[o++]=(u&3)<<6|h&63;return f},arrayToString=function(a){for(var e="",n=0;n<a.length;n++)e+=String.fromCharCode(a[n]);return e},decompressJson=function(a){return arrayToString(pako.inflate(decodeFromBase64(a)))},padStart=function(a,e,n){for(var s="",o=0,l=e-a.length;o<l;o++)s+=n;return s+a};const CourierBoldCompressed="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",CourierBoldObliqueCompressed="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",CourierObliqueCompressed="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",CourierCompressed="eJyFWdtSGzkQ/RXXPO1WmZSBEAJvjnESb8AmGENCKg+ypj3Wohk5ugAmlX9fzUCyW6s+ysuUfVqXvh61Zr4XI1PX1PjiuLg6C05U1Ns/Ojx42TsYHB4eFf3irWn8VNQUB4xMsIpsCwatU1DUSm8T+JpUtW7XP6NShToiEy+0ksOm0nHkIP53b9UDlefKy3Vx7G2gfjFaCyukJzundu74wVNTUnlhatE8a/XmjXkojr/s7O33d/YOBv3D3YP+68HB136xiEOtVg2dG6e8Mk1xvLM7GPxHcLlW8rYh54rjOLO4Iuu6YcVgsP9iMBjELabGK/lkymZrWxt6f8g/e7tHr4/68Xk06J673XOve+53z8PesDRL6s23zlPtepNGGrsxVngqX/R6Q617F+1qrndBjuxdRONu4ziqVE01l2vqHNgtMveiKYUtf0rjwJHYvH/26MGrvX7x6ee/l3uv+sXQydZPtjh+tXfUL07o1/+d3YPDfjH35fvrOHO3+3n1/LN19hl5q2T0x5fvxfWnOL/11zQq4jYiuuFH/38wPUgt6hT/Fkw0dKlTSRPqZevnqkllpdFa2BTfkJVtdiYCUUeRi94BGnQBY9YTlhpNKyQC04RrV3S3zCwdXIrKWFQihdfbzZoY66MpyjCWOC3cOoUfyZoUNQ0TJX/PjPRrS8zYVSxZBlV3zFinHhiQ7jjriPdpoziFpdGGWcNRrYBIt1WcbvotCCYHK0uxDhkzvwVyHVOksWd0H6bQmxQapdBJCo1T6G0KvUuh9yk0SaG/UuhDCp2m0FkKTVNolkLnKfQxhS5SaJ5Clym0SKGrFLpOoU8p9DmFblJoGU+iW/I8bSyjDNTp8zzIKVIpqawMDIuGlrRdPDiYEun4jVeG4ZwlU2MM/zIVxHABU1AMy6WQSqG/U4ihV6aEGW8xVcvQ3oZxZQox3MDQC+P7kEJ3KXSfQgyTbhnS5/MLJMKSO0y78bls9EqX8KgvzT3jZ/50bo9L3fYraQq1XR3Ls1vu7FhpYxV7HoBVZLDxGJeMA7uycarrOmHXwnuzCipKagMooBV3C/9GDFy/YqpjxSR+bORYmilFVXFH2hPOtmJPDUcbO7LE1H7shURlxYYjtdj6E2PFv+5dCpfxcF4KXPQrAEBOWquNU0yhRkv92gTUKT4d+nxqRwdwrY+QwXONS8fkK01MOYO6qoW0XA4vLXEbl8YLyddbGa9axNpv2SqU8SoWG26Gu0NTCRtqLQKzjalik8mwtBSsHVTzCTtkWh5jy1Xs8fim8BQcsDOE8xvUkeSCZncQvL/b3pKpTg32NQhnVo+lGa+yMeWZoE1wPAmknwBJE/IRJRC6z1iDUt0pLps/A82GucoQYNIiN2kLJrnu2oVqhHJLLvg6WWA3CFQMC6BdQBPGeJOTSBDc/SNrqPz5voLZClGOBHkgeL9MswpolKOAUS+zq43QaoBVxxmedMBMBwlRgd21eaSmYgQXYIt3WSNDtkhywiEKqQWKSGjrTcZzl2tjmcVmaPcL4Lc5wEug7QJtEPjM7N5tuNA1OExPNAMpOEQ4oNU6aK82mmkzAzDwEhgYWy2vhC7VirldbTE1TME+Kpcs42yaZU4dLJJAjwbRIAroFDhoAhZq37zFhoF7/ba05pYa9g5kqVIOdL3vQLAnOUYJsar5q8gY5JQFBhnkmRsw4QZ47PklF3gFNvZMhzKCpKCzvOVR6wdPRyQYovYhk5XAwY+oNNDeMxQRdPSgSDm0MzZilm1LgIUnpD0TK8+TtL83GUbEqtXMKw0FNDL5PnOMXF+CDqfj8ZjANiYyo9o8k698Rn7I5vEpCJy3oqRaWEZzyrDCBHhpghLnFGgdnbYWmjkZ2psJKHCTy6gGdE2L38QP+IeQQRXg0mjQc1S5oPJOmGdDN8trXkaW4L52GBCiEVAiQDYvleTCcAIWsllrpiA+BuAX+bTOSodgzSHkaL7nmoF1HjMVMkanPdr7NmsKaAQm2VIAKvj85cZUbbwbw70fwVwasCguhb5W5S+03EH+CIxqsktFl+MTQqEaH4f2O+TXfvGBbHMulG2/Hn/98Q/b2xEO",HelveticaBoldCompressed=JSON.parse('"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"'),HelveticaBoldObliqueCompressed=JSON.parse('"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"'),HelveticaObliqueCompressed=JSON.parse('"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"'),HelveticaCompressed=JSON.parse('"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"'),TimesBoldCompressed=JSON.parse('"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"'),TimesBoldItalicCompressed=JSON.parse('"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"'),TimesItalicCompressed=JSON.parse('"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"'),TimesRomanCompressed=JSON.parse('"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"'),SymbolCompressed="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",ZapfDingbatsCompressed="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var compressedJsonForFontName={Courier:CourierCompressed,"Courier-Bold":CourierBoldCompressed,"Courier-Oblique":CourierObliqueCompressed,"Courier-BoldOblique":CourierBoldObliqueCompressed,Helvetica:HelveticaCompressed,"Helvetica-Bold":HelveticaBoldCompressed,"Helvetica-Oblique":HelveticaObliqueCompressed,"Helvetica-BoldOblique":HelveticaBoldObliqueCompressed,"Times-Roman":TimesRomanCompressed,"Times-Bold":TimesBoldCompressed,"Times-Italic":TimesItalicCompressed,"Times-BoldItalic":TimesBoldItalicCompressed,Symbol:SymbolCompressed,ZapfDingbats:ZapfDingbatsCompressed},FontNames;(function(a){a.Courier="Courier",a.CourierBold="Courier-Bold",a.CourierOblique="Courier-Oblique",a.CourierBoldOblique="Courier-BoldOblique",a.Helvetica="Helvetica",a.HelveticaBold="Helvetica-Bold",a.HelveticaOblique="Helvetica-Oblique",a.HelveticaBoldOblique="Helvetica-BoldOblique",a.TimesRoman="Times-Roman",a.TimesRomanBold="Times-Bold",a.TimesRomanItalic="Times-Italic",a.TimesRomanBoldItalic="Times-BoldItalic",a.Symbol="Symbol",a.ZapfDingbats="ZapfDingbats"})(FontNames||(FontNames={}));var fontCache={},Font=function(){function a(){var e=this;this.getWidthOfGlyph=function(n){return e.CharWidths[n]},this.getXAxisKerningForPair=function(n,s){return(e.KernPairXAmounts[n]||{})[s]}}return a.load=function(e){var n=fontCache[e];if(n)return n;var s=decompressJson(compressedJsonForFontName[e]),o=Object.assign(new a,JSON.parse(s));return o.CharWidths=o.CharMetrics.reduce(function(l,c){return l[c.N]=c.WX,l},{}),o.KernPairXAmounts=o.KernPairs.reduce(function(l,c){var u=c[0],h=c[1],f=c[2];return l[u]||(l[u]={}),l[u][h]=f,l},{}),fontCache[e]=o,o},a}();const AllEncodingsCompressed="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";var decompressedEncodings=decompressJson(AllEncodingsCompressed),allUnicodeMappings=JSON.parse(decompressedEncodings),Encoding=function(){function a(e,n){var s=this;this.canEncodeUnicodeCodePoint=function(o){return o in s.unicodeMappings},this.encodeUnicodeCodePoint=function(o){var l=s.unicodeMappings[o];if(!l){var c=String.fromCharCode(o),u="0x"+padStart(o.toString(16),4,"0"),h=s.name+' cannot encode "'+c+'" ('+u+")";throw new Error(h)}return{code:l[0],name:l[1]}},this.name=e,this.supportedCodePoints=Object.keys(n).map(Number).sort(function(o,l){return o-l}),this.unicodeMappings=n}return a}(),Encodings={Symbol:new Encoding("Symbol",allUnicodeMappings.symbol),ZapfDingbats:new Encoding("ZapfDingbats",allUnicodeMappings.zapfdingbats),WinAnsi:new Encoding("WinAnsi",allUnicodeMappings.win1252)},values=function(a){return Object.keys(a).map(function(e){return a[e]})},StandardFontValues=values(FontNames),isStandardFont=function(a){return StandardFontValues.includes(a)},rectanglesAreEqual=function(a,e){return a.x===e.x&&a.y===e.y&&a.width===e.width&&a.height===e.height},backtick=function(a){return"`"+a+"`"},singleQuote=function(a){return"'"+a+"'"},formatValue$1=function(a){var e=typeof a;return e==="string"?singleQuote(a):e==="undefined"?backtick(a):a},createValueErrorMsg=function(a,e,n){for(var s=new Array(n.length),o=0,l=n.length;o<l;o++){var c=n[o];s[o]=formatValue$1(c)}var u=s.join(" or ");return backtick(e)+" must be one of "+u+", but was actually "+formatValue$1(a)},assertIsOneOf=function(a,e,n){Array.isArray(n)||(n=values(n));for(var s=0,o=n.length;s<o;s++)if(a===n[s])return;throw new TypeError(createValueErrorMsg(a,e,n))},assertIsOneOfOrUndefined=function(a,e,n){Array.isArray(n)||(n=values(n)),assertIsOneOf(a,e,n.concat(void 0))},assertIsSubset=function(a,e,n){Array.isArray(n)||(n=values(n));for(var s=0,o=a.length;s<o;s++)assertIsOneOf(a[s],e,n)},getType$1=function(a){return a===null?"null":a===void 0?"undefined":typeof a=="string"?"string":isNaN(a)?"NaN":typeof a=="number"?"number":typeof a=="boolean"?"boolean":typeof a=="symbol"?"symbol":typeof a=="bigint"?"bigint":a.constructor&&a.constructor.name?a.constructor.name:a.name?a.name:a.constructor?String(a.constructor):String(a)},isType=function(a,e){return e==="null"?a===null:e==="undefined"?a===void 0:e==="string"?typeof a=="string":e==="number"?typeof a=="number"&&!isNaN(a):e==="boolean"?typeof a=="boolean":e==="symbol"?typeof a=="symbol":e==="bigint"?typeof a=="bigint":e===Date?a instanceof Date:e===Array?a instanceof Array:e===Uint8Array?a instanceof Uint8Array:e===ArrayBuffer?a instanceof ArrayBuffer:e===Function?a instanceof Function:a instanceof e[0]},createTypeErrorMsg=function(a,e,n){for(var s=new Array(n.length),o=0,l=n.length;o<l;o++){var c=n[o];c==="null"&&(s[o]=backtick("null")),c==="undefined"&&(s[o]=backtick("undefined")),c==="string"?s[o]=backtick("string"):c==="number"?s[o]=backtick("number"):c==="boolean"?s[o]=backtick("boolean"):c==="symbol"?s[o]=backtick("symbol"):c==="bigint"?s[o]=backtick("bigint"):c===Array?s[o]=backtick("Array"):c===Uint8Array?s[o]=backtick("Uint8Array"):c===ArrayBuffer?s[o]=backtick("ArrayBuffer"):s[o]=backtick(c[1])}var u=s.join(" or ");return backtick(e)+" must be of type "+u+", but was actually of type "+backtick(getType$1(a))},assertIs=function(a,e,n){for(var s=0,o=n.length;s<o;s++)if(isType(a,n[s]))return;throw new TypeError(createTypeErrorMsg(a,e,n))},assertOrUndefined=function(a,e,n){assertIs(a,e,n.concat("undefined"))},assertEachIs=function(a,e,n){for(var s=0,o=a.length;s<o;s++)assertIs(a[s],e,n)},assertRange=function(a,e,n,s){if(assertIs(a,e,["number"]),assertIs(n,"min",["number"]),assertIs(s,"max",["number"]),s=Math.max(n,s),a<n||a>s)throw new Error(backtick(e)+" must be at least "+n+" and at most "+s+", but was actually "+a)},assertRangeOrUndefined=function(a,e,n,s){assertIs(a,e,["number","undefined"]),typeof a=="number"&&assertRange(a,e,n,s)},assertMultiple=function(a,e,n){if(assertIs(a,e,["number"]),a%n!==0)throw new Error(backtick(e)+" must be a multiple of "+n+", but was actually "+a)},assertInteger=function(a,e){if(!Number.isInteger(a))throw new Error(backtick(e)+" must be an integer, but was actually "+a)},assertPositive=function(a,e){if(![1,0].includes(Math.sign(a)))throw new Error(backtick(e)+" must be a positive number or 0, but was actually "+a)},pdfDocEncodingToUnicode=new Uint16Array(256);for(var idx$2=0;idx$2<256;idx$2++)pdfDocEncodingToUnicode[idx$2]=idx$2;pdfDocEncodingToUnicode[22]=toCharCode("");pdfDocEncodingToUnicode[24]=toCharCode("˘");pdfDocEncodingToUnicode[25]=toCharCode("ˇ");pdfDocEncodingToUnicode[26]=toCharCode("ˆ");pdfDocEncodingToUnicode[27]=toCharCode("˙");pdfDocEncodingToUnicode[28]=toCharCode("˝");pdfDocEncodingToUnicode[29]=toCharCode("˛");pdfDocEncodingToUnicode[30]=toCharCode("˚");pdfDocEncodingToUnicode[31]=toCharCode("˜");pdfDocEncodingToUnicode[127]=toCharCode("�");pdfDocEncodingToUnicode[128]=toCharCode("•");pdfDocEncodingToUnicode[129]=toCharCode("†");pdfDocEncodingToUnicode[130]=toCharCode("‡");pdfDocEncodingToUnicode[131]=toCharCode("…");pdfDocEncodingToUnicode[132]=toCharCode("—");pdfDocEncodingToUnicode[133]=toCharCode("–");pdfDocEncodingToUnicode[134]=toCharCode("ƒ");pdfDocEncodingToUnicode[135]=toCharCode("⁄");pdfDocEncodingToUnicode[136]=toCharCode("‹");pdfDocEncodingToUnicode[137]=toCharCode("›");pdfDocEncodingToUnicode[138]=toCharCode("−");pdfDocEncodingToUnicode[139]=toCharCode("‰");pdfDocEncodingToUnicode[140]=toCharCode("„");pdfDocEncodingToUnicode[141]=toCharCode("“");pdfDocEncodingToUnicode[142]=toCharCode("”");pdfDocEncodingToUnicode[143]=toCharCode("‘");pdfDocEncodingToUnicode[144]=toCharCode("’");pdfDocEncodingToUnicode[145]=toCharCode("‚");pdfDocEncodingToUnicode[146]=toCharCode("™");pdfDocEncodingToUnicode[147]=toCharCode("ﬁ");pdfDocEncodingToUnicode[148]=toCharCode("ﬂ");pdfDocEncodingToUnicode[149]=toCharCode("Ł");pdfDocEncodingToUnicode[150]=toCharCode("Œ");pdfDocEncodingToUnicode[151]=toCharCode("Š");pdfDocEncodingToUnicode[152]=toCharCode("Ÿ");pdfDocEncodingToUnicode[153]=toCharCode("Ž");pdfDocEncodingToUnicode[154]=toCharCode("ı");pdfDocEncodingToUnicode[155]=toCharCode("ł");pdfDocEncodingToUnicode[156]=toCharCode("œ");pdfDocEncodingToUnicode[157]=toCharCode("š");pdfDocEncodingToUnicode[158]=toCharCode("ž");pdfDocEncodingToUnicode[159]=toCharCode("�");pdfDocEncodingToUnicode[160]=toCharCode("€");pdfDocEncodingToUnicode[173]=toCharCode("�");var pdfDocEncodingDecode=function(a){for(var e=new Array(a.length),n=0,s=a.length;n<s;n++)e[n]=pdfDocEncodingToUnicode[a[n]];return String.fromCodePoint.apply(String,e)},Cache=function(){function a(e){this.populate=e,this.value=void 0}return a.prototype.getValue=function(){return this.value},a.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},a.prototype.invalidate=function(){this.value=void 0},a.populatedBy=function(e){return new a(e)},a}(),MethodNotImplementedError=function(a){__extends(e,a);function e(n,s){var o=this,l="Method "+n+"."+s+"() not implemented";return o=a.call(this,l)||this,o}return e}(Error),PrivateConstructorError=function(a){__extends(e,a);function e(n){var s=this,o="Cannot construct "+n+" - it has a private constructor";return s=a.call(this,o)||this,s}return e}(Error),UnexpectedObjectTypeError=function(a){__extends(e,a);function e(n,s){var o=this,l=function(h){var f,d;return(f=h==null?void 0:h.name)!==null&&f!==void 0?f:(d=h==null?void 0:h.constructor)===null||d===void 0?void 0:d.name},c=Array.isArray(n)?n.map(l):[l(n)],u="Expected instance of "+c.join(" or ")+", "+("but got instance of "+(s&&l(s)));return o=a.call(this,u)||this,o}return e}(Error),UnsupportedEncodingError=function(a){__extends(e,a);function e(n){var s=this,o=n+" stream encoding not supported";return s=a.call(this,o)||this,s}return e}(Error),ReparseError=function(a){__extends(e,a);function e(n,s){var o=this,l="Cannot call "+n+"."+s+"() more than once";return o=a.call(this,l)||this,o}return e}(Error);(function(a){__extends(e,a);function e(n){var s=this,o="Missing catalog (ref="+n+")";return s=a.call(this,o)||this,s}return e})(Error);var MissingPageContentsEmbeddingError=function(a){__extends(e,a);function e(){var n=this,s="Can't embed page with missing Contents";return n=a.call(this,s)||this,n}return e}(Error),UnrecognizedStreamTypeError=function(a){__extends(e,a);function e(n){var s,o,l,c=this,u=(l=(o=(s=n==null?void 0:n.contructor)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:n==null?void 0:n.name)!==null&&l!==void 0?l:n,h="Unrecognized stream type: "+u;return c=a.call(this,h)||this,c}return e}(Error),PageEmbeddingMismatchedContextError=function(a){__extends(e,a);function e(){var n=this,s="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return n=a.call(this,s)||this,n}return e}(Error),PDFArrayIsNotRectangleError=function(a){__extends(e,a);function e(n){var s=this,o="Attempted to convert PDFArray with "+n+" elements to rectangle, but must have exactly 4 elements.";return s=a.call(this,o)||this,s}return e}(Error),InvalidPDFDateStringError=function(a){__extends(e,a);function e(n){var s=this,o='Attempted to convert "'+n+'" to a date, but it does not match the PDF date string format.';return s=a.call(this,o)||this,s}return e}(Error),InvalidTargetIndexError=function(a){__extends(e,a);function e(n,s){var o=this,l="Invalid targetIndex specified: targetIndex="+n+" must be less than Count="+s;return o=a.call(this,l)||this,o}return e}(Error),CorruptPageTreeError=function(a){__extends(e,a);function e(n,s){var o=this,l="Failed to "+s+" at targetIndex="+n+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return o=a.call(this,l)||this,o}return e}(Error),IndexOutOfBoundsError=function(a){__extends(e,a);function e(n,s,o){var l=this,c="index should be at least "+s+" and at most "+o+", but was actually "+n;return l=a.call(this,c)||this,l}return e}(Error),InvalidAcroFieldValueError=function(a){__extends(e,a);function e(){var n=this,s="Attempted to set invalid field value";return n=a.call(this,s)||this,n}return e}(Error),MultiSelectValueError=function(a){__extends(e,a);function e(){var n=this,s="Attempted to select multiple values for single-select field";return n=a.call(this,s)||this,n}return e}(Error),MissingDAEntryError=function(a){__extends(e,a);function e(n){var s=this,o="No /DA (default appearance) entry found for field: "+n;return s=a.call(this,o)||this,s}return e}(Error),MissingTfOperatorError=function(a){__extends(e,a);function e(n){var s=this,o="No Tf operator found for DA of field: "+n;return s=a.call(this,o)||this,s}return e}(Error),NumberParsingError=function(a){__extends(e,a);function e(n,s){var o=this,l="Failed to parse number "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+'): "'+s+'"');return o=a.call(this,l)||this,o}return e}(Error),PDFParsingError=function(a){__extends(e,a);function e(n,s){var o=this,l="Failed to parse PDF document "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+"): "+s);return o=a.call(this,l)||this,o}return e}(Error),NextByteAssertionError=function(a){__extends(e,a);function e(n,s,o){var l=this,c="Expected next byte to be "+s+" but it was actually "+o;return l=a.call(this,n,c)||this,l}return e}(PDFParsingError),PDFObjectParsingError=function(a){__extends(e,a);function e(n,s){var o=this,l="Failed to parse PDF object starting with the following byte: "+s;return o=a.call(this,n,l)||this,o}return e}(PDFParsingError),PDFInvalidObjectParsingError=function(a){__extends(e,a);function e(n){var s=this,o="Failed to parse invalid PDF object";return s=a.call(this,n,o)||this,s}return e}(PDFParsingError),PDFStreamParsingError=function(a){__extends(e,a);function e(n){var s=this,o="Failed to parse PDF stream";return s=a.call(this,n,o)||this,s}return e}(PDFParsingError),UnbalancedParenthesisError=function(a){__extends(e,a);function e(n){var s=this,o="Failed to parse PDF literal string due to unbalanced parenthesis";return s=a.call(this,n,o)||this,s}return e}(PDFParsingError),StalledParserError=function(a){__extends(e,a);function e(n){var s=this,o="Parser stalled";return s=a.call(this,n,o)||this,s}return e}(PDFParsingError),MissingPDFHeaderError=function(a){__extends(e,a);function e(n){var s=this,o="No PDF header found";return s=a.call(this,n,o)||this,s}return e}(PDFParsingError),MissingKeywordError=function(a){__extends(e,a);function e(n,s){var o=this,l="Did not find expected keyword '"+arrayAsString(s)+"'";return o=a.call(this,n,l)||this,o}return e}(PDFParsingError),CharCodes;(function(a){a[a.Null=0]="Null",a[a.Backspace=8]="Backspace",a[a.Tab=9]="Tab",a[a.Newline=10]="Newline",a[a.FormFeed=12]="FormFeed",a[a.CarriageReturn=13]="CarriageReturn",a[a.Space=32]="Space",a[a.ExclamationPoint=33]="ExclamationPoint",a[a.Hash=35]="Hash",a[a.Percent=37]="Percent",a[a.LeftParen=40]="LeftParen",a[a.RightParen=41]="RightParen",a[a.Plus=43]="Plus",a[a.Minus=45]="Minus",a[a.Dash=45]="Dash",a[a.Period=46]="Period",a[a.ForwardSlash=47]="ForwardSlash",a[a.Zero=48]="Zero",a[a.One=49]="One",a[a.Two=50]="Two",a[a.Three=51]="Three",a[a.Four=52]="Four",a[a.Five=53]="Five",a[a.Six=54]="Six",a[a.Seven=55]="Seven",a[a.Eight=56]="Eight",a[a.Nine=57]="Nine",a[a.LessThan=60]="LessThan",a[a.GreaterThan=62]="GreaterThan",a[a.A=65]="A",a[a.D=68]="D",a[a.E=69]="E",a[a.F=70]="F",a[a.O=79]="O",a[a.P=80]="P",a[a.R=82]="R",a[a.LeftSquareBracket=91]="LeftSquareBracket",a[a.BackSlash=92]="BackSlash",a[a.RightSquareBracket=93]="RightSquareBracket",a[a.a=97]="a",a[a.b=98]="b",a[a.d=100]="d",a[a.e=101]="e",a[a.f=102]="f",a[a.i=105]="i",a[a.j=106]="j",a[a.l=108]="l",a[a.m=109]="m",a[a.n=110]="n",a[a.o=111]="o",a[a.r=114]="r",a[a.s=115]="s",a[a.t=116]="t",a[a.u=117]="u",a[a.x=120]="x",a[a.LeftCurly=123]="LeftCurly",a[a.RightCurly=125]="RightCurly",a[a.Tilde=126]="Tilde"})(CharCodes||(CharCodes={}));const CharCodes$1=CharCodes;var PDFHeader=function(){function a(e,n){this.major=String(e),this.minor=String(n)}return a.prototype.toString=function(){var e=charFromCode(129);return"%PDF-"+this.major+"."+this.minor+`
%`+e+e+e+e},a.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},a.prototype.copyBytesInto=function(e,n){var s=n;return e[n++]=CharCodes$1.Percent,e[n++]=CharCodes$1.P,e[n++]=CharCodes$1.D,e[n++]=CharCodes$1.F,e[n++]=CharCodes$1.Dash,n+=copyStringIntoBuffer(this.major,e,n),e[n++]=CharCodes$1.Period,n+=copyStringIntoBuffer(this.minor,e,n),e[n++]=CharCodes$1.Newline,e[n++]=CharCodes$1.Percent,e[n++]=129,e[n++]=129,e[n++]=129,e[n++]=129,n-s},a.forVersion=function(e,n){return new a(e,n)},a}(),PDFObject=function(){function a(){}return a.prototype.clone=function(e){throw new MethodNotImplementedError(this.constructor.name,"clone")},a.prototype.toString=function(){throw new MethodNotImplementedError(this.constructor.name,"toString")},a.prototype.sizeInBytes=function(){throw new MethodNotImplementedError(this.constructor.name,"sizeInBytes")},a.prototype.copyBytesInto=function(e,n){throw new MethodNotImplementedError(this.constructor.name,"copyBytesInto")},a}(),PDFNumber=function(a){__extends(e,a);function e(n){var s=a.call(this)||this;return s.numberValue=n,s.stringValue=numberToString(n),s}return e.prototype.asNumber=function(){return this.numberValue},e.prototype.value=function(){return this.numberValue},e.prototype.clone=function(){return e.of(this.numberValue)},e.prototype.toString=function(){return this.stringValue},e.prototype.sizeInBytes=function(){return this.stringValue.length},e.prototype.copyBytesInto=function(n,s){return s+=copyStringIntoBuffer(this.stringValue,n,s),this.stringValue.length},e.of=function(n){return new e(n)},e}(PDFObject),PDFArray=function(a){__extends(e,a);function e(n){var s=a.call(this)||this;return s.array=[],s.context=n,s}return e.prototype.size=function(){return this.array.length},e.prototype.push=function(n){this.array.push(n)},e.prototype.insert=function(n,s){this.array.splice(n,0,s)},e.prototype.indexOf=function(n){var s=this.array.indexOf(n);return s===-1?void 0:s},e.prototype.remove=function(n){this.array.splice(n,1)},e.prototype.set=function(n,s){this.array[n]=s},e.prototype.get=function(n){return this.array[n]},e.prototype.lookupMaybe=function(n){for(var s,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return(s=this.context).lookupMaybe.apply(s,__spreadArrays([this.get(n)],o))},e.prototype.lookup=function(n){for(var s,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return(s=this.context).lookup.apply(s,__spreadArrays([this.get(n)],o))},e.prototype.asRectangle=function(){if(this.size()!==4)throw new PDFArrayIsNotRectangleError(this.size());var n=this.lookup(0,PDFNumber).asNumber(),s=this.lookup(1,PDFNumber).asNumber(),o=this.lookup(2,PDFNumber).asNumber(),l=this.lookup(3,PDFNumber).asNumber(),c=n,u=s,h=o-n,f=l-s;return{x:c,y:u,width:h,height:f}},e.prototype.asArray=function(){return this.array.slice()},e.prototype.clone=function(n){for(var s=e.withContext(n||this.context),o=0,l=this.size();o<l;o++)s.push(this.array[o]);return s},e.prototype.toString=function(){for(var n="[ ",s=0,o=this.size();s<o;s++)n+=this.get(s).toString(),n+=" ";return n+="]",n},e.prototype.sizeInBytes=function(){for(var n=3,s=0,o=this.size();s<o;s++)n+=this.get(s).sizeInBytes()+1;return n},e.prototype.copyBytesInto=function(n,s){var o=s;n[s++]=CharCodes$1.LeftSquareBracket,n[s++]=CharCodes$1.Space;for(var l=0,c=this.size();l<c;l++)s+=this.get(l).copyBytesInto(n,s),n[s++]=CharCodes$1.Space;return n[s++]=CharCodes$1.RightSquareBracket,s-o},e.prototype.scalePDFNumbers=function(n,s){for(var o=0,l=this.size();o<l;o++){var c=this.lookup(o);if(c instanceof PDFNumber){var u=o%2===0?n:s;this.set(o,PDFNumber.of(c.asNumber()*u))}}},e.withContext=function(n){return new e(n)},e}(PDFObject),ENFORCER$2={},PDFBool=function(a){__extends(e,a);function e(n,s){var o=this;if(n!==ENFORCER$2)throw new PrivateConstructorError("PDFBool");return o=a.call(this)||this,o.value=s,o}return e.prototype.asBoolean=function(){return this.value},e.prototype.clone=function(){return this},e.prototype.toString=function(){return String(this.value)},e.prototype.sizeInBytes=function(){return this.value?4:5},e.prototype.copyBytesInto=function(n,s){return this.value?(n[s++]=CharCodes$1.t,n[s++]=CharCodes$1.r,n[s++]=CharCodes$1.u,n[s++]=CharCodes$1.e,4):(n[s++]=CharCodes$1.f,n[s++]=CharCodes$1.a,n[s++]=CharCodes$1.l,n[s++]=CharCodes$1.s,n[s++]=CharCodes$1.e,5)},e.True=new e(ENFORCER$2,!0),e.False=new e(ENFORCER$2,!1),e}(PDFObject),IsDelimiter=new Uint8Array(256);IsDelimiter[CharCodes$1.LeftParen]=1;IsDelimiter[CharCodes$1.RightParen]=1;IsDelimiter[CharCodes$1.LessThan]=1;IsDelimiter[CharCodes$1.GreaterThan]=1;IsDelimiter[CharCodes$1.LeftSquareBracket]=1;IsDelimiter[CharCodes$1.RightSquareBracket]=1;IsDelimiter[CharCodes$1.LeftCurly]=1;IsDelimiter[CharCodes$1.RightCurly]=1;IsDelimiter[CharCodes$1.ForwardSlash]=1;IsDelimiter[CharCodes$1.Percent]=1;var IsWhitespace=new Uint8Array(256);IsWhitespace[CharCodes$1.Null]=1;IsWhitespace[CharCodes$1.Tab]=1;IsWhitespace[CharCodes$1.Newline]=1;IsWhitespace[CharCodes$1.FormFeed]=1;IsWhitespace[CharCodes$1.CarriageReturn]=1;IsWhitespace[CharCodes$1.Space]=1;var IsIrregular=new Uint8Array(256);for(var idx$1=0,len$1=256;idx$1<len$1;idx$1++)IsIrregular[idx$1]=IsWhitespace[idx$1]||IsDelimiter[idx$1]?1:0;IsIrregular[CharCodes$1.Hash]=1;var decodeName=function(a){return a.replace(/#([\dABCDEF]{2})/g,function(e,n){return charFromHexCode(n)})},isRegularChar=function(a){return a>=CharCodes$1.ExclamationPoint&&a<=CharCodes$1.Tilde&&!IsIrregular[a]},ENFORCER$1={},pool$1=new Map,PDFName=function(a){__extends(e,a);function e(n,s){var o=this;if(n!==ENFORCER$1)throw new PrivateConstructorError("PDFName");o=a.call(this)||this;for(var l="/",c=0,u=s.length;c<u;c++){var h=s[c],f=toCharCode(h);l+=isRegularChar(f)?h:"#"+toHexString(f)}return o.encodedName=l,o}return e.prototype.asBytes=function(){for(var n=[],s="",o=!1,l=function(p){p!==void 0&&n.push(p),o=!1},c=1,u=this.encodedName.length;c<u;c++){var h=this.encodedName[c],f=toCharCode(h),d=this.encodedName[c+1];o?f>=CharCodes$1.Zero&&f<=CharCodes$1.Nine||f>=CharCodes$1.a&&f<=CharCodes$1.f||f>=CharCodes$1.A&&f<=CharCodes$1.F?(s+=h,(s.length===2||!(d>="0"&&d<="9"||d>="a"&&d<="f"||d>="A"&&d<="F"))&&(l(parseInt(s,16)),s="")):l(f):f===CharCodes$1.Hash?o=!0:l(f)}return new Uint8Array(n)},e.prototype.decodeText=function(){var n=this.asBytes();return String.fromCharCode.apply(String,Array.from(n))},e.prototype.asString=function(){return this.encodedName},e.prototype.value=function(){return this.encodedName},e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.encodedName},e.prototype.sizeInBytes=function(){return this.encodedName.length},e.prototype.copyBytesInto=function(n,s){return s+=copyStringIntoBuffer(this.encodedName,n,s),this.encodedName.length},e.of=function(n){var s=decodeName(n),o=pool$1.get(s);return o||(o=new e(ENFORCER$1,s),pool$1.set(s,o)),o},e.Length=e.of("Length"),e.FlateDecode=e.of("FlateDecode"),e.Resources=e.of("Resources"),e.Font=e.of("Font"),e.XObject=e.of("XObject"),e.ExtGState=e.of("ExtGState"),e.Contents=e.of("Contents"),e.Type=e.of("Type"),e.Parent=e.of("Parent"),e.MediaBox=e.of("MediaBox"),e.Page=e.of("Page"),e.Annots=e.of("Annots"),e.TrimBox=e.of("TrimBox"),e.ArtBox=e.of("ArtBox"),e.BleedBox=e.of("BleedBox"),e.CropBox=e.of("CropBox"),e.Rotate=e.of("Rotate"),e.Title=e.of("Title"),e.Author=e.of("Author"),e.Subject=e.of("Subject"),e.Creator=e.of("Creator"),e.Keywords=e.of("Keywords"),e.Producer=e.of("Producer"),e.CreationDate=e.of("CreationDate"),e.ModDate=e.of("ModDate"),e}(PDFObject),PDFNull=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.asNull=function(){return null},e.prototype.clone=function(){return this},e.prototype.toString=function(){return"null"},e.prototype.sizeInBytes=function(){return 4},e.prototype.copyBytesInto=function(n,s){return n[s++]=CharCodes$1.n,n[s++]=CharCodes$1.u,n[s++]=CharCodes$1.l,n[s++]=CharCodes$1.l,4},e}(PDFObject);const PDFNull$1=new PDFNull;var PDFDict=function(a){__extends(e,a);function e(n,s){var o=a.call(this)||this;return o.dict=n,o.context=s,o}return e.prototype.keys=function(){return Array.from(this.dict.keys())},e.prototype.values=function(){return Array.from(this.dict.values())},e.prototype.entries=function(){return Array.from(this.dict.entries())},e.prototype.set=function(n,s){this.dict.set(n,s)},e.prototype.get=function(n,s){s===void 0&&(s=!1);var o=this.dict.get(n);if(!(o===PDFNull$1&&!s))return o},e.prototype.has=function(n){var s=this.dict.get(n);return s!==void 0&&s!==PDFNull$1},e.prototype.lookupMaybe=function(n){for(var s,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];var c=o.includes(PDFNull$1),u=(s=this.context).lookupMaybe.apply(s,__spreadArrays([this.get(n,c)],o));if(!(u===PDFNull$1&&!c))return u},e.prototype.lookup=function(n){for(var s,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];var c=o.includes(PDFNull$1),u=(s=this.context).lookup.apply(s,__spreadArrays([this.get(n,c)],o));if(!(u===PDFNull$1&&!c))return u},e.prototype.delete=function(n){return this.dict.delete(n)},e.prototype.asMap=function(){return new Map(this.dict)},e.prototype.uniqueKey=function(n){n===void 0&&(n="");for(var s=this.keys(),o=PDFName.of(this.context.addRandomSuffix(n,10));s.includes(o);)o=PDFName.of(this.context.addRandomSuffix(n,10));return o},e.prototype.clone=function(n){for(var s=e.withContext(n||this.context),o=this.entries(),l=0,c=o.length;l<c;l++){var u=o[l],h=u[0],f=u[1];s.set(h,f)}return s},e.prototype.toString=function(){for(var n=`<<
`,s=this.entries(),o=0,l=s.length;o<l;o++){var c=s[o],u=c[0],h=c[1];n+=u.toString()+" "+h.toString()+`
`}return n+=">>",n},e.prototype.sizeInBytes=function(){for(var n=5,s=this.entries(),o=0,l=s.length;o<l;o++){var c=s[o],u=c[0],h=c[1];n+=u.sizeInBytes()+h.sizeInBytes()+2}return n},e.prototype.copyBytesInto=function(n,s){var o=s;n[s++]=CharCodes$1.LessThan,n[s++]=CharCodes$1.LessThan,n[s++]=CharCodes$1.Newline;for(var l=this.entries(),c=0,u=l.length;c<u;c++){var h=l[c],f=h[0],d=h[1];s+=f.copyBytesInto(n,s),n[s++]=CharCodes$1.Space,s+=d.copyBytesInto(n,s),n[s++]=CharCodes$1.Newline}return n[s++]=CharCodes$1.GreaterThan,n[s++]=CharCodes$1.GreaterThan,s-o},e.withContext=function(n){return new e(new Map,n)},e.fromMapWithContext=function(n,s){return new e(n,s)},e}(PDFObject),PDFStream=function(a){__extends(e,a);function e(n){var s=a.call(this)||this;return s.dict=n,s}return e.prototype.clone=function(n){throw new MethodNotImplementedError(this.constructor.name,"clone")},e.prototype.getContentsString=function(){throw new MethodNotImplementedError(this.constructor.name,"getContentsString")},e.prototype.getContents=function(){throw new MethodNotImplementedError(this.constructor.name,"getContents")},e.prototype.getContentsSize=function(){throw new MethodNotImplementedError(this.constructor.name,"getContentsSize")},e.prototype.updateDict=function(){var n=this.getContentsSize();this.dict.set(PDFName.Length,PDFNumber.of(n))},e.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},e.prototype.toString=function(){this.updateDict();var n=this.dict.toString();return n+=`
stream
`,n+=this.getContentsString(),n+=`
endstream`,n},e.prototype.copyBytesInto=function(n,s){this.updateDict();var o=s;s+=this.dict.copyBytesInto(n,s),n[s++]=CharCodes$1.Newline,n[s++]=CharCodes$1.s,n[s++]=CharCodes$1.t,n[s++]=CharCodes$1.r,n[s++]=CharCodes$1.e,n[s++]=CharCodes$1.a,n[s++]=CharCodes$1.m,n[s++]=CharCodes$1.Newline;for(var l=this.getContents(),c=0,u=l.length;c<u;c++)n[s++]=l[c];return n[s++]=CharCodes$1.Newline,n[s++]=CharCodes$1.e,n[s++]=CharCodes$1.n,n[s++]=CharCodes$1.d,n[s++]=CharCodes$1.s,n[s++]=CharCodes$1.t,n[s++]=CharCodes$1.r,n[s++]=CharCodes$1.e,n[s++]=CharCodes$1.a,n[s++]=CharCodes$1.m,s-o},e}(PDFObject),PDFRawStream=function(a){__extends(e,a);function e(n,s){var o=a.call(this,n)||this;return o.contents=s,o}return e.prototype.asUint8Array=function(){return this.contents.slice()},e.prototype.clone=function(n){return e.of(this.dict.clone(n),this.contents.slice())},e.prototype.getContentsString=function(){return arrayAsString(this.contents)},e.prototype.getContents=function(){return this.contents},e.prototype.getContentsSize=function(){return this.contents.length},e.of=function(n,s){return new e(n,s)},e}(PDFStream),ENFORCER={},pool=new Map,PDFRef=function(a){__extends(e,a);function e(n,s,o){var l=this;if(n!==ENFORCER)throw new PrivateConstructorError("PDFRef");return l=a.call(this)||this,l.objectNumber=s,l.generationNumber=o,l.tag=s+" "+o+" R",l}return e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.tag},e.prototype.sizeInBytes=function(){return this.tag.length},e.prototype.copyBytesInto=function(n,s){return s+=copyStringIntoBuffer(this.tag,n,s),this.tag.length},e.of=function(n,s){s===void 0&&(s=0);var o=n+" "+s+" R",l=pool.get(o);return l||(l=new e(ENFORCER,n,s),pool.set(o,l)),l},e}(PDFObject),PDFOperator=function(){function a(e,n){this.name=e,this.args=n||[]}return a.prototype.clone=function(e){for(var n=new Array(this.args.length),s=0,o=n.length;s<o;s++){var l=this.args[s];n[s]=l instanceof PDFObject?l.clone(e):l}return a.of(this.name,n)},a.prototype.toString=function(){for(var e="",n=0,s=this.args.length;n<s;n++)e+=String(this.args[n])+" ";return e+=this.name,e},a.prototype.sizeInBytes=function(){for(var e=0,n=0,s=this.args.length;n<s;n++){var o=this.args[n];e+=(o instanceof PDFObject?o.sizeInBytes():o.length)+1}return e+=this.name.length,e},a.prototype.copyBytesInto=function(e,n){for(var s=n,o=0,l=this.args.length;o<l;o++){var c=this.args[o];c instanceof PDFObject?n+=c.copyBytesInto(e,n):n+=copyStringIntoBuffer(c,e,n),e[n++]=CharCodes$1.Space}return n+=copyStringIntoBuffer(this.name,e,n),n-s},a.of=function(e,n){return new a(e,n)},a}(),PDFOperatorNames;(function(a){a.NonStrokingColor="sc",a.NonStrokingColorN="scn",a.NonStrokingColorRgb="rg",a.NonStrokingColorGray="g",a.NonStrokingColorCmyk="k",a.NonStrokingColorspace="cs",a.StrokingColor="SC",a.StrokingColorN="SCN",a.StrokingColorRgb="RG",a.StrokingColorGray="G",a.StrokingColorCmyk="K",a.StrokingColorspace="CS",a.BeginMarkedContentSequence="BDC",a.BeginMarkedContent="BMC",a.EndMarkedContent="EMC",a.MarkedContentPointWithProps="DP",a.MarkedContentPoint="MP",a.DrawObject="Do",a.ConcatTransformationMatrix="cm",a.PopGraphicsState="Q",a.PushGraphicsState="q",a.SetFlatness="i",a.SetGraphicsStateParams="gs",a.SetLineCapStyle="J",a.SetLineDashPattern="d",a.SetLineJoinStyle="j",a.SetLineMiterLimit="M",a.SetLineWidth="w",a.SetTextMatrix="Tm",a.SetRenderingIntent="ri",a.AppendRectangle="re",a.BeginInlineImage="BI",a.BeginInlineImageData="ID",a.EndInlineImage="EI",a.ClipEvenOdd="W*",a.ClipNonZero="W",a.CloseAndStroke="s",a.CloseFillEvenOddAndStroke="b*",a.CloseFillNonZeroAndStroke="b",a.ClosePath="h",a.AppendBezierCurve="c",a.CurveToReplicateFinalPoint="y",a.CurveToReplicateInitialPoint="v",a.EndPath="n",a.FillEvenOddAndStroke="B*",a.FillEvenOdd="f*",a.FillNonZeroAndStroke="B",a.FillNonZero="f",a.LegacyFillNonZero="F",a.LineTo="l",a.MoveTo="m",a.ShadingFill="sh",a.StrokePath="S",a.BeginText="BT",a.EndText="ET",a.MoveText="Td",a.MoveTextSetLeading="TD",a.NextLine="T*",a.SetCharacterSpacing="Tc",a.SetFontAndSize="Tf",a.SetTextHorizontalScaling="Tz",a.SetTextLineHeight="TL",a.SetTextRenderingMode="Tr",a.SetTextRise="Ts",a.SetWordSpacing="Tw",a.ShowText="Tj",a.ShowTextAdjusted="TJ",a.ShowTextLine="'",a.ShowTextLineAndSpace='"',a.Type3D0="d0",a.Type3D1="d1",a.BeginCompatibilitySection="BX",a.EndCompatibilitySection="EX"})(PDFOperatorNames||(PDFOperatorNames={}));const Ops=PDFOperatorNames;var PDFFlateStream=function(a){__extends(e,a);function e(n,s){var o=a.call(this,n)||this;return o.computeContents=function(){var l=o.getUnencodedContents();return o.encode?pako.deflate(l):l},o.encode=s,s&&n.set(PDFName.of("Filter"),PDFName.of("FlateDecode")),o.contentsCache=Cache.populatedBy(o.computeContents),o}return e.prototype.getContents=function(){return this.contentsCache.access()},e.prototype.getContentsSize=function(){return this.contentsCache.access().length},e.prototype.getUnencodedContents=function(){throw new MethodNotImplementedError(this.constructor.name,"getUnencodedContents")},e}(PDFStream),PDFContentStream=function(a){__extends(e,a);function e(n,s,o){o===void 0&&(o=!0);var l=a.call(this,n,o)||this;return l.operators=s,l}return e.prototype.push=function(){for(var n,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];(n=this.operators).push.apply(n,s)},e.prototype.clone=function(n){for(var s=new Array(this.operators.length),o=0,l=this.operators.length;o<l;o++)s[o]=this.operators[o].clone(n);var c=this,u=c.dict,h=c.encode;return e.of(u.clone(n),s,h)},e.prototype.getContentsString=function(){for(var n="",s=0,o=this.operators.length;s<o;s++)n+=this.operators[s]+`
`;return n},e.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),s=0,o=0,l=this.operators.length;o<l;o++)s+=this.operators[o].copyBytesInto(n,s),n[s++]=CharCodes$1.Newline;return n},e.prototype.getUnencodedContentsSize=function(){for(var n=0,s=0,o=this.operators.length;s<o;s++)n+=this.operators[s].sizeInBytes()+1;return n},e.of=function(n,s,o){return o===void 0&&(o=!0),new e(n,s,o)},e}(PDFFlateStream),SimpleRNG=function(){function a(e){this.seed=e}return a.prototype.nextInt=function(){var e=Math.sin(this.seed++)*1e4;return e-Math.floor(e)},a.withSeed=function(e){return new a(e)},a}(),byAscendingObjectNumber=function(a,e){var n=a[0],s=e[0];return n.objectNumber-s.objectNumber},PDFContext=function(){function a(){this.largestObjectNumber=0,this.header=PDFHeader.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=SimpleRNG.withSeed(1)}return a.prototype.assign=function(e,n){this.indirectObjects.set(e,n),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},a.prototype.nextRef=function(){return this.largestObjectNumber+=1,PDFRef.of(this.largestObjectNumber)},a.prototype.register=function(e){var n=this.nextRef();return this.assign(n,e),n},a.prototype.delete=function(e){return this.indirectObjects.delete(e)},a.prototype.lookupMaybe=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var o=n.includes(PDFNull$1),l=e instanceof PDFRef?this.indirectObjects.get(e):e;if(!(!l||l===PDFNull$1&&!o)){for(var c=0,u=n.length;c<u;c++){var h=n[c];if(h===PDFNull$1){if(l===PDFNull$1)return l}else if(l instanceof h)return l}throw new UnexpectedObjectTypeError(n,l)}},a.prototype.lookup=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var o=e instanceof PDFRef?this.indirectObjects.get(e):e;if(n.length===0)return o;for(var l=0,c=n.length;l<c;l++){var u=n[l];if(u===PDFNull$1){if(o===PDFNull$1)return o}else if(o instanceof u)return o}throw new UnexpectedObjectTypeError(n,o)},a.prototype.getObjectRef=function(e){for(var n=Array.from(this.indirectObjects.entries()),s=0,o=n.length;s<o;s++){var l=n[s],c=l[0],u=l[1];if(u===e)return c}},a.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(byAscendingObjectNumber)},a.prototype.obj=function(e){if(e instanceof PDFObject)return e;if(e==null)return PDFNull$1;if(typeof e=="string")return PDFName.of(e);if(typeof e=="number")return PDFNumber.of(e);if(typeof e=="boolean")return e?PDFBool.True:PDFBool.False;if(Array.isArray(e)){for(var n=PDFArray.withContext(this),s=0,o=e.length;s<o;s++)n.push(this.obj(e[s]));return n}else{for(var l=PDFDict.withContext(this),c=Object.keys(e),s=0,o=c.length;s<o;s++){var u=c[s],h=e[u];h!==void 0&&l.set(PDFName.of(u),this.obj(h))}return l}},a.prototype.stream=function(e,n){return n===void 0&&(n={}),PDFRawStream.of(this.obj(n),typedArrayFor(e))},a.prototype.flateStream=function(e,n){return n===void 0&&(n={}),this.stream(pako.deflate(typedArrayFor(e)),__assign(__assign({},n),{Filter:"FlateDecode"}))},a.prototype.contentStream=function(e,n){return n===void 0&&(n={}),PDFContentStream.of(this.obj(n),e)},a.prototype.formXObject=function(e,n){return n===void 0&&(n={}),this.contentStream(e,__assign(__assign({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},n),{Type:"XObject",Subtype:"Form"}))},a.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),n=PDFOperator.of(Ops.PushGraphicsState),s=PDFContentStream.of(e,[n]);return this.pushGraphicsStateContentStreamRef=this.register(s),this.pushGraphicsStateContentStreamRef},a.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),n=PDFOperator.of(Ops.PopGraphicsState),s=PDFContentStream.of(e,[n]);return this.popGraphicsStateContentStreamRef=this.register(s),this.popGraphicsStateContentStreamRef},a.prototype.addRandomSuffix=function(e,n){return n===void 0&&(n=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,n))},a.create=function(){return new a},a}(),PDFPageLeaf=function(a){__extends(e,a);function e(n,s,o){o===void 0&&(o=!0);var l=a.call(this,n,s)||this;return l.normalized=!1,l.autoNormalizeCTM=o,l}return e.prototype.clone=function(n){for(var s=e.fromMapWithContext(new Map,n||this.context,this.autoNormalizeCTM),o=this.entries(),l=0,c=o.length;l<c;l++){var u=o[l],h=u[0],f=u[1];s.set(h,f)}return s},e.prototype.Parent=function(){return this.lookupMaybe(PDFName.Parent,PDFDict)},e.prototype.Contents=function(){return this.lookup(PDFName.of("Contents"))},e.prototype.Annots=function(){return this.lookupMaybe(PDFName.Annots,PDFArray)},e.prototype.BleedBox=function(){return this.lookupMaybe(PDFName.BleedBox,PDFArray)},e.prototype.TrimBox=function(){return this.lookupMaybe(PDFName.TrimBox,PDFArray)},e.prototype.ArtBox=function(){return this.lookupMaybe(PDFName.ArtBox,PDFArray)},e.prototype.Resources=function(){var n=this.getInheritableAttribute(PDFName.Resources);return this.context.lookupMaybe(n,PDFDict)},e.prototype.MediaBox=function(){var n=this.getInheritableAttribute(PDFName.MediaBox);return this.context.lookup(n,PDFArray)},e.prototype.CropBox=function(){var n=this.getInheritableAttribute(PDFName.CropBox);return this.context.lookupMaybe(n,PDFArray)},e.prototype.Rotate=function(){var n=this.getInheritableAttribute(PDFName.Rotate);return this.context.lookupMaybe(n,PDFNumber)},e.prototype.getInheritableAttribute=function(n){var s;return this.ascend(function(o){s||(s=o.get(n))}),s},e.prototype.setParent=function(n){this.set(PDFName.Parent,n)},e.prototype.addContentStream=function(n){var s=this.normalizedEntries().Contents||this.context.obj([]);this.set(PDFName.Contents,s),s.push(n)},e.prototype.wrapContentStreams=function(n,s){var o=this.Contents();return o instanceof PDFArray?(o.insert(0,n),o.push(s),!0):!1},e.prototype.addAnnot=function(n){var s=this.normalizedEntries().Annots;s.push(n)},e.prototype.removeAnnot=function(n){var s=this.normalizedEntries().Annots,o=s.indexOf(n);o!==void 0&&s.remove(o)},e.prototype.setFontDictionary=function(n,s){var o=this.normalizedEntries().Font;o.set(n,s)},e.prototype.newFontDictionaryKey=function(n){var s=this.normalizedEntries().Font;return s.uniqueKey(n)},e.prototype.newFontDictionary=function(n,s){var o=this.newFontDictionaryKey(n);return this.setFontDictionary(o,s),o},e.prototype.setXObject=function(n,s){var o=this.normalizedEntries().XObject;o.set(n,s)},e.prototype.newXObjectKey=function(n){var s=this.normalizedEntries().XObject;return s.uniqueKey(n)},e.prototype.newXObject=function(n,s){var o=this.newXObjectKey(n);return this.setXObject(o,s),o},e.prototype.setExtGState=function(n,s){var o=this.normalizedEntries().ExtGState;o.set(n,s)},e.prototype.newExtGStateKey=function(n){var s=this.normalizedEntries().ExtGState;return s.uniqueKey(n)},e.prototype.newExtGState=function(n,s){var o=this.newExtGStateKey(n);return this.setExtGState(o,s),o},e.prototype.ascend=function(n){n(this);var s=this.Parent();s&&s.ascend(n)},e.prototype.normalize=function(){if(!this.normalized){var n=this.context,s=this.get(PDFName.Contents),o=this.context.lookup(s);o instanceof PDFStream&&this.set(PDFName.Contents,n.obj([s])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var l=this.getInheritableAttribute(PDFName.Resources),c=n.lookupMaybe(l,PDFDict)||n.obj({});this.set(PDFName.Resources,c);var u=c.lookupMaybe(PDFName.Font,PDFDict)||n.obj({});c.set(PDFName.Font,u);var h=c.lookupMaybe(PDFName.XObject,PDFDict)||n.obj({});c.set(PDFName.XObject,h);var f=c.lookupMaybe(PDFName.ExtGState,PDFDict)||n.obj({});c.set(PDFName.ExtGState,f);var d=this.Annots()||n.obj([]);this.set(PDFName.Annots,d),this.normalized=!0}},e.prototype.normalizedEntries=function(){this.normalize();var n=this.Annots(),s=this.Resources(),o=this.Contents();return{Annots:n,Resources:s,Contents:o,Font:s.lookup(PDFName.Font,PDFDict),XObject:s.lookup(PDFName.XObject,PDFDict),ExtGState:s.lookup(PDFName.ExtGState,PDFDict)}},e.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],e.withContextAndParent=function(n,s){var o=new Map;return o.set(PDFName.Type,PDFName.Page),o.set(PDFName.Parent,s),o.set(PDFName.Resources,n.obj({})),o.set(PDFName.MediaBox,n.obj([0,0,612,792])),new e(o,n,!1)},e.fromMapWithContext=function(n,s,o){return o===void 0&&(o=!0),new e(n,s,o)},e}(PDFDict),PDFObjectCopier=function(){function a(e,n){var s=this;this.traversedObjects=new Map,this.copy=function(o){return o instanceof PDFPageLeaf?s.copyPDFPage(o):o instanceof PDFDict?s.copyPDFDict(o):o instanceof PDFArray?s.copyPDFArray(o):o instanceof PDFStream?s.copyPDFStream(o):o instanceof PDFRef?s.copyPDFIndirectObject(o):o.clone()},this.copyPDFPage=function(o){for(var l=o.clone(),c=PDFPageLeaf.InheritableEntries,u=0,h=c.length;u<h;u++){var f=PDFName.of(c[u]),d=l.getInheritableAttribute(f);!l.get(f)&&d&&l.set(f,d)}return l.delete(PDFName.of("Parent")),s.copyPDFDict(l)},this.copyPDFDict=function(o){if(s.traversedObjects.has(o))return s.traversedObjects.get(o);var l=o.clone(s.dest);s.traversedObjects.set(o,l);for(var c=o.entries(),u=0,h=c.length;u<h;u++){var f=c[u],d=f[0],p=f[1];l.set(d,s.copy(p))}return l},this.copyPDFArray=function(o){if(s.traversedObjects.has(o))return s.traversedObjects.get(o);var l=o.clone(s.dest);s.traversedObjects.set(o,l);for(var c=0,u=o.size();c<u;c++){var h=o.get(c);l.set(c,s.copy(h))}return l},this.copyPDFStream=function(o){if(s.traversedObjects.has(o))return s.traversedObjects.get(o);var l=o.clone(s.dest);s.traversedObjects.set(o,l);for(var c=o.dict.entries(),u=0,h=c.length;u<h;u++){var f=c[u],d=f[0],p=f[1];l.dict.set(d,s.copy(p))}return l},this.copyPDFIndirectObject=function(o){var l=s.traversedObjects.has(o);if(!l){var c=s.dest.nextRef();s.traversedObjects.set(o,c);var u=s.src.lookup(o);if(u){var h=s.copy(u);s.dest.assign(c,h)}}return s.traversedObjects.get(o)},this.src=e,this.dest=n}return a.for=function(e,n){return new a(e,n)},a}(),PDFCrossRefSection=function(){function a(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=e?1:0}return a.prototype.addEntry=function(e,n){this.append({ref:e,offset:n,deleted:!1})},a.prototype.addDeletedEntry=function(e,n){this.append({ref:e,offset:n,deleted:!0})},a.prototype.toString=function(){for(var e=`xref
`,n=0,s=this.subsections.length;n<s;n++){var o=this.subsections[n];e+=o[0].ref.objectNumber+" "+o.length+`
`;for(var l=0,c=o.length;l<c;l++){var u=o[l];e+=padStart$1(String(u.offset),10,"0"),e+=" ",e+=padStart$1(String(u.ref.generationNumber),5,"0"),e+=" ",e+=u.deleted?"f":"n",e+=` 
`}}return e},a.prototype.sizeInBytes=function(){for(var e=5,n=0,s=this.subsections.length;n<s;n++){var o=this.subsections[n],l=o.length,c=o[0];e+=2,e+=String(c.ref.objectNumber).length,e+=String(l).length,e+=20*l}return e},a.prototype.copyBytesInto=function(e,n){var s=n;return e[n++]=CharCodes$1.x,e[n++]=CharCodes$1.r,e[n++]=CharCodes$1.e,e[n++]=CharCodes$1.f,e[n++]=CharCodes$1.Newline,n+=this.copySubsectionsIntoBuffer(this.subsections,e,n),n-s},a.prototype.copySubsectionsIntoBuffer=function(e,n,s){for(var o=s,l=e.length,c=0;c<l;c++){var u=this.subsections[c],h=String(u[0].ref.objectNumber);s+=copyStringIntoBuffer(h,n,s),n[s++]=CharCodes$1.Space;var f=String(u.length);s+=copyStringIntoBuffer(f,n,s),n[s++]=CharCodes$1.Newline,s+=this.copyEntriesIntoBuffer(u,n,s)}return s-o},a.prototype.copyEntriesIntoBuffer=function(e,n,s){for(var o=e.length,l=0;l<o;l++){var c=e[l],u=padStart$1(String(c.offset),10,"0");s+=copyStringIntoBuffer(u,n,s),n[s++]=CharCodes$1.Space;var h=padStart$1(String(c.ref.generationNumber),5,"0");s+=copyStringIntoBuffer(h,n,s),n[s++]=CharCodes$1.Space,n[s++]=c.deleted?CharCodes$1.f:CharCodes$1.n,n[s++]=CharCodes$1.Space,n[s++]=CharCodes$1.Newline}return 20*o},a.prototype.append=function(e){if(this.chunkLength===0){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var n=this.subsections[this.chunkIdx],s=n[this.chunkLength-1];e.ref.objectNumber-s.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(n.push(e),this.chunkLength+=1)},a.create=function(){return new a({ref:PDFRef.of(0,65535),offset:0,deleted:!0})},a.createEmpty=function(){return new a},a}(),PDFTrailer=function(){function a(e){this.lastXRefOffset=String(e)}return a.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},a.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},a.prototype.copyBytesInto=function(e,n){var s=n;return e[n++]=CharCodes$1.s,e[n++]=CharCodes$1.t,e[n++]=CharCodes$1.a,e[n++]=CharCodes$1.r,e[n++]=CharCodes$1.t,e[n++]=CharCodes$1.x,e[n++]=CharCodes$1.r,e[n++]=CharCodes$1.e,e[n++]=CharCodes$1.f,e[n++]=CharCodes$1.Newline,n+=copyStringIntoBuffer(this.lastXRefOffset,e,n),e[n++]=CharCodes$1.Newline,e[n++]=CharCodes$1.Percent,e[n++]=CharCodes$1.Percent,e[n++]=CharCodes$1.E,e[n++]=CharCodes$1.O,e[n++]=CharCodes$1.F,n-s},a.forLastCrossRefSectionOffset=function(e){return new a(e)},a}(),PDFTrailerDict=function(){function a(e){this.dict=e}return a.prototype.toString=function(){return`trailer
`+this.dict.toString()},a.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},a.prototype.copyBytesInto=function(e,n){var s=n;return e[n++]=CharCodes$1.t,e[n++]=CharCodes$1.r,e[n++]=CharCodes$1.a,e[n++]=CharCodes$1.i,e[n++]=CharCodes$1.l,e[n++]=CharCodes$1.e,e[n++]=CharCodes$1.r,e[n++]=CharCodes$1.Newline,n+=this.dict.copyBytesInto(e,n),n-s},a.of=function(e){return new a(e)},a}(),PDFObjectStream=function(a){__extends(e,a);function e(n,s,o){o===void 0&&(o=!0);var l=a.call(this,n.obj({}),o)||this;return l.objects=s,l.offsets=l.computeObjectOffsets(),l.offsetsString=l.computeOffsetsString(),l.dict.set(PDFName.of("Type"),PDFName.of("ObjStm")),l.dict.set(PDFName.of("N"),PDFNumber.of(l.objects.length)),l.dict.set(PDFName.of("First"),PDFNumber.of(l.offsetsString.length)),l}return e.prototype.getObjectsCount=function(){return this.objects.length},e.prototype.clone=function(n){return e.withContextAndObjects(n||this.dict.context,this.objects.slice(),this.encode)},e.prototype.getContentsString=function(){for(var n=this.offsetsString,s=0,o=this.objects.length;s<o;s++){var l=this.objects[s],c=l[1];n+=c+`
`}return n},e.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),s=copyStringIntoBuffer(this.offsetsString,n,0),o=0,l=this.objects.length;o<l;o++){var c=this.objects[o],u=c[1];s+=u.copyBytesInto(n,s),n[s++]=CharCodes$1.Newline}return n},e.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+last(this.offsets)[1]+last(this.objects)[1].sizeInBytes()+1},e.prototype.computeOffsetsString=function(){for(var n="",s=0,o=this.offsets.length;s<o;s++){var l=this.offsets[s],c=l[0],u=l[1];n+=c+" "+u+" "}return n},e.prototype.computeObjectOffsets=function(){for(var n=0,s=new Array(this.objects.length),o=0,l=this.objects.length;o<l;o++){var c=this.objects[o],u=c[0],h=c[1];s[o]=[u.objectNumber,n],n+=h.sizeInBytes()+1}return s},e.withContextAndObjects=function(n,s,o){return o===void 0&&(o=!0),new e(n,s,o)},e}(PDFFlateStream),PDFWriter=function(){function a(e,n){var s=this;this.parsedObjects=0,this.shouldWaitForTick=function(o){return s.parsedObjects+=o,s.parsedObjects%s.objectsPerTick===0},this.context=e,this.objectsPerTick=n}return a.prototype.serializeToBuffer=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s,o,l,c,u,h,f,d,p,g,m,y,_,b,x;return __generator(this,function(P){switch(P.label){case 0:return[4,this.computeBufferSize()];case 1:e=P.sent(),n=e.size,s=e.header,o=e.indirectObjects,l=e.xref,c=e.trailerDict,u=e.trailer,h=0,f=new Uint8Array(n),h+=s.copyBytesInto(f,h),f[h++]=CharCodes$1.Newline,f[h++]=CharCodes$1.Newline,d=0,p=o.length,P.label=2;case 2:return d<p?(g=o[d],m=g[0],y=g[1],_=String(m.objectNumber),h+=copyStringIntoBuffer(_,f,h),f[h++]=CharCodes$1.Space,b=String(m.generationNumber),h+=copyStringIntoBuffer(b,f,h),f[h++]=CharCodes$1.Space,f[h++]=CharCodes$1.o,f[h++]=CharCodes$1.b,f[h++]=CharCodes$1.j,f[h++]=CharCodes$1.Newline,h+=y.copyBytesInto(f,h),f[h++]=CharCodes$1.Newline,f[h++]=CharCodes$1.e,f[h++]=CharCodes$1.n,f[h++]=CharCodes$1.d,f[h++]=CharCodes$1.o,f[h++]=CharCodes$1.b,f[h++]=CharCodes$1.j,f[h++]=CharCodes$1.Newline,f[h++]=CharCodes$1.Newline,x=y instanceof PDFObjectStream?y.getObjectsCount():1,this.shouldWaitForTick(x)?[4,waitForTick()]:[3,4]):[3,5];case 3:P.sent(),P.label=4;case 4:return d++,[3,2];case 5:return l&&(h+=l.copyBytesInto(f,h),f[h++]=CharCodes$1.Newline),c&&(h+=c.copyBytesInto(f,h),f[h++]=CharCodes$1.Newline,f[h++]=CharCodes$1.Newline),h+=u.copyBytesInto(f,h),[2,f]}})})},a.prototype.computeIndirectObjectSize=function(e){var n=e[0],s=e[1],o=n.sizeInBytes()+3,l=s.sizeInBytes()+9;return o+l},a.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},a.prototype.computeBufferSize=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s,o,l,c,u,h,f,d,p;return __generator(this,function(g){switch(g.label){case 0:e=PDFHeader.forVersion(1,7),n=e.sizeInBytes()+2,s=PDFCrossRefSection.create(),o=this.context.enumerateIndirectObjects(),l=0,c=o.length,g.label=1;case 1:return l<c?(u=o[l],h=u[0],s.addEntry(h,n),n+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,waitForTick()]:[3,3]):[3,4];case 2:g.sent(),g.label=3;case 3:return l++,[3,1];case 4:return f=n,n+=s.sizeInBytes()+1,d=PDFTrailerDict.of(this.createTrailerDict()),n+=d.sizeInBytes()+2,p=PDFTrailer.forLastCrossRefSectionOffset(f),n+=p.sizeInBytes(),[2,{size:n,header:e,indirectObjects:o,xref:s,trailerDict:d,trailer:p}]}})})},a.forContext=function(e,n){return new a(e,n)},a}(),PDFInvalidObject=function(a){__extends(e,a);function e(n){var s=a.call(this)||this;return s.data=n,s}return e.prototype.clone=function(){return e.of(this.data.slice())},e.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},e.prototype.sizeInBytes=function(){return this.data.length},e.prototype.copyBytesInto=function(n,s){for(var o=this.data.length,l=0;l<o;l++)n[s++]=this.data[l];return o},e.of=function(n){return new e(n)},e}(PDFObject),EntryType;(function(a){a[a.Deleted=0]="Deleted",a[a.Uncompressed=1]="Uncompressed",a[a.Compressed=2]="Compressed"})(EntryType||(EntryType={}));var PDFCrossRefStream=function(a){__extends(e,a);function e(n,s,o){o===void 0&&(o=!0);var l=a.call(this,n,o)||this;return l.computeIndex=function(){for(var c=[],u=0,h=0,f=l.entries.length;h<f;h++){var d=l.entries[h],p=l.entries[h-1];h===0?c.push(d.ref.objectNumber):d.ref.objectNumber-p.ref.objectNumber>1&&(c.push(u),c.push(d.ref.objectNumber),u=0),u+=1}return c.push(u),c},l.computeEntryTuples=function(){for(var c=new Array(l.entries.length),u=0,h=l.entries.length;u<h;u++){var f=l.entries[u];if(f.type===EntryType.Deleted){var d=f.type,p=f.nextFreeObjectNumber,g=f.ref;c[u]=[d,p,g.generationNumber]}if(f.type===EntryType.Uncompressed){var d=f.type,m=f.offset,g=f.ref;c[u]=[d,m,g.generationNumber]}if(f.type===EntryType.Compressed){var d=f.type,y=f.objectStreamRef,_=f.index;c[u]=[d,y.objectNumber,_]}}return c},l.computeMaxEntryByteWidths=function(){for(var c=l.entryTuplesCache.access(),u=[0,0,0],h=0,f=c.length;h<f;h++){var d=c[h],p=d[0],g=d[1],m=d[2],y=sizeInBytes(p),_=sizeInBytes(g),b=sizeInBytes(m);y>u[0]&&(u[0]=y),_>u[1]&&(u[1]=_),b>u[2]&&(u[2]=b)}return u},l.entries=s||[],l.entryTuplesCache=Cache.populatedBy(l.computeEntryTuples),l.maxByteWidthsCache=Cache.populatedBy(l.computeMaxEntryByteWidths),l.indexCache=Cache.populatedBy(l.computeIndex),n.set(PDFName.of("Type"),PDFName.of("XRef")),l}return e.prototype.addDeletedEntry=function(n,s){var o=EntryType.Deleted;this.entries.push({type:o,ref:n,nextFreeObjectNumber:s}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addUncompressedEntry=function(n,s){var o=EntryType.Uncompressed;this.entries.push({type:o,ref:n,offset:s}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addCompressedEntry=function(n,s,o){var l=EntryType.Compressed;this.entries.push({type:l,ref:n,objectStreamRef:s,index:o}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.clone=function(n){var s=this,o=s.dict,l=s.entries,c=s.encode;return e.of(o.clone(n),l.slice(),c)},e.prototype.getContentsString=function(){for(var n=this.entryTuplesCache.access(),s=this.maxByteWidthsCache.access(),o="",l=0,c=n.length;l<c;l++){for(var u=n[l],h=u[0],f=u[1],d=u[2],p=reverseArray(bytesFor(h)),g=reverseArray(bytesFor(f)),m=reverseArray(bytesFor(d)),y=s[0]-1;y>=0;y--)o+=(p[y]||0).toString(2);for(var y=s[1]-1;y>=0;y--)o+=(g[y]||0).toString(2);for(var y=s[2]-1;y>=0;y--)o+=(m[y]||0).toString(2)}return o},e.prototype.getUnencodedContents=function(){for(var n=this.entryTuplesCache.access(),s=this.maxByteWidthsCache.access(),o=new Uint8Array(this.getUnencodedContentsSize()),l=0,c=0,u=n.length;c<u;c++){for(var h=n[c],f=h[0],d=h[1],p=h[2],g=reverseArray(bytesFor(f)),m=reverseArray(bytesFor(d)),y=reverseArray(bytesFor(p)),_=s[0]-1;_>=0;_--)o[l++]=g[_]||0;for(var _=s[1]-1;_>=0;_--)o[l++]=m[_]||0;for(var _=s[2]-1;_>=0;_--)o[l++]=y[_]||0}return o},e.prototype.getUnencodedContentsSize=function(){var n=this.maxByteWidthsCache.access(),s=sum(n);return s*this.entries.length},e.prototype.updateDict=function(){a.prototype.updateDict.call(this);var n=this.maxByteWidthsCache.access(),s=this.indexCache.access(),o=this.dict.context;this.dict.set(PDFName.of("W"),o.obj(n)),this.dict.set(PDFName.of("Index"),o.obj(s))},e.create=function(n,s){s===void 0&&(s=!0);var o=new e(n,[],s);return o.addDeletedEntry(PDFRef.of(0,65535),0),o},e.of=function(n,s,o){return o===void 0&&(o=!0),new e(n,s,o)},e}(PDFFlateStream),PDFStreamWriter=function(a){__extends(e,a);function e(n,s,o,l){var c=a.call(this,n,s)||this;return c.encodeStreams=o,c.objectsPerStream=l,c}return e.prototype.computeBufferSize=function(){return __awaiter(this,void 0,void 0,function(){var n,s,o,l,c,u,h,f,y,_,d,x,p,g,b,m,y,_,b,x,P,T,k,S;return __generator(this,function(A){switch(A.label){case 0:n=this.context.largestObjectNumber+1,s=PDFHeader.forVersion(1,7),o=s.sizeInBytes()+2,l=PDFCrossRefStream.create(this.createTrailerDict(),this.encodeStreams),c=[],u=[],h=[],f=this.context.enumerateIndirectObjects(),y=0,_=f.length,A.label=1;case 1:return y<_?(d=f[y],x=d[0],p=d[1],g=x===this.context.trailerInfo.Encrypt||p instanceof PDFStream||p instanceof PDFInvalidObject||x.generationNumber!==0,g?(c.push(d),l.addUncompressedEntry(x,o),o+=this.computeIndirectObjectSize(d),this.shouldWaitForTick(1)?[4,waitForTick()]:[3,3]):[3,4]):[3,6];case 2:A.sent(),A.label=3;case 3:return[3,5];case 4:b=last(u),m=last(h),(!b||b.length%this.objectsPerStream===0)&&(b=[],u.push(b),m=PDFRef.of(n++),h.push(m)),l.addCompressedEntry(x,m,b.length),b.push(d),A.label=5;case 5:return y++,[3,1];case 6:y=0,_=u.length,A.label=7;case 7:return y<_?(b=u[y],x=h[y],P=PDFObjectStream.withContextAndObjects(this.context,b,this.encodeStreams),l.addUncompressedEntry(x,o),o+=this.computeIndirectObjectSize([x,P]),c.push([x,P]),this.shouldWaitForTick(b.length)?[4,waitForTick()]:[3,9]):[3,10];case 8:A.sent(),A.label=9;case 9:return y++,[3,7];case 10:return T=PDFRef.of(n++),l.dict.set(PDFName.of("Size"),PDFNumber.of(n)),l.addUncompressedEntry(T,o),k=o,o+=this.computeIndirectObjectSize([T,l]),c.push([T,l]),S=PDFTrailer.forLastCrossRefSectionOffset(k),o+=S.sizeInBytes(),[2,{size:o,header:s,indirectObjects:c,trailer:S}]}})})},e.forContext=function(n,s,o,l){return o===void 0&&(o=!0),l===void 0&&(l=50),new e(n,s,o,l)},e}(PDFWriter),PDFHexString=function(a){__extends(e,a);function e(n){var s=a.call(this)||this;return s.value=n,s}return e.prototype.asBytes=function(){for(var n=this.value+(this.value.length%2===1?"0":""),s=n.length,o=new Uint8Array(n.length/2),l=0,c=0;l<s;){var u=parseInt(n.substring(l,l+2),16);o[c]=u,l+=2,c+=1}return o},e.prototype.decodeText=function(){var n=this.asBytes();return hasUtf16BOM(n)?utf16Decode(n):pdfDocEncodingDecode(n)},e.prototype.decodeDate=function(){var n=this.decodeText(),s=parseDate(n);if(!s)throw new InvalidPDFDateStringError(n);return s},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"<"+this.value+">"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(n,s){return n[s++]=CharCodes$1.LessThan,s+=copyStringIntoBuffer(this.value,n,s),n[s++]=CharCodes$1.GreaterThan,this.value.length+2},e.of=function(n){return new e(n)},e.fromText=function(n){for(var s=utf16Encode(n),o="",l=0,c=s.length;l<c;l++)o+=toHexStringOfMinLength(s[l],4);return new e(o)},e}(PDFObject),StandardFontEmbedder=function(){function a(e,n){this.encoding=e===FontNames.ZapfDingbats?Encodings.ZapfDingbats:e===FontNames.Symbol?Encodings.Symbol:Encodings.WinAnsi,this.font=Font.load(e),this.fontName=this.font.FontName,this.customName=n}return a.prototype.encodeText=function(e){for(var n=this.encodeTextAsGlyphs(e),s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]=toHexString(n[o].code);return PDFHexString.of(s.join(""))},a.prototype.widthOfTextAtSize=function(e,n){for(var s=this.encodeTextAsGlyphs(e),o=0,l=0,c=s.length;l<c;l++){var u=s[l].name,h=(s[l+1]||{}).name,f=this.font.getXAxisKerningForPair(u,h)||0;o+=this.widthOfGlyph(u)+f}var d=n/1e3;return o*d},a.prototype.heightOfFontAtSize=function(e,n){n===void 0&&(n={});var s=n.descender,o=s===void 0?!0:s,l=this.font,c=l.Ascender,u=l.Descender,h=l.FontBBox,f=c||h[3],d=u||h[1],p=f-d;return o||(p+=u||0),p/1e3*e},a.prototype.sizeOfFontAtHeight=function(e){var n=this.font,s=n.Ascender,o=n.Descender,l=n.FontBBox,c=s||l[3],u=o||l[1];return 1e3*e/(c-u)},a.prototype.embedIntoContext=function(e,n){var s=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===Encodings.WinAnsi?"WinAnsiEncoding":void 0});return n?(e.assign(n,s),n):e.register(s)},a.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},a.prototype.encodeTextAsGlyphs=function(e){for(var n=Array.from(e),s=new Array(n.length),o=0,l=n.length;o<l;o++){var c=toCodePoint(n[o]);s[o]=this.encoding.encodeUnicodeCodePoint(c)}return s},a.for=function(e,n){return new a(e,n)},a}(),createCmap=function(a,e){for(var n=new Array(a.length),s=0,o=a.length;s<o;s++){var l=a[s],c=cmapHexFormat(cmapHexString(e(l))),u=cmapHexFormat.apply(void 0,l.codePoints.map(cmapCodePointFormat));n[s]=[c,u]}return fillCmapTemplate(n)},fillCmapTemplate=function(a){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+a.length+` beginbfchar
`+a.map(function(e){var n=e[0],s=e[1];return n+" "+s}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},cmapHexFormat=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return"<"+a.join("")+">"},cmapHexString=function(a){return toHexStringOfMinLength(a,4)},cmapCodePointFormat=function(a){if(isWithinBMP(a))return cmapHexString(a);if(hasSurrogates(a)){var e=highSurrogate(a),n=lowSurrogate(a);return""+cmapHexString(e)+cmapHexString(n)}var s=toHexString(a),o="0x"+s+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(o)},makeFontFlags=function(a){var e=0,n=function(s){e|=1<<s-1};return a.fixedPitch&&n(1),a.serif&&n(2),n(3),a.script&&n(4),a.nonsymbolic&&n(6),a.italic&&n(7),a.allCap&&n(17),a.smallCap&&n(18),a.forceBold&&n(19),e},deriveFontFlags=function(a){var e=a["OS/2"]?a["OS/2"].sFamilyClass:0,n=makeFontFlags({fixedPitch:a.post.isFixedPitch,serif:1<=e&&e<=7,script:e===10,italic:a.head.macStyle.italic});return n},PDFString=function(a){__extends(e,a);function e(n){var s=a.call(this)||this;return s.value=n,s}return e.prototype.asBytes=function(){for(var n=[],s="",o=!1,l=function(p){p!==void 0&&n.push(p),o=!1},c=0,u=this.value.length;c<u;c++){var h=this.value[c],f=toCharCode(h),d=this.value[c+1];o?f===CharCodes$1.Newline||f===CharCodes$1.CarriageReturn?l():f===CharCodes$1.n?l(CharCodes$1.Newline):f===CharCodes$1.r?l(CharCodes$1.CarriageReturn):f===CharCodes$1.t?l(CharCodes$1.Tab):f===CharCodes$1.b?l(CharCodes$1.Backspace):f===CharCodes$1.f?l(CharCodes$1.FormFeed):f===CharCodes$1.LeftParen?l(CharCodes$1.LeftParen):f===CharCodes$1.RightParen?l(CharCodes$1.RightParen):f===CharCodes$1.Backspace?l(CharCodes$1.BackSlash):f>=CharCodes$1.Zero&&f<=CharCodes$1.Seven?(s+=h,(s.length===3||!(d>="0"&&d<="7"))&&(l(parseInt(s,8)),s="")):l(f):f===CharCodes$1.BackSlash?o=!0:l(f)}return new Uint8Array(n)},e.prototype.decodeText=function(){var n=this.asBytes();return hasUtf16BOM(n)?utf16Decode(n):pdfDocEncodingDecode(n)},e.prototype.decodeDate=function(){var n=this.decodeText(),s=parseDate(n);if(!s)throw new InvalidPDFDateStringError(n);return s},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"("+this.value+")"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(n,s){return n[s++]=CharCodes$1.LeftParen,s+=copyStringIntoBuffer(this.value,n,s),n[s++]=CharCodes$1.RightParen,this.value.length+2},e.of=function(n){return new e(n)},e.fromDate=function(n){var s=padStart$1(String(n.getUTCFullYear()),4,"0"),o=padStart$1(String(n.getUTCMonth()+1),2,"0"),l=padStart$1(String(n.getUTCDate()),2,"0"),c=padStart$1(String(n.getUTCHours()),2,"0"),u=padStart$1(String(n.getUTCMinutes()),2,"0"),h=padStart$1(String(n.getUTCSeconds()),2,"0");return new e("D:"+s+o+l+c+u+h+"Z")},e}(PDFObject),CustomFontEmbedder=function(){function a(e,n,s,o){var l=this;this.allGlyphsInFontSortedById=function(){for(var c=new Array(l.font.characterSet.length),u=0,h=c.length;u<h;u++){var f=l.font.characterSet[u];c[u]=l.font.glyphForCodePoint(f)}return sortedUniq(c.sort(byAscendingId),function(d){return d.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=n,this.fontName=this.font.postscriptName||"Font",this.customName=s,this.fontFeatures=o,this.baseFontName="",this.glyphCache=Cache.populatedBy(this.allGlyphsInFontSortedById)}return a.for=function(e,n,s,o){return __awaiter(this,void 0,void 0,function(){var l;return __generator(this,function(c){switch(c.label){case 0:return[4,e.create(n)];case 1:return l=c.sent(),[2,new a(l,n,s,o)]}})})},a.prototype.encodeText=function(e){for(var n=this.font.layout(e,this.fontFeatures).glyphs,s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]=toHexStringOfMinLength(n[o].id,4);return PDFHexString.of(s.join(""))},a.prototype.widthOfTextAtSize=function(e,n){for(var s=this.font.layout(e,this.fontFeatures).glyphs,o=0,l=0,c=s.length;l<c;l++)o+=s[l].advanceWidth*this.scale;var u=n/1e3;return o*u},a.prototype.heightOfFontAtSize=function(e,n){n===void 0&&(n={});var s=n.descender,o=s===void 0?!0:s,l=this.font,c=l.ascent,u=l.descent,h=l.bbox,f=(c||h.maxY)*this.scale,d=(u||h.minY)*this.scale,p=f-d;return o||(p-=Math.abs(u)||0),p/1e3*e},a.prototype.sizeOfFontAtHeight=function(e){var n=this.font,s=n.ascent,o=n.descent,l=n.bbox,c=(s||l.maxY)*this.scale,u=(o||l.minY)*this.scale;return 1e3*e/(c-u)},a.prototype.embedIntoContext=function(e,n){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,n)},a.prototype.embedFontDict=function(e,n){return __awaiter(this,void 0,void 0,function(){var s,o,l;return __generator(this,function(c){switch(c.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:return s=c.sent(),o=this.embedUnicodeCmap(e),l=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[s],ToUnicode:o}),n?(e.assign(n,l),[2,n]):[2,e.register(l)]}})})},a.prototype.isCFF=function(){return this.font.cff},a.prototype.embedCIDFontDict=function(e){return __awaiter(this,void 0,void 0,function(){var n,s;return __generator(this,function(o){switch(o.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return n=o.sent(),s=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:PDFString.of("Adobe"),Ordering:PDFString.of("Identity"),Supplement:0},FontDescriptor:n,W:this.computeWidths()}),[2,e.register(s)]}})})},a.prototype.embedFontDescriptor=function(e){return __awaiter(this,void 0,void 0,function(){var n,s,o,l,c,u,h,f,d,p,g,m,y,_,b;return __generator(this,function(x){switch(x.label){case 0:return[4,this.embedFontStream(e)];case 1:return n=x.sent(),s=this.scale,o=this.font,l=o.italicAngle,c=o.ascent,u=o.descent,h=o.capHeight,f=o.xHeight,d=this.font.bbox,p=d.minX,g=d.minY,m=d.maxX,y=d.maxY,_=e.obj((b={Type:"FontDescriptor",FontName:this.baseFontName,Flags:deriveFontFlags(this.font),FontBBox:[p*s,g*s,m*s,y*s],ItalicAngle:l,Ascent:c*s,Descent:u*s,CapHeight:(h||c)*s,XHeight:(f||0)*s,StemV:0},b[this.isCFF()?"FontFile3":"FontFile2"]=n,b)),[2,e.register(_)]}})})},a.prototype.serializeFont=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.fontData]})})},a.prototype.embedFontStream=function(e){return __awaiter(this,void 0,void 0,function(){var n,s,o;return __generator(this,function(l){switch(l.label){case 0:return o=(s=e).flateStream,[4,this.serializeFont()];case 1:return n=o.apply(s,[l.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(n)]}})})},a.prototype.embedUnicodeCmap=function(e){var n=createCmap(this.glyphCache.access(),this.glyphId.bind(this)),s=e.flateStream(n);return e.register(s)},a.prototype.glyphId=function(e){return e?e.id:-1},a.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),n=[],s=[],o=0,l=e.length;o<l;o++){var c=e[o],u=e[o-1],h=this.glyphId(c),f=this.glyphId(u);o===0?n.push(h):h-f!==1&&(n.push(s),n.push(h),s=[]),s.push(c.advanceWidth*this.scale)}return n.push(s),n},a}(),CustomFontSubsetEmbedder=function(a){__extends(e,a);function e(n,s,o,l){var c=a.call(this,n,s,o,l)||this;return c.subset=c.font.createSubset(),c.glyphs=[],c.glyphCache=Cache.populatedBy(function(){return c.glyphs}),c.glyphIdMap=new Map,c}return e.for=function(n,s,o,l){return __awaiter(this,void 0,void 0,function(){var c;return __generator(this,function(u){switch(u.label){case 0:return[4,n.create(s)];case 1:return c=u.sent(),[2,new e(c,s,o,l)]}})})},e.prototype.encodeText=function(n){for(var s=this.font.layout(n,this.fontFeatures).glyphs,o=new Array(s.length),l=0,c=s.length;l<c;l++){var u=s[l],h=this.subset.includeGlyph(u);this.glyphs[h-1]=u,this.glyphIdMap.set(u.id,h),o[l]=toHexStringOfMinLength(h,4)}return this.glyphCache.invalidate(),PDFHexString.of(o.join(""))},e.prototype.isCFF=function(){return this.subset.cff},e.prototype.glyphId=function(n){return n?this.glyphIdMap.get(n.id):-1},e.prototype.serializeFont=function(){var n=this;return new Promise(function(s,o){var l=[];n.subset.encodeStream().on("data",function(c){return l.push(c)}).on("end",function(){return s(mergeUint8Arrays(l))}).on("error",function(c){return o(c)})})},e}(CustomFontEmbedder),AFRelationship;(function(a){a.Source="Source",a.Data="Data",a.Alternative="Alternative",a.Supplement="Supplement",a.EncryptedPayload="EncryptedPayload",a.FormData="EncryptedPayload",a.Schema="Schema",a.Unspecified="Unspecified"})(AFRelationship||(AFRelationship={}));var FileEmbedder=function(){function a(e,n,s){s===void 0&&(s={}),this.fileData=e,this.fileName=n,this.options=s}return a.for=function(e,n,s){return s===void 0&&(s={}),new a(e,n,s)},a.prototype.embedIntoContext=function(e,n){return __awaiter(this,void 0,void 0,function(){var s,o,l,c,u,h,f,d,p;return __generator(this,function(g){return s=this.options,o=s.mimeType,l=s.description,c=s.creationDate,u=s.modificationDate,h=s.afRelationship,f=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:o??void 0,Params:{Size:this.fileData.length,CreationDate:c?PDFString.fromDate(c):void 0,ModDate:u?PDFString.fromDate(u):void 0}}),d=e.register(f),p=e.obj({Type:"Filespec",F:PDFString.of(this.fileName),UF:PDFHexString.fromText(this.fileName),EF:{F:d},Desc:l?PDFHexString.fromText(l):void 0,AFRelationship:h??void 0}),n?(e.assign(n,p),[2,n]):[2,e.register(p)]})})},a}(),MARKERS=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],ColorSpace;(function(a){a.DeviceGray="DeviceGray",a.DeviceRGB="DeviceRGB",a.DeviceCMYK="DeviceCMYK"})(ColorSpace||(ColorSpace={}));var ChannelToColorSpace={1:ColorSpace.DeviceGray,3:ColorSpace.DeviceRGB,4:ColorSpace.DeviceCMYK},JpegEmbedder=function(){function a(e,n,s,o,l){this.imageData=e,this.bitsPerComponent=n,this.width=s,this.height=o,this.colorSpace=l}return a.for=function(e){return __awaiter(this,void 0,void 0,function(){var n,s,o,l,c,u,h,f,d,p;return __generator(this,function(g){if(n=new DataView(e.buffer),s=n.getUint16(0),s!==65496)throw new Error("SOI not found in JPEG");for(o=2;o<n.byteLength&&(l=n.getUint16(o),o+=2,!MARKERS.includes(l));)o+=n.getUint16(o);if(!MARKERS.includes(l))throw new Error("Invalid JPEG");if(o+=2,c=n.getUint8(o++),u=n.getUint16(o),o+=2,h=n.getUint16(o),o+=2,f=n.getUint8(o++),d=ChannelToColorSpace[f],!d)throw new Error("Unknown JPEG channel.");return p=d,[2,new a(e,c,h,u,p)]})})},a.prototype.embedIntoContext=function(e,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(o){return s=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===ColorSpace.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),n?(e.assign(n,s),[2,n]):[2,e.register(s)]})})},a}(),UPNG={};UPNG.toRGBA8=function(a){var e=a.width,n=a.height;if(a.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(a.data,e,n,a).buffer];var s=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var o=e*n*4,l=new Uint8Array(o),c=new Uint8Array(o),u=new Uint8Array(o),h=0;h<a.frames.length;h++){var f=a.frames[h],d=f.rect.x,p=f.rect.y,g=f.rect.width,m=f.rect.height,y=UPNG.toRGBA8.decodeImage(f.data,g,m,a);if(h!=0)for(var _=0;_<o;_++)u[_]=l[_];if(f.blend==0?UPNG._copyTile(y,g,m,l,e,n,d,p,0):f.blend==1&&UPNG._copyTile(y,g,m,l,e,n,d,p,1),s.push(l.buffer.slice(0)),f.dispose!=0){if(f.dispose==1)UPNG._copyTile(c,g,m,l,e,n,d,p,0);else if(f.dispose==2)for(var _=0;_<o;_++)l[_]=u[_]}}return s};UPNG.toRGBA8.decodeImage=function(a,e,n,s){var o=e*n,l=UPNG.decode._getBPP(s),c=Math.ceil(e*l/8),u=new Uint8Array(o*4),h=new Uint32Array(u.buffer),f=s.ctype,d=s.depth,p=UPNG._bin.readUshort;if(f==6){var g=o<<2;if(d==8)for(var m=0;m<g;m+=4)u[m]=a[m],u[m+1]=a[m+1],u[m+2]=a[m+2],u[m+3]=a[m+3];if(d==16)for(var m=0;m<g;m++)u[m]=a[m<<1]}else if(f==2){var y=s.tabs.tRNS;if(y==null){if(d==8)for(var m=0;m<o;m++){var _=m*3;h[m]=255<<24|a[_+2]<<16|a[_+1]<<8|a[_]}if(d==16)for(var m=0;m<o;m++){var _=m*6;h[m]=255<<24|a[_+4]<<16|a[_+2]<<8|a[_]}}else{var b=y[0],x=y[1],P=y[2];if(d==8)for(var m=0;m<o;m++){var T=m<<2,_=m*3;h[m]=255<<24|a[_+2]<<16|a[_+1]<<8|a[_],a[_]==b&&a[_+1]==x&&a[_+2]==P&&(u[T+3]=0)}if(d==16)for(var m=0;m<o;m++){var T=m<<2,_=m*6;h[m]=255<<24|a[_+4]<<16|a[_+2]<<8|a[_],p(a,_)==b&&p(a,_+2)==x&&p(a,_+4)==P&&(u[T+3]=0)}}}else if(f==3){var k=s.tabs.PLTE,S=s.tabs.tRNS,A=S?S.length:0;if(d==1)for(var w=0;w<n;w++)for(var E=w*c,F=w*e,m=0;m<e;m++){var T=F+m<<2,O=a[E+(m>>3)]>>7-((m&7)<<0)&1,M=3*O;u[T]=k[M],u[T+1]=k[M+1],u[T+2]=k[M+2],u[T+3]=O<A?S[O]:255}if(d==2)for(var w=0;w<n;w++)for(var E=w*c,F=w*e,m=0;m<e;m++){var T=F+m<<2,O=a[E+(m>>2)]>>6-((m&3)<<1)&3,M=3*O;u[T]=k[M],u[T+1]=k[M+1],u[T+2]=k[M+2],u[T+3]=O<A?S[O]:255}if(d==4)for(var w=0;w<n;w++)for(var E=w*c,F=w*e,m=0;m<e;m++){var T=F+m<<2,O=a[E+(m>>1)]>>4-((m&1)<<2)&15,M=3*O;u[T]=k[M],u[T+1]=k[M+1],u[T+2]=k[M+2],u[T+3]=O<A?S[O]:255}if(d==8)for(var m=0;m<o;m++){var T=m<<2,O=a[m],M=3*O;u[T]=k[M],u[T+1]=k[M+1],u[T+2]=k[M+2],u[T+3]=O<A?S[O]:255}}else if(f==4){if(d==8)for(var m=0;m<o;m++){var T=m<<2,V=m<<1,G=a[V];u[T]=G,u[T+1]=G,u[T+2]=G,u[T+3]=a[V+1]}if(d==16)for(var m=0;m<o;m++){var T=m<<2,V=m<<2,G=a[V];u[T]=G,u[T+1]=G,u[T+2]=G,u[T+3]=a[V+2]}}else if(f==0)for(var b=s.tabs.tRNS?s.tabs.tRNS:-1,w=0;w<n;w++){var te=w*c,ce=w*e;if(d==1)for(var se=0;se<e;se++){var G=255*(a[te+(se>>>3)]>>>7-(se&7)&1),le=G==b*255?0:255;h[ce+se]=le<<24|G<<16|G<<8|G}else if(d==2)for(var se=0;se<e;se++){var G=85*(a[te+(se>>>2)]>>>6-((se&3)<<1)&3),le=G==b*85?0:255;h[ce+se]=le<<24|G<<16|G<<8|G}else if(d==4)for(var se=0;se<e;se++){var G=17*(a[te+(se>>>1)]>>>4-((se&1)<<2)&15),le=G==b*17?0:255;h[ce+se]=le<<24|G<<16|G<<8|G}else if(d==8)for(var se=0;se<e;se++){var G=a[te+se],le=G==b?0:255;h[ce+se]=le<<24|G<<16|G<<8|G}else if(d==16)for(var se=0;se<e;se++){var G=a[te+(se<<1)],le=p(a,te+(se<<m))==b?0:255;h[ce+se]=le<<24|G<<16|G<<8|G}}return u};UPNG.decode=function(a){for(var e=new Uint8Array(a),n=8,s=UPNG._bin,o=s.readUshort,l=s.readUint,c={tabs:{},frames:[]},u=new Uint8Array(e.length),h=0,f,d=0,p=[137,80,78,71,13,10,26,10],g=0;g<8;g++)if(e[g]!=p[g])throw"The input is not a PNG file!";for(;n<e.length;){var m=s.readUint(e,n);n+=4;var y=s.readASCII(e,n,4);if(n+=4,y=="IHDR")UPNG.decode._IHDR(e,n,c);else if(y=="IDAT"){for(var g=0;g<m;g++)u[h+g]=e[n+g];h+=m}else if(y=="acTL")c.tabs[y]={num_frames:l(e,n),num_plays:l(e,n+4)},f=new Uint8Array(e.length);else if(y=="fcTL"){if(d!=0){var _=c.frames[c.frames.length-1];_.data=UPNG.decode._decompress(c,f.slice(0,d),_.rect.width,_.rect.height),d=0}var b={x:l(e,n+12),y:l(e,n+16),width:l(e,n+4),height:l(e,n+8)},x=o(e,n+22);x=o(e,n+20)/(x==0?100:x);var P={rect:b,delay:Math.round(x*1e3),dispose:e[n+24],blend:e[n+25]};c.frames.push(P)}else if(y=="fdAT"){for(var g=0;g<m-4;g++)f[d+g]=e[n+g+4];d+=m-4}else if(y=="pHYs")c.tabs[y]=[s.readUint(e,n),s.readUint(e,n+4),e[n+8]];else if(y=="cHRM"){c.tabs[y]=[];for(var g=0;g<8;g++)c.tabs[y].push(s.readUint(e,n+g*4))}else if(y=="tEXt"){c.tabs[y]==null&&(c.tabs[y]={});var T=s.nextZero(e,n),k=s.readASCII(e,n,T-n),S=s.readASCII(e,T+1,n+m-T-1);c.tabs[y][k]=S}else if(y=="iTXt"){c.tabs[y]==null&&(c.tabs[y]={});var T=0,A=n;T=s.nextZero(e,A);var k=s.readASCII(e,A,T-A);A=T+1,e[A],e[A+1],A+=2,T=s.nextZero(e,A),s.readASCII(e,A,T-A),A=T+1,T=s.nextZero(e,A),s.readUTF8(e,A,T-A),A=T+1;var S=s.readUTF8(e,A,m-(A-n));c.tabs[y][k]=S}else if(y=="PLTE")c.tabs[y]=s.readBytes(e,n,m);else if(y=="hIST"){var w=c.tabs.PLTE.length/3;c.tabs[y]=[];for(var g=0;g<w;g++)c.tabs[y].push(o(e,n+g*2))}else if(y=="tRNS")c.ctype==3?c.tabs[y]=s.readBytes(e,n,m):c.ctype==0?c.tabs[y]=o(e,n):c.ctype==2&&(c.tabs[y]=[o(e,n),o(e,n+2),o(e,n+4)]);else if(y=="gAMA")c.tabs[y]=s.readUint(e,n)/1e5;else if(y=="sRGB")c.tabs[y]=e[n];else if(y=="bKGD")c.ctype==0||c.ctype==4?c.tabs[y]=[o(e,n)]:c.ctype==2||c.ctype==6?c.tabs[y]=[o(e,n),o(e,n+2),o(e,n+4)]:c.ctype==3&&(c.tabs[y]=e[n]);else if(y=="IEND")break;n+=m,s.readUint(e,n),n+=4}if(d!=0){var _=c.frames[c.frames.length-1];_.data=UPNG.decode._decompress(c,f.slice(0,d),_.rect.width,_.rect.height),d=0}return c.data=UPNG.decode._decompress(c,u,c.width,c.height),delete c.compress,delete c.interlace,delete c.filter,c};UPNG.decode._decompress=function(a,e,n,s){var o=UPNG.decode._getBPP(a),l=Math.ceil(n*o/8),c=new Uint8Array((l+1+a.interlace)*s);return e=UPNG.decode._inflate(e,c),a.interlace==0?e=UPNG.decode._filterZero(e,a,0,n,s):a.interlace==1&&(e=UPNG.decode._readInterlace(e,a)),e};UPNG.decode._inflate=function(a,e){var n=UPNG.inflateRaw(new Uint8Array(a.buffer,2,a.length-6),e);return n};UPNG.inflateRaw=function(){var a={};return a.H={},a.H.N=function(e,n){var s=Uint8Array,o=0,l=0,c=0,u=0,h=0,f=0,d=0,p=0,g=0,m,y;if(e[0]==3&&e[1]==0)return n||new s(0);var _=a.H,b=_.b,x=_.e,P=_.R,T=_.n,k=_.A,S=_.Z,A=_.m,w=n==null;for(w&&(n=new s(e.length>>>2<<3));o==0;){if(o=b(e,g,1),l=b(e,g+1,2),g+=3,l==0){(g&7)!=0&&(g+=8-(g&7));var E=(g>>>3)+4,F=e[E-4]|e[E-3]<<8;w&&(n=a.H.W(n,p+F)),n.set(new s(e.buffer,e.byteOffset+E,F),p),g=E+F<<3,p+=F;continue}if(w&&(n=a.H.W(n,p+(1<<17))),l==1&&(m=A.J,y=A.h,f=511,d=31),l==2){c=x(e,g,5)+257,u=x(e,g+5,5)+1,h=x(e,g+10,4)+4,g+=14;for(var O=1,M=0;M<38;M+=2)A.Q[M]=0,A.Q[M+1]=0;for(var M=0;M<h;M++){var V=x(e,g+M*3,3);A.Q[(A.X[M]<<1)+1]=V,V>O&&(O=V)}g+=3*h,T(A.Q,O),k(A.Q,O,A.u),m=A.w,y=A.d,g=P(A.u,(1<<O)-1,c+u,e,g,A.v);var G=_.V(A.v,0,c,A.C);f=(1<<G)-1;var te=_.V(A.v,c,u,A.D);d=(1<<te)-1,T(A.C,G),k(A.C,G,m),T(A.D,te),k(A.D,te,y)}for(;;){var ce=m[S(e,g)&f];g+=ce&15;var se=ce>>>4;if(!(se>>>8))n[p++]=se;else{if(se==256)break;var le=p+se-254;if(se>264){var fe=A.q[se-257];le=p+(fe>>>3)+x(e,g,fe&7),g+=fe&7}var ge=y[S(e,g)&d];g+=ge&15;var xe=ge>>>4,_e=A.c[xe],Ce=(_e>>>4)+b(e,g,_e&15);for(g+=_e&15;p<le;)n[p]=n[p++-Ce],n[p]=n[p++-Ce],n[p]=n[p++-Ce],n[p]=n[p++-Ce];p=le}}}return n.length==p?n:n.slice(0,p)},a.H.W=function(e,n){var s=e.length;if(n<=s)return e;var o=new Uint8Array(s<<1);return o.set(e,0),o},a.H.R=function(e,n,s,o,l,c){for(var u=a.H.e,h=a.H.Z,f=0;f<s;){var d=e[h(o,l)&n];l+=d&15;var p=d>>>4;if(p<=15)c[f]=p,f++;else{var g=0,m=0;p==16?(m=3+u(o,l,2),l+=2,g=c[f-1]):p==17?(m=3+u(o,l,3),l+=3):p==18&&(m=11+u(o,l,7),l+=7);for(var y=f+m;f<y;)c[f]=g,f++}}return l},a.H.V=function(e,n,s,o){for(var l=0,c=0,u=o.length>>>1;c<s;){var h=e[c+n];o[c<<1]=0,o[(c<<1)+1]=h,h>l&&(l=h),c++}for(;c<u;)o[c<<1]=0,o[(c<<1)+1]=0,c++;return l},a.H.n=function(e,n){for(var s=a.H.m,o=e.length,l,c,u,h,f,d=s.j,h=0;h<=n;h++)d[h]=0;for(h=1;h<o;h+=2)d[e[h]]++;var p=s.K;for(l=0,d[0]=0,c=1;c<=n;c++)l=l+d[c-1]<<1,p[c]=l;for(u=0;u<o;u+=2)f=e[u+1],f!=0&&(e[u]=p[f],p[f]++)},a.H.A=function(e,n,s){for(var o=e.length,l=a.H.m,c=l.r,u=0;u<o;u+=2)if(e[u+1]!=0)for(var h=u>>1,f=e[u+1],d=h<<4|f,p=n-f,g=e[u]<<p,m=g+(1<<p);g!=m;){var y=c[g]>>>15-n;s[y]=d,g++}},a.H.l=function(e,n){for(var s=a.H.m.r,o=15-n,l=0;l<e.length;l+=2){var c=e[l]<<n-e[l+1];e[l]=s[c]>>>o}},a.H.M=function(e,n,s){s=s<<(n&7);var o=n>>>3;e[o]|=s,e[o+1]|=s>>>8},a.H.I=function(e,n,s){s=s<<(n&7);var o=n>>>3;e[o]|=s,e[o+1]|=s>>>8,e[o+2]|=s>>>16},a.H.e=function(e,n,s){return(e[n>>>3]|e[(n>>>3)+1]<<8)>>>(n&7)&(1<<s)-1},a.H.b=function(e,n,s){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16)>>>(n&7)&(1<<s)-1},a.H.Z=function(e,n){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16)>>>(n&7)},a.H.i=function(e,n){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16|e[(n>>>3)+3]<<24)>>>(n&7)},a.H.m=function(){var e=Uint16Array,n=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var e=a.H.m,n=32768,s=0;s<n;s++){var o=s;o=(o&2863311530)>>>1|(o&1431655765)<<1,o=(o&3435973836)>>>2|(o&858993459)<<2,o=(o&4042322160)>>>4|(o&252645135)<<4,o=(o&4278255360)>>>8|(o&16711935)<<8,e.r[s]=(o>>>16|o<<16)>>>17}function l(c,u,h){for(;u--!=0;)c.push(0,h)}for(var s=0;s<32;s++)e.q[s]=e.S[s]<<3|e.T[s],e.c[s]=e.p[s]<<4|e.z[s];l(e._,144,8),l(e._,112,9),l(e._,24,7),l(e._,8,8),a.H.n(e._,9),a.H.A(e._,9,e.J),a.H.l(e._,9),l(e.$,32,5),a.H.n(e.$,5),a.H.A(e.$,5,e.h),a.H.l(e.$,5),l(e.Q,19,0),l(e.C,286,0),l(e.D,30,0),l(e.v,320,0)}(),a.H.N}();UPNG.decode._readInterlace=function(a,e){for(var n=e.width,s=e.height,o=UPNG.decode._getBPP(e),l=o>>3,c=Math.ceil(n*o/8),u=new Uint8Array(s*c),h=0,f=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],g=[8,8,4,4,2,2,1],m=0;m<7;){for(var y=p[m],_=g[m],b=0,x=0,P=f[m];P<s;)P+=y,x++;for(var T=d[m];T<n;)T+=_,b++;var k=Math.ceil(b*o/8);UPNG.decode._filterZero(a,e,h,b,x);for(var S=0,A=f[m];A<s;){for(var w=d[m],E=h+S*k<<3;w<n;){if(o==1){var F=a[E>>3];F=F>>7-(E&7)&1,u[A*c+(w>>3)]|=F<<7-((w&7)<<0)}if(o==2){var F=a[E>>3];F=F>>6-(E&7)&3,u[A*c+(w>>2)]|=F<<6-((w&3)<<1)}if(o==4){var F=a[E>>3];F=F>>4-(E&7)&15,u[A*c+(w>>1)]|=F<<4-((w&1)<<2)}if(o>=8)for(var O=A*c+w*l,M=0;M<l;M++)u[O+M]=a[(E>>3)+M];E+=o,w+=_}S++,A+=y}b*x!=0&&(h+=x*(1+k)),m=m+1}return u};UPNG.decode._getBPP=function(a){var e=[1,null,3,1,2,null,4][a.ctype];return e*a.depth};UPNG.decode._filterZero=function(a,e,n,s,o){var l=UPNG.decode._getBPP(e),c=Math.ceil(s*l/8),u=UPNG.decode._paeth;l=Math.ceil(l/8);var h=0,f=1,d=a[n],p=0;if(d>1&&(a[n]=[0,0,1][d-2]),d==3)for(p=l;p<c;p++)a[p+1]=a[p+1]+(a[p+1-l]>>>1)&255;for(var g=0;g<o;g++)if(h=n+g*c,f=h+g+1,d=a[f-1],p=0,d==0)for(;p<c;p++)a[h+p]=a[f+p];else if(d==1){for(;p<l;p++)a[h+p]=a[f+p];for(;p<c;p++)a[h+p]=a[f+p]+a[h+p-l]}else if(d==2)for(;p<c;p++)a[h+p]=a[f+p]+a[h+p-c];else if(d==3){for(;p<l;p++)a[h+p]=a[f+p]+(a[h+p-c]>>>1);for(;p<c;p++)a[h+p]=a[f+p]+(a[h+p-c]+a[h+p-l]>>>1)}else{for(;p<l;p++)a[h+p]=a[f+p]+u(0,a[h+p-c],0);for(;p<c;p++)a[h+p]=a[f+p]+u(a[h+p-l],a[h+p-c],a[h+p-l-c])}return a};UPNG.decode._paeth=function(a,e,n){var s=a+e-n,o=s-a,l=s-e,c=s-n;return o*o<=l*l&&o*o<=c*c?a:l*l<=c*c?e:n};UPNG.decode._IHDR=function(a,e,n){var s=UPNG._bin;n.width=s.readUint(a,e),e+=4,n.height=s.readUint(a,e),e+=4,n.depth=a[e],e++,n.ctype=a[e],e++,n.compress=a[e],e++,n.filter=a[e],e++,n.interlace=a[e],e++};UPNG._bin={nextZero:function(a,e){for(;a[e]!=0;)e++;return e},readUshort:function(a,e){return a[e]<<8|a[e+1]},writeUshort:function(a,e,n){a[e]=n>>8&255,a[e+1]=n&255},readUint:function(a,e){return a[e]*(256*256*256)+(a[e+1]<<16|a[e+2]<<8|a[e+3])},writeUint:function(a,e,n){a[e]=n>>24&255,a[e+1]=n>>16&255,a[e+2]=n>>8&255,a[e+3]=n&255},readASCII:function(a,e,n){for(var s="",o=0;o<n;o++)s+=String.fromCharCode(a[e+o]);return s},writeASCII:function(a,e,n){for(var s=0;s<n.length;s++)a[e+s]=n.charCodeAt(s)},readBytes:function(a,e,n){for(var s=[],o=0;o<n;o++)s.push(a[e+o]);return s},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,e,n){for(var s="",o,l=0;l<n;l++)s+="%"+UPNG._bin.pad(a[e+l].toString(16));try{o=decodeURIComponent(s)}catch{return UPNG._bin.readASCII(a,e,n)}return o}};UPNG._copyTile=function(a,e,n,s,o,l,c,u,h){for(var f=Math.min(e,o),d=Math.min(n,l),p=0,g=0,m=0;m<d;m++)for(var y=0;y<f;y++)if(c>=0&&u>=0?(p=m*e+y<<2,g=(u+m)*o+c+y<<2):(p=(-u+m)*e-c+y<<2,g=m*o+y<<2),h==0)s[g]=a[p],s[g+1]=a[p+1],s[g+2]=a[p+2],s[g+3]=a[p+3];else if(h==1){var _=a[p+3]*.00392156862745098,b=a[p]*_,x=a[p+1]*_,P=a[p+2]*_,T=s[g+3]*(1/255),k=s[g]*T,S=s[g+1]*T,A=s[g+2]*T,w=1-_,E=_+T*w,F=E==0?0:1/E;s[g+3]=255*E,s[g+0]=(b+k*w)*F,s[g+1]=(x+S*w)*F,s[g+2]=(P+A*w)*F}else if(h==2){var _=a[p+3],b=a[p],x=a[p+1],P=a[p+2],T=s[g+3],k=s[g],S=s[g+1],A=s[g+2];_==T&&b==k&&x==S&&P==A?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=b,s[g+1]=x,s[g+2]=P,s[g+3]=_)}else if(h==3){var _=a[p+3],b=a[p],x=a[p+1],P=a[p+2],T=s[g+3],k=s[g],S=s[g+1],A=s[g+2];if(_==T&&b==k&&x==S&&P==A)continue;if(_<220&&T>20)return!1}return!0};UPNG.encode=function(a,e,n,s,o,l,c){s==null&&(s=0),c==null&&(c=!1);var u=UPNG.encode.compress(a,e,n,s,[!1,!1,!1,0,c]);return UPNG.encode.compressPNG(u,-1),UPNG.encode._main(u,e,n,o,l)};UPNG.encodeLL=function(a,e,n,s,o,l,c,u){for(var h={ctype:0+(s==1?0:2)+(o==0?0:4),depth:l,frames:[]},f=(s+o)*l,d=f*e,p=0;p<a.length;p++)h.frames.push({rect:{x:0,y:0,width:e,height:n},img:new Uint8Array(a[p]),blend:0,dispose:1,bpp:Math.ceil(f/8),bpl:Math.ceil(d/8)});UPNG.encode.compressPNG(h,0,!0);var g=UPNG.encode._main(h,e,n,c,u);return g};UPNG.encode._main=function(a,e,n,s,o){o==null&&(o={});var l=UPNG.crc.crc,c=UPNG._bin.writeUint,u=UPNG._bin.writeUshort,h=UPNG._bin.writeASCII,f=8,d=a.frames.length>1,p=!1,g=33+(d?20:0);if(o.sRGB!=null&&(g+=13),o.pHYs!=null&&(g+=21),a.ctype==3){for(var m=a.plte.length,y=0;y<m;y++)a.plte[y]>>>24!=255&&(p=!0);g+=8+m*3+4+(p?8+m*1+4:0)}for(var _=0;_<a.frames.length;_++){var b=a.frames[_];d&&(g+=38),g+=b.cimg.length+12,_!=0&&(g+=4)}g+=12;for(var x=new Uint8Array(g),P=[137,80,78,71,13,10,26,10],y=0;y<8;y++)x[y]=P[y];if(c(x,f,13),f+=4,h(x,f,"IHDR"),f+=4,c(x,f,e),f+=4,c(x,f,n),f+=4,x[f]=a.depth,f++,x[f]=a.ctype,f++,x[f]=0,f++,x[f]=0,f++,x[f]=0,f++,c(x,f,l(x,f-17,17)),f+=4,o.sRGB!=null&&(c(x,f,1),f+=4,h(x,f,"sRGB"),f+=4,x[f]=o.sRGB,f++,c(x,f,l(x,f-5,5)),f+=4),o.pHYs!=null&&(c(x,f,9),f+=4,h(x,f,"pHYs"),f+=4,c(x,f,o.pHYs[0]),f+=4,c(x,f,o.pHYs[1]),f+=4,x[f]=o.pHYs[2],f++,c(x,f,l(x,f-13,13)),f+=4),d&&(c(x,f,8),f+=4,h(x,f,"acTL"),f+=4,c(x,f,a.frames.length),f+=4,c(x,f,o.loop!=null?o.loop:0),f+=4,c(x,f,l(x,f-12,12)),f+=4),a.ctype==3){var m=a.plte.length;c(x,f,m*3),f+=4,h(x,f,"PLTE"),f+=4;for(var y=0;y<m;y++){var T=y*3,k=a.plte[y],S=k&255,A=k>>>8&255,w=k>>>16&255;x[f+T+0]=S,x[f+T+1]=A,x[f+T+2]=w}if(f+=m*3,c(x,f,l(x,f-m*3-4,m*3+4)),f+=4,p){c(x,f,m),f+=4,h(x,f,"tRNS"),f+=4;for(var y=0;y<m;y++)x[f+y]=a.plte[y]>>>24&255;f+=m,c(x,f,l(x,f-m-4,m+4)),f+=4}}for(var E=0,_=0;_<a.frames.length;_++){var b=a.frames[_];d&&(c(x,f,26),f+=4,h(x,f,"fcTL"),f+=4,c(x,f,E++),f+=4,c(x,f,b.rect.width),f+=4,c(x,f,b.rect.height),f+=4,c(x,f,b.rect.x),f+=4,c(x,f,b.rect.y),f+=4,u(x,f,s[_]),f+=2,u(x,f,1e3),f+=2,x[f]=b.dispose,f++,x[f]=b.blend,f++,c(x,f,l(x,f-30,30)),f+=4);var F=b.cimg,m=F.length;c(x,f,m+(_==0?0:4)),f+=4;var O=f;h(x,f,_==0?"IDAT":"fdAT"),f+=4,_!=0&&(c(x,f,E++),f+=4),x.set(F,f),f+=m,c(x,f,l(x,O,f-O)),f+=4}return c(x,f,0),f+=4,h(x,f,"IEND"),f+=4,c(x,f,l(x,f-4,4)),f+=4,x.buffer};UPNG.encode.compressPNG=function(a,e,n){for(var s=0;s<a.frames.length;s++){var o=a.frames[s];o.rect.width;var l=o.rect.height,c=new Uint8Array(l*o.bpl+l);o.cimg=UPNG.encode._filterZero(o.img,l,o.bpp,o.bpl,c,e,n)}};UPNG.encode.compress=function(a,e,n,s,o){for(var l=o[0],c=o[1],u=o[2],h=o[3],f=o[4],d=6,p=8,g=255,m=0;m<a.length;m++)for(var y=new Uint8Array(a[m]),_=y.length,b=0;b<_;b+=4)g&=y[b+3];var x=g!=255,P=UPNG.encode.framize(a,e,n,l,c,u),T={},k=[],S=[];if(s!=0){for(var A=[],b=0;b<P.length;b++)A.push(P[b].img.buffer);for(var w=UPNG.encode.concatRGBA(A),E=UPNG.quantize(w,s),F=0,O=new Uint8Array(E.abuf),b=0;b<P.length;b++){var M=P[b].img,V=M.length;S.push(new Uint8Array(E.inds.buffer,F>>2,V>>2));for(var m=0;m<V;m+=4)M[m]=O[F+m],M[m+1]=O[F+m+1],M[m+2]=O[F+m+2],M[m+3]=O[F+m+3];F+=V}for(var b=0;b<E.plte.length;b++)k.push(E.plte[b].est.rgba)}else for(var m=0;m<P.length;m++){var G=P[m],te=new Uint32Array(G.img.buffer),ce=G.rect.width,_=te.length,se=new Uint8Array(_);S.push(se);for(var b=0;b<_;b++){var le=te[b];if(b!=0&&le==te[b-1])se[b]=se[b-1];else if(b>ce&&le==te[b-ce])se[b]=se[b-ce];else{var fe=T[le];if(fe==null&&(T[le]=fe=k.length,k.push(le),k.length>=300))break;se[b]=fe}}}var ge=k.length;ge<=256&&f==!1&&(ge<=2?p=1:ge<=4?p=2:ge<=16?p=4:p=8,p=Math.max(p,h));for(var m=0;m<P.length;m++){var G=P[m];G.rect.x,G.rect.y;var ce=G.rect.width,xe=G.rect.height,_e=G.img;new Uint32Array(_e.buffer);var Ce=4*ce,ae=4;if(ge<=256&&f==!1){Ce=Math.ceil(p*ce/8);for(var B=new Uint8Array(Ce*xe),I=S[m],q=0;q<xe;q++){var b=q*Ce,K=q*ce;if(p==8)for(var Q=0;Q<ce;Q++)B[b+Q]=I[K+Q];else if(p==4)for(var Q=0;Q<ce;Q++)B[b+(Q>>1)]|=I[K+Q]<<4-(Q&1)*4;else if(p==2)for(var Q=0;Q<ce;Q++)B[b+(Q>>2)]|=I[K+Q]<<6-(Q&3)*2;else if(p==1)for(var Q=0;Q<ce;Q++)B[b+(Q>>3)]|=I[K+Q]<<7-(Q&7)*1}_e=B,d=3,ae=1}else if(x==!1&&P.length==1){for(var B=new Uint8Array(ce*xe*3),$=ce*xe,b=0;b<$;b++){var M=b*3,Z=b*4;B[M]=_e[Z],B[M+1]=_e[Z+1],B[M+2]=_e[Z+2]}_e=B,d=2,ae=3,Ce=3*ce}G.img=_e,G.bpl=Ce,G.bpp=ae}return{ctype:d,depth:p,plte:k,frames:P}};UPNG.encode.framize=function(a,e,n,s,o,l){for(var c=[],u=0;u<a.length;u++){var h=new Uint8Array(a[u]),f=new Uint32Array(h.buffer),d,p=0,g=0,m=e,y=n,_=s?1:0;if(u!=0){for(var b=l||s||u==1||c[u-2].dispose!=0?1:2,x=0,P=1e9,T=0;T<b;T++){for(var G=new Uint8Array(a[u-1-T]),k=new Uint32Array(a[u-1-T]),S=e,A=n,w=-1,E=-1,F=0;F<n;F++)for(var O=0;O<e;O++){var M=F*e+O;f[M]!=k[M]&&(O<S&&(S=O),O>w&&(w=O),F<A&&(A=F),F>E&&(E=F))}w==-1&&(S=A=w=E=0),o&&((S&1)==1&&S--,(A&1)==1&&A--);var V=(w-S+1)*(E-A+1);V<P&&(P=V,x=T,p=S,g=A,m=w-S+1,y=E-A+1)}var G=new Uint8Array(a[u-1-x]);x==1&&(c[u-1].dispose=2),d=new Uint8Array(m*y*4),UPNG._copyTile(G,e,n,d,m,y,-p,-g,0),_=UPNG._copyTile(h,e,n,d,m,y,-p,-g,3)?1:0,_==1?UPNG.encode._prepareDiff(h,e,n,d,{x:p,y:g,width:m,height:y}):UPNG._copyTile(h,e,n,d,m,y,-p,-g,0)}else d=h.slice(0);c.push({rect:{x:p,y:g,width:m,height:y},img:d,blend:_,dispose:0})}if(s)for(var u=0;u<c.length;u++){var te=c[u];if(te.blend!=1){var ce=te.rect,se=c[u-1].rect,le=Math.min(ce.x,se.x),fe=Math.min(ce.y,se.y),ge=Math.max(ce.x+ce.width,se.x+se.width),xe=Math.max(ce.y+ce.height,se.y+se.height),_e={x:le,y:fe,width:ge-le,height:xe-fe};c[u-1].dispose=1,u-1!=0&&UPNG.encode._updateFrame(a,e,n,c,u-1,_e,o),UPNG.encode._updateFrame(a,e,n,c,u,_e,o)}}var Ce=0;if(a.length!=1)for(var M=0;M<c.length;M++){var te=c[M];Ce+=te.rect.width*te.rect.height}return c};UPNG.encode._updateFrame=function(a,e,n,s,o,l,c){for(var u=Uint8Array,h=Uint32Array,f=new u(a[o-1]),d=new h(a[o-1]),p=o+1<a.length?new u(a[o+1]):null,g=new u(a[o]),m=new h(g.buffer),y=e,_=n,b=-1,x=-1,P=0;P<l.height;P++)for(var T=0;T<l.width;T++){var k=l.x+T,S=l.y+P,A=S*e+k,w=m[A];w==0||s[o-1].dispose==0&&d[A]==w&&(p==null||p[A*4+3]!=0)||(k<y&&(y=k),k>b&&(b=k),S<_&&(_=S),S>x&&(x=S))}b==-1&&(y=_=b=x=0),c&&((y&1)==1&&y--,(_&1)==1&&_--),l={x:y,y:_,width:b-y+1,height:x-_+1};var E=s[o];E.rect=l,E.blend=1,E.img=new Uint8Array(l.width*l.height*4),s[o-1].dispose==0?(UPNG._copyTile(f,e,n,E.img,l.width,l.height,-l.x,-l.y,0),UPNG.encode._prepareDiff(g,e,n,E.img,l)):UPNG._copyTile(g,e,n,E.img,l.width,l.height,-l.x,-l.y,0)};UPNG.encode._prepareDiff=function(a,e,n,s,o){UPNG._copyTile(a,e,n,s,o.width,o.height,-o.x,-o.y,2)};UPNG.encode._filterZero=function(a,e,n,s,o,l,c){var u=[],h=[0,1,2,3,4];l!=-1?h=[l]:(e*s>5e5||n==1)&&(h=[0]);var f;c&&(f={level:0});for(var d=c&&UZIP!=null?UZIP:pako,p=0;p<h.length;p++){for(var g=0;g<e;g++)UPNG.encode._filterLine(o,a,g,s,n,h[p]);u.push(d.deflate(o,f))}for(var m,y=1e9,p=0;p<u.length;p++)u[p].length<y&&(m=p,y=u[p].length);return u[m]};UPNG.encode._filterLine=function(a,e,n,s,o,l){var c=n*s,u=c+n,h=UPNG.decode._paeth;if(a[u]=l,u++,l==0)if(s<500)for(var f=0;f<s;f++)a[u+f]=e[c+f];else a.set(new Uint8Array(e.buffer,c,s),u);else if(l==1){for(var f=0;f<o;f++)a[u+f]=e[c+f];for(var f=o;f<s;f++)a[u+f]=e[c+f]-e[c+f-o]+256&255}else if(n==0){for(var f=0;f<o;f++)a[u+f]=e[c+f];if(l==2)for(var f=o;f<s;f++)a[u+f]=e[c+f];if(l==3)for(var f=o;f<s;f++)a[u+f]=e[c+f]-(e[c+f-o]>>1)+256&255;if(l==4)for(var f=o;f<s;f++)a[u+f]=e[c+f]-h(e[c+f-o],0,0)+256&255}else{if(l==2)for(var f=0;f<s;f++)a[u+f]=e[c+f]+256-e[c+f-s]&255;if(l==3){for(var f=0;f<o;f++)a[u+f]=e[c+f]+256-(e[c+f-s]>>1)&255;for(var f=o;f<s;f++)a[u+f]=e[c+f]+256-(e[c+f-s]+e[c+f-o]>>1)&255}if(l==4){for(var f=0;f<o;f++)a[u+f]=e[c+f]+256-h(0,e[c+f-s],0)&255;for(var f=o;f<s;f++)a[u+f]=e[c+f]+256-h(e[c+f-o],e[c+f-s],e[c+f-o-s])&255}}};UPNG.crc={table:function(){for(var a=new Uint32Array(256),e=0;e<256;e++){for(var n=e,s=0;s<8;s++)n&1?n=3988292384^n>>>1:n=n>>>1;a[e]=n}return a}(),update:function(a,e,n,s){for(var o=0;o<s;o++)a=UPNG.crc.table[(a^e[n+o])&255]^a>>>8;return a},crc:function(a,e,n){return UPNG.crc.update(4294967295,a,e,n)^4294967295}};UPNG.quantize=function(a,e){var n=new Uint8Array(a),s=n.slice(0),o=new Uint32Array(s.buffer),l=UPNG.quantize.getKDtree(s,e),c=l[0],u=l[1];UPNG.quantize.planeDst;for(var h=n,f=o,d=h.length,p=new Uint8Array(n.length>>2),g=0;g<d;g+=4){var m=h[g]*.00392156862745098,y=h[g+1]*(1/255),_=h[g+2]*(1/255),b=h[g+3]*(1/255),x=UPNG.quantize.getNearest(c,m,y,_,b);p[g>>2]=x.ind,f[g>>2]=x.est.rgba}return{abuf:s.buffer,inds:p,plte:u}};UPNG.quantize.getKDtree=function(a,e,n){n==null&&(n=1e-4);var s=new Uint32Array(a.buffer),o={i0:0,i1:a.length,bst:null,est:null,tdst:0,left:null,right:null};o.bst=UPNG.quantize.stats(a,o.i0,o.i1),o.est=UPNG.quantize.estats(o.bst);for(var l=[o];l.length<e;){for(var c=0,u=0,h=0;h<l.length;h++)l[h].est.L>c&&(c=l[h].est.L,u=h);if(c<n)break;var f=l[u],d=UPNG.quantize.splitPixels(a,s,f.i0,f.i1,f.est.e,f.est.eMq255),p=f.i0>=d||f.i1<=d;if(p){f.est.L=0;continue}var g={i0:f.i0,i1:d,bst:null,est:null,tdst:0,left:null,right:null};g.bst=UPNG.quantize.stats(a,g.i0,g.i1),g.est=UPNG.quantize.estats(g.bst);var m={i0:d,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};m.bst={R:[],m:[],N:f.bst.N-g.bst.N};for(var h=0;h<16;h++)m.bst.R[h]=f.bst.R[h]-g.bst.R[h];for(var h=0;h<4;h++)m.bst.m[h]=f.bst.m[h]-g.bst.m[h];m.est=UPNG.quantize.estats(m.bst),f.left=g,f.right=m,l[u]=g,l.push(m)}l.sort(function(y,_){return _.bst.N-y.bst.N});for(var h=0;h<l.length;h++)l[h].ind=h;return[o,l]};UPNG.quantize.getNearest=function(a,e,n,s,o){if(a.left==null)return a.tdst=UPNG.quantize.dist(a.est.q,e,n,s,o),a;var l=UPNG.quantize.planeDst(a.est,e,n,s,o),c=a.left,u=a.right;l>0&&(c=a.right,u=a.left);var h=UPNG.quantize.getNearest(c,e,n,s,o);if(h.tdst<=l*l)return h;var f=UPNG.quantize.getNearest(u,e,n,s,o);return f.tdst<h.tdst?f:h};UPNG.quantize.planeDst=function(a,e,n,s,o){var l=a.e;return l[0]*e+l[1]*n+l[2]*s+l[3]*o-a.eMq};UPNG.quantize.dist=function(a,e,n,s,o){var l=e-a[0],c=n-a[1],u=s-a[2],h=o-a[3];return l*l+c*c+u*u+h*h};UPNG.quantize.splitPixels=function(a,e,n,s,o,l){var c=UPNG.quantize.vecDot;for(s-=4;n<s;){for(;c(a,n,o)<=l;)n+=4;for(;c(a,s,o)>l;)s-=4;if(n>=s)break;var u=e[n>>2];e[n>>2]=e[s>>2],e[s>>2]=u,n+=4,s-=4}for(;c(a,n,o)>l;)n-=4;return n+4};UPNG.quantize.vecDot=function(a,e,n){return a[e]*n[0]+a[e+1]*n[1]+a[e+2]*n[2]+a[e+3]*n[3]};UPNG.quantize.stats=function(a,e,n){for(var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0],l=n-e>>2,c=e;c<n;c+=4){var u=a[c]*.00392156862745098,h=a[c+1]*(1/255),f=a[c+2]*(1/255),d=a[c+3]*(1/255);o[0]+=u,o[1]+=h,o[2]+=f,o[3]+=d,s[0]+=u*u,s[1]+=u*h,s[2]+=u*f,s[3]+=u*d,s[5]+=h*h,s[6]+=h*f,s[7]+=h*d,s[10]+=f*f,s[11]+=f*d,s[15]+=d*d}return s[4]=s[1],s[8]=s[2],s[9]=s[6],s[12]=s[3],s[13]=s[7],s[14]=s[11],{R:s,m:o,N:l}};UPNG.quantize.estats=function(a){var e=a.R,n=a.m,s=a.N,o=n[0],l=n[1],c=n[2],u=n[3],h=s==0?0:1/s,f=[e[0]-o*o*h,e[1]-o*l*h,e[2]-o*c*h,e[3]-o*u*h,e[4]-l*o*h,e[5]-l*l*h,e[6]-l*c*h,e[7]-l*u*h,e[8]-c*o*h,e[9]-c*l*h,e[10]-c*c*h,e[11]-c*u*h,e[12]-u*o*h,e[13]-u*l*h,e[14]-u*c*h,e[15]-u*u*h],d=f,p=UPNG.M4,g=[.5,.5,.5,.5],m=0,y=0;if(s!=0)for(var _=0;_<10&&(g=p.multVec(d,g),y=Math.sqrt(p.dot(g,g)),g=p.sml(1/y,g),!(Math.abs(y-m)<1e-9));_++)m=y;var b=[o*h,l*h,c*h,u*h],x=p.dot(p.sml(255,b),g);return{Cov:f,q:b,e:g,L:m,eMq255:x,eMq:p.dot(g,b),rgba:(Math.round(255*b[3])<<24|Math.round(255*b[2])<<16|Math.round(255*b[1])<<8|Math.round(255*b[0])<<0)>>>0}};UPNG.M4={multVec:function(a,e){return[a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]*e[3],a[4]*e[0]+a[5]*e[1]+a[6]*e[2]+a[7]*e[3],a[8]*e[0]+a[9]*e[1]+a[10]*e[2]+a[11]*e[3],a[12]*e[0]+a[13]*e[1]+a[14]*e[2]+a[15]*e[3]]},dot:function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]*e[3]},sml:function(a,e){return[a*e[0],a*e[1],a*e[2],a*e[3]]}};UPNG.encode.concatRGBA=function(a){for(var e=0,n=0;n<a.length;n++)e+=a[n].byteLength;for(var s=new Uint8Array(e),o=0,n=0;n<a.length;n++){for(var l=new Uint8Array(a[n]),c=l.length,u=0;u<c;u+=4){var h=l[u],f=l[u+1],d=l[u+2],p=l[u+3];p==0&&(h=f=d=0),s[o+u]=h,s[o+u+1]=f,s[o+u+2]=d,s[o+u+3]=p}o+=c}return s.buffer};var getImageType=function(a){if(a===0)return PngType.Greyscale;if(a===2)return PngType.Truecolour;if(a===3)return PngType.IndexedColour;if(a===4)return PngType.GreyscaleWithAlpha;if(a===6)return PngType.TruecolourWithAlpha;throw new Error("Unknown color type: "+a)},splitAlphaChannel=function(a){for(var e=Math.floor(a.length/4),n=new Uint8Array(e*3),s=new Uint8Array(e*1),o=0,l=0,c=0;o<a.length;)n[l++]=a[o++],n[l++]=a[o++],n[l++]=a[o++],s[c++]=a[o++];return{rgbChannel:n,alphaChannel:s}},PngType;(function(a){a.Greyscale="Greyscale",a.Truecolour="Truecolour",a.IndexedColour="IndexedColour",a.GreyscaleWithAlpha="GreyscaleWithAlpha",a.TruecolourWithAlpha="TruecolourWithAlpha"})(PngType||(PngType={}));var PNG=function(){function a(e){var n=UPNG.decode(e),s=UPNG.toRGBA8(n);if(s.length>1)throw new Error("Animated PNGs are not supported");var o=new Uint8Array(s[0]),l=splitAlphaChannel(o),c=l.rgbChannel,u=l.alphaChannel;this.rgbChannel=c;var h=u.some(function(f){return f<255});h&&(this.alphaChannel=u),this.type=getImageType(n.ctype),this.width=n.width,this.height=n.height,this.bitsPerComponent=8}return a.load=function(e){return new a(e)},a}(),PngEmbedder=function(){function a(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return a.for=function(e){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n=PNG.load(e),[2,new a(n)]})})},a.prototype.embedIntoContext=function(e,n){return __awaiter(this,void 0,void 0,function(){var s,o;return __generator(this,function(l){return s=this.embedAlphaChannel(e),o=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:s}),n?(e.assign(n,o),[2,n]):[2,e.register(o)]})})},a.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var n=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(n)}},a}(),Stream$1=function(){function a(e,n,s){this.bytes=e,this.start=n||0,this.pos=this.start,this.end=n&&s?n+s:this.bytes.length}return Object.defineProperty(a.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),a.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},a.prototype.getUint16=function(){var e=this.getByte(),n=this.getByte();return e===-1||n===-1?-1:(e<<8)+n},a.prototype.getInt32=function(){var e=this.getByte(),n=this.getByte(),s=this.getByte(),o=this.getByte();return(e<<24)+(n<<16)+(s<<8)+o},a.prototype.getBytes=function(e,n){n===void 0&&(n=!1);var s=this.bytes,o=this.pos,l=this.end;if(e){var u=o+e;u>l&&(u=l),this.pos=u;var c=s.subarray(o,u);return n?new Uint8ClampedArray(c):c}else{var c=s.subarray(o,l);return n?new Uint8ClampedArray(c):c}},a.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},a.prototype.peekBytes=function(e,n){n===void 0&&(n=!1);var s=this.getBytes(e,n);return this.pos-=s.length,s},a.prototype.skip=function(e){e||(e=1),this.pos+=e},a.prototype.reset=function(){this.pos=this.start},a.prototype.moveStart=function(){this.start=this.pos},a.prototype.makeSubStream=function(e,n){return new a(this.bytes,e,n)},a.prototype.decode=function(){return this.bytes},a}(),emptyBuffer=new Uint8Array(0),DecodeStream=function(){function a(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=emptyBuffer,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(a.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),a.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},a.prototype.getUint16=function(){var e=this.getByte(),n=this.getByte();return e===-1||n===-1?-1:(e<<8)+n},a.prototype.getInt32=function(){var e=this.getByte(),n=this.getByte(),s=this.getByte(),o=this.getByte();return(e<<24)+(n<<16)+(s<<8)+o},a.prototype.getBytes=function(e,n){n===void 0&&(n=!1);var s,o=this.pos;if(e){for(this.ensureBuffer(o+e),s=o+e;!this.eof&&this.bufferLength<s;)this.readBlock();var l=this.bufferLength;s>l&&(s=l)}else{for(;!this.eof;)this.readBlock();s=this.bufferLength}this.pos=s;var c=this.buffer.subarray(o,s);return n&&!(c instanceof Uint8ClampedArray)?new Uint8ClampedArray(c):c},a.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},a.prototype.peekBytes=function(e,n){n===void 0&&(n=!1);var s=this.getBytes(e,n);return this.pos-=s.length,s},a.prototype.skip=function(e){e||(e=1),this.pos+=e},a.prototype.reset=function(){this.pos=0},a.prototype.makeSubStream=function(e,n){for(var s=e+n;this.bufferLength<=s&&!this.eof;)this.readBlock();return new Stream$1(this.buffer,e,n)},a.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},a.prototype.readBlock=function(){throw new MethodNotImplementedError(this.constructor.name,"readBlock")},a.prototype.ensureBuffer=function(e){var n=this.buffer;if(e<=n.byteLength)return n;for(var s=this.minBufferLength;s<e;)s*=2;var o=new Uint8Array(s);return o.set(n),this.buffer=o},a}(),isSpace=function(a){return a===32||a===9||a===13||a===10},Ascii85Stream=function(a){__extends(e,a);function e(n,s){var o=a.call(this,s)||this;return o.stream=n,o.input=new Uint8Array(5),s&&(s=.8*s),o}return e.prototype.readBlock=function(){for(var n=126,s=122,o=-1,l=this.stream,c=l.getByte();isSpace(c);)c=l.getByte();if(c===o||c===n){this.eof=!0;return}var u=this.bufferLength,h,f;if(c===s){for(h=this.ensureBuffer(u+4),f=0;f<4;++f)h[u+f]=0;this.bufferLength+=4}else{var d=this.input;for(d[0]=c,f=1;f<5;++f){for(c=l.getByte();isSpace(c);)c=l.getByte();if(d[f]=c,c===o||c===n)break}if(h=this.ensureBuffer(u+f-1),this.bufferLength+=f-1,f<5){for(;f<5;++f)d[f]=117;this.eof=!0}var p=0;for(f=0;f<5;++f)p=p*85+(d[f]-33);for(f=3;f>=0;--f)h[u+f]=p&255,p>>=8}},e}(DecodeStream),AsciiHexStream=function(a){__extends(e,a);function e(n,s){var o=a.call(this,s)||this;return o.stream=n,o.firstDigit=-1,s&&(s=.5*s),o}return e.prototype.readBlock=function(){var n=8e3,s=this.stream.getBytes(n);if(!s.length){this.eof=!0;return}for(var o=s.length+1>>1,l=this.ensureBuffer(this.bufferLength+o),c=this.bufferLength,u=this.firstDigit,h=0,f=s.length;h<f;h++){var d=s[h],p=void 0;if(d>=48&&d<=57)p=d&15;else if(d>=65&&d<=70||d>=97&&d<=102)p=(d&15)+9;else if(d===62){this.eof=!0;break}else continue;u<0?u=p:(l[c++]=u<<4|p,u=-1)}u>=0&&this.eof&&(l[c++]=u<<4,u=-1),this.firstDigit=u,this.bufferLength=c},e}(DecodeStream),codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lengthDecode=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),distDecode=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),fixedLitCodeTab=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fixedDistCodeTab=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],FlateStream=function(a){__extends(e,a);function e(n,s){var o=a.call(this,s)||this;o.stream=n;var l=n.getByte(),c=n.getByte();if(l===-1||c===-1)throw new Error("Invalid header in flate stream: "+l+", "+c);if((l&15)!==8)throw new Error("Unknown compression method in flate stream: "+l+", "+c);if(((l<<8)+c)%31!==0)throw new Error("Bad FCHECK in flate stream: "+l+", "+c);if(c&32)throw new Error("FDICT bit set in flate stream: "+l+", "+c);return o.codeSize=0,o.codeBuf=0,o}return e.prototype.readBlock=function(){var n,s,o=this.stream,l=this.getBits(3);if(l&1&&(this.eof=!0),l>>=1,l===0){var c=void 0;if((c=o.getByte())===-1)throw new Error("Bad block header in flate stream");var u=c;if((c=o.getByte())===-1)throw new Error("Bad block header in flate stream");if(u|=c<<8,(c=o.getByte())===-1)throw new Error("Bad block header in flate stream");var h=c;if((c=o.getByte())===-1)throw new Error("Bad block header in flate stream");if(h|=c<<8,h!==(~u&65535)&&(u!==0||h!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var f=this.bufferLength;n=this.ensureBuffer(f+u);var d=f+u;if(this.bufferLength=d,u===0)o.peekByte()===-1&&(this.eof=!0);else for(var p=f;p<d;++p){if((c=o.getByte())===-1){this.eof=!0;break}n[p]=c}return}var g,m;if(l===1)g=fixedLitCodeTab,m=fixedDistCodeTab;else if(l===2){var y=this.getBits(5)+257,_=this.getBits(5)+1,b=this.getBits(4)+4,x=new Uint8Array(codeLenCodeMap.length),P=void 0;for(P=0;P<b;++P)x[codeLenCodeMap[P]]=this.getBits(3);var T=this.generateHuffmanTable(x);s=0,P=0;for(var k=y+_,S=new Uint8Array(k),A=void 0,w=void 0,E=void 0;P<k;){var F=this.getCode(T);if(F===16)A=2,w=3,E=s;else if(F===17)A=3,w=3,E=s=0;else if(F===18)A=7,w=11,E=s=0;else{S[P++]=s=F;continue}for(var O=this.getBits(A)+w;O-- >0;)S[P++]=E}g=this.generateHuffmanTable(S.subarray(0,y)),m=this.generateHuffmanTable(S.subarray(y,k))}else throw new Error("Unknown block type in flate stream");n=this.buffer;for(var M=n?n.length:0,V=this.bufferLength;;){var G=this.getCode(g);if(G<256){V+1>=M&&(n=this.ensureBuffer(V+1),M=n.length),n[V++]=G;continue}if(G===256){this.bufferLength=V;return}G-=257,G=lengthDecode[G];var te=G>>16;te>0&&(te=this.getBits(te)),s=(G&65535)+te,G=this.getCode(m),G=distDecode[G],te=G>>16,te>0&&(te=this.getBits(te));var ce=(G&65535)+te;V+s>=M&&(n=this.ensureBuffer(V+s),M=n.length);for(var se=0;se<s;++se,++V)n[V]=n[V-ce]}},e.prototype.getBits=function(n){for(var s=this.stream,o=this.codeSize,l=this.codeBuf,c;o<n;){if((c=s.getByte())===-1)throw new Error("Bad encoding in flate stream");l|=c<<o,o+=8}return c=l&(1<<n)-1,this.codeBuf=l>>n,this.codeSize=o-=n,c},e.prototype.getCode=function(n){for(var s=this.stream,o=n[0],l=n[1],c=this.codeSize,u=this.codeBuf,h;c<l&&(h=s.getByte())!==-1;)u|=h<<c,c+=8;var f=o[u&(1<<l)-1];typeof o=="number"&&console.log("FLATE:",f);var d=f>>16,p=f&65535;if(d<1||c<d)throw new Error("Bad encoding in flate stream");return this.codeBuf=u>>d,this.codeSize=c-d,p},e.prototype.generateHuffmanTable=function(n){var s=n.length,o=0,l;for(l=0;l<s;++l)n[l]>o&&(o=n[l]);for(var c=1<<o,u=new Int32Array(c),h=1,f=0,d=2;h<=o;++h,f<<=1,d<<=1)for(var p=0;p<s;++p)if(n[p]===h){var g=0,m=f;for(l=0;l<h;++l)g=g<<1|m&1,m>>=1;for(l=g;l<c;l+=d)u[l]=h<<16|p;++f}return[u,o]},e}(DecodeStream),LZWStream=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,s)||this;l.stream=n,l.cachedData=0,l.bitsCached=0;for(var c=4096,u={earlyChange:o,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(c),dictionaryLengths:new Uint16Array(c),dictionaryPrevCodes:new Uint16Array(c),currentSequence:new Uint8Array(c),currentSequenceLength:0},h=0;h<256;++h)u.dictionaryValues[h]=h,u.dictionaryLengths[h]=1;return l.lzwState=u,l}return e.prototype.readBlock=function(){var n=512,s=n*2,o=n,l,c,u,h=this.lzwState;if(h){var f=h.earlyChange,d=h.nextCode,p=h.dictionaryValues,g=h.dictionaryLengths,m=h.dictionaryPrevCodes,y=h.codeLength,_=h.prevCode,b=h.currentSequence,x=h.currentSequenceLength,P=0,T=this.bufferLength,k=this.ensureBuffer(this.bufferLength+s);for(l=0;l<n;l++){var S=this.readBits(y),A=x>0;if(!S||S<256)b[0]=S,x=1;else if(S>=258)if(S<d)for(x=g[S],c=x-1,u=S;c>=0;c--)b[c]=p[u],u=m[u];else b[x++]=b[0];else if(S===256){y=9,d=258,x=0;continue}else{this.eof=!0,delete this.lzwState;break}if(A&&(m[d]=_,g[d]=g[_]+1,p[d]=b[0],d++,y=d+f&d+f-1?y:Math.min(Math.log(d+f)/.6931471805599453+1,12)|0),_=S,P+=x,s<P){do s+=o;while(s<P);k=this.ensureBuffer(this.bufferLength+s)}for(c=0;c<x;c++)k[T++]=b[c]}h.nextCode=d,h.codeLength=y,h.prevCode=_,h.currentSequenceLength=x,this.bufferLength=T}},e.prototype.readBits=function(n){for(var s=this.bitsCached,o=this.cachedData;s<n;){var l=this.stream.getByte();if(l===-1)return this.eof=!0,null;o=o<<8|l,s+=8}return this.bitsCached=s-=n,this.cachedData=o,o>>>s&(1<<n)-1},e}(DecodeStream),RunLengthStream=function(a){__extends(e,a);function e(n,s){var o=a.call(this,s)||this;return o.stream=n,o}return e.prototype.readBlock=function(){var n=this.stream.getBytes(2);if(!n||n.length<2||n[0]===128){this.eof=!0;return}var s,o=this.bufferLength,l=n[0];if(l<128){if(s=this.ensureBuffer(o+l+1),s[o++]=n[1],l>0){var c=this.stream.getBytes(l);s.set(c,o),o+=l}}else{l=257-l;var u=n[1];s=this.ensureBuffer(o+l+1);for(var h=0;h<l;h++)s[o++]=u}this.bufferLength=o},e}(DecodeStream),decodeStream=function(a,e,n){if(e===PDFName.of("FlateDecode"))return new FlateStream(a);if(e===PDFName.of("LZWDecode")){var s=1;if(n instanceof PDFDict){var o=n.lookup(PDFName.of("EarlyChange"));o instanceof PDFNumber&&(s=o.asNumber())}return new LZWStream(a,void 0,s)}if(e===PDFName.of("ASCII85Decode"))return new Ascii85Stream(a);if(e===PDFName.of("ASCIIHexDecode"))return new AsciiHexStream(a);if(e===PDFName.of("RunLengthDecode"))return new RunLengthStream(a);throw new UnsupportedEncodingError(e.asString())},decodePDFRawStream=function(a){var e=a.dict,n=a.contents,s=new Stream$1(n),o=e.lookup(PDFName.of("Filter")),l=e.lookup(PDFName.of("DecodeParms"));if(o instanceof PDFName)s=decodeStream(s,o,l);else if(o instanceof PDFArray)for(var c=0,u=o.size();c<u;c++)s=decodeStream(s,o.lookup(c,PDFName),l&&l.lookupMaybe(c,PDFDict));else if(o)throw new UnexpectedObjectTypeError([PDFName,PDFArray],o);return s},fullPageBoundingBox=function(a){var e=a.MediaBox(),n=e.lookup(2,PDFNumber).asNumber()-e.lookup(0,PDFNumber).asNumber(),s=e.lookup(3,PDFNumber).asNumber()-e.lookup(1,PDFNumber).asNumber();return{left:0,bottom:0,right:n,top:s}},boundingBoxAdjustedMatrix=function(a){return[1,0,0,1,-a.left,-a.bottom]},PDFPageEmbedder=function(){function a(e,n,s){this.page=e;var o=n??fullPageBoundingBox(e);this.width=o.right-o.left,this.height=o.top-o.bottom,this.boundingBox=o,this.transformationMatrix=s??boundingBoxAdjustedMatrix(o)}return a.for=function(e,n,s){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,new a(e,n,s)]})})},a.prototype.embedIntoContext=function(e,n){return __awaiter(this,void 0,void 0,function(){var s,o,l,c,u,h,f,d,p,g;return __generator(this,function(m){if(s=this.page.normalizedEntries(),o=s.Contents,l=s.Resources,!o)throw new MissingPageContentsEmbeddingError;return c=this.decodeContents(o),u=this.boundingBox,h=u.left,f=u.bottom,d=u.right,p=u.top,g=e.flateStream(c,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[h,f,d,p],Matrix:this.transformationMatrix,Resources:l}),n?(e.assign(n,g),[2,n]):[2,e.register(g)]})})},a.prototype.decodeContents=function(e){for(var n=Uint8Array.of(CharCodes$1.Newline),s=[],o=0,l=e.size();o<l;o++){var c=e.lookup(o,PDFStream),u=void 0;if(c instanceof PDFRawStream)u=decodePDFRawStream(c).decode();else if(c instanceof PDFContentStream)u=c.getUnencodedContents();else throw new UnrecognizedStreamTypeError(c);s.push(u,n)}return mergeIntoTypedArray.apply(void 0,s)},a}(),asEnum=function(a,e){if(a!==void 0)return e[a]},NonFullScreenPageMode;(function(a){a.UseNone="UseNone",a.UseOutlines="UseOutlines",a.UseThumbs="UseThumbs",a.UseOC="UseOC"})(NonFullScreenPageMode||(NonFullScreenPageMode={}));var ReadingDirection;(function(a){a.L2R="L2R",a.R2L="R2L"})(ReadingDirection||(ReadingDirection={}));var PrintScaling;(function(a){a.None="None",a.AppDefault="AppDefault"})(PrintScaling||(PrintScaling={}));var Duplex$1;(function(a){a.Simplex="Simplex",a.DuplexFlipShortEdge="DuplexFlipShortEdge",a.DuplexFlipLongEdge="DuplexFlipLongEdge"})(Duplex$1||(Duplex$1={}));var ViewerPreferences=function(){function a(e){this.dict=e}return a.prototype.lookupBool=function(e){var n=this.dict.lookup(PDFName.of(e));if(n instanceof PDFBool)return n},a.prototype.lookupName=function(e){var n=this.dict.lookup(PDFName.of(e));if(n instanceof PDFName)return n},a.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},a.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},a.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},a.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},a.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},a.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},a.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},a.prototype.Direction=function(){return this.lookupName("Direction")},a.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},a.prototype.Duplex=function(){return this.lookupName("Duplex")},a.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},a.prototype.PrintPageRange=function(){var e=this.dict.lookup(PDFName.of("PrintPageRange"));if(e instanceof PDFArray)return e},a.prototype.NumCopies=function(){var e=this.dict.lookup(PDFName.of("NumCopies"));if(e instanceof PDFNumber)return e},a.prototype.getHideToolbar=function(){var e,n;return(n=(e=this.HideToolbar())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},a.prototype.getHideMenubar=function(){var e,n;return(n=(e=this.HideMenubar())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},a.prototype.getHideWindowUI=function(){var e,n;return(n=(e=this.HideWindowUI())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},a.prototype.getFitWindow=function(){var e,n;return(n=(e=this.FitWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},a.prototype.getCenterWindow=function(){var e,n;return(n=(e=this.CenterWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},a.prototype.getDisplayDocTitle=function(){var e,n;return(n=(e=this.DisplayDocTitle())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},a.prototype.getNonFullScreenPageMode=function(){var e,n,s=(e=this.NonFullScreenPageMode())===null||e===void 0?void 0:e.decodeText();return(n=asEnum(s,NonFullScreenPageMode))!==null&&n!==void 0?n:NonFullScreenPageMode.UseNone},a.prototype.getReadingDirection=function(){var e,n,s=(e=this.Direction())===null||e===void 0?void 0:e.decodeText();return(n=asEnum(s,ReadingDirection))!==null&&n!==void 0?n:ReadingDirection.L2R},a.prototype.getPrintScaling=function(){var e,n,s=(e=this.PrintScaling())===null||e===void 0?void 0:e.decodeText();return(n=asEnum(s,PrintScaling))!==null&&n!==void 0?n:PrintScaling.AppDefault},a.prototype.getDuplex=function(){var e,n=(e=this.Duplex())===null||e===void 0?void 0:e.decodeText();return asEnum(n,Duplex$1)},a.prototype.getPickTrayByPDFSize=function(){var e;return(e=this.PickTrayByPDFSize())===null||e===void 0?void 0:e.asBoolean()},a.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var n=[],s=0;s<e.size();s+=2){var o=e.lookup(s,PDFNumber).asNumber(),l=e.lookup(s+1,PDFNumber).asNumber();n.push({start:o,end:l})}return n},a.prototype.getNumCopies=function(){var e,n;return(n=(e=this.NumCopies())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:1},a.prototype.setHideToolbar=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("HideToolbar"),n)},a.prototype.setHideMenubar=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("HideMenubar"),n)},a.prototype.setHideWindowUI=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("HideWindowUI"),n)},a.prototype.setFitWindow=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("FitWindow"),n)},a.prototype.setCenterWindow=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("CenterWindow"),n)},a.prototype.setDisplayDocTitle=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("DisplayDocTitle"),n)},a.prototype.setNonFullScreenPageMode=function(e){assertIsOneOf(e,"nonFullScreenPageMode",NonFullScreenPageMode);var n=PDFName.of(e);this.dict.set(PDFName.of("NonFullScreenPageMode"),n)},a.prototype.setReadingDirection=function(e){assertIsOneOf(e,"readingDirection",ReadingDirection);var n=PDFName.of(e);this.dict.set(PDFName.of("Direction"),n)},a.prototype.setPrintScaling=function(e){assertIsOneOf(e,"printScaling",PrintScaling);var n=PDFName.of(e);this.dict.set(PDFName.of("PrintScaling"),n)},a.prototype.setDuplex=function(e){assertIsOneOf(e,"duplex",Duplex$1);var n=PDFName.of(e);this.dict.set(PDFName.of("Duplex"),n)},a.prototype.setPickTrayByPDFSize=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("PickTrayByPDFSize"),n)},a.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var n=[],s=0,o=e.length;s<o;s++)n.push(e[s].start),n.push(e[s].end);assertEachIs(n,"printPageRange",["number"]);var l=this.dict.context.obj(n);this.dict.set(PDFName.of("PrintPageRange"),l)},a.prototype.setNumCopies=function(e){assertRange(e,"numCopies",1,Number.MAX_VALUE),assertInteger(e,"numCopies");var n=this.dict.context.obj(e);this.dict.set(PDFName.of("NumCopies"),n)},a.fromDict=function(e){return new a(e)},a.create=function(e){var n=e.obj({});return new a(n)},a}(),tfRegex$1=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,PDFAcroField=function(){function a(e,n){this.dict=e,this.ref=n}return a.prototype.T=function(){return this.dict.lookupMaybe(PDFName.of("T"),PDFString,PDFHexString)},a.prototype.Ff=function(){var e=this.getInheritableAttribute(PDFName.of("Ff"));return this.dict.context.lookupMaybe(e,PDFNumber)},a.prototype.V=function(){var e=this.getInheritableAttribute(PDFName.of("V"));return this.dict.context.lookup(e)},a.prototype.Kids=function(){return this.dict.lookupMaybe(PDFName.of("Kids"),PDFArray)},a.prototype.DA=function(){var e=this.dict.lookup(PDFName.of("DA"));if(e instanceof PDFString||e instanceof PDFHexString)return e},a.prototype.setKids=function(e){this.dict.set(PDFName.of("Kids"),this.dict.context.obj(e))},a.prototype.getParent=function(){var e=this.dict.get(PDFName.of("Parent"));if(e instanceof PDFRef){var n=this.dict.lookup(PDFName.of("Parent"),PDFDict);return new a(n,e)}},a.prototype.setParent=function(e){e?this.dict.set(PDFName.of("Parent"),e):this.dict.delete(PDFName.of("Parent"))},a.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},a.prototype.getPartialName=function(){var e;return(e=this.T())===null||e===void 0?void 0:e.decodeText()},a.prototype.setPartialName=function(e){e?this.dict.set(PDFName.of("T"),PDFHexString.fromText(e)):this.dict.delete(PDFName.of("T"))},a.prototype.setDefaultAppearance=function(e){this.dict.set(PDFName.of("DA"),PDFString.of(e))},a.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof PDFHexString?e.decodeText():e==null?void 0:e.asString()},a.prototype.setFontSize=function(e){var n,s=(n=this.getFullyQualifiedName())!==null&&n!==void 0?n:"",o=this.getDefaultAppearance();if(!o)throw new MissingDAEntryError(s);var l=findLastMatch(o,tfRegex$1);if(!l.match)throw new MissingTfOperatorError(s);var c=o.slice(0,l.pos-l.match[0].length),u=l.pos<=o.length?o.slice(l.pos):"",h=l.match[1],f=c+" /"+h+" "+e+" Tf "+u;this.setDefaultAppearance(f)},a.prototype.getFlags=function(){var e,n;return(n=(e=this.Ff())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:0},a.prototype.setFlags=function(e){this.dict.set(PDFName.of("Ff"),PDFNumber.of(e))},a.prototype.hasFlag=function(e){var n=this.getFlags();return(n&e)!==0},a.prototype.setFlag=function(e){var n=this.getFlags();this.setFlags(n|e)},a.prototype.clearFlag=function(e){var n=this.getFlags();this.setFlags(n&~e)},a.prototype.setFlagTo=function(e,n){n?this.setFlag(e):this.clearFlag(e)},a.prototype.getInheritableAttribute=function(e){var n;return this.ascend(function(s){n||(n=s.dict.get(e))}),n},a.prototype.ascend=function(e){e(this);var n=this.getParent();n&&n.ascend(e)},a}(),BorderStyle=function(){function a(e){this.dict=e}return a.prototype.W=function(){var e=this.dict.lookup(PDFName.of("W"));if(e instanceof PDFNumber)return e},a.prototype.getWidth=function(){var e,n;return(n=(e=this.W())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:1},a.prototype.setWidth=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("W"),n)},a.fromDict=function(e){return new a(e)},a}(),PDFAnnotation=function(){function a(e){this.dict=e}return a.prototype.Rect=function(){return this.dict.lookup(PDFName.of("Rect"),PDFArray)},a.prototype.AP=function(){return this.dict.lookupMaybe(PDFName.of("AP"),PDFDict)},a.prototype.F=function(){var e=this.dict.lookup(PDFName.of("F"));return this.dict.context.lookupMaybe(e,PDFNumber)},a.prototype.getRectangle=function(){var e,n=this.Rect();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:{x:0,y:0,width:0,height:0}},a.prototype.setRectangle=function(e){var n=e.x,s=e.y,o=e.width,l=e.height,c=this.dict.context.obj([n,s,n+o,s+l]);this.dict.set(PDFName.of("Rect"),c)},a.prototype.getAppearanceState=function(){var e=this.dict.lookup(PDFName.of("AS"));if(e instanceof PDFName)return e},a.prototype.setAppearanceState=function(e){this.dict.set(PDFName.of("AS"),e)},a.prototype.setAppearances=function(e){this.dict.set(PDFName.of("AP"),e)},a.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(PDFName.of("AP"),e)),e},a.prototype.getNormalAppearance=function(){var e=this.ensureAP(),n=e.get(PDFName.of("N"));if(n instanceof PDFRef||n instanceof PDFDict)return n;throw new Error("Unexpected N type: "+(n==null?void 0:n.constructor.name))},a.prototype.setNormalAppearance=function(e){var n=this.ensureAP();n.set(PDFName.of("N"),e)},a.prototype.setRolloverAppearance=function(e){var n=this.ensureAP();n.set(PDFName.of("R"),e)},a.prototype.setDownAppearance=function(e){var n=this.ensureAP();n.set(PDFName.of("D"),e)},a.prototype.removeRolloverAppearance=function(){var e=this.AP();e==null||e.delete(PDFName.of("R"))},a.prototype.removeDownAppearance=function(){var e=this.AP();e==null||e.delete(PDFName.of("D"))},a.prototype.getAppearances=function(){var e=this.AP();if(e){var n=e.lookup(PDFName.of("N"),PDFDict,PDFStream),s=e.lookupMaybe(PDFName.of("R"),PDFDict,PDFStream),o=e.lookupMaybe(PDFName.of("D"),PDFDict,PDFStream);return{normal:n,rollover:s,down:o}}},a.prototype.getFlags=function(){var e,n;return(n=(e=this.F())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:0},a.prototype.setFlags=function(e){this.dict.set(PDFName.of("F"),PDFNumber.of(e))},a.prototype.hasFlag=function(e){var n=this.getFlags();return(n&e)!==0},a.prototype.setFlag=function(e){var n=this.getFlags();this.setFlags(n|e)},a.prototype.clearFlag=function(e){var n=this.getFlags();this.setFlags(n&~e)},a.prototype.setFlagTo=function(e,n){n?this.setFlag(e):this.clearFlag(e)},a.fromDict=function(e){return new a(e)},a}(),AppearanceCharacteristics=function(){function a(e){this.dict=e}return a.prototype.R=function(){var e=this.dict.lookup(PDFName.of("R"));if(e instanceof PDFNumber)return e},a.prototype.BC=function(){var e=this.dict.lookup(PDFName.of("BC"));if(e instanceof PDFArray)return e},a.prototype.BG=function(){var e=this.dict.lookup(PDFName.of("BG"));if(e instanceof PDFArray)return e},a.prototype.CA=function(){var e=this.dict.lookup(PDFName.of("CA"));if(e instanceof PDFHexString||e instanceof PDFString)return e},a.prototype.RC=function(){var e=this.dict.lookup(PDFName.of("RC"));if(e instanceof PDFHexString||e instanceof PDFString)return e},a.prototype.AC=function(){var e=this.dict.lookup(PDFName.of("AC"));if(e instanceof PDFHexString||e instanceof PDFString)return e},a.prototype.getRotation=function(){var e;return(e=this.R())===null||e===void 0?void 0:e.asNumber()},a.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var n=[],s=0,o=e==null?void 0:e.size();s<o;s++){var l=e.get(s);l instanceof PDFNumber&&n.push(l.asNumber())}return n}},a.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var n=[],s=0,o=e==null?void 0:e.size();s<o;s++){var l=e.get(s);l instanceof PDFNumber&&n.push(l.asNumber())}return n}},a.prototype.getCaptions=function(){var e=this.CA(),n=this.RC(),s=this.AC();return{normal:e==null?void 0:e.decodeText(),rollover:n==null?void 0:n.decodeText(),down:s==null?void 0:s.decodeText()}},a.prototype.setRotation=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("R"),n)},a.prototype.setBorderColor=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("BC"),n)},a.prototype.setBackgroundColor=function(e){var n=this.dict.context.obj(e);this.dict.set(PDFName.of("BG"),n)},a.prototype.setCaptions=function(e){var n=PDFHexString.fromText(e.normal);if(this.dict.set(PDFName.of("CA"),n),e.rollover){var s=PDFHexString.fromText(e.rollover);this.dict.set(PDFName.of("RC"),s)}else this.dict.delete(PDFName.of("RC"));if(e.down){var o=PDFHexString.fromText(e.down);this.dict.set(PDFName.of("AC"),o)}else this.dict.delete(PDFName.of("AC"))},a.fromDict=function(e){return new a(e)},a}(),PDFWidgetAnnotation=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.MK=function(){var n=this.dict.lookup(PDFName.of("MK"));if(n instanceof PDFDict)return n},e.prototype.BS=function(){var n=this.dict.lookup(PDFName.of("BS"));if(n instanceof PDFDict)return n},e.prototype.DA=function(){var n=this.dict.lookup(PDFName.of("DA"));if(n instanceof PDFString||n instanceof PDFHexString)return n},e.prototype.P=function(){var n=this.dict.get(PDFName.of("P"));if(n instanceof PDFRef)return n},e.prototype.setP=function(n){this.dict.set(PDFName.of("P"),n)},e.prototype.setDefaultAppearance=function(n){this.dict.set(PDFName.of("DA"),PDFString.of(n))},e.prototype.getDefaultAppearance=function(){var n=this.DA();return n instanceof PDFHexString?n.decodeText():n==null?void 0:n.asString()},e.prototype.getAppearanceCharacteristics=function(){var n=this.MK();if(n)return AppearanceCharacteristics.fromDict(n)},e.prototype.getOrCreateAppearanceCharacteristics=function(){var n=this.MK();if(n)return AppearanceCharacteristics.fromDict(n);var s=AppearanceCharacteristics.fromDict(this.dict.context.obj({}));return this.dict.set(PDFName.of("MK"),s.dict),s},e.prototype.getBorderStyle=function(){var n=this.BS();if(n)return BorderStyle.fromDict(n)},e.prototype.getOrCreateBorderStyle=function(){var n=this.BS();if(n)return BorderStyle.fromDict(n);var s=BorderStyle.fromDict(this.dict.context.obj({}));return this.dict.set(PDFName.of("BS"),s.dict),s},e.prototype.getOnValue=function(){var n,s=(n=this.getAppearances())===null||n===void 0?void 0:n.normal;if(s instanceof PDFDict)for(var o=s.keys(),l=0,c=o.length;l<c;l++){var u=o[l];if(u!==PDFName.of("Off"))return u}},e.fromDict=function(n){return new e(n)},e.create=function(n,s){var o=n.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:s});return new e(o)},e}(PDFAnnotation),PDFAcroTerminal=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.FT=function(){var n=this.getInheritableAttribute(PDFName.of("FT"));return this.dict.context.lookup(n,PDFName)},e.prototype.getWidgets=function(){var n=this.Kids();if(!n)return[PDFWidgetAnnotation.fromDict(this.dict)];for(var s=new Array(n.size()),o=0,l=n.size();o<l;o++){var c=n.lookup(o,PDFDict);s[o]=PDFWidgetAnnotation.fromDict(c)}return s},e.prototype.addWidget=function(n){var s=this.normalizedEntries().Kids;s.push(n)},e.prototype.removeWidget=function(n){var s=this.Kids();if(s){if(n<0||n>s.size())throw new IndexOutOfBoundsError(n,0,s.size());s.remove(n)}else{if(n!==0)throw new IndexOutOfBoundsError(n,0,0);this.setKids([])}},e.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([this.ref]),this.dict.set(PDFName.of("Kids"),n)),{Kids:n}},e.fromDict=function(n,s){return new e(n,s)},e}(PDFAcroField),PDFAcroButton=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.Opt=function(){return this.dict.lookupMaybe(PDFName.of("Opt"),PDFString,PDFHexString,PDFArray)},e.prototype.setOpt=function(n){this.dict.set(PDFName.of("Opt"),this.dict.context.obj(n))},e.prototype.getExportValues=function(){var n=this.Opt();if(n){if(n instanceof PDFString||n instanceof PDFHexString)return[n];for(var s=[],o=0,l=n.size();o<l;o++){var c=n.lookup(o);(c instanceof PDFString||c instanceof PDFHexString)&&s.push(c)}return s}},e.prototype.removeExportValue=function(n){var s=this.Opt();if(s)if(s instanceof PDFString||s instanceof PDFHexString){if(n!==0)throw new IndexOutOfBoundsError(n,0,0);this.setOpt([])}else{if(n<0||n>s.size())throw new IndexOutOfBoundsError(n,0,s.size());s.remove(n)}},e.prototype.normalizeExportValues=function(){for(var n,s,o,l,c=(n=this.getExportValues())!==null&&n!==void 0?n:[],u=[],h=this.getWidgets(),f=0,d=h.length;f<d;f++){var p=h[f],g=(s=c[f])!==null&&s!==void 0?s:PDFHexString.fromText((l=(o=p.getOnValue())===null||o===void 0?void 0:o.decodeText())!==null&&l!==void 0?l:"");u.push(g)}this.setOpt(u)},e.prototype.addOpt=function(n,s){var o;this.normalizeExportValues();var l=n.decodeText(),c;if(s)for(var u=(o=this.getExportValues())!==null&&o!==void 0?o:[],h=0,f=u.length;h<f;h++){var d=u[h];d.decodeText()===l&&(c=h)}var p=this.Opt();return p.push(n),c??p.size()-1},e.prototype.addWidgetWithOpt=function(n,s,o){var l=this.addOpt(s,o),c=PDFName.of(String(l));return this.addWidget(n),c},e}(PDFAcroTerminal),PDFAcroCheckBox=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.setValue=function(n){var s,o=(s=this.getOnValue())!==null&&s!==void 0?s:PDFName.of("Yes");if(n!==o&&n!==PDFName.of("Off"))throw new InvalidAcroFieldValueError;this.dict.set(PDFName.of("V"),n);for(var l=this.getWidgets(),c=0,u=l.length;c<u;c++){var h=l[c],f=h.getOnValue()===n?n:PDFName.of("Off");h.setAppearanceState(f)}},e.prototype.getValue=function(){var n=this.V();return n instanceof PDFName?n:PDFName.of("Off")},e.prototype.getOnValue=function(){var n=this.getWidgets()[0];return n==null?void 0:n.getOnValue()},e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({FT:"Btn",Kids:[]}),o=n.register(s);return new e(s,o)},e}(PDFAcroButton),flag$1=function(a){return 1<<a},AcroFieldFlags;(function(a){a[a.ReadOnly=flag$1(0)]="ReadOnly",a[a.Required=flag$1(1)]="Required",a[a.NoExport=flag$1(2)]="NoExport"})(AcroFieldFlags||(AcroFieldFlags={}));var AcroButtonFlags;(function(a){a[a.NoToggleToOff=flag$1(14)]="NoToggleToOff",a[a.Radio=flag$1(15)]="Radio",a[a.PushButton=flag$1(16)]="PushButton",a[a.RadiosInUnison=flag$1(25)]="RadiosInUnison"})(AcroButtonFlags||(AcroButtonFlags={}));var AcroTextFlags;(function(a){a[a.Multiline=flag$1(12)]="Multiline",a[a.Password=flag$1(13)]="Password",a[a.FileSelect=flag$1(20)]="FileSelect",a[a.DoNotSpellCheck=flag$1(22)]="DoNotSpellCheck",a[a.DoNotScroll=flag$1(23)]="DoNotScroll",a[a.Comb=flag$1(24)]="Comb",a[a.RichText=flag$1(25)]="RichText"})(AcroTextFlags||(AcroTextFlags={}));var AcroChoiceFlags;(function(a){a[a.Combo=flag$1(17)]="Combo",a[a.Edit=flag$1(18)]="Edit",a[a.Sort=flag$1(19)]="Sort",a[a.MultiSelect=flag$1(21)]="MultiSelect",a[a.DoNotSpellCheck=flag$1(22)]="DoNotSpellCheck",a[a.CommitOnSelChange=flag$1(26)]="CommitOnSelChange"})(AcroChoiceFlags||(AcroChoiceFlags={}));var PDFAcroChoice=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.setValues=function(n){if(this.hasFlag(AcroChoiceFlags.Combo)&&!this.hasFlag(AcroChoiceFlags.Edit)&&!this.valuesAreValid(n))throw new InvalidAcroFieldValueError;if(n.length===0&&this.dict.delete(PDFName.of("V")),n.length===1&&this.dict.set(PDFName.of("V"),n[0]),n.length>1){if(!this.hasFlag(AcroChoiceFlags.MultiSelect))throw new MultiSelectValueError;this.dict.set(PDFName.of("V"),this.dict.context.obj(n))}this.updateSelectedIndices(n)},e.prototype.valuesAreValid=function(n){for(var s=this.getOptions(),o=function(h,f){var d=n[h].decodeText();if(!s.find(function(p){return d===(p.display||p.value).decodeText()}))return{value:!1}},l=0,c=n.length;l<c;l++){var u=o(l);if(typeof u=="object")return u.value}return!0},e.prototype.updateSelectedIndices=function(n){if(n.length>1){for(var s=new Array(n.length),o=this.getOptions(),l=function(h,f){var d=n[h].decodeText();s[h]=o.findIndex(function(p){return d===(p.display||p.value).decodeText()})},c=0,u=n.length;c<u;c++)l(c,u);this.dict.set(PDFName.of("I"),this.dict.context.obj(s.sort()))}else this.dict.delete(PDFName.of("I"))},e.prototype.getValues=function(){var n=this.V();if(n instanceof PDFString||n instanceof PDFHexString)return[n];if(n instanceof PDFArray){for(var s=[],o=0,l=n.size();o<l;o++){var c=n.lookup(o);(c instanceof PDFString||c instanceof PDFHexString)&&s.push(c)}return s}return[]},e.prototype.Opt=function(){return this.dict.lookupMaybe(PDFName.of("Opt"),PDFString,PDFHexString,PDFArray)},e.prototype.setOptions=function(n){for(var s=new Array(n.length),o=0,l=n.length;o<l;o++){var c=n[o],u=c.value,h=c.display;s[o]=this.dict.context.obj([u,h||u])}this.dict.set(PDFName.of("Opt"),this.dict.context.obj(s))},e.prototype.getOptions=function(){var n=this.Opt();if(n instanceof PDFString||n instanceof PDFHexString)return[{value:n,display:n}];if(n instanceof PDFArray){for(var s=[],o=0,l=n.size();o<l;o++){var c=n.lookup(o);if((c instanceof PDFString||c instanceof PDFHexString)&&s.push({value:c,display:c}),c instanceof PDFArray&&c.size()>0){var u=c.lookup(0,PDFString,PDFHexString),h=c.lookupMaybe(1,PDFString,PDFHexString);s.push({value:u,display:h||u})}}return s}return[]},e}(PDFAcroTerminal),PDFAcroComboBox=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({FT:"Ch",Ff:AcroChoiceFlags.Combo,Kids:[]}),o=n.register(s);return new e(s,o)},e}(PDFAcroChoice),PDFAcroNonTerminal=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.addField=function(n){var s=this.normalizedEntries().Kids;s==null||s.push(n)},e.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([]),this.dict.set(PDFName.of("Kids"),n)),{Kids:n}},e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({}),o=n.register(s);return new e(s,o)},e}(PDFAcroField),PDFAcroSignature=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.fromDict=function(n,s){return new e(n,s)},e}(PDFAcroTerminal),PDFAcroText=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.MaxLen=function(){var n=this.dict.lookup(PDFName.of("MaxLen"));if(n instanceof PDFNumber)return n},e.prototype.Q=function(){var n=this.dict.lookup(PDFName.of("Q"));if(n instanceof PDFNumber)return n},e.prototype.setMaxLength=function(n){this.dict.set(PDFName.of("MaxLen"),PDFNumber.of(n))},e.prototype.removeMaxLength=function(){this.dict.delete(PDFName.of("MaxLen"))},e.prototype.getMaxLength=function(){var n;return(n=this.MaxLen())===null||n===void 0?void 0:n.asNumber()},e.prototype.setQuadding=function(n){this.dict.set(PDFName.of("Q"),PDFNumber.of(n))},e.prototype.getQuadding=function(){var n;return(n=this.Q())===null||n===void 0?void 0:n.asNumber()},e.prototype.setValue=function(n){this.dict.set(PDFName.of("V"),n)},e.prototype.removeValue=function(){this.dict.delete(PDFName.of("V"))},e.prototype.getValue=function(){var n=this.V();if(n instanceof PDFString||n instanceof PDFHexString)return n},e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({FT:"Tx",Kids:[]}),o=n.register(s);return new e(s,o)},e}(PDFAcroTerminal),PDFAcroPushButton=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({FT:"Btn",Ff:AcroButtonFlags.PushButton,Kids:[]}),o=n.register(s);return new e(s,o)},e}(PDFAcroButton),PDFAcroRadioButton=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.setValue=function(n){var s=this.getOnValues();if(!s.includes(n)&&n!==PDFName.of("Off"))throw new InvalidAcroFieldValueError;this.dict.set(PDFName.of("V"),n);for(var o=this.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l],h=u.getOnValue()===n?n:PDFName.of("Off");u.setAppearanceState(h)}},e.prototype.getValue=function(){var n=this.V();return n instanceof PDFName?n:PDFName.of("Off")},e.prototype.getOnValues=function(){for(var n=this.getWidgets(),s=[],o=0,l=n.length;o<l;o++){var c=n[o].getOnValue();c&&s.push(c)}return s},e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({FT:"Btn",Ff:AcroButtonFlags.Radio,Kids:[]}),o=n.register(s);return new e(s,o)},e}(PDFAcroButton),PDFAcroListBox=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.fromDict=function(n,s){return new e(n,s)},e.create=function(n){var s=n.obj({FT:"Ch",Kids:[]}),o=n.register(s);return new e(s,o)},e}(PDFAcroChoice),createPDFAcroFields=function(a){if(!a)return[];for(var e=[],n=0,s=a.size();n<s;n++){var o=a.get(n),l=a.lookup(n);o instanceof PDFRef&&l instanceof PDFDict&&e.push([createPDFAcroField(l,o),o])}return e},createPDFAcroField=function(a,e){var n=isNonTerminalAcroField(a);return n?PDFAcroNonTerminal.fromDict(a,e):createPDFAcroTerminal(a,e)},isNonTerminalAcroField=function(a){var e=a.lookup(PDFName.of("Kids"));if(e instanceof PDFArray)for(var n=0,s=e.size();n<s;n++){var o=e.lookup(n),l=o instanceof PDFDict&&o.has(PDFName.of("T"));if(l)return!0}return!1},createPDFAcroTerminal=function(a,e){var n=getInheritableAttribute(a,PDFName.of("FT")),s=a.context.lookup(n,PDFName);return s===PDFName.of("Btn")?createPDFAcroButton(a,e):s===PDFName.of("Ch")?createPDFAcroChoice(a,e):s===PDFName.of("Tx")?PDFAcroText.fromDict(a,e):s===PDFName.of("Sig")?PDFAcroSignature.fromDict(a,e):PDFAcroTerminal.fromDict(a,e)},createPDFAcroButton=function(a,e){var n,s=getInheritableAttribute(a,PDFName.of("Ff")),o=a.context.lookupMaybe(s,PDFNumber),l=(n=o==null?void 0:o.asNumber())!==null&&n!==void 0?n:0;return flagIsSet(l,AcroButtonFlags.PushButton)?PDFAcroPushButton.fromDict(a,e):flagIsSet(l,AcroButtonFlags.Radio)?PDFAcroRadioButton.fromDict(a,e):PDFAcroCheckBox.fromDict(a,e)},createPDFAcroChoice=function(a,e){var n,s=getInheritableAttribute(a,PDFName.of("Ff")),o=a.context.lookupMaybe(s,PDFNumber),l=(n=o==null?void 0:o.asNumber())!==null&&n!==void 0?n:0;return flagIsSet(l,AcroChoiceFlags.Combo)?PDFAcroComboBox.fromDict(a,e):PDFAcroListBox.fromDict(a,e)},flagIsSet=function(a,e){return(a&e)!==0},getInheritableAttribute=function(a,e){var n;return ascend(a,function(s){n||(n=s.get(e))}),n},ascend=function(a,e){e(a);var n=a.lookupMaybe(PDFName.of("Parent"),PDFDict);n&&ascend(n,e)},PDFAcroForm=function(){function a(e){this.dict=e}return a.prototype.Fields=function(){var e=this.dict.lookup(PDFName.of("Fields"));if(e instanceof PDFArray)return e},a.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,n=new Array(e.size()),s=0,o=e.size();s<o;s++){var l=e.get(s),c=e.lookup(s,PDFDict);n[s]=[createPDFAcroField(c,l),l]}return n},a.prototype.getAllFields=function(){var e=[],n=function(s){if(s)for(var o=0,l=s.length;o<l;o++){var c=s[o];e.push(c);var u=c[0];u instanceof PDFAcroNonTerminal&&n(createPDFAcroFields(u.Kids()))}};return n(this.getFields()),e},a.prototype.addField=function(e){var n=this.normalizedEntries().Fields;n==null||n.push(e)},a.prototype.removeField=function(e){var n=e.getParent(),s=n===void 0?this.normalizedEntries().Fields:n.Kids(),o=s==null?void 0:s.indexOf(e.ref);if(s===void 0||o===void 0)throw new Error("Tried to remove inexistent field "+e.getFullyQualifiedName());s.remove(o),n!==void 0&&s.size()===0&&this.removeField(n)},a.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(PDFName.of("Fields"),e)),{Fields:e}},a.fromDict=function(e){return new a(e)},a.create=function(e){var n=e.obj({Fields:[]});return new a(n)},a}(),PDFCatalog=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.Pages=function(){return this.lookup(PDFName.of("Pages"),PDFDict)},e.prototype.AcroForm=function(){return this.lookupMaybe(PDFName.of("AcroForm"),PDFDict)},e.prototype.getAcroForm=function(){var n=this.AcroForm();if(n)return PDFAcroForm.fromDict(n)},e.prototype.getOrCreateAcroForm=function(){var n=this.getAcroForm();if(!n){n=PDFAcroForm.create(this.context);var s=this.context.register(n.dict);this.set(PDFName.of("AcroForm"),s)}return n},e.prototype.ViewerPreferences=function(){return this.lookupMaybe(PDFName.of("ViewerPreferences"),PDFDict)},e.prototype.getViewerPreferences=function(){var n=this.ViewerPreferences();if(n)return ViewerPreferences.fromDict(n)},e.prototype.getOrCreateViewerPreferences=function(){var n=this.getViewerPreferences();if(!n){n=ViewerPreferences.create(this.context);var s=this.context.register(n.dict);this.set(PDFName.of("ViewerPreferences"),s)}return n},e.prototype.insertLeafNode=function(n,s){var o=this.get(PDFName.of("Pages")),l=this.Pages().insertLeafNode(n,s);return l||o},e.prototype.removeLeafNode=function(n){this.Pages().removeLeafNode(n)},e.withContextAndPages=function(n,s){var o=new Map;return o.set(PDFName.of("Type"),PDFName.of("Catalog")),o.set(PDFName.of("Pages"),s),new e(o,n)},e.fromMapWithContext=function(n,s){return new e(n,s)},e}(PDFDict),PDFPageTree=function(a){__extends(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.Parent=function(){return this.lookup(PDFName.of("Parent"))},e.prototype.Kids=function(){return this.lookup(PDFName.of("Kids"),PDFArray)},e.prototype.Count=function(){return this.lookup(PDFName.of("Count"),PDFNumber)},e.prototype.pushTreeNode=function(n){var s=this.Kids();s.push(n)},e.prototype.pushLeafNode=function(n){var s=this.Kids();this.insertLeafKid(s.size(),n)},e.prototype.insertLeafNode=function(n,s){var o=this.Kids(),l=this.Count().asNumber();if(s>l)throw new InvalidTargetIndexError(s,l);for(var c=s,u=0,h=o.size();u<h;u++){if(c===0){this.insertLeafKid(u,n);return}var f=o.get(u),d=this.context.lookup(f);if(d instanceof e){if(d.Count().asNumber()>c)return d.insertLeafNode(n,c)||f;c-=d.Count().asNumber()}d instanceof PDFPageLeaf&&(c-=1)}if(c===0){this.insertLeafKid(o.size(),n);return}throw new CorruptPageTreeError(s,"insertLeafNode")},e.prototype.removeLeafNode=function(n,s){s===void 0&&(s=!0);var o=this.Kids(),l=this.Count().asNumber();if(n>=l)throw new InvalidTargetIndexError(n,l);for(var c=n,u=0,h=o.size();u<h;u++){var f=o.get(u),d=this.context.lookup(f);if(d instanceof e)if(d.Count().asNumber()>c){d.removeLeafNode(c,s),s&&d.Kids().size()===0&&o.remove(u);return}else c-=d.Count().asNumber();if(d instanceof PDFPageLeaf)if(c===0){this.removeKid(u);return}else c-=1}throw new CorruptPageTreeError(n,"removeLeafNode")},e.prototype.ascend=function(n){n(this);var s=this.Parent();s&&s.ascend(n)},e.prototype.traverse=function(n){for(var s=this.Kids(),o=0,l=s.size();o<l;o++){var c=s.get(o),u=this.context.lookup(c);u instanceof e&&u.traverse(n),n(u,c)}},e.prototype.insertLeafKid=function(n,s){var o=this.Kids();this.ascend(function(l){var c=l.Count().asNumber()+1;l.set(PDFName.of("Count"),PDFNumber.of(c))}),o.insert(n,s)},e.prototype.removeKid=function(n){var s=this.Kids(),o=s.lookup(n);o instanceof PDFPageLeaf&&this.ascend(function(l){var c=l.Count().asNumber()-1;l.set(PDFName.of("Count"),PDFNumber.of(c))}),s.remove(n)},e.withContext=function(n,s){var o=new Map;return o.set(PDFName.of("Type"),PDFName.of("Pages")),o.set(PDFName.of("Kids"),n.obj([])),o.set(PDFName.of("Count"),n.obj(0)),s&&o.set(PDFName.of("Parent"),s),new e(o,n)},e.fromMapWithContext=function(n,s){return new e(n,s)},e}(PDFDict),IsDigit=new Uint8Array(256);IsDigit[CharCodes$1.Zero]=1;IsDigit[CharCodes$1.One]=1;IsDigit[CharCodes$1.Two]=1;IsDigit[CharCodes$1.Three]=1;IsDigit[CharCodes$1.Four]=1;IsDigit[CharCodes$1.Five]=1;IsDigit[CharCodes$1.Six]=1;IsDigit[CharCodes$1.Seven]=1;IsDigit[CharCodes$1.Eight]=1;IsDigit[CharCodes$1.Nine]=1;var IsNumericPrefix=new Uint8Array(256);IsNumericPrefix[CharCodes$1.Period]=1;IsNumericPrefix[CharCodes$1.Plus]=1;IsNumericPrefix[CharCodes$1.Minus]=1;var IsNumeric=new Uint8Array(256);for(var idx=0,len=256;idx<len;idx++)IsNumeric[idx]=IsDigit[idx]||IsNumericPrefix[idx]?1:0;var Newline$1=CharCodes$1.Newline,CarriageReturn$1=CharCodes$1.CarriageReturn,BaseParser=function(){function a(e,n){n===void 0&&(n=!1),this.bytes=e,this.capNumbers=n}return a.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!IsDigit[n])break;e+=charFromCode(this.bytes.next())}var s=Number(e);if(!e||!isFinite(s))throw new NumberParsingError(this.bytes.position(),e);return s},a.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!IsNumeric[n]||(e+=charFromCode(this.bytes.next()),n===CharCodes$1.Period))break}for(;!this.bytes.done();){var n=this.bytes.peek();if(!IsDigit[n])break;e+=charFromCode(this.bytes.next())}var s=Number(e);if(!e||!isFinite(s))throw new NumberParsingError(this.bytes.position(),e);if(s>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var o="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(o),Number.MAX_SAFE_INTEGER}else{var o="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(o)}return s},a.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&IsWhitespace[this.bytes.peek()];)this.bytes.next()},a.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===Newline$1||e===CarriageReturn$1)return;this.bytes.next()}},a.prototype.skipComment=function(){if(this.bytes.peek()!==CharCodes$1.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===Newline$1||e===CarriageReturn$1)return!0;this.bytes.next()}return!0},a.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},a.prototype.matchKeyword=function(e){for(var n=this.bytes.offset(),s=0,o=e.length;s<o;s++)if(this.bytes.done()||this.bytes.next()!==e[s])return this.bytes.moveTo(n),!1;return!0},a}(),ByteStream=function(){function a(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return a.prototype.moveTo=function(e){this.idx=e},a.prototype.next=function(){var e=this.bytes[this.idx++];return e===CharCodes$1.Newline?(this.line+=1,this.column=0):this.column+=1,e},a.prototype.assertNext=function(e){if(this.peek()!==e)throw new NextByteAssertionError(this.position(),e,this.peek());return this.next()},a.prototype.peek=function(){return this.bytes[this.idx]},a.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},a.prototype.peekAt=function(e){return this.bytes[e]},a.prototype.done=function(){return this.idx>=this.length},a.prototype.offset=function(){return this.idx},a.prototype.slice=function(e,n){return this.bytes.slice(e,n)},a.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},a.of=function(e){return new a(e)},a.fromPDFRawStream=function(e){return a.of(decodePDFRawStream(e).decode())},a}(),Space=CharCodes$1.Space,CarriageReturn=CharCodes$1.CarriageReturn,Newline=CharCodes$1.Newline,stream=[CharCodes$1.s,CharCodes$1.t,CharCodes$1.r,CharCodes$1.e,CharCodes$1.a,CharCodes$1.m],endstream=[CharCodes$1.e,CharCodes$1.n,CharCodes$1.d,CharCodes$1.s,CharCodes$1.t,CharCodes$1.r,CharCodes$1.e,CharCodes$1.a,CharCodes$1.m],Keywords={header:[CharCodes$1.Percent,CharCodes$1.P,CharCodes$1.D,CharCodes$1.F,CharCodes$1.Dash],eof:[CharCodes$1.Percent,CharCodes$1.Percent,CharCodes$1.E,CharCodes$1.O,CharCodes$1.F],obj:[CharCodes$1.o,CharCodes$1.b,CharCodes$1.j],endobj:[CharCodes$1.e,CharCodes$1.n,CharCodes$1.d,CharCodes$1.o,CharCodes$1.b,CharCodes$1.j],xref:[CharCodes$1.x,CharCodes$1.r,CharCodes$1.e,CharCodes$1.f],trailer:[CharCodes$1.t,CharCodes$1.r,CharCodes$1.a,CharCodes$1.i,CharCodes$1.l,CharCodes$1.e,CharCodes$1.r],startxref:[CharCodes$1.s,CharCodes$1.t,CharCodes$1.a,CharCodes$1.r,CharCodes$1.t,CharCodes$1.x,CharCodes$1.r,CharCodes$1.e,CharCodes$1.f],true:[CharCodes$1.t,CharCodes$1.r,CharCodes$1.u,CharCodes$1.e],false:[CharCodes$1.f,CharCodes$1.a,CharCodes$1.l,CharCodes$1.s,CharCodes$1.e],null:[CharCodes$1.n,CharCodes$1.u,CharCodes$1.l,CharCodes$1.l],stream,streamEOF1:__spreadArrays(stream,[Space,CarriageReturn,Newline]),streamEOF2:__spreadArrays(stream,[CarriageReturn,Newline]),streamEOF3:__spreadArrays(stream,[CarriageReturn]),streamEOF4:__spreadArrays(stream,[Newline]),endstream,EOF1endstream:__spreadArrays([CarriageReturn,Newline],endstream),EOF2endstream:__spreadArrays([CarriageReturn],endstream),EOF3endstream:__spreadArrays([Newline],endstream)},PDFObjectParser=function(a){__extends(e,a);function e(n,s,o){o===void 0&&(o=!1);var l=a.call(this,n,o)||this;return l.context=s,l}return e.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.true))return PDFBool.True;if(this.matchKeyword(Keywords.false))return PDFBool.False;if(this.matchKeyword(Keywords.null))return PDFNull$1;var n=this.bytes.peek();if(n===CharCodes$1.LessThan&&this.bytes.peekAhead(1)===CharCodes$1.LessThan)return this.parseDictOrStream();if(n===CharCodes$1.LessThan)return this.parseHexString();if(n===CharCodes$1.LeftParen)return this.parseString();if(n===CharCodes$1.ForwardSlash)return this.parseName();if(n===CharCodes$1.LeftSquareBracket)return this.parseArray();if(IsNumeric[n])return this.parseNumberOrRef();throw new PDFObjectParsingError(this.bytes.position(),n)},e.prototype.parseNumberOrRef=function(){var n=this.parseRawNumber();this.skipWhitespaceAndComments();var s=this.bytes.offset();if(IsDigit[this.bytes.peek()]){var o=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===CharCodes$1.R)return this.bytes.assertNext(CharCodes$1.R),PDFRef.of(n,o)}return this.bytes.moveTo(s),PDFNumber.of(n)},e.prototype.parseHexString=function(){var n="";for(this.bytes.assertNext(CharCodes$1.LessThan);!this.bytes.done()&&this.bytes.peek()!==CharCodes$1.GreaterThan;)n+=charFromCode(this.bytes.next());return this.bytes.assertNext(CharCodes$1.GreaterThan),PDFHexString.of(n)},e.prototype.parseString=function(){for(var n=0,s=!1,o="";!this.bytes.done();){var l=this.bytes.next();if(o+=charFromCode(l),s||(l===CharCodes$1.LeftParen&&(n+=1),l===CharCodes$1.RightParen&&(n-=1)),l===CharCodes$1.BackSlash?s=!s:s&&(s=!1),n===0)return PDFString.of(o.substring(1,o.length-1))}throw new UnbalancedParenthesisError(this.bytes.position())},e.prototype.parseName=function(){this.bytes.assertNext(CharCodes$1.ForwardSlash);for(var n="";!this.bytes.done();){var s=this.bytes.peek();if(IsWhitespace[s]||IsDelimiter[s])break;n+=charFromCode(s),this.bytes.next()}return PDFName.of(n)},e.prototype.parseArray=function(){this.bytes.assertNext(CharCodes$1.LeftSquareBracket),this.skipWhitespaceAndComments();for(var n=PDFArray.withContext(this.context);this.bytes.peek()!==CharCodes$1.RightSquareBracket;){var s=this.parseObject();n.push(s),this.skipWhitespaceAndComments()}return this.bytes.assertNext(CharCodes$1.RightSquareBracket),n},e.prototype.parseDict=function(){this.bytes.assertNext(CharCodes$1.LessThan),this.bytes.assertNext(CharCodes$1.LessThan),this.skipWhitespaceAndComments();for(var n=new Map;!this.bytes.done()&&this.bytes.peek()!==CharCodes$1.GreaterThan&&this.bytes.peekAhead(1)!==CharCodes$1.GreaterThan;){var s=this.parseName(),o=this.parseObject();n.set(s,o),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(CharCodes$1.GreaterThan),this.bytes.assertNext(CharCodes$1.GreaterThan);var l=n.get(PDFName.of("Type"));return l===PDFName.of("Catalog")?PDFCatalog.fromMapWithContext(n,this.context):l===PDFName.of("Pages")?PDFPageTree.fromMapWithContext(n,this.context):l===PDFName.of("Page")?PDFPageLeaf.fromMapWithContext(n,this.context):PDFDict.fromMapWithContext(n,this.context)},e.prototype.parseDictOrStream=function(){var n=this.bytes.position(),s=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Keywords.streamEOF1)&&!this.matchKeyword(Keywords.streamEOF2)&&!this.matchKeyword(Keywords.streamEOF3)&&!this.matchKeyword(Keywords.streamEOF4)&&!this.matchKeyword(Keywords.stream))return s;var o=this.bytes.offset(),l,c=s.get(PDFName.of("Length"));c instanceof PDFNumber?(l=o+c.asNumber(),this.bytes.moveTo(l),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.endstream)||(this.bytes.moveTo(o),l=this.findEndOfStreamFallback(n))):l=this.findEndOfStreamFallback(n);var u=this.bytes.slice(o,l);return PDFRawStream.of(s,u)},e.prototype.findEndOfStreamFallback=function(n){for(var s=1,o=this.bytes.offset();!this.bytes.done()&&(o=this.bytes.offset(),this.matchKeyword(Keywords.stream)?s+=1:this.matchKeyword(Keywords.EOF1endstream)||this.matchKeyword(Keywords.EOF2endstream)||this.matchKeyword(Keywords.EOF3endstream)||this.matchKeyword(Keywords.endstream)?s-=1:this.bytes.next(),s!==0););if(s!==0)throw new PDFStreamParsingError(n);return o},e.forBytes=function(n,s,o){return new e(ByteStream.of(n),s,o)},e.forByteStream=function(n,s,o){return o===void 0&&(o=!1),new e(n,s,o)},e}(BaseParser),PDFObjectStreamParser=function(a){__extends(e,a);function e(n,s){var o=a.call(this,ByteStream.fromPDFRawStream(n),n.dict.context)||this,l=n.dict;return o.alreadyParsed=!1,o.shouldWaitForTick=s||function(){return!1},o.firstOffset=l.lookup(PDFName.of("First"),PDFNumber).asNumber(),o.objectCount=l.lookup(PDFName.of("N"),PDFNumber).asNumber(),o}return e.prototype.parseIntoContext=function(){return __awaiter(this,void 0,void 0,function(){var n,s,o,l,c,u,h,f;return __generator(this,function(d){switch(d.label){case 0:if(this.alreadyParsed)throw new ReparseError("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,n=this.parseOffsetsAndObjectNumbers(),s=0,o=n.length,d.label=1;case 1:return s<o?(l=n[s],c=l.objectNumber,u=l.offset,this.bytes.moveTo(this.firstOffset+u),h=this.parseObject(),f=PDFRef.of(c,0),this.context.assign(f,h),this.shouldWaitForTick()?[4,waitForTick()]:[3,3]):[3,4];case 2:d.sent(),d.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.prototype.parseOffsetsAndObjectNumbers=function(){for(var n=[],s=0,o=this.objectCount;s<o;s++){this.skipWhitespaceAndComments();var l=this.parseRawInt();this.skipWhitespaceAndComments();var c=this.parseRawInt();n.push({objectNumber:l,offset:c})}return n},e.forStream=function(n,s){return new e(n,s)},e}(PDFObjectParser),PDFXRefStreamParser=function(){function a(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=ByteStream.fromPDFRawStream(e),this.context=this.dict.context;var n=this.dict.lookup(PDFName.of("Size"),PDFNumber),s=this.dict.lookup(PDFName.of("Index"));if(s instanceof PDFArray){this.subsections=[];for(var o=0,l=s.size();o<l;o+=2){var c=s.lookup(o+0,PDFNumber).asNumber(),u=s.lookup(o+1,PDFNumber).asNumber();this.subsections.push({firstObjectNumber:c,length:u})}}else this.subsections=[{firstObjectNumber:0,length:n.asNumber()}];var h=this.dict.lookup(PDFName.of("W"),PDFArray);this.byteWidths=[-1,-1,-1];for(var o=0,l=h.size();o<l;o++)this.byteWidths[o]=h.lookup(o,PDFNumber).asNumber()}return a.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new ReparseError("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(PDFName.of("Root")),Encrypt:this.dict.get(PDFName.of("Encrypt")),Info:this.dict.get(PDFName.of("Info")),ID:this.dict.get(PDFName.of("ID"))};var e=this.parseEntries();return e},a.prototype.parseEntries=function(){for(var e=[],n=this.byteWidths,s=n[0],o=n[1],l=n[2],c=0,u=this.subsections.length;c<u;c++)for(var h=this.subsections[c],f=h.firstObjectNumber,d=h.length,p=0;p<d;p++){for(var g=0,m=0,y=s;m<y;m++)g=g<<8|this.bytes.next();for(var _=0,m=0,y=o;m<y;m++)_=_<<8|this.bytes.next();for(var b=0,m=0,y=l;m<y;m++)b=b<<8|this.bytes.next();s===0&&(g=1);var x=f+p,P={ref:PDFRef.of(x,b),offset:_,deleted:g===0,inObjectStream:g===2};e.push(P)}return e},a.forStream=function(e){return new a(e)},a}(),PDFParser=function(a){__extends(e,a);function e(n,s,o,l){s===void 0&&(s=1/0),o===void 0&&(o=!1),l===void 0&&(l=!1);var c=a.call(this,ByteStream.of(n),PDFContext.create(),l)||this;return c.alreadyParsed=!1,c.parsedObjects=0,c.shouldWaitForTick=function(){return c.parsedObjects+=1,c.parsedObjects%c.objectsPerTick===0},c.objectsPerTick=s,c.throwOnInvalidObject=o,c}return e.prototype.parseDocument=function(){return __awaiter(this,void 0,void 0,function(){var n,s;return __generator(this,function(o){switch(o.label){case 0:if(this.alreadyParsed)throw new ReparseError("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),o.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(o.sent(),s=this.bytes.offset(),s===n)throw new StalledParserError(this.bytes.position());return n=s,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(PDFRef.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(PDFRef.of(0))),[2,this.context]}})})},e.prototype.maybeRecoverRoot=function(){var n=function(d){return d instanceof PDFDict&&d.lookup(PDFName.of("Type"))===PDFName.of("Catalog")},s=this.context.lookup(this.context.trailerInfo.Root);if(!n(s))for(var o=this.context.enumerateIndirectObjects(),l=0,c=o.length;l<c;l++){var u=o[l],h=u[0],f=u[1];n(f)&&(this.context.trailerInfo.Root=h)}},e.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Keywords.header)){var n=this.parseRawInt();this.bytes.assertNext(CharCodes$1.Period);var s=this.parseRawInt(),o=PDFHeader.forVersion(n,s);return this.skipBinaryHeaderComment(),o}this.bytes.next()}throw new MissingPDFHeaderError(this.bytes.position())},e.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var n=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Keywords.obj))throw new MissingKeywordError(this.bytes.position(),Keywords.obj);return PDFRef.of(n,s)},e.prototype.matchIndirectObjectHeader=function(){var n=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(n),!1}},e.prototype.parseIndirectObject=function(){return __awaiter(this,void 0,void 0,function(){var n,s;return __generator(this,function(o){switch(o.label){case 0:return n=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),s=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.endobj),s instanceof PDFRawStream&&s.dict.lookup(PDFName.of("Type"))===PDFName.of("ObjStm")?[4,PDFObjectStreamParser.forStream(s,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return o.sent(),[3,3];case 2:s instanceof PDFRawStream&&s.dict.lookup(PDFName.of("Type"))===PDFName.of("XRef")?PDFXRefStreamParser.forStream(s).parseIntoContext():this.context.assign(n,s),o.label=3;case 3:return[2,n]}})})},e.prototype.tryToParseInvalidIndirectObject=function(){var n=this.bytes.position(),s="Trying to parse invalid object: "+JSON.stringify(n)+")";if(this.throwOnInvalidObject)throw new Error(s);console.warn(s);var o=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+o),this.skipWhitespaceAndComments();for(var l=this.bytes.offset(),c=!0;!this.bytes.done()&&(this.matchKeyword(Keywords.endobj)&&(c=!1),!!c);)this.bytes.next();if(c)throw new PDFInvalidObjectParsingError(n);var u=this.bytes.offset()-Keywords.endobj.length,h=PDFInvalidObject.of(this.bytes.slice(l,u));return this.context.assign(o,h),o},e.prototype.parseIndirectObjects=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){switch(s.label){case 0:this.skipWhitespaceAndComments(),s.label=1;case 1:if(!(!this.bytes.done()&&IsDigit[this.bytes.peek()]))return[3,8];n=this.bytes.offset(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return s.sent(),[3,5];case 4:return s.sent(),this.bytes.moveTo(n),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,waitForTick()]:[3,7];case 6:s.sent(),s.label=7;case 7:return[3,1];case 8:return[2]}})})},e.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.xref)){this.skipWhitespaceAndComments();for(var n=-1,s=PDFCrossRefSection.createEmpty();!this.bytes.done()&&IsDigit[this.bytes.peek()];){var o=this.parseRawInt();this.skipWhitespaceAndComments();var l=this.parseRawInt();this.skipWhitespaceAndComments();var c=this.bytes.peek();if(c===CharCodes$1.n||c===CharCodes$1.f){var u=PDFRef.of(n,l);this.bytes.next()===CharCodes$1.n?s.addEntry(u,o):s.addDeletedEntry(u,o),n+=1}else n=o;this.skipWhitespaceAndComments()}return s}},e.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.trailer)){this.skipWhitespaceAndComments();var n=this.parseDict(),s=this.context;s.trailerInfo={Root:n.get(PDFName.of("Root"))||s.trailerInfo.Root,Encrypt:n.get(PDFName.of("Encrypt"))||s.trailerInfo.Encrypt,Info:n.get(PDFName.of("Info"))||s.trailerInfo.Info,ID:n.get(PDFName.of("ID"))||s.trailerInfo.ID}}},e.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.startxref)){this.skipWhitespaceAndComments();var n=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Keywords.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.eof),this.skipWhitespaceAndComments(),PDFTrailer.forLastCrossRefSectionOffset(n)}},e.prototype.parseDocumentSection=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.parseIndirectObjects()];case 1:return n.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},e.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var n=this.bytes.offset(),s=this.bytes.peek(),o=s>=CharCodes$1.Space&&s<=CharCodes$1.Tilde;if(o&&(this.matchKeyword(Keywords.xref)||this.matchKeyword(Keywords.trailer)||this.matchKeyword(Keywords.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(n);break}this.bytes.next()}},e.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var n=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(n)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},e.forBytesWithOptions=function(n,s,o,l){return new e(n,s,o,l)},e}(PDFObjectParser),flag=function(a){return 1<<a},AnnotationFlags;(function(a){a[a.Invisible=flag(0)]="Invisible",a[a.Hidden=flag(1)]="Hidden",a[a.Print=flag(2)]="Print",a[a.NoZoom=flag(3)]="NoZoom",a[a.NoRotate=flag(4)]="NoRotate",a[a.NoView=flag(5)]="NoView",a[a.ReadOnly=flag(6)]="ReadOnly",a[a.Locked=flag(7)]="Locked",a[a.ToggleNoView=flag(8)]="ToggleNoView",a[a.LockedContents=flag(9)]="LockedContents"})(AnnotationFlags||(AnnotationFlags={}));var asPDFName=function(a){return a instanceof PDFName?a:PDFName.of(a)},asPDFNumber=function(a){return a instanceof PDFNumber?a:PDFNumber.of(a)},asNumber=function(a){return a instanceof PDFNumber?a.asNumber():a},RotationTypes;(function(a){a.Degrees="degrees",a.Radians="radians"})(RotationTypes||(RotationTypes={}));var degrees=function(a){return assertIs(a,"degreeAngle",["number"]),{type:RotationTypes.Degrees,angle:a}},Radians=RotationTypes.Radians,Degrees=RotationTypes.Degrees,degreesToRadians=function(a){return a*Math.PI/180},radiansToDegrees=function(a){return a*180/Math.PI},toRadians=function(a){return a.type===Radians?a.angle:a.type===Degrees?degreesToRadians(a.angle):error$1("Invalid rotation: "+JSON.stringify(a))},toDegrees=function(a){return a.type===Radians?radiansToDegrees(a.angle):a.type===Degrees?a.angle:error$1("Invalid rotation: "+JSON.stringify(a))},reduceRotation=function(a){a===void 0&&(a=0);var e=a/90%4;return e===0?0:e===1?90:e===2?180:e===3?270:0},adjustDimsForRotation=function(a,e){e===void 0&&(e=0);var n=reduceRotation(e);return n===90||n===270?{width:a.height,height:a.width}:{width:a.width,height:a.height}},rotateRectangle=function(a,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var s=a.x,o=a.y,l=a.width,c=a.height,u=reduceRotation(n),h=e/2;return u===0?{x:s-h,y:o-h,width:l,height:c}:u===90?{x:s-c+h,y:o-h,width:c,height:l}:u===180?{x:s-l+h,y:o-c+h,width:l,height:c}:u===270?{x:s-h,y:o-l+h,width:c,height:l}:{x:s-h,y:o-h,width:l,height:c}},clip$1=function(){return PDFOperator.of(Ops.ClipNonZero)},cos=Math.cos,sin=Math.sin,tan=Math.tan,concatTransformationMatrix=function(a,e,n,s,o,l){return PDFOperator.of(Ops.ConcatTransformationMatrix,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n),asPDFNumber(s),asPDFNumber(o),asPDFNumber(l)])},translate=function(a,e){return concatTransformationMatrix(1,0,0,1,a,e)},scale$1=function(a,e){return concatTransformationMatrix(a,0,0,e,0,0)},rotateRadians=function(a){return concatTransformationMatrix(cos(asNumber(a)),sin(asNumber(a)),-sin(asNumber(a)),cos(asNumber(a)),0,0)},rotateDegrees=function(a){return rotateRadians(degreesToRadians(asNumber(a)))},skewRadians=function(a,e){return concatTransformationMatrix(1,tan(asNumber(a)),tan(asNumber(e)),1,0,0)},setDashPattern=function(a,e){return PDFOperator.of(Ops.SetLineDashPattern,["["+a.map(asPDFNumber).join(" ")+"]",asPDFNumber(e)])},LineCapStyle;(function(a){a[a.Butt=0]="Butt",a[a.Round=1]="Round",a[a.Projecting=2]="Projecting"})(LineCapStyle||(LineCapStyle={}));var setLineCap=function(a){return PDFOperator.of(Ops.SetLineCapStyle,[asPDFNumber(a)])},LineJoinStyle;(function(a){a[a.Miter=0]="Miter",a[a.Round=1]="Round",a[a.Bevel=2]="Bevel"})(LineJoinStyle||(LineJoinStyle={}));var setGraphicsState=function(a){return PDFOperator.of(Ops.SetGraphicsStateParams,[asPDFName(a)])},pushGraphicsState=function(){return PDFOperator.of(Ops.PushGraphicsState)},popGraphicsState=function(){return PDFOperator.of(Ops.PopGraphicsState)},setLineWidth=function(a){return PDFOperator.of(Ops.SetLineWidth,[asPDFNumber(a)])},appendBezierCurve=function(a,e,n,s,o,l){return PDFOperator.of(Ops.AppendBezierCurve,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n),asPDFNumber(s),asPDFNumber(o),asPDFNumber(l)])},appendQuadraticCurve=function(a,e,n,s){return PDFOperator.of(Ops.CurveToReplicateInitialPoint,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n),asPDFNumber(s)])},closePath=function(){return PDFOperator.of(Ops.ClosePath)},moveTo=function(a,e){return PDFOperator.of(Ops.MoveTo,[asPDFNumber(a),asPDFNumber(e)])},lineTo=function(a,e){return PDFOperator.of(Ops.LineTo,[asPDFNumber(a),asPDFNumber(e)])},stroke=function(){return PDFOperator.of(Ops.StrokePath)},fill=function(){return PDFOperator.of(Ops.FillNonZero)},fillAndStroke=function(){return PDFOperator.of(Ops.FillNonZeroAndStroke)},endPath=function(){return PDFOperator.of(Ops.EndPath)},nextLine=function(){return PDFOperator.of(Ops.NextLine)},showText=function(a){return PDFOperator.of(Ops.ShowText,[a])},beginText=function(){return PDFOperator.of(Ops.BeginText)},endText=function(){return PDFOperator.of(Ops.EndText)},setFontAndSize=function(a,e){return PDFOperator.of(Ops.SetFontAndSize,[asPDFName(a),asPDFNumber(e)])},setLineHeight=function(a){return PDFOperator.of(Ops.SetTextLineHeight,[asPDFNumber(a)])},TextRenderingMode;(function(a){a[a.Fill=0]="Fill",a[a.Outline=1]="Outline",a[a.FillAndOutline=2]="FillAndOutline",a[a.Invisible=3]="Invisible",a[a.FillAndClip=4]="FillAndClip",a[a.OutlineAndClip=5]="OutlineAndClip",a[a.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",a[a.Clip=7]="Clip"})(TextRenderingMode||(TextRenderingMode={}));var setTextMatrix=function(a,e,n,s,o,l){return PDFOperator.of(Ops.SetTextMatrix,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n),asPDFNumber(s),asPDFNumber(o),asPDFNumber(l)])},rotateAndSkewTextRadiansAndTranslate=function(a,e,n,s,o){return setTextMatrix(cos(asNumber(a)),sin(asNumber(a))+tan(asNumber(e)),-sin(asNumber(a))+tan(asNumber(n)),cos(asNumber(a)),s,o)},drawObject=function(a){return PDFOperator.of(Ops.DrawObject,[asPDFName(a)])},setFillingGrayscaleColor=function(a){return PDFOperator.of(Ops.NonStrokingColorGray,[asPDFNumber(a)])},setStrokingGrayscaleColor=function(a){return PDFOperator.of(Ops.StrokingColorGray,[asPDFNumber(a)])},setFillingRgbColor=function(a,e,n){return PDFOperator.of(Ops.NonStrokingColorRgb,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n)])},setStrokingRgbColor=function(a,e,n){return PDFOperator.of(Ops.StrokingColorRgb,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n)])},setFillingCmykColor=function(a,e,n,s){return PDFOperator.of(Ops.NonStrokingColorCmyk,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n),asPDFNumber(s)])},setStrokingCmykColor=function(a,e,n,s){return PDFOperator.of(Ops.StrokingColorCmyk,[asPDFNumber(a),asPDFNumber(e),asPDFNumber(n),asPDFNumber(s)])},beginMarkedContent=function(a){return PDFOperator.of(Ops.BeginMarkedContent,[asPDFName(a)])},endMarkedContent=function(){return PDFOperator.of(Ops.EndMarkedContent)},ColorTypes;(function(a){a.Grayscale="Grayscale",a.RGB="RGB",a.CMYK="CMYK"})(ColorTypes||(ColorTypes={}));var grayscale=function(a){return assertRange(a,"gray",0,1),{type:ColorTypes.Grayscale,gray:a}},rgb=function(a,e,n){return assertRange(a,"red",0,1),assertRange(e,"green",0,1),assertRange(n,"blue",0,1),{type:ColorTypes.RGB,red:a,green:e,blue:n}},cmyk=function(a,e,n,s){return assertRange(a,"cyan",0,1),assertRange(e,"magenta",0,1),assertRange(n,"yellow",0,1),assertRange(s,"key",0,1),{type:ColorTypes.CMYK,cyan:a,magenta:e,yellow:n,key:s}},Grayscale=ColorTypes.Grayscale,RGB=ColorTypes.RGB,CMYK=ColorTypes.CMYK,setFillingColor=function(a){return a.type===Grayscale?setFillingGrayscaleColor(a.gray):a.type===RGB?setFillingRgbColor(a.red,a.green,a.blue):a.type===CMYK?setFillingCmykColor(a.cyan,a.magenta,a.yellow,a.key):error$1("Invalid color: "+JSON.stringify(a))},setStrokingColor=function(a){return a.type===Grayscale?setStrokingGrayscaleColor(a.gray):a.type===RGB?setStrokingRgbColor(a.red,a.green,a.blue):a.type===CMYK?setStrokingCmykColor(a.cyan,a.magenta,a.yellow,a.key):error$1("Invalid color: "+JSON.stringify(a))},componentsToColor=function(a,e){return e===void 0&&(e=1),(a==null?void 0:a.length)===1?grayscale(a[0]*e):(a==null?void 0:a.length)===3?rgb(a[0]*e,a[1]*e,a[2]*e):(a==null?void 0:a.length)===4?cmyk(a[0]*e,a[1]*e,a[2]*e,a[3]*e):void 0},colorToComponents=function(a){return a.type===Grayscale?[a.gray]:a.type===RGB?[a.red,a.green,a.blue]:a.type===CMYK?[a.cyan,a.magenta,a.yellow,a.key]:error$1("Invalid color: "+JSON.stringify(a))},cx=0,cy=0,px=0,py=0,sx=0,sy=0,parameters=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),parse$2=function(a){for(var e,n=[],s=[],o="",l=!1,c=0,u=0,h=a;u<h.length;u++){var f=h[u];if(parameters.has(f))c=parameters.get(f),e&&(o.length>0&&(s[s.length]=+o),n[n.length]={cmd:e,args:s},s=[],o="",l=!1),e=f;else if([" ",","].includes(f)||f==="-"&&o.length>0&&o[o.length-1]!=="e"||f==="."&&l){if(o.length===0)continue;s.length===c?(n[n.length]={cmd:e,args:s},s=[+o],e==="M"&&(e="L"),e==="m"&&(e="l")):s[s.length]=+o,l=f===".",o=["-","."].includes(f)?f:""}else o+=f,f==="."&&(l=!0)}return o.length>0&&(s.length===c?(n[n.length]={cmd:e,args:s},s=[+o],e==="M"&&(e="L"),e==="m"&&(e="l")):s[s.length]=+o),n[n.length]={cmd:e,args:s},n},apply=function(a){cx=cy=px=py=sx=sy=0;for(var e=[],n=0;n<a.length;n++){var s=a[n];if(s.cmd&&typeof runners[s.cmd]=="function"){var o=runners[s.cmd](s.args);Array.isArray(o)?e=e.concat(o):e.push(o)}}return e},runners={M:function(a){return cx=a[0],cy=a[1],px=py=null,sx=cx,sy=cy,moveTo(cx,cy)},m:function(a){return cx+=a[0],cy+=a[1],px=py=null,sx=cx,sy=cy,moveTo(cx,cy)},C:function(a){return cx=a[4],cy=a[5],px=a[2],py=a[3],appendBezierCurve(a[0],a[1],a[2],a[3],a[4],a[5])},c:function(a){var e=appendBezierCurve(a[0]+cx,a[1]+cy,a[2]+cx,a[3]+cy,a[4]+cx,a[5]+cy);return px=cx+a[2],py=cy+a[3],cx+=a[4],cy+=a[5],e},S:function(a){(px===null||py===null)&&(px=cx,py=cy);var e=appendBezierCurve(cx-(px-cx),cy-(py-cy),a[0],a[1],a[2],a[3]);return px=a[0],py=a[1],cx=a[2],cy=a[3],e},s:function(a){(px===null||py===null)&&(px=cx,py=cy);var e=appendBezierCurve(cx-(px-cx),cy-(py-cy),cx+a[0],cy+a[1],cx+a[2],cy+a[3]);return px=cx+a[0],py=cy+a[1],cx+=a[2],cy+=a[3],e},Q:function(a){return px=a[0],py=a[1],cx=a[2],cy=a[3],appendQuadraticCurve(a[0],a[1],cx,cy)},q:function(a){var e=appendQuadraticCurve(a[0]+cx,a[1]+cy,a[2]+cx,a[3]+cy);return px=cx+a[0],py=cy+a[1],cx+=a[2],cy+=a[3],e},T:function(a){px===null||py===null?(px=cx,py=cy):(px=cx-(px-cx),py=cy-(py-cy));var e=appendQuadraticCurve(px,py,a[0],a[1]);return px=cx-(px-cx),py=cy-(py-cy),cx=a[0],cy=a[1],e},t:function(a){px===null||py===null?(px=cx,py=cy):(px=cx-(px-cx),py=cy-(py-cy));var e=appendQuadraticCurve(px,py,cx+a[0],cy+a[1]);return cx+=a[0],cy+=a[1],e},A:function(a){var e=solveArc(cx,cy,a);return cx=a[5],cy=a[6],e},a:function(a){a[5]+=cx,a[6]+=cy;var e=solveArc(cx,cy,a);return cx=a[5],cy=a[6],e},L:function(a){return cx=a[0],cy=a[1],px=py=null,lineTo(cx,cy)},l:function(a){return cx+=a[0],cy+=a[1],px=py=null,lineTo(cx,cy)},H:function(a){return cx=a[0],px=py=null,lineTo(cx,cy)},h:function(a){return cx+=a[0],px=py=null,lineTo(cx,cy)},V:function(a){return cy=a[0],px=py=null,lineTo(cx,cy)},v:function(a){return cy+=a[0],px=py=null,lineTo(cx,cy)},Z:function(){var a=closePath();return cx=sx,cy=sy,a},z:function(){var a=closePath();return cx=sx,cy=sy,a}},solveArc=function(a,e,n){for(var s=n[0],o=n[1],l=n[2],c=n[3],u=n[4],h=n[5],f=n[6],d=arcToSegments(h,f,s,o,c,u,l,a,e),p=[],g=0,m=d;g<m.length;g++){var y=m[g],_=segmentToBezier.apply(void 0,y);p.push(appendBezierCurve.apply(void 0,_))}return p},arcToSegments=function(a,e,n,s,o,l,c,u,h){var f=c*(Math.PI/180),d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),s=Math.abs(s),px=p*(u-a)*.5+d*(h-e)*.5,py=p*(h-e)*.5-d*(u-a)*.5;var g=px*px/(n*n)+py*py/(s*s);g>1&&(g=Math.sqrt(g),n*=g,s*=g);var m=p/n,y=d/n,_=-d/s,b=p/s,x=m*u+y*h,P=_*u+b*h,T=m*a+y*e,k=_*a+b*e,S=(T-x)*(T-x)+(k-P)*(k-P),A=1/S-.25;A<0&&(A=0);var w=Math.sqrt(A);l===o&&(w=-w);var E=.5*(x+T)-w*(k-P),F=.5*(P+k)+w*(T-x),O=Math.atan2(P-F,x-E),M=Math.atan2(k-F,T-E),V=M-O;V<0&&l===1?V+=2*Math.PI:V>0&&l===0&&(V-=2*Math.PI);for(var G=Math.ceil(Math.abs(V/(Math.PI*.5+.001))),te=[],ce=0;ce<G;ce++){var se=O+ce*V/G,le=O+(ce+1)*V/G;te[ce]=[E,F,se,le,n,s,d,p]}return te},segmentToBezier=function(a,e,n,s,o,l,c,u){var h=u*o,f=-c*l,d=c*o,p=u*l,g=.5*(s-n),m=8/3*Math.sin(g*.5)*Math.sin(g*.5)/Math.sin(g),y=a+Math.cos(n)-m*Math.sin(n),_=e+Math.sin(n)+m*Math.cos(n),b=a+Math.cos(s),x=e+Math.sin(s),P=b+m*Math.sin(s),T=x-m*Math.cos(s),k=[h*y+f*_,d*y+p*_,h*P+f*T,d*P+p*T,h*b+f*x,d*b+p*x];return k},svgPathToOperators=function(a){return apply(parse$2(a))},drawLinesOfText=function(a,e){for(var n=[pushGraphicsState(),e.graphicsState&&setGraphicsState(e.graphicsState),beginText(),setFillingColor(e.color),setFontAndSize(e.font,e.size),setLineHeight(e.lineHeight),rotateAndSkewTextRadiansAndTranslate(toRadians(e.rotate),toRadians(e.xSkew),toRadians(e.ySkew),e.x,e.y)].filter(Boolean),s=0,o=a.length;s<o;s++)n.push(showText(a[s]),nextLine());return n.push(endText(),popGraphicsState()),n},drawImage=function(a,e){return[pushGraphicsState(),e.graphicsState&&setGraphicsState(e.graphicsState),translate(e.x,e.y),rotateRadians(toRadians(e.rotate)),scale$1(e.width,e.height),skewRadians(toRadians(e.xSkew),toRadians(e.ySkew)),drawObject(a),popGraphicsState()].filter(Boolean)},drawPage=function(a,e){return[pushGraphicsState(),e.graphicsState&&setGraphicsState(e.graphicsState),translate(e.x,e.y),rotateRadians(toRadians(e.rotate)),scale$1(e.xScale,e.yScale),skewRadians(toRadians(e.xSkew),toRadians(e.ySkew)),drawObject(a),popGraphicsState()].filter(Boolean)},drawLine=function(a){var e,n;return[pushGraphicsState(),a.graphicsState&&setGraphicsState(a.graphicsState),a.color&&setStrokingColor(a.color),setLineWidth(a.thickness),setDashPattern((e=a.dashArray)!==null&&e!==void 0?e:[],(n=a.dashPhase)!==null&&n!==void 0?n:0),moveTo(a.start.x,a.start.y),a.lineCap&&setLineCap(a.lineCap),moveTo(a.start.x,a.start.y),lineTo(a.end.x,a.end.y),stroke(),popGraphicsState()].filter(Boolean)},drawRectangle=function(a){var e,n;return[pushGraphicsState(),a.graphicsState&&setGraphicsState(a.graphicsState),a.color&&setFillingColor(a.color),a.borderColor&&setStrokingColor(a.borderColor),setLineWidth(a.borderWidth),a.borderLineCap&&setLineCap(a.borderLineCap),setDashPattern((e=a.borderDashArray)!==null&&e!==void 0?e:[],(n=a.borderDashPhase)!==null&&n!==void 0?n:0),translate(a.x,a.y),rotateRadians(toRadians(a.rotate)),skewRadians(toRadians(a.xSkew),toRadians(a.ySkew)),moveTo(0,0),lineTo(0,a.height),lineTo(a.width,a.height),lineTo(a.width,0),closePath(),a.color&&a.borderWidth?fillAndStroke():a.color?fill():a.borderColor?stroke():closePath(),popGraphicsState()].filter(Boolean)},KAPPA=4*((Math.sqrt(2)-1)/3),drawEllipsePath=function(a){var e=asNumber(a.x),n=asNumber(a.y),s=asNumber(a.xScale),o=asNumber(a.yScale);e-=s,n-=o;var l=s*KAPPA,c=o*KAPPA,u=e+s*2,h=n+o*2,f=e+s,d=n+o;return[pushGraphicsState(),moveTo(e,d),appendBezierCurve(e,d-c,f-l,n,f,n),appendBezierCurve(f+l,n,u,d-c,u,d),appendBezierCurve(u,d+c,f+l,h,f,h),appendBezierCurve(f-l,h,e,d+c,e,d),popGraphicsState()]},drawEllipseCurves=function(a){var e=asNumber(a.x),n=asNumber(a.y),s=asNumber(a.xScale),o=asNumber(a.yScale),l=-s,c=-o,u=s*KAPPA,h=o*KAPPA,f=l+s*2,d=c+o*2,p=l+s,g=c+o;return[translate(e,n),rotateRadians(toRadians(a.rotate)),moveTo(l,g),appendBezierCurve(l,g-h,p-u,c,p,c),appendBezierCurve(p+u,c,f,g-h,f,g),appendBezierCurve(f,g+h,p+u,d,p,d),appendBezierCurve(p-u,d,l,g+h,l,g)]},drawEllipse=function(a){var e,n,s;return __spreadArrays([pushGraphicsState(),a.graphicsState&&setGraphicsState(a.graphicsState),a.color&&setFillingColor(a.color),a.borderColor&&setStrokingColor(a.borderColor),setLineWidth(a.borderWidth),a.borderLineCap&&setLineCap(a.borderLineCap),setDashPattern((e=a.borderDashArray)!==null&&e!==void 0?e:[],(n=a.borderDashPhase)!==null&&n!==void 0?n:0)],a.rotate===void 0?drawEllipsePath({x:a.x,y:a.y,xScale:a.xScale,yScale:a.yScale}):drawEllipseCurves({x:a.x,y:a.y,xScale:a.xScale,yScale:a.yScale,rotate:(s=a.rotate)!==null&&s!==void 0?s:degrees(0)}),[a.color&&a.borderWidth?fillAndStroke():a.color?fill():a.borderColor?stroke():closePath(),popGraphicsState()]).filter(Boolean)},drawSvgPath=function(a,e){var n,s,o;return __spreadArrays([pushGraphicsState(),e.graphicsState&&setGraphicsState(e.graphicsState),translate(e.x,e.y),rotateRadians(toRadians((n=e.rotate)!==null&&n!==void 0?n:degrees(0))),e.scale?scale$1(e.scale,-e.scale):scale$1(1,-1),e.color&&setFillingColor(e.color),e.borderColor&&setStrokingColor(e.borderColor),e.borderWidth&&setLineWidth(e.borderWidth),e.borderLineCap&&setLineCap(e.borderLineCap),setDashPattern((s=e.borderDashArray)!==null&&s!==void 0?s:[],(o=e.borderDashPhase)!==null&&o!==void 0?o:0)],svgPathToOperators(a),[e.color&&e.borderWidth?fillAndStroke():e.color?fill():e.borderColor?stroke():closePath(),popGraphicsState()]).filter(Boolean)},drawCheckMark=function(a){var e=asNumber(a.size),n=-1+.75,s=-1+.51,o=1-.525,l=1-.31,c=-1+.325,u=.3995/(o-s)+s;return[pushGraphicsState(),a.color&&setStrokingColor(a.color),setLineWidth(a.thickness),translate(a.x,a.y),moveTo(c*e,u*e),lineTo(n*e,s*e),lineTo(l*e,o*e),stroke(),popGraphicsState()].filter(Boolean)},rotateInPlace=function(a){return a.rotation===0?[translate(0,0),rotateDegrees(0)]:a.rotation===90?[translate(a.width,0),rotateDegrees(90)]:a.rotation===180?[translate(a.width,a.height),rotateDegrees(180)]:a.rotation===270?[translate(0,a.height),rotateDegrees(270)]:[]},drawCheckBox=function(a){var e=drawRectangle({x:a.x,y:a.y,width:a.width,height:a.height,borderWidth:a.borderWidth,color:a.color,borderColor:a.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)});if(!a.filled)return e;var n=asNumber(a.width),s=asNumber(a.height),o=Math.min(n,s)/2,l=drawCheckMark({x:n/2,y:s/2,size:o,thickness:a.thickness,color:a.markColor});return __spreadArrays([pushGraphicsState()],e,l,[popGraphicsState()])},drawRadioButton=function(a){var e=asNumber(a.width),n=asNumber(a.height),s=Math.min(e,n)/2,o=drawEllipse({x:a.x,y:a.y,xScale:s,yScale:s,color:a.color,borderColor:a.borderColor,borderWidth:a.borderWidth});if(!a.filled)return o;var l=drawEllipse({x:a.x,y:a.y,xScale:s*.45,yScale:s*.45,color:a.dotColor,borderColor:void 0,borderWidth:0});return __spreadArrays([pushGraphicsState()],o,l,[popGraphicsState()])},drawButton=function(a){var e=asNumber(a.x),n=asNumber(a.y),s=asNumber(a.width),o=asNumber(a.height),l=drawRectangle({x:e,y:n,width:s,height:o,borderWidth:a.borderWidth,color:a.color,borderColor:a.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),c=drawTextLines(a.textLines,{color:a.textColor,font:a.font,size:a.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)});return __spreadArrays([pushGraphicsState()],l,c,[popGraphicsState()])},drawTextLines=function(a,e){for(var n=[beginText(),setFillingColor(e.color),setFontAndSize(e.font,e.size)],s=0,o=a.length;s<o;s++){var l=a[s],c=l.encoded,u=l.x,h=l.y;n.push(rotateAndSkewTextRadiansAndTranslate(toRadians(e.rotate),toRadians(e.xSkew),toRadians(e.ySkew),u,h),showText(c))}return n.push(endText()),n},drawTextField=function(a){var e=asNumber(a.x),n=asNumber(a.y),s=asNumber(a.width),o=asNumber(a.height),l=asNumber(a.borderWidth),c=asNumber(a.padding),u=e+l/2+c,h=n+l/2+c,f=s-(l/2+c)*2,d=o-(l/2+c)*2,p=[moveTo(u,h),lineTo(u,h+d),lineTo(u+f,h+d),lineTo(u+f,h),closePath(),clip$1(),endPath()],g=drawRectangle({x:e,y:n,width:s,height:o,borderWidth:a.borderWidth,color:a.color,borderColor:a.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),m=drawTextLines(a.textLines,{color:a.textColor,font:a.font,size:a.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),y=__spreadArrays([beginMarkedContent("Tx"),pushGraphicsState()],m,[popGraphicsState(),endMarkedContent()]);return __spreadArrays([pushGraphicsState()],g,p,y,[popGraphicsState()])},drawOptionList=function(a){for(var e=asNumber(a.x),n=asNumber(a.y),s=asNumber(a.width),o=asNumber(a.height),l=asNumber(a.lineHeight),c=asNumber(a.borderWidth),u=asNumber(a.padding),h=e+c/2+u,f=n+c/2+u,d=s-(c/2+u)*2,p=o-(c/2+u)*2,g=[moveTo(h,f),lineTo(h,f+p),lineTo(h+d,f+p),lineTo(h+d,f),closePath(),clip$1(),endPath()],m=drawRectangle({x:e,y:n,width:s,height:o,borderWidth:a.borderWidth,color:a.color,borderColor:a.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),y=[],_=0,b=a.selectedLines.length;_<b;_++){var x=a.textLines[a.selectedLines[_]];y.push.apply(y,drawRectangle({x:x.x-u,y:x.y-(l-x.height)/2,width:s-c,height:x.height+(l-x.height)/2,borderWidth:0,color:a.selectedColor,borderColor:void 0,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}))}var P=drawTextLines(a.textLines,{color:a.textColor,font:a.font,size:a.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),T=__spreadArrays([beginMarkedContent("Tx"),pushGraphicsState()],P,[popGraphicsState(),endMarkedContent()]);return __spreadArrays([pushGraphicsState()],m,y,g,T,[popGraphicsState()])},EncryptedPDFError=function(a){__extends(e,a);function e(){var n=this,s="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return n=a.call(this,s)||this,n}return e}(Error),FontkitNotRegisteredError=function(a){__extends(e,a);function e(){var n=this,s="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return n=a.call(this,s)||this,n}return e}(Error),ForeignPageError=function(a){__extends(e,a);function e(){var n=this,s="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return n=a.call(this,s)||this,n}return e}(Error),RemovePageFromEmptyDocumentError=function(a){__extends(e,a);function e(){var n=this,s="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return n=a.call(this,s)||this,n}return e}(Error),NoSuchFieldError=function(a){__extends(e,a);function e(n){var s=this,o='PDFDocument has no form field with the name "'+n+'"';return s=a.call(this,o)||this,s}return e}(Error),UnexpectedFieldTypeError=function(a){__extends(e,a);function e(n,s,o){var l,c,u=this,h=s==null?void 0:s.name,f=(c=(l=o==null?void 0:o.constructor)===null||l===void 0?void 0:l.name)!==null&&c!==void 0?c:o,d='Expected field "'+n+'" to be of type '+h+", "+("but it is actually of type "+f);return u=a.call(this,d)||this,u}return e}(Error);(function(a){__extends(e,a);function e(n){var s=this,o='Failed to select check box due to missing onValue: "'+n+'"';return s=a.call(this,o)||this,s}return e})(Error);var FieldAlreadyExistsError=function(a){__extends(e,a);function e(n){var s=this,o='A field already exists with the specified name: "'+n+'"';return s=a.call(this,o)||this,s}return e}(Error),InvalidFieldNamePartError=function(a){__extends(e,a);function e(n){var s=this,o='Field name contains invalid component: "'+n+'"';return s=a.call(this,o)||this,s}return e}(Error);(function(a){__extends(e,a);function e(n){var s=this,o='A non-terminal field already exists with the specified name: "'+n+'"';return s=a.call(this,o)||this,s}return e})(Error);var RichTextFieldReadError=function(a){__extends(e,a);function e(n){var s=this,o="Reading rich text fields is not supported: Attempted to read rich text field: "+n;return s=a.call(this,o)||this,s}return e}(Error),CombedTextLayoutError=function(a){__extends(e,a);function e(n,s){var o=this,l="Failed to layout combed text as lineLength="+n+" is greater than cellCount="+s;return o=a.call(this,l)||this,o}return e}(Error),ExceededMaxLengthError=function(a){__extends(e,a);function e(n,s,o){var l=this,c="Attempted to set text with length="+n+" for TextField with maxLength="+s+" and name="+o;return l=a.call(this,c)||this,l}return e}(Error),InvalidMaxLengthError=function(a){__extends(e,a);function e(n,s,o){var l=this,c="Attempted to set maxLength="+s+", which is less than "+n+", the length of this field's current value (name="+o+")";return l=a.call(this,c)||this,l}return e}(Error),TextAlignment;(function(a){a[a.Left=0]="Left",a[a.Center=1]="Center",a[a.Right=2]="Right"})(TextAlignment||(TextAlignment={}));var MIN_FONT_SIZE=4,MAX_FONT_SIZE=500,computeFontSize=function(a,e,n,s){s===void 0&&(s=!1);for(var o=MIN_FONT_SIZE;o<MAX_FONT_SIZE;){for(var l=0,c=0,u=a.length;c<u;c++){l+=1;for(var h=a[c],f=h.split(" "),d=n.width,p=0,g=f.length;p<g;p++){var m=p===g-1,y=m?f[p]:f[p]+" ",_=e.widthOfTextAtSize(y,o);d-=_,d<=0&&(l+=1,d=n.width-_)}}if(!s&&l>a.length)return o-1;var b=e.heightAtSize(o),x=b+b*.2,P=x*l;if(P>Math.abs(n.height))return o-1;o+=1}return o},computeCombedFontSize=function(a,e,n,s){for(var o=n.width/s,l=n.height,c=MIN_FONT_SIZE,u=charSplit(a);c<MAX_FONT_SIZE;){for(var h=0,f=u.length;h<f;h++){var d=u[h],p=e.widthOfTextAtSize(d,c)>o*.75;if(p)return c-1}var g=e.heightAtSize(c,{descender:!1});if(g>l)return c-1;c+=1}return c},lastIndexOfWhitespace=function(a){for(var e=a.length;e>0;e--)if(/\s/.test(a[e]))return e},splitOutLines=function(a,e,n,s){for(var o,l=a.length;l>0;){var c=a.substring(0,l),u=n.encodeText(c),h=n.widthOfTextAtSize(c,s);if(h<e){var f=a.substring(l)||void 0;return{line:c,encoded:u,width:h,remainder:f}}l=(o=lastIndexOfWhitespace(c))!==null&&o!==void 0?o:0}return{line:a,encoded:n.encodeText(a),width:n.widthOfTextAtSize(a,s),remainder:void 0}},layoutMultilineText=function(a,e){var n=e.alignment,s=e.fontSize,o=e.font,l=e.bounds,c=lineSplit(cleanText(a));(s===void 0||s===0)&&(s=computeFontSize(c,o,l,!0));for(var u=o.heightAtSize(s),h=u+u*.2,f=[],d=l.x,p=l.y,g=l.x+l.width,m=l.y+l.height,y=l.y+l.height,_=0,b=c.length;_<b;_++)for(var x=c[_];x!==void 0;){var P=splitOutLines(x,l.width,o,s),T=P.line,k=P.encoded,S=P.width,A=P.remainder,w=n===TextAlignment.Left?l.x:n===TextAlignment.Center?l.x+l.width/2-S/2:n===TextAlignment.Right?l.x+l.width-S:l.x;y-=h,w<d&&(d=w),y<p&&(p=y),w+S>g&&(g=w+S),y+u>m&&(m=y+u),f.push({text:T,encoded:k,width:S,height:u,x:w,y}),x=A==null?void 0:A.trim()}return{fontSize:s,lineHeight:h,lines:f,bounds:{x:d,y:p,width:g-d,height:m-p}}},layoutCombedText=function(a,e){var n=e.fontSize,s=e.font,o=e.bounds,l=e.cellCount,c=mergeLines(cleanText(a));if(c.length>l)throw new CombedTextLayoutError(c.length,l);(n===void 0||n===0)&&(n=computeCombedFontSize(c,s,o,l));for(var u=o.width/l,h=s.heightAtSize(n,{descender:!1}),f=o.y+(o.height/2-h/2),d=[],p=o.x,g=o.y,m=o.x+o.width,y=o.y+o.height,_=0,b=0;_<l;){var x=charAtIndex(c,b),P=x[0],T=x[1],k=s.encodeText(P),S=s.widthOfTextAtSize(P,n),A=o.x+(u*_+u/2),w=A-S/2;w<p&&(p=w),f<g&&(g=f),w+S>m&&(m=w+S),f+h>y&&(y=f+h),d.push({text:c,encoded:k,width:S,height:h,x:w,y:f}),_+=1,b+=T}return{fontSize:n,cells:d,bounds:{x:p,y:g,width:m-p,height:y-g}}},layoutSinglelineText=function(a,e){var n=e.alignment,s=e.fontSize,o=e.font,l=e.bounds,c=mergeLines(cleanText(a));(s===void 0||s===0)&&(s=computeFontSize([c],o,l));var u=o.encodeText(c),h=o.widthOfTextAtSize(c,s),f=o.heightAtSize(s,{descender:!1}),d=n===TextAlignment.Left?l.x:n===TextAlignment.Center?l.x+l.width/2-h/2:n===TextAlignment.Right?l.x+l.width-h:l.x,p=l.y+(l.height/2-f/2);return{fontSize:s,line:{text:c,encoded:u,width:h,height:f,x:d,y:p},bounds:{x:d,y:p,width:h,height:f}}},normalizeAppearance=function(a){return"normal"in a?a:{normal:a}},tfRegex=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,getDefaultFontSize=function(a){var e,n,s=(e=a.getDefaultAppearance())!==null&&e!==void 0?e:"",o=(n=findLastMatch(s,tfRegex).match)!==null&&n!==void 0?n:[],l=Number(o[2]);return isFinite(l)?l:void 0},colorRegex=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,getDefaultColor=function(a){var e,n=(e=a.getDefaultAppearance())!==null&&e!==void 0?e:"",s=findLastMatch(n,colorRegex).match,o=s??[],l=o[1],c=o[2],u=o[3],h=o[4],f=o[5];if(f==="g"&&l)return grayscale(Number(l));if(f==="rg"&&l&&c&&u)return rgb(Number(l),Number(c),Number(u));if(f==="k"&&l&&c&&u&&h)return cmyk(Number(l),Number(c),Number(u),Number(h))},updateDefaultAppearance=function(a,e,n,s){var o;s===void 0&&(s=0);var l=[setFillingColor(e).toString(),setFontAndSize((o=n==null?void 0:n.name)!==null&&o!==void 0?o:"dummy__noop",s).toString()].join(`
`);a.setDefaultAppearance(l)},defaultCheckBoxAppearanceProvider=function(a,e){var n,s,o,l=getDefaultColor(e),c=getDefaultColor(a.acroField),u=e.getRectangle(),h=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),d=(n=f==null?void 0:f.getWidth())!==null&&n!==void 0?n:0,p=reduceRotation(h==null?void 0:h.getRotation()),g=adjustDimsForRotation(u,p),m=g.width,y=g.height,_=rotateInPlace(__assign(__assign({},u),{rotation:p})),b=rgb(0,0,0),x=(s=componentsToColor(h==null?void 0:h.getBorderColor()))!==null&&s!==void 0?s:b,P=componentsToColor(h==null?void 0:h.getBackgroundColor()),T=componentsToColor(h==null?void 0:h.getBackgroundColor(),.8),k=(o=l??c)!==null&&o!==void 0?o:b;updateDefaultAppearance(l?e:a.acroField,k);var S={x:0+d/2,y:0+d/2,width:m-d,height:y-d,thickness:1.5,borderWidth:d,borderColor:x,markColor:k};return{normal:{on:__spreadArrays(_,drawCheckBox(__assign(__assign({},S),{color:P,filled:!0}))),off:__spreadArrays(_,drawCheckBox(__assign(__assign({},S),{color:P,filled:!1})))},down:{on:__spreadArrays(_,drawCheckBox(__assign(__assign({},S),{color:T,filled:!0}))),off:__spreadArrays(_,drawCheckBox(__assign(__assign({},S),{color:T,filled:!1})))}}},defaultRadioGroupAppearanceProvider=function(a,e){var n,s,o,l=getDefaultColor(e),c=getDefaultColor(a.acroField),u=e.getRectangle(),h=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),d=(n=f==null?void 0:f.getWidth())!==null&&n!==void 0?n:0,p=reduceRotation(h==null?void 0:h.getRotation()),g=adjustDimsForRotation(u,p),m=g.width,y=g.height,_=rotateInPlace(__assign(__assign({},u),{rotation:p})),b=rgb(0,0,0),x=(s=componentsToColor(h==null?void 0:h.getBorderColor()))!==null&&s!==void 0?s:b,P=componentsToColor(h==null?void 0:h.getBackgroundColor()),T=componentsToColor(h==null?void 0:h.getBackgroundColor(),.8),k=(o=l??c)!==null&&o!==void 0?o:b;updateDefaultAppearance(l?e:a.acroField,k);var S={x:m/2,y:y/2,width:m-d,height:y-d,borderWidth:d,borderColor:x,dotColor:k};return{normal:{on:__spreadArrays(_,drawRadioButton(__assign(__assign({},S),{color:P,filled:!0}))),off:__spreadArrays(_,drawRadioButton(__assign(__assign({},S),{color:P,filled:!1})))},down:{on:__spreadArrays(_,drawRadioButton(__assign(__assign({},S),{color:T,filled:!0}))),off:__spreadArrays(_,drawRadioButton(__assign(__assign({},S),{color:T,filled:!1})))}}},defaultButtonAppearanceProvider=function(a,e,n){var s,o,l,c,u,h=getDefaultColor(e),f=getDefaultColor(a.acroField),d=getDefaultFontSize(e),p=getDefaultFontSize(a.acroField),g=e.getRectangle(),m=e.getAppearanceCharacteristics(),y=e.getBorderStyle(),_=m==null?void 0:m.getCaptions(),b=(s=_==null?void 0:_.normal)!==null&&s!==void 0?s:"",x=(l=(o=_==null?void 0:_.down)!==null&&o!==void 0?o:b)!==null&&l!==void 0?l:"",P=(c=y==null?void 0:y.getWidth())!==null&&c!==void 0?c:0,T=reduceRotation(m==null?void 0:m.getRotation()),k=adjustDimsForRotation(g,T),S=k.width,A=k.height,w=rotateInPlace(__assign(__assign({},g),{rotation:T})),E=rgb(0,0,0),F=componentsToColor(m==null?void 0:m.getBorderColor()),O=componentsToColor(m==null?void 0:m.getBackgroundColor()),M=componentsToColor(m==null?void 0:m.getBackgroundColor(),.8),V={x:P,y:P,width:S-P*2,height:A-P*2},G=layoutSinglelineText(b,{alignment:TextAlignment.Center,fontSize:d??p,font:n,bounds:V}),te=layoutSinglelineText(x,{alignment:TextAlignment.Center,fontSize:d??p,font:n,bounds:V}),ce=Math.min(G.fontSize,te.fontSize),se=(u=h??f)!==null&&u!==void 0?u:E;updateDefaultAppearance(h||d!==void 0?e:a.acroField,se,n,ce);var le={x:0+P/2,y:0+P/2,width:S-P,height:A-P,borderWidth:P,borderColor:F,textColor:se,font:n.name,fontSize:ce};return{normal:__spreadArrays(w,drawButton(__assign(__assign({},le),{color:O,textLines:[G.line]}))),down:__spreadArrays(w,drawButton(__assign(__assign({},le),{color:M,textLines:[te.line]})))}},defaultTextFieldAppearanceProvider=function(a,e,n){var s,o,l,c,u=getDefaultColor(e),h=getDefaultColor(a.acroField),f=getDefaultFontSize(e),d=getDefaultFontSize(a.acroField),p=e.getRectangle(),g=e.getAppearanceCharacteristics(),m=e.getBorderStyle(),y=(s=a.getText())!==null&&s!==void 0?s:"",_=(o=m==null?void 0:m.getWidth())!==null&&o!==void 0?o:0,b=reduceRotation(g==null?void 0:g.getRotation()),x=adjustDimsForRotation(p,b),P=x.width,T=x.height,k=rotateInPlace(__assign(__assign({},p),{rotation:b})),S=rgb(0,0,0),A=componentsToColor(g==null?void 0:g.getBorderColor()),w=componentsToColor(g==null?void 0:g.getBackgroundColor()),E,F,O=a.isCombed()?0:1,M={x:_+O,y:_+O,width:P-(_+O)*2,height:T-(_+O)*2};if(a.isMultiline()){var V=layoutMultilineText(y,{alignment:a.getAlignment(),fontSize:f??d,font:n,bounds:M});E=V.lines,F=V.fontSize}else if(a.isCombed()){var V=layoutCombedText(y,{fontSize:f??d,font:n,bounds:M,cellCount:(l=a.getMaxLength())!==null&&l!==void 0?l:0});E=V.cells,F=V.fontSize}else{var V=layoutSinglelineText(y,{alignment:a.getAlignment(),fontSize:f??d,font:n,bounds:M});E=[V.line],F=V.fontSize}var G=(c=u??h)!==null&&c!==void 0?c:S;updateDefaultAppearance(u||f!==void 0?e:a.acroField,G,n,F);var te={x:0+_/2,y:0+_/2,width:P-_,height:T-_,borderWidth:_??0,borderColor:A,textColor:G,font:n.name,fontSize:F,color:w,textLines:E,padding:O};return __spreadArrays(k,drawTextField(te))},defaultDropdownAppearanceProvider=function(a,e,n){var s,o,l,c=getDefaultColor(e),u=getDefaultColor(a.acroField),h=getDefaultFontSize(e),f=getDefaultFontSize(a.acroField),d=e.getRectangle(),p=e.getAppearanceCharacteristics(),g=e.getBorderStyle(),m=(s=a.getSelected()[0])!==null&&s!==void 0?s:"",y=(o=g==null?void 0:g.getWidth())!==null&&o!==void 0?o:0,_=reduceRotation(p==null?void 0:p.getRotation()),b=adjustDimsForRotation(d,_),x=b.width,P=b.height,T=rotateInPlace(__assign(__assign({},d),{rotation:_})),k=rgb(0,0,0),S=componentsToColor(p==null?void 0:p.getBorderColor()),A=componentsToColor(p==null?void 0:p.getBackgroundColor()),w=1,E={x:y+w,y:y+w,width:x-(y+w)*2,height:P-(y+w)*2},F=layoutSinglelineText(m,{alignment:TextAlignment.Left,fontSize:h??f,font:n,bounds:E}),O=F.line,M=F.fontSize,V=(l=c??u)!==null&&l!==void 0?l:k;updateDefaultAppearance(c||h!==void 0?e:a.acroField,V,n,M);var G={x:0+y/2,y:0+y/2,width:x-y,height:P-y,borderWidth:y??0,borderColor:S,textColor:V,font:n.name,fontSize:M,color:A,textLines:[O],padding:w};return __spreadArrays(T,drawTextField(G))},defaultOptionListAppearanceProvider=function(a,e,n){var s,o,l=getDefaultColor(e),c=getDefaultColor(a.acroField),u=getDefaultFontSize(e),h=getDefaultFontSize(a.acroField),f=e.getRectangle(),d=e.getAppearanceCharacteristics(),p=e.getBorderStyle(),g=(s=p==null?void 0:p.getWidth())!==null&&s!==void 0?s:0,m=reduceRotation(d==null?void 0:d.getRotation()),y=adjustDimsForRotation(f,m),_=y.width,b=y.height,x=rotateInPlace(__assign(__assign({},f),{rotation:m})),P=rgb(0,0,0),T=componentsToColor(d==null?void 0:d.getBorderColor()),k=componentsToColor(d==null?void 0:d.getBackgroundColor()),S=a.getOptions(),A=a.getSelected();a.isSorted()&&S.sort();for(var w="",E=0,F=S.length;E<F;E++)w+=S[E],E<F-1&&(w+=`
`);for(var O=1,M={x:g+O,y:g+O,width:_-(g+O)*2,height:b-(g+O)*2},V=layoutMultilineText(w,{alignment:TextAlignment.Left,fontSize:u??h,font:n,bounds:M}),G=V.lines,te=V.fontSize,ce=V.lineHeight,se=[],E=0,F=G.length;E<F;E++){var le=G[E];A.includes(le.text)&&se.push(E)}var fe=rgb(153/255,193/255,218/255),ge=(o=l??c)!==null&&o!==void 0?o:P;return updateDefaultAppearance(l||u!==void 0?e:a.acroField,ge,n,te),__spreadArrays(x,drawOptionList({x:0+g/2,y:0+g/2,width:_-g,height:b-g,borderWidth:g??0,borderColor:T,textColor:ge,font:n.name,fontSize:te,color:k,textLines:G,lineHeight:ce,selectedColor:fe,selectedLines:se,padding:O}))},PDFEmbeddedPage=function(){function a(e,n,s){this.alreadyEmbedded=!1,assertIs(e,"ref",[[PDFRef,"PDFRef"]]),assertIs(n,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(s,"embedder",[[PDFPageEmbedder,"PDFPageEmbedder"]]),this.ref=e,this.doc=n,this.width=s.width,this.height=s.height,this.embedder=s}return a.prototype.scale=function(e){return assertIs(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},a.prototype.size=function(){return this.scale(1)},a.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},a.of=function(e,n,s){return new a(e,n,s)},a}(),PDFFont=function(){function a(e,n,s){this.modified=!0,assertIs(e,"ref",[[PDFRef,"PDFRef"]]),assertIs(n,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(s,"embedder",[[CustomFontEmbedder,"CustomFontEmbedder"],[StandardFontEmbedder,"StandardFontEmbedder"]]),this.ref=e,this.doc=n,this.name=s.fontName,this.embedder=s}return a.prototype.encodeText=function(e){return assertIs(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},a.prototype.widthOfTextAtSize=function(e,n){return assertIs(e,"text",["string"]),assertIs(n,"size",["number"]),this.embedder.widthOfTextAtSize(e,n)},a.prototype.heightAtSize=function(e,n){var s;return assertIs(e,"size",["number"]),assertOrUndefined(n==null?void 0:n.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:(s=n==null?void 0:n.descender)!==null&&s!==void 0?s:!0})},a.prototype.sizeAtHeight=function(e){return assertIs(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},a.prototype.getCharacterSet=function(){return this.embedder instanceof StandardFontEmbedder?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},a.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},a.of=function(e,n,s){return new a(e,n,s)},a}(),PDFImage=function(){function a(e,n,s){assertIs(e,"ref",[[PDFRef,"PDFRef"]]),assertIs(n,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(s,"embedder",[[JpegEmbedder,"JpegEmbedder"],[PngEmbedder,"PngEmbedder"]]),this.ref=e,this.doc=n,this.width=s.width,this.height=s.height,this.embedder=s}return a.prototype.scale=function(e){return assertIs(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},a.prototype.scaleToFit=function(e,n){assertIs(e,"width",["number"]),assertIs(n,"height",["number"]);var s=e/this.width,o=n/this.height,l=Math.min(s,o);return this.scale(l)},a.prototype.size=function(){return this.scale(1)},a.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s;return __generator(this,function(o){switch(o.label){case 0:return this.embedder?(this.embedTask||(e=this,n=e.doc,s=e.ref,this.embedTask=this.embedder.embedIntoContext(n.context,s)),[4,this.embedTask]):[2];case 1:return o.sent(),this.embedder=void 0,[2]}})})},a.of=function(e,n,s){return new a(e,n,s)},a}(),ImageAlignment;(function(a){a[a.Left=0]="Left",a[a.Center=1]="Center",a[a.Right=2]="Right"})(ImageAlignment||(ImageAlignment={}));var assertFieldAppearanceOptions=function(a){assertOrUndefined(a==null?void 0:a.x,"options.x",["number"]),assertOrUndefined(a==null?void 0:a.y,"options.y",["number"]),assertOrUndefined(a==null?void 0:a.width,"options.width",["number"]),assertOrUndefined(a==null?void 0:a.height,"options.height",["number"]),assertOrUndefined(a==null?void 0:a.textColor,"options.textColor",[[Object,"Color"]]),assertOrUndefined(a==null?void 0:a.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),assertOrUndefined(a==null?void 0:a.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(a==null?void 0:a.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(a==null?void 0:a.rotate,"options.rotate",[[Object,"Rotation"]])},PDFField=function(){function a(e,n,s){assertIs(e,"acroField",[[PDFAcroTerminal,"PDFAcroTerminal"]]),assertIs(n,"ref",[[PDFRef,"PDFRef"]]),assertIs(s,"doc",[[PDFDocument,"PDFDocument"]]),this.acroField=e,this.ref=n,this.doc=s}return a.prototype.getName=function(){var e;return(e=this.acroField.getFullyQualifiedName())!==null&&e!==void 0?e:""},a.prototype.isReadOnly=function(){return this.acroField.hasFlag(AcroFieldFlags.ReadOnly)},a.prototype.enableReadOnly=function(){this.acroField.setFlagTo(AcroFieldFlags.ReadOnly,!0)},a.prototype.disableReadOnly=function(){this.acroField.setFlagTo(AcroFieldFlags.ReadOnly,!1)},a.prototype.isRequired=function(){return this.acroField.hasFlag(AcroFieldFlags.Required)},a.prototype.enableRequired=function(){this.acroField.setFlagTo(AcroFieldFlags.Required,!0)},a.prototype.disableRequired=function(){this.acroField.setFlagTo(AcroFieldFlags.Required,!1)},a.prototype.isExported=function(){return!this.acroField.hasFlag(AcroFieldFlags.NoExport)},a.prototype.enableExporting=function(){this.acroField.setFlagTo(AcroFieldFlags.NoExport,!1)},a.prototype.disableExporting=function(){this.acroField.setFlagTo(AcroFieldFlags.NoExport,!0)},a.prototype.needsAppearancesUpdate=function(){throw new MethodNotImplementedError(this.constructor.name,"needsAppearancesUpdate")},a.prototype.defaultUpdateAppearances=function(e){throw new MethodNotImplementedError(this.constructor.name,"defaultUpdateAppearances")},a.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},a.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},a.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},a.prototype.createWidget=function(e){var n,s=e.textColor,o=e.backgroundColor,l=e.borderColor,c=e.borderWidth,u=toDegrees(e.rotate),h=e.caption,f=e.x,d=e.y,p=e.width+c,g=e.height+c,m=!!e.hidden,y=e.page;assertMultiple(u,"degreesAngle",90);var _=PDFWidgetAnnotation.create(this.doc.context,this.ref),b=rotateRectangle({x:f,y:d,width:p,height:g},c,u);_.setRectangle(b),y&&_.setP(y);var x=_.getOrCreateAppearanceCharacteristics();o&&x.setBackgroundColor(colorToComponents(o)),x.setRotation(u),h&&x.setCaptions({normal:h}),l&&x.setBorderColor(colorToComponents(l));var P=_.getOrCreateBorderStyle();if(c!==void 0&&P.setWidth(c),_.setFlagTo(AnnotationFlags.Print,!0),_.setFlagTo(AnnotationFlags.Hidden,m),_.setFlagTo(AnnotationFlags.Invisible,!1),s){var T=(n=this.acroField.getDefaultAppearance())!==null&&n!==void 0?n:"",k=T+`
`+setFillingColor(s).toString();this.acroField.setDefaultAppearance(k)}return _},a.prototype.updateWidgetAppearanceWithFont=function(e,n,s){var o=s.normal,l=s.rollover,c=s.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,o,n),rollover:l&&this.createAppearanceStream(e,l,n),down:c&&this.createAppearanceStream(e,c,n)})},a.prototype.updateOnOffWidgetAppearance=function(e,n,s){var o=s.normal,l=s.rollover,c=s.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,o,n),rollover:l&&this.createAppearanceDict(e,l,n),down:c&&this.createAppearanceDict(e,c,n)})},a.prototype.updateWidgetAppearances=function(e,n){var s=n.normal,o=n.rollover,l=n.down;e.setNormalAppearance(s),o?e.setRolloverAppearance(o):e.removeRolloverAppearance(),l?e.setDownAppearance(l):e.removeDownAppearance()},a.prototype.createAppearanceStream=function(e,n,s){var o,l=this.acroField.dict.context,c=e.getRectangle(),u=c.width,h=c.height,f=s&&{Font:(o={},o[s.name]=s.ref,o)},d=l.formXObject(n,{Resources:f,BBox:l.obj([0,0,u,h]),Matrix:l.obj([1,0,0,1,0,0])}),p=l.register(d);return p},a.prototype.createImageAppearanceStream=function(e,n,s){var o,l,c=this.acroField.dict.context,u=e.getRectangle(),h=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),d=(l=f==null?void 0:f.getWidth())!==null&&l!==void 0?l:0,p=reduceRotation(h==null?void 0:h.getRotation()),g=rotateInPlace(__assign(__assign({},u),{rotation:p})),m=adjustDimsForRotation(u,p),y=n.scaleToFit(m.width-d*2,m.height-d*2),_={x:d,y:d,width:y.width,height:y.height,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)};s===ImageAlignment.Center?(_.x+=(m.width-d*2)/2-y.width/2,_.y+=(m.height-d*2)/2-y.height/2):s===ImageAlignment.Right&&(_.x=m.width-d-y.width,_.y=m.height-d-y.height);var b=this.doc.context.addRandomSuffix("Image",10),x=__spreadArrays(g,drawImage(b,_)),P={XObject:(o={},o[b]=n.ref,o)},T=c.formXObject(x,{Resources:P,BBox:c.obj([0,0,u.width,u.height]),Matrix:c.obj([1,0,0,1,0,0])});return c.register(T)},a.prototype.createAppearanceDict=function(e,n,s){var o=this.acroField.dict.context,l=this.createAppearanceStream(e,n.on),c=this.createAppearanceStream(e,n.off),u=o.obj({});return u.set(s,l),u.set(PDFName.of("Off"),c),u},a}(),PDFCheckBox=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroCheckBox",[[PDFAcroCheckBox,"PDFAcroCheckBox"]]),l.acroField=n,l}return e.prototype.check=function(){var n,s=(n=this.acroField.getOnValue())!==null&&n!==void 0?n:PDFName.of("Yes");this.markAsDirty(),this.acroField.setValue(s)},e.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(PDFName.of("Off"))},e.prototype.isChecked=function(){var n=this.acroField.getOnValue();return!!n&&n===this.acroField.getValue()},e.prototype.addToPage=function(n,s){var o,l,c,u,h,f;assertIs(n,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(s),s||(s={}),"textColor"in s||(s.textColor=rgb(0,0,0)),"backgroundColor"in s||(s.backgroundColor=rgb(1,1,1)),"borderColor"in s||(s.borderColor=rgb(0,0,0)),"borderWidth"in s||(s.borderWidth=1);var d=this.createWidget({x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:(c=s.width)!==null&&c!==void 0?c:50,height:(u=s.height)!==null&&u!==void 0?u:50,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:(h=s.borderWidth)!==null&&h!==void 0?h:0,rotate:(f=s.rotate)!==null&&f!==void 0?f:degrees(0),hidden:s.hidden,page:n.ref}),p=this.doc.context.register(d.dict);this.acroField.addWidget(p),d.setAppearanceState(PDFName.of("Off")),this.updateWidgetAppearance(d,PDFName.of("Yes")),n.node.addAnnot(p)},e.prototype.needsAppearancesUpdate=function(){for(var n,s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=c.getAppearanceState(),h=(n=c.getAppearances())===null||n===void 0?void 0:n.normal;if(!(h instanceof PDFDict)||u&&!h.has(u))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(n){var s;assertOrUndefined(n,"provider",[Function]);for(var o=this.acroField.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l],h=(s=u.getOnValue())!==null&&s!==void 0?s:PDFName.of("Yes");h&&this.updateWidgetAppearance(u,h,n)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,s,o){var l=o??defaultCheckBoxAppearanceProvider,c=normalizeAppearance(l(this,n));this.updateOnOffWidgetAppearance(n,s,c)},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField),PDFDropdown=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroComboBox",[[PDFAcroComboBox,"PDFAcroComboBox"]]),l.acroField=n,l}return e.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),s=new Array(n.length),o=0,l=s.length;o<l;o++){var c=n[o],u=c.display,h=c.value;s[o]=(u??h).decodeText()}return s},e.prototype.getSelected=function(){for(var n=this.acroField.getValues(),s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]=n[o].decodeText();return s},e.prototype.setOptions=function(n){assertIs(n,"options",[Array]);for(var s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]={value:PDFHexString.fromText(n[o])};this.acroField.setOptions(s)},e.prototype.addOptions=function(n){assertIs(n,"options",["string",Array]);for(var s=Array.isArray(n)?n:[n],o=this.acroField.getOptions(),l=new Array(s.length),c=0,u=s.length;c<u;c++)l[c]={value:PDFHexString.fromText(s[c])};this.acroField.setOptions(o.concat(l))},e.prototype.select=function(n,s){s===void 0&&(s=!1),assertIs(n,"options",["string",Array]),assertIs(s,"merge",["boolean"]);var o=Array.isArray(n)?n:[n],l=this.getOptions(),c=o.find(function(p){return!l.includes(p)});c&&this.enableEditing(),this.markAsDirty(),(o.length>1||o.length===1&&s)&&this.enableMultiselect();for(var u=new Array(o.length),h=0,f=o.length;h<f;h++)u[h]=PDFHexString.fromText(o[h]);if(s){var d=this.acroField.getValues();this.acroField.setValues(d.concat(u))}else this.acroField.setValues(u)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(n){assertPositive(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isEditable=function(){return this.acroField.hasFlag(AcroChoiceFlags.Edit)},e.prototype.enableEditing=function(){this.acroField.setFlagTo(AcroChoiceFlags.Edit,!0)},e.prototype.disableEditing=function(){this.acroField.setFlagTo(AcroChoiceFlags.Edit,!1)},e.prototype.isSorted=function(){return this.acroField.hasFlag(AcroChoiceFlags.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(AcroChoiceFlags.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck,!0)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!1)},e.prototype.addToPage=function(n,s){var o,l,c,u,h,f,d;assertIs(n,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(s),s||(s={}),"textColor"in s||(s.textColor=rgb(0,0,0)),"backgroundColor"in s||(s.backgroundColor=rgb(1,1,1)),"borderColor"in s||(s.borderColor=rgb(0,0,0)),"borderWidth"in s||(s.borderWidth=1);var p=this.createWidget({x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:(c=s.width)!==null&&c!==void 0?c:200,height:(u=s.height)!==null&&u!==void 0?u:50,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:(h=s.borderWidth)!==null&&h!==void 0?h:0,rotate:(f=s.rotate)!==null&&f!==void 0?f:degrees(0),hidden:s.hidden,page:n.ref}),g=this.doc.context.register(p.dict);this.acroField.addWidget(g);var m=(d=s.font)!==null&&d!==void 0?d:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(p,m),n.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=((n=c.getAppearances())===null||n===void 0?void 0:n.normal)instanceof PDFStream;if(!u)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){assertIs(n,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,s){assertIs(n,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(s,"provider",[Function]);for(var o=this.acroField.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l];this.updateWidgetAppearance(u,n,s)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,s,o){var l=o??defaultDropdownAppearanceProvider,c=normalizeAppearance(l(this,n,s));this.updateWidgetAppearanceWithFont(n,s,c)},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField),PDFOptionList=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroListBox",[[PDFAcroListBox,"PDFAcroListBox"]]),l.acroField=n,l}return e.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),s=new Array(n.length),o=0,l=s.length;o<l;o++){var c=n[o],u=c.display,h=c.value;s[o]=(u??h).decodeText()}return s},e.prototype.getSelected=function(){for(var n=this.acroField.getValues(),s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]=n[o].decodeText();return s},e.prototype.setOptions=function(n){assertIs(n,"options",[Array]),this.markAsDirty();for(var s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]={value:PDFHexString.fromText(n[o])};this.acroField.setOptions(s)},e.prototype.addOptions=function(n){assertIs(n,"options",["string",Array]),this.markAsDirty();for(var s=Array.isArray(n)?n:[n],o=this.acroField.getOptions(),l=new Array(s.length),c=0,u=s.length;c<u;c++)l[c]={value:PDFHexString.fromText(s[c])};this.acroField.setOptions(o.concat(l))},e.prototype.select=function(n,s){s===void 0&&(s=!1),assertIs(n,"options",["string",Array]),assertIs(s,"merge",["boolean"]);var o=Array.isArray(n)?n:[n],l=this.getOptions();assertIsSubset(o,"option",l),this.markAsDirty(),(o.length>1||o.length===1&&s)&&this.enableMultiselect();for(var c=new Array(o.length),u=0,h=o.length;u<h;u++)c[u]=PDFHexString.fromText(o[u]);if(s){var f=this.acroField.getValues();this.acroField.setValues(f.concat(c))}else this.acroField.setValues(c)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(n){assertPositive(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isSorted=function(){return this.acroField.hasFlag(AcroChoiceFlags.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!1)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!1)},e.prototype.addToPage=function(n,s){var o,l,c,u,h,f,d;assertIs(n,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(s),s||(s={}),"textColor"in s||(s.textColor=rgb(0,0,0)),"backgroundColor"in s||(s.backgroundColor=rgb(1,1,1)),"borderColor"in s||(s.borderColor=rgb(0,0,0)),"borderWidth"in s||(s.borderWidth=1);var p=this.createWidget({x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:(c=s.width)!==null&&c!==void 0?c:200,height:(u=s.height)!==null&&u!==void 0?u:100,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:(h=s.borderWidth)!==null&&h!==void 0?h:0,rotate:(f=s.rotate)!==null&&f!==void 0?f:degrees(0),hidden:s.hidden,page:n.ref}),g=this.doc.context.register(p.dict);this.acroField.addWidget(g);var m=(d=s.font)!==null&&d!==void 0?d:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(p,m),n.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=((n=c.getAppearances())===null||n===void 0?void 0:n.normal)instanceof PDFStream;if(!u)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){assertIs(n,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,s){assertIs(n,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(s,"provider",[Function]);for(var o=this.acroField.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l];this.updateWidgetAppearance(u,n,s)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,s,o){var l=o??defaultOptionListAppearanceProvider,c=normalizeAppearance(l(this,n,s));this.updateWidgetAppearanceWithFont(n,s,c)},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField),PDFRadioGroup=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroRadioButton",[[PDFAcroRadioButton,"PDFAcroRadioButton"]]),l.acroField=n,l}return e.prototype.getOptions=function(){var n=this.acroField.getExportValues();if(n){for(var s=new Array(n.length),o=0,l=n.length;o<l;o++)s[o]=n[o].decodeText();return s}for(var c=this.acroField.getOnValues(),u=new Array(c.length),o=0,l=u.length;o<l;o++)u[o]=c[o].decodeText();return u},e.prototype.getSelected=function(){var n=this.acroField.getValue();if(n!==PDFName.of("Off")){var s=this.acroField.getExportValues();if(s){for(var o=this.acroField.getOnValues(),l=0,c=o.length;l<c;l++)if(o[l]===n)return s[l].decodeText()}return n.decodeText()}},e.prototype.select=function(n){assertIs(n,"option",["string"]);var s=this.getOptions();assertIsOneOf(n,"option",s),this.markAsDirty();var o=this.acroField.getOnValues(),l=this.acroField.getExportValues();if(l)for(var c=0,u=l.length;c<u;c++)l[c].decodeText()===n&&this.acroField.setValue(o[c]);else for(var c=0,u=o.length;c<u;c++){var h=o[c];h.decodeText()===n&&this.acroField.setValue(h)}},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(PDFName.of("Off"))},e.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(AcroButtonFlags.NoToggleToOff)},e.prototype.enableOffToggling=function(){this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff,!1)},e.prototype.disableOffToggling=function(){this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff,!0)},e.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(AcroButtonFlags.RadiosInUnison)},e.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison,!1)},e.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison,!0)},e.prototype.addOptionToPage=function(n,s,o){var l,c,u,h,f,d,p,g,m;assertIs(n,"option",["string"]),assertIs(s,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(o);var y=this.createWidget({x:(l=o==null?void 0:o.x)!==null&&l!==void 0?l:0,y:(c=o==null?void 0:o.y)!==null&&c!==void 0?c:0,width:(u=o==null?void 0:o.width)!==null&&u!==void 0?u:50,height:(h=o==null?void 0:o.height)!==null&&h!==void 0?h:50,textColor:(f=o==null?void 0:o.textColor)!==null&&f!==void 0?f:rgb(0,0,0),backgroundColor:(d=o==null?void 0:o.backgroundColor)!==null&&d!==void 0?d:rgb(1,1,1),borderColor:(p=o==null?void 0:o.borderColor)!==null&&p!==void 0?p:rgb(0,0,0),borderWidth:(g=o==null?void 0:o.borderWidth)!==null&&g!==void 0?g:1,rotate:(m=o==null?void 0:o.rotate)!==null&&m!==void 0?m:degrees(0),hidden:o==null?void 0:o.hidden,page:s.ref}),_=this.doc.context.register(y.dict),b=this.acroField.addWidgetWithOpt(_,PDFHexString.fromText(n),!this.isMutuallyExclusive());y.setAppearanceState(PDFName.of("Off")),this.updateWidgetAppearance(y,b),s.node.addAnnot(_)},e.prototype.needsAppearancesUpdate=function(){for(var n,s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=c.getAppearanceState(),h=(n=c.getAppearances())===null||n===void 0?void 0:n.normal;if(!(h instanceof PDFDict)||u&&!h.has(u))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(n){assertOrUndefined(n,"provider",[Function]);for(var s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=c.getOnValue();u&&this.updateWidgetAppearance(c,u,n)}},e.prototype.updateWidgetAppearance=function(n,s,o){var l=o??defaultRadioGroupAppearanceProvider,c=normalizeAppearance(l(this,n));this.updateOnOffWidgetAppearance(n,s,c)},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField),PDFSignature=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroSignature",[[PDFAcroSignature,"PDFAcroSignature"]]),l.acroField=n,l}return e.prototype.needsAppearancesUpdate=function(){return!1},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField),PDFTextField=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroText",[[PDFAcroText,"PDFAcroText"]]),l.acroField=n,l}return e.prototype.getText=function(){var n=this.acroField.getValue();if(!n&&this.isRichFormatted())throw new RichTextFieldReadError(this.getName());return n==null?void 0:n.decodeText()},e.prototype.setText=function(n){assertOrUndefined(n,"text",["string"]);var s=this.getMaxLength();if(s!==void 0&&n&&n.length>s)throw new ExceededMaxLengthError(n.length,s,this.getName());this.markAsDirty(),this.disableRichFormatting(),n?this.acroField.setValue(PDFHexString.fromText(n)):this.acroField.removeValue()},e.prototype.getAlignment=function(){var n=this.acroField.getQuadding();return n===0?TextAlignment.Left:n===1?TextAlignment.Center:n===2?TextAlignment.Right:TextAlignment.Left},e.prototype.setAlignment=function(n){assertIsOneOf(n,"alignment",TextAlignment),this.markAsDirty(),this.acroField.setQuadding(n)},e.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},e.prototype.setMaxLength=function(n){if(assertRangeOrUndefined(n,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),n===void 0)this.acroField.removeMaxLength();else{var s=this.getText();if(s&&s.length>n)throw new InvalidMaxLengthError(s.length,n,this.getName());this.acroField.setMaxLength(n)}},e.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},e.prototype.setImage=function(n){for(var s=this.getAlignment(),o=s===TextAlignment.Center?ImageAlignment.Center:s===TextAlignment.Right?ImageAlignment.Right:ImageAlignment.Left,l=this.acroField.getWidgets(),c=0,u=l.length;c<u;c++){var h=l[c],f=this.createImageAppearanceStream(h,n,o);this.updateWidgetAppearances(h,{normal:f})}this.markAsClean()},e.prototype.setFontSize=function(n){assertPositive(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isMultiline=function(){return this.acroField.hasFlag(AcroTextFlags.Multiline)},e.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Multiline,!0)},e.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Multiline,!1)},e.prototype.isPassword=function(){return this.acroField.hasFlag(AcroTextFlags.Password)},e.prototype.enablePassword=function(){this.acroField.setFlagTo(AcroTextFlags.Password,!0)},e.prototype.disablePassword=function(){this.acroField.setFlagTo(AcroTextFlags.Password,!1)},e.prototype.isFileSelector=function(){return this.acroField.hasFlag(AcroTextFlags.FileSelect)},e.prototype.enableFileSelection=function(){this.acroField.setFlagTo(AcroTextFlags.FileSelect,!0)},e.prototype.disableFileSelection=function(){this.acroField.setFlagTo(AcroTextFlags.FileSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(AcroTextFlags.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck,!0)},e.prototype.isScrollable=function(){return!this.acroField.hasFlag(AcroTextFlags.DoNotScroll)},e.prototype.enableScrolling=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotScroll,!1)},e.prototype.disableScrolling=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotScroll,!0)},e.prototype.isCombed=function(){return this.acroField.hasFlag(AcroTextFlags.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},e.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var n="PDFTextFields must have a max length in order to be combed";console.warn(n)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(AcroTextFlags.Comb,!0)},e.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Comb,!1)},e.prototype.isRichFormatted=function(){return this.acroField.hasFlag(AcroTextFlags.RichText)},e.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(AcroTextFlags.RichText,!0)},e.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(AcroTextFlags.RichText,!1)},e.prototype.addToPage=function(n,s){var o,l,c,u,h,f,d;assertIs(n,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(s),s||(s={}),"textColor"in s||(s.textColor=rgb(0,0,0)),"backgroundColor"in s||(s.backgroundColor=rgb(1,1,1)),"borderColor"in s||(s.borderColor=rgb(0,0,0)),"borderWidth"in s||(s.borderWidth=1);var p=this.createWidget({x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:(c=s.width)!==null&&c!==void 0?c:200,height:(u=s.height)!==null&&u!==void 0?u:50,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:(h=s.borderWidth)!==null&&h!==void 0?h:0,rotate:(f=s.rotate)!==null&&f!==void 0?f:degrees(0),hidden:s.hidden,page:n.ref}),g=this.doc.context.register(p.dict);this.acroField.addWidget(g);var m=(d=s.font)!==null&&d!==void 0?d:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(p,m),n.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=((n=c.getAppearances())===null||n===void 0?void 0:n.normal)instanceof PDFStream;if(!u)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){assertIs(n,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,s){assertIs(n,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(s,"provider",[Function]);for(var o=this.acroField.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l];this.updateWidgetAppearance(u,n,s)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,s,o){var l=o??defaultTextFieldAppearanceProvider,c=normalizeAppearance(l(this,n,s));this.updateWidgetAppearanceWithFont(n,s,c)},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField),StandardFonts;(function(a){a.Courier="Courier",a.CourierBold="Courier-Bold",a.CourierOblique="Courier-Oblique",a.CourierBoldOblique="Courier-BoldOblique",a.Helvetica="Helvetica",a.HelveticaBold="Helvetica-Bold",a.HelveticaOblique="Helvetica-Oblique",a.HelveticaBoldOblique="Helvetica-BoldOblique",a.TimesRoman="Times-Roman",a.TimesRomanBold="Times-Bold",a.TimesRomanItalic="Times-Italic",a.TimesRomanBoldItalic="Times-BoldItalic",a.Symbol="Symbol",a.ZapfDingbats="ZapfDingbats"})(StandardFonts||(StandardFonts={}));var PDFForm=function(){function a(e,n){var s=this;this.embedDefaultFont=function(){return s.doc.embedStandardFont(StandardFonts.Helvetica)},assertIs(e,"acroForm",[[PDFAcroForm,"PDFAcroForm"]]),assertIs(n,"doc",[[PDFDocument,"PDFDocument"]]),this.acroForm=e,this.doc=n,this.dirtyFields=new Set,this.defaultFontCache=Cache.populatedBy(this.embedDefaultFont)}return a.prototype.hasXFA=function(){return this.acroForm.dict.has(PDFName.of("XFA"))},a.prototype.deleteXFA=function(){this.acroForm.dict.delete(PDFName.of("XFA"))},a.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),n=[],s=0,o=e.length;s<o;s++){var l=e[s],c=l[0],u=l[1],h=convertToPDFField(c,u,this.doc);h&&n.push(h)}return n},a.prototype.getFieldMaybe=function(e){assertIs(e,"name",["string"]);for(var n=this.getFields(),s=0,o=n.length;s<o;s++){var l=n[s];if(l.getName()===e)return l}},a.prototype.getField=function(e){assertIs(e,"name",["string"]);var n=this.getFieldMaybe(e);if(n)return n;throw new NoSuchFieldError(e)},a.prototype.getButton=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFButton)return n;throw new UnexpectedFieldTypeError(e,PDFButton,n)},a.prototype.getCheckBox=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFCheckBox)return n;throw new UnexpectedFieldTypeError(e,PDFCheckBox,n)},a.prototype.getDropdown=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFDropdown)return n;throw new UnexpectedFieldTypeError(e,PDFDropdown,n)},a.prototype.getOptionList=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFOptionList)return n;throw new UnexpectedFieldTypeError(e,PDFOptionList,n)},a.prototype.getRadioGroup=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFRadioGroup)return n;throw new UnexpectedFieldTypeError(e,PDFRadioGroup,n)},a.prototype.getSignature=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFSignature)return n;throw new UnexpectedFieldTypeError(e,PDFSignature,n)},a.prototype.getTextField=function(e){assertIs(e,"name",["string"]);var n=this.getField(e);if(n instanceof PDFTextField)return n;throw new UnexpectedFieldTypeError(e,PDFTextField,n)},a.prototype.createButton=function(e){assertIs(e,"name",["string"]);var n=splitFieldName(e),s=this.findOrCreateNonTerminals(n.nonTerminal),o=PDFAcroPushButton.create(this.doc.context);return o.setPartialName(n.terminal),addFieldToParent(s,[o,o.ref],n.terminal),PDFButton.of(o,o.ref,this.doc)},a.prototype.createCheckBox=function(e){assertIs(e,"name",["string"]);var n=splitFieldName(e),s=this.findOrCreateNonTerminals(n.nonTerminal),o=PDFAcroCheckBox.create(this.doc.context);return o.setPartialName(n.terminal),addFieldToParent(s,[o,o.ref],n.terminal),PDFCheckBox.of(o,o.ref,this.doc)},a.prototype.createDropdown=function(e){assertIs(e,"name",["string"]);var n=splitFieldName(e),s=this.findOrCreateNonTerminals(n.nonTerminal),o=PDFAcroComboBox.create(this.doc.context);return o.setPartialName(n.terminal),addFieldToParent(s,[o,o.ref],n.terminal),PDFDropdown.of(o,o.ref,this.doc)},a.prototype.createOptionList=function(e){assertIs(e,"name",["string"]);var n=splitFieldName(e),s=this.findOrCreateNonTerminals(n.nonTerminal),o=PDFAcroListBox.create(this.doc.context);return o.setPartialName(n.terminal),addFieldToParent(s,[o,o.ref],n.terminal),PDFOptionList.of(o,o.ref,this.doc)},a.prototype.createRadioGroup=function(e){assertIs(e,"name",["string"]);var n=splitFieldName(e),s=this.findOrCreateNonTerminals(n.nonTerminal),o=PDFAcroRadioButton.create(this.doc.context);return o.setPartialName(n.terminal),addFieldToParent(s,[o,o.ref],n.terminal),PDFRadioGroup.of(o,o.ref,this.doc)},a.prototype.createTextField=function(e){assertIs(e,"name",["string"]);var n=splitFieldName(e),s=this.findOrCreateNonTerminals(n.nonTerminal),o=PDFAcroText.create(this.doc.context);return o.setPartialName(n.terminal),addFieldToParent(s,[o,o.ref],n.terminal),PDFTextField.of(o,o.ref,this.doc)},a.prototype.flatten=function(e){e===void 0&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var n=this.getFields(),s=0,o=n.length;s<o;s++){for(var l=n[s],c=l.acroField.getWidgets(),u=0,h=c.length;u<h;u++){var f=c[u],d=this.findWidgetPage(f),p=this.findWidgetAppearanceRef(l,f),g=d.node.newXObject("FlatWidget",p),m=f.getRectangle(),y=__spreadArrays([pushGraphicsState(),translate(m.x,m.y)],rotateInPlace(__assign(__assign({},m),{rotation:0})),[drawObject(g),popGraphicsState()]).filter(Boolean);d.pushOperators.apply(d,y)}this.removeField(l)}},a.prototype.removeField=function(e){for(var n=e.acroField.getWidgets(),s=new Set,o=0,l=n.length;o<l;o++){var c=n[o],u=this.findWidgetAppearanceRef(e,c),h=this.findWidgetPage(c);s.add(h),h.node.removeAnnot(u)}s.forEach(function(m){return m.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var f=e.acroField.normalizedEntries().Kids,d=f.size(),p=0;p<d;p++){var g=f.get(p);g instanceof PDFRef&&this.doc.context.delete(g)}this.doc.context.delete(e.ref)},a.prototype.updateFieldAppearances=function(e){assertOrUndefined(e,"font",[[PDFFont,"PDFFont"]]),e=e??this.getDefaultFont();for(var n=this.getFields(),s=0,o=n.length;s<o;s++){var l=n[s];l.needsAppearancesUpdate()&&l.defaultUpdateAppearances(e)}},a.prototype.markFieldAsDirty=function(e){assertOrUndefined(e,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.add(e)},a.prototype.markFieldAsClean=function(e){assertOrUndefined(e,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.delete(e)},a.prototype.fieldIsDirty=function(e){return assertOrUndefined(e,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.has(e)},a.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},a.prototype.findWidgetPage=function(e){var n=e.P(),s=this.doc.getPages().find(function(l){return l.ref===n});if(s===void 0){var o=this.doc.context.getObjectRef(e.dict);if(o===void 0)throw new Error("Could not find PDFRef for PDFObject");if(s=this.doc.findPageForAnnotationRef(o),s===void 0)throw new Error("Could not find page for PDFRef "+o)}return s},a.prototype.findWidgetAppearanceRef=function(e,n){var s,o=n.getNormalAppearance();if(o instanceof PDFDict&&(e instanceof PDFCheckBox||e instanceof PDFRadioGroup)){var l=e.acroField.getValue(),c=(s=o.get(l))!==null&&s!==void 0?s:o.get(PDFName.of("Off"));c instanceof PDFRef&&(o=c)}if(!(o instanceof PDFRef)){var u=e.getName();throw new Error("Failed to extract appearance ref for: "+u)}return o},a.prototype.findOrCreateNonTerminals=function(e){for(var n=[this.acroForm],s=0,o=e.length;s<o;s++){var l=e[s];if(!l)throw new InvalidFieldNamePartError(l);var c=n[0],u=n[1],h=this.findNonTerminal(l,c);if(h)n=h;else{var f=PDFAcroNonTerminal.create(this.doc.context);f.setPartialName(l),f.setParent(u);var d=this.doc.context.register(f.dict);c.addField(d),n=[f,d]}}return n},a.prototype.findNonTerminal=function(e,n){for(var s=n instanceof PDFAcroForm?this.acroForm.getFields():createPDFAcroFields(n.Kids()),o=0,l=s.length;o<l;o++){var c=s[o],u=c[0],h=c[1];if(u.getPartialName()===e){if(u instanceof PDFAcroNonTerminal)return[u,h];throw new FieldAlreadyExistsError(e)}}},a.of=function(e,n){return new a(e,n)},a}(),convertToPDFField=function(a,e,n){if(a instanceof PDFAcroPushButton)return PDFButton.of(a,e,n);if(a instanceof PDFAcroCheckBox)return PDFCheckBox.of(a,e,n);if(a instanceof PDFAcroComboBox)return PDFDropdown.of(a,e,n);if(a instanceof PDFAcroListBox)return PDFOptionList.of(a,e,n);if(a instanceof PDFAcroText)return PDFTextField.of(a,e,n);if(a instanceof PDFAcroRadioButton)return PDFRadioGroup.of(a,e,n);if(a instanceof PDFAcroSignature)return PDFSignature.of(a,e,n)},splitFieldName=function(a){if(a.length===0)throw new Error("PDF field names must not be empty strings");for(var e=a.split("."),n=0,s=e.length;n<s;n++)if(e[n]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+a+'"');return e.length===1?{nonTerminal:[],terminal:e[0]}:{nonTerminal:e.slice(0,e.length-1),terminal:e[e.length-1]}},addFieldToParent=function(a,e,n){for(var s=a[0],o=a[1],l=e[0],c=e[1],u=s.normalizedEntries(),h=createPDFAcroFields("Kids"in u?u.Kids:u.Fields),f=0,d=h.length;f<d;f++)if(h[f][0].getPartialName()===n)throw new FieldAlreadyExistsError(n);s.addField(c),l.setParent(o)},PageSizes={A4:[595.28,841.89]},ParseSpeeds;(function(a){a[a.Fastest=1/0]="Fastest",a[a.Fast=1500]="Fast",a[a.Medium=500]="Medium",a[a.Slow=100]="Slow"})(ParseSpeeds||(ParseSpeeds={}));var PDFEmbeddedFile=function(){function a(e,n,s){this.alreadyEmbedded=!1,this.ref=e,this.doc=n,this.embedder=s}return a.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s,o,l;return __generator(this,function(c){switch(c.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=c.sent(),this.doc.catalog.has(PDFName.of("Names"))||this.doc.catalog.set(PDFName.of("Names"),this.doc.context.obj({})),n=this.doc.catalog.lookup(PDFName.of("Names"),PDFDict),n.has(PDFName.of("EmbeddedFiles"))||n.set(PDFName.of("EmbeddedFiles"),this.doc.context.obj({})),s=n.lookup(PDFName.of("EmbeddedFiles"),PDFDict),s.has(PDFName.of("Names"))||s.set(PDFName.of("Names"),this.doc.context.obj([])),o=s.lookup(PDFName.of("Names"),PDFArray),o.push(PDFHexString.fromText(this.embedder.fileName)),o.push(e),this.doc.catalog.has(PDFName.of("AF"))||this.doc.catalog.set(PDFName.of("AF"),this.doc.context.obj([])),l=this.doc.catalog.lookup(PDFName.of("AF"),PDFArray),l.push(e),this.alreadyEmbedded=!0,c.label=2;case 2:return[2]}})})},a.of=function(e,n,s){return new a(e,n,s)},a}(),PDFJavaScript=function(){function a(e,n,s){this.alreadyEmbedded=!1,this.ref=e,this.doc=n,this.embedder=s}return a.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s,o,l,c,u;return __generator(this,function(h){switch(h.label){case 0:return this.alreadyEmbedded?[3,2]:(e=this.doc,n=e.catalog,s=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:o=h.sent(),n.has(PDFName.of("Names"))||n.set(PDFName.of("Names"),s.obj({})),l=n.lookup(PDFName.of("Names"),PDFDict),l.has(PDFName.of("JavaScript"))||l.set(PDFName.of("JavaScript"),s.obj({})),c=l.lookup(PDFName.of("JavaScript"),PDFDict),c.has(PDFName.of("Names"))||c.set(PDFName.of("Names"),s.obj([])),u=c.lookup(PDFName.of("Names"),PDFArray),u.push(PDFHexString.fromText(this.embedder.scriptName)),u.push(o),this.alreadyEmbedded=!0,h.label=2;case 2:return[2]}})})},a.of=function(e,n,s){return new a(e,n,s)},a}(),JavaScriptEmbedder=function(){function a(e,n){this.script=e,this.scriptName=n}return a.for=function(e,n){return new a(e,n)},a.prototype.embedIntoContext=function(e,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(o){return s=e.obj({Type:"Action",S:"JavaScript",JS:PDFHexString.fromText(this.script)}),n?(e.assign(n,s),[2,n]):[2,e.register(s)]})})},a}(),PDFDocument=function(){function a(e,n,s){var o=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var l=[];return o.catalog.Pages().traverse(function(c,u){if(c instanceof PDFPageLeaf){var h=o.pageMap.get(c);h||(h=PDFPage.of(c,u,o),o.pageMap.set(c,h)),l.push(h)}}),l},this.getOrCreateForm=function(){var l=o.catalog.getOrCreateAcroForm();return PDFForm.of(l,o)},assertIs(e,"context",[[PDFContext,"PDFContext"]]),assertIs(n,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=Cache.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=Cache.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!n&&this.isEncrypted)throw new EncryptedPDFError;s&&this.updateInfoDict()}return a.load=function(e,n){return n===void 0&&(n={}),__awaiter(this,void 0,void 0,function(){var s,o,l,c,u,h,f,d,p,g,m,y;return __generator(this,function(_){switch(_.label){case 0:return s=n.ignoreEncryption,o=s===void 0?!1:s,l=n.parseSpeed,c=l===void 0?ParseSpeeds.Slow:l,u=n.throwOnInvalidObject,h=u===void 0?!1:u,f=n.updateMetadata,d=f===void 0?!0:f,p=n.capNumbers,g=p===void 0?!1:p,assertIs(e,"pdf",["string",Uint8Array,ArrayBuffer]),assertIs(o,"ignoreEncryption",["boolean"]),assertIs(c,"parseSpeed",["number"]),assertIs(h,"throwOnInvalidObject",["boolean"]),m=toUint8Array(e),[4,PDFParser.forBytesWithOptions(m,c,h,g).parseDocument()];case 1:return y=_.sent(),[2,new a(y,o,d)]}})})},a.create=function(e){return e===void 0&&(e={}),__awaiter(this,void 0,void 0,function(){var n,s,o,l,c,u;return __generator(this,function(h){return n=e.updateMetadata,s=n===void 0?!0:n,o=PDFContext.create(),l=PDFPageTree.withContext(o),c=o.register(l),u=PDFCatalog.withContextAndPages(o,c),o.trailerInfo.Root=o.register(u),[2,new a(o,!1,s)]})})},a.prototype.registerFontkit=function(e){this.fontkit=e},a.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},a.prototype.getTitle=function(){var e=this.getInfoDict().lookup(PDFName.Title);if(e)return assertIsLiteralOrHexString(e),e.decodeText()},a.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(PDFName.Author);if(e)return assertIsLiteralOrHexString(e),e.decodeText()},a.prototype.getSubject=function(){var e=this.getInfoDict().lookup(PDFName.Subject);if(e)return assertIsLiteralOrHexString(e),e.decodeText()},a.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(PDFName.Keywords);if(e)return assertIsLiteralOrHexString(e),e.decodeText()},a.prototype.getCreator=function(){var e=this.getInfoDict().lookup(PDFName.Creator);if(e)return assertIsLiteralOrHexString(e),e.decodeText()},a.prototype.getProducer=function(){var e=this.getInfoDict().lookup(PDFName.Producer);if(e)return assertIsLiteralOrHexString(e),e.decodeText()},a.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(PDFName.CreationDate);if(e)return assertIsLiteralOrHexString(e),e.decodeDate()},a.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(PDFName.ModDate);if(e)return assertIsLiteralOrHexString(e),e.decodeDate()},a.prototype.setTitle=function(e,n){assertIs(e,"title",["string"]);var s=PDFName.of("Title");if(this.getInfoDict().set(s,PDFHexString.fromText(e)),n!=null&&n.showInWindowTitleBar){var o=this.catalog.getOrCreateViewerPreferences();o.setDisplayDocTitle(!0)}},a.prototype.setAuthor=function(e){assertIs(e,"author",["string"]);var n=PDFName.of("Author");this.getInfoDict().set(n,PDFHexString.fromText(e))},a.prototype.setSubject=function(e){assertIs(e,"author",["string"]);var n=PDFName.of("Subject");this.getInfoDict().set(n,PDFHexString.fromText(e))},a.prototype.setKeywords=function(e){assertIs(e,"keywords",[Array]);var n=PDFName.of("Keywords");this.getInfoDict().set(n,PDFHexString.fromText(e.join(" ")))},a.prototype.setCreator=function(e){assertIs(e,"creator",["string"]);var n=PDFName.of("Creator");this.getInfoDict().set(n,PDFHexString.fromText(e))},a.prototype.setProducer=function(e){assertIs(e,"creator",["string"]);var n=PDFName.of("Producer");this.getInfoDict().set(n,PDFHexString.fromText(e))},a.prototype.setLanguage=function(e){assertIs(e,"language",["string"]);var n=PDFName.of("Lang");this.catalog.set(n,PDFString.of(e))},a.prototype.setCreationDate=function(e){assertIs(e,"creationDate",[[Date,"Date"]]);var n=PDFName.of("CreationDate");this.getInfoDict().set(n,PDFString.fromDate(e))},a.prototype.setModificationDate=function(e){assertIs(e,"modificationDate",[[Date,"Date"]]);var n=PDFName.of("ModDate");this.getInfoDict().set(n,PDFString.fromDate(e))},a.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},a.prototype.getPages=function(){return this.pageCache.access()},a.prototype.getPage=function(e){var n=this.getPages();return assertRange(e,"index",0,n.length-1),n[e]},a.prototype.getPageIndices=function(){return range(0,this.getPageCount())},a.prototype.removePage=function(e){var n=this.getPageCount();if(this.pageCount===0)throw new RemovePageFromEmptyDocumentError;assertRange(e,"index",0,n-1),this.catalog.removeLeafNode(e),this.pageCount=n-1},a.prototype.addPage=function(e){return assertIs(e,"page",["undefined",[PDFPage,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},a.prototype.insertPage=function(e,n){var s=this.getPageCount();if(assertRange(e,"index",0,s),assertIs(n,"page",["undefined",[PDFPage,"PDFPage"],Array]),!n||Array.isArray(n)){var o=Array.isArray(n)?n:PageSizes.A4;n=PDFPage.create(this),n.setSize.apply(n,o)}else if(n.doc!==this)throw new ForeignPageError;var l=this.catalog.insertLeafNode(n.ref,e);return n.node.setParent(l),this.pageMap.set(n.node,n),this.pageCache.invalidate(),this.pageCount=s+1,n},a.prototype.copyPages=function(e,n){return __awaiter(this,void 0,void 0,function(){var s,o,l,c,u,h,f,d;return __generator(this,function(p){switch(p.label){case 0:return assertIs(e,"srcDoc",[[a,"PDFDocument"]]),assertIs(n,"indices",[Array]),[4,e.flush()];case 1:for(p.sent(),s=PDFObjectCopier.for(e.context,this.context),o=e.getPages(),l=new Array(n.length),c=0,u=n.length;c<u;c++)h=o[n[c]],f=s.copy(h.node),d=this.context.register(f),l[c]=PDFPage.of(f,d,this);return[2,l]}})})},a.prototype.copy=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s,o;return __generator(this,function(l){switch(l.label){case 0:return[4,a.create()];case 1:return e=l.sent(),[4,e.copyPages(this,this.getPageIndices())];case 2:for(n=l.sent(),s=0,o=n.length;s<o;s++)e.addPage(n[s]);return this.getAuthor()!==void 0&&e.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&e.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&e.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&e.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&e.setProducer(this.getProducer()),this.getSubject()!==void 0&&e.setSubject(this.getSubject()),this.getTitle()!==void 0&&e.setTitle(this.getTitle()),e.defaultWordBreaks=this.defaultWordBreaks,[2,e]}})})},a.prototype.addJavaScript=function(e,n){assertIs(e,"name",["string"]),assertIs(n,"script",["string"]);var s=JavaScriptEmbedder.for(n,e),o=this.context.nextRef(),l=PDFJavaScript.of(o,this,s);this.javaScripts.push(l)},a.prototype.attach=function(e,n,s){return s===void 0&&(s={}),__awaiter(this,void 0,void 0,function(){var o,l,c,u;return __generator(this,function(h){return assertIs(e,"attachment",["string",Uint8Array,ArrayBuffer]),assertIs(n,"name",["string"]),assertOrUndefined(s.mimeType,"mimeType",["string"]),assertOrUndefined(s.description,"description",["string"]),assertOrUndefined(s.creationDate,"options.creationDate",[Date]),assertOrUndefined(s.modificationDate,"options.modificationDate",[Date]),assertIsOneOfOrUndefined(s.afRelationship,"options.afRelationship",AFRelationship),o=toUint8Array(e),l=FileEmbedder.for(o,n,s),c=this.context.nextRef(),u=PDFEmbeddedFile.of(c,this,l),this.embeddedFiles.push(u),[2]})})},a.prototype.embedFont=function(e,n){return n===void 0&&(n={}),__awaiter(this,void 0,void 0,function(){var s,o,l,c,u,h,f,d,p,g;return __generator(this,function(m){switch(m.label){case 0:return s=n.subset,o=s===void 0?!1:s,l=n.customName,c=n.features,assertIs(e,"font",["string",Uint8Array,ArrayBuffer]),assertIs(o,"subset",["boolean"]),isStandardFont(e)?(u=StandardFontEmbedder.for(e,l),[3,7]):[3,1];case 1:return canBeConvertedToUint8Array(e)?(h=toUint8Array(e),f=this.assertFontkit(),o?[4,CustomFontSubsetEmbedder.for(f,h,l,c)]:[3,3]):[3,6];case 2:return d=m.sent(),[3,5];case 3:return[4,CustomFontEmbedder.for(f,h,l,c)];case 4:d=m.sent(),m.label=5;case 5:return u=d,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return p=this.context.nextRef(),g=PDFFont.of(p,this,u),this.fonts.push(g),[2,g]}})})},a.prototype.embedStandardFont=function(e,n){if(assertIs(e,"font",["string"]),!isStandardFont(e))throw new TypeError("`font` must be one of type `StandardFonts`");var s=StandardFontEmbedder.for(e,n),o=this.context.nextRef(),l=PDFFont.of(o,this,s);return this.fonts.push(l),l},a.prototype.embedJpg=function(e){return __awaiter(this,void 0,void 0,function(){var n,s,o,l;return __generator(this,function(c){switch(c.label){case 0:return assertIs(e,"jpg",["string",Uint8Array,ArrayBuffer]),n=toUint8Array(e),[4,JpegEmbedder.for(n)];case 1:return s=c.sent(),o=this.context.nextRef(),l=PDFImage.of(o,this,s),this.images.push(l),[2,l]}})})},a.prototype.embedPng=function(e){return __awaiter(this,void 0,void 0,function(){var n,s,o,l;return __generator(this,function(c){switch(c.label){case 0:return assertIs(e,"png",["string",Uint8Array,ArrayBuffer]),n=toUint8Array(e),[4,PngEmbedder.for(n)];case 1:return s=c.sent(),o=this.context.nextRef(),l=PDFImage.of(o,this,s),this.images.push(l),[2,l]}})})},a.prototype.embedPdf=function(e,n){return n===void 0&&(n=[0]),__awaiter(this,void 0,void 0,function(){var s,o,l;return __generator(this,function(c){switch(c.label){case 0:return assertIs(e,"pdf",["string",Uint8Array,ArrayBuffer,[a,"PDFDocument"]]),assertIs(n,"indices",[Array]),e instanceof a?(o=e,[3,3]):[3,1];case 1:return[4,a.load(e)];case 2:o=c.sent(),c.label=3;case 3:return s=o,l=pluckIndices(s.getPages(),n),[2,this.embedPages(l)]}})})},a.prototype.embedPage=function(e,n,s){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(l){switch(l.label){case 0:return assertIs(e,"page",[[PDFPage,"PDFPage"]]),[4,this.embedPages([e],[n],[s])];case 1:return o=l.sent()[0],[2,o]}})})},a.prototype.embedPages=function(e,n,s){return n===void 0&&(n=[]),s===void 0&&(s=[]),__awaiter(this,void 0,void 0,function(){var f,d,o,l,c,u,h,f,d,p,g,m,y,_,b;return __generator(this,function(x){switch(x.label){case 0:if(e.length===0)return[2,[]];for(f=0,d=e.length-1;f<d;f++)if(o=e[f],l=e[f+1],o.node.context!==l.node.context)throw new PageEmbeddingMismatchedContextError;c=e[0].node.context,u=c===this.context?function(P){return P}:PDFObjectCopier.for(c,this.context).copy,h=new Array(e.length),f=0,d=e.length,x.label=1;case 1:return f<d?(p=u(e[f].node),g=n[f],m=s[f],[4,PDFPageEmbedder.for(p,g,m)]):[3,4];case 2:y=x.sent(),_=this.context.nextRef(),h[f]=PDFEmbeddedPage.of(_,this,y),x.label=3;case 3:return f++,[3,1];case 4:return(b=this.embeddedPages).push.apply(b,h),[2,h]}})})},a.prototype.flush=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},a.prototype.save=function(e){return e===void 0&&(e={}),__awaiter(this,void 0,void 0,function(){var n,s,o,l,c,u,h,f,d,p;return __generator(this,function(g){switch(g.label){case 0:return n=e.useObjectStreams,s=n===void 0?!0:n,o=e.addDefaultPage,l=o===void 0?!0:o,c=e.objectsPerTick,u=c===void 0?50:c,h=e.updateFieldAppearances,f=h===void 0?!0:h,assertIs(s,"useObjectStreams",["boolean"]),assertIs(l,"addDefaultPage",["boolean"]),assertIs(u,"objectsPerTick",["number"]),assertIs(f,"updateFieldAppearances",["boolean"]),l&&this.getPageCount()===0&&this.addPage(),f&&(d=this.formCache.getValue(),d&&d.updateFieldAppearances()),[4,this.flush()];case 1:return g.sent(),p=s?PDFStreamWriter:PDFWriter,[2,p.forContext(this.context,u).serializeToBuffer()]}})})},a.prototype.saveAsBase64=function(e){return e===void 0&&(e={}),__awaiter(this,void 0,void 0,function(){var n,s,o,l,c;return __generator(this,function(u){switch(u.label){case 0:return n=e.dataUri,s=n===void 0?!1:n,o=__rest(e,["dataUri"]),assertIs(s,"dataUri",["boolean"]),[4,this.save(o)];case 1:return l=u.sent(),c=encodeToBase64(l),[2,s?"data:application/pdf;base64,"+c:c]}})})},a.prototype.findPageForAnnotationRef=function(e){for(var n=this.getPages(),s=0,o=n.length;s<o;s++){var l=n[s],c=l.node.Annots();if((c==null?void 0:c.indexOf(e))!==void 0)return l}},a.prototype.embedAll=function(e){return __awaiter(this,void 0,void 0,function(){var n,s;return __generator(this,function(o){switch(o.label){case 0:n=0,s=e.length,o.label=1;case 1:return n<s?[4,e[n].embed()]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},a.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",n=new Date,s=this.getInfoDict();this.setProducer(e),this.setModificationDate(n),s.get(PDFName.of("Creator"))||this.setCreator(e),s.get(PDFName.of("CreationDate"))||this.setCreationDate(n)},a.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof PDFDict)return e;var n=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(n),n},a.prototype.assertFontkit=function(){if(!this.fontkit)throw new FontkitNotRegisteredError;return this.fontkit},a}();function assertIsLiteralOrHexString(a){if(!(a instanceof PDFHexString)&&!(a instanceof PDFString))throw new UnexpectedObjectTypeError([PDFHexString,PDFString],a)}var BlendMode;(function(a){a.Normal="Normal",a.Multiply="Multiply",a.Screen="Screen",a.Overlay="Overlay",a.Darken="Darken",a.Lighten="Lighten",a.ColorDodge="ColorDodge",a.ColorBurn="ColorBurn",a.HardLight="HardLight",a.SoftLight="SoftLight",a.Difference="Difference",a.Exclusion="Exclusion"})(BlendMode||(BlendMode={}));var PDFPage=function(){function a(e,n,s){this.fontSize=24,this.fontColor=rgb(0,0,0),this.lineHeight=24,this.x=0,this.y=0,assertIs(e,"leafNode",[[PDFPageLeaf,"PDFPageLeaf"]]),assertIs(n,"ref",[[PDFRef,"PDFRef"]]),assertIs(s,"doc",[[PDFDocument,"PDFDocument"]]),this.node=e,this.ref=n,this.doc=s}return a.prototype.setRotation=function(e){var n=toDegrees(e);assertMultiple(n,"degreesAngle",90),this.node.set(PDFName.of("Rotate"),this.doc.context.obj(n))},a.prototype.getRotation=function(){var e=this.node.Rotate();return degrees(e?e.asNumber():0)},a.prototype.setSize=function(e,n){assertIs(e,"width",["number"]),assertIs(n,"height",["number"]);var s=this.getMediaBox();this.setMediaBox(s.x,s.y,e,n);var o=this.getCropBox(),l=this.getBleedBox(),c=this.getTrimBox(),u=this.getArtBox(),h=this.node.CropBox(),f=this.node.BleedBox(),d=this.node.TrimBox(),p=this.node.ArtBox();h&&rectanglesAreEqual(o,s)&&this.setCropBox(s.x,s.y,e,n),f&&rectanglesAreEqual(l,s)&&this.setBleedBox(s.x,s.y,e,n),d&&rectanglesAreEqual(c,s)&&this.setTrimBox(s.x,s.y,e,n),p&&rectanglesAreEqual(u,s)&&this.setArtBox(s.x,s.y,e,n)},a.prototype.setWidth=function(e){assertIs(e,"width",["number"]),this.setSize(e,this.getSize().height)},a.prototype.setHeight=function(e){assertIs(e,"height",["number"]),this.setSize(this.getSize().width,e)},a.prototype.setMediaBox=function(e,n,s,o){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),assertIs(s,"width",["number"]),assertIs(o,"height",["number"]);var l=this.doc.context.obj([e,n,e+s,n+o]);this.node.set(PDFName.MediaBox,l)},a.prototype.setCropBox=function(e,n,s,o){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),assertIs(s,"width",["number"]),assertIs(o,"height",["number"]);var l=this.doc.context.obj([e,n,e+s,n+o]);this.node.set(PDFName.CropBox,l)},a.prototype.setBleedBox=function(e,n,s,o){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),assertIs(s,"width",["number"]),assertIs(o,"height",["number"]);var l=this.doc.context.obj([e,n,e+s,n+o]);this.node.set(PDFName.BleedBox,l)},a.prototype.setTrimBox=function(e,n,s,o){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),assertIs(s,"width",["number"]),assertIs(o,"height",["number"]);var l=this.doc.context.obj([e,n,e+s,n+o]);this.node.set(PDFName.TrimBox,l)},a.prototype.setArtBox=function(e,n,s,o){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),assertIs(s,"width",["number"]),assertIs(o,"height",["number"]);var l=this.doc.context.obj([e,n,e+s,n+o]);this.node.set(PDFName.ArtBox,l)},a.prototype.getSize=function(){var e=this.getMediaBox(),n=e.width,s=e.height;return{width:n,height:s}},a.prototype.getWidth=function(){return this.getSize().width},a.prototype.getHeight=function(){return this.getSize().height},a.prototype.getMediaBox=function(){var e=this.node.MediaBox();return e.asRectangle()},a.prototype.getCropBox=function(){var e,n=this.node.CropBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getMediaBox()},a.prototype.getBleedBox=function(){var e,n=this.node.BleedBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},a.prototype.getTrimBox=function(){var e,n=this.node.TrimBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},a.prototype.getArtBox=function(){var e,n=this.node.ArtBox();return(e=n==null?void 0:n.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},a.prototype.translateContent=function(e,n){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),this.node.normalize(),this.getContentStream();var s=this.createContentStream(pushGraphicsState(),translate(e,n)),o=this.doc.context.register(s),l=this.createContentStream(popGraphicsState()),c=this.doc.context.register(l);this.node.wrapContentStreams(o,c)},a.prototype.scale=function(e,n){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*n),this.scaleContent(e,n),this.scaleAnnotations(e,n)},a.prototype.scaleContent=function(e,n){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),this.node.normalize(),this.getContentStream();var s=this.createContentStream(pushGraphicsState(),scale$1(e,n)),o=this.doc.context.register(s),l=this.createContentStream(popGraphicsState()),c=this.doc.context.register(l);this.node.wrapContentStreams(o,c)},a.prototype.scaleAnnotations=function(e,n){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]);var s=this.node.Annots();if(s)for(var o=0;o<s.size();o++){var l=s.lookup(o);l instanceof PDFDict&&this.scaleAnnot(l,e,n)}},a.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},a.prototype.setFont=function(e){assertIs(e,"font",[[PDFFont,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},a.prototype.setFontSize=function(e){assertIs(e,"fontSize",["number"]),this.fontSize=e},a.prototype.setFontColor=function(e){assertIs(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},a.prototype.setLineHeight=function(e){assertIs(e,"lineHeight",["number"]),this.lineHeight=e},a.prototype.getPosition=function(){return{x:this.x,y:this.y}},a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.moveTo=function(e,n){assertIs(e,"x",["number"]),assertIs(n,"y",["number"]),this.x=e,this.y=n},a.prototype.moveDown=function(e){assertIs(e,"yDecrease",["number"]),this.y-=e},a.prototype.moveUp=function(e){assertIs(e,"yIncrease",["number"]),this.y+=e},a.prototype.moveLeft=function(e){assertIs(e,"xDecrease",["number"]),this.x-=e},a.prototype.moveRight=function(e){assertIs(e,"xIncrease",["number"]),this.x+=e},a.prototype.pushOperators=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];assertEachIs(e,"operator",[[PDFOperator,"PDFOperator"]]);var s=this.getContentStream();s.push.apply(s,e)},a.prototype.drawText=function(e,n){var s,o,l,c,u,h,f;n===void 0&&(n={}),assertIs(e,"text",["string"]),assertOrUndefined(n.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(n.opacity,"opacity.opacity",0,1),assertOrUndefined(n.font,"options.font",[[PDFFont,"PDFFont"]]),assertOrUndefined(n.size,"options.size",["number"]),assertOrUndefined(n.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertOrUndefined(n.x,"options.x",["number"]),assertOrUndefined(n.y,"options.y",["number"]),assertOrUndefined(n.lineHeight,"options.lineHeight",["number"]),assertOrUndefined(n.maxWidth,"options.maxWidth",["number"]),assertOrUndefined(n.wordBreaks,"options.wordBreaks",[Array]),assertIsOneOfOrUndefined(n.blendMode,"options.blendMode",BlendMode);for(var d=this.setOrEmbedFont(n.font),p=d.oldFont,g=d.newFont,m=d.newFontKey,y=n.size||this.fontSize,_=n.wordBreaks||this.doc.defaultWordBreaks,b=function(w){return g.widthOfTextAtSize(w,y)},x=n.maxWidth===void 0?lineSplit(cleanText(e)):breakTextIntoLines(e,_,n.maxWidth,b),P=new Array(x.length),T=0,k=x.length;T<k;T++)P[T]=g.encodeText(x[T]);var S=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),A=this.getContentStream();A.push.apply(A,drawLinesOfText(P,{color:(s=n.color)!==null&&s!==void 0?s:this.fontColor,font:m,size:y,rotate:(o=n.rotate)!==null&&o!==void 0?o:degrees(0),xSkew:(l=n.xSkew)!==null&&l!==void 0?l:degrees(0),ySkew:(c=n.ySkew)!==null&&c!==void 0?c:degrees(0),x:(u=n.x)!==null&&u!==void 0?u:this.x,y:(h=n.y)!==null&&h!==void 0?h:this.y,lineHeight:(f=n.lineHeight)!==null&&f!==void 0?f:this.lineHeight,graphicsState:S})),n.font&&(p?this.setFont(p):this.resetFont())},a.prototype.drawImage=function(e,n){var s,o,l,c,u,h,f;n===void 0&&(n={}),assertIs(e,"image",[[PDFImage,"PDFImage"]]),assertOrUndefined(n.x,"options.x",["number"]),assertOrUndefined(n.y,"options.y",["number"]),assertOrUndefined(n.width,"options.width",["number"]),assertOrUndefined(n.height,"options.height",["number"]),assertOrUndefined(n.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertRangeOrUndefined(n.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(n.blendMode,"options.blendMode",BlendMode);var d=this.node.newXObject("Image",e.ref),p=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),g=this.getContentStream();g.push.apply(g,drawImage(d,{x:(s=n.x)!==null&&s!==void 0?s:this.x,y:(o=n.y)!==null&&o!==void 0?o:this.y,width:(l=n.width)!==null&&l!==void 0?l:e.size().width,height:(c=n.height)!==null&&c!==void 0?c:e.size().height,rotate:(u=n.rotate)!==null&&u!==void 0?u:degrees(0),xSkew:(h=n.xSkew)!==null&&h!==void 0?h:degrees(0),ySkew:(f=n.ySkew)!==null&&f!==void 0?f:degrees(0),graphicsState:p}))},a.prototype.drawPage=function(e,n){var s,o,l,c,u;n===void 0&&(n={}),assertIs(e,"embeddedPage",[[PDFEmbeddedPage,"PDFEmbeddedPage"]]),assertOrUndefined(n.x,"options.x",["number"]),assertOrUndefined(n.y,"options.y",["number"]),assertOrUndefined(n.xScale,"options.xScale",["number"]),assertOrUndefined(n.yScale,"options.yScale",["number"]),assertOrUndefined(n.width,"options.width",["number"]),assertOrUndefined(n.height,"options.height",["number"]),assertOrUndefined(n.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertRangeOrUndefined(n.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(n.blendMode,"options.blendMode",BlendMode);var h=this.node.newXObject("EmbeddedPdfPage",e.ref),f=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),d=n.width!==void 0?n.width/e.width:n.xScale!==void 0?n.xScale:1,p=n.height!==void 0?n.height/e.height:n.yScale!==void 0?n.yScale:1,g=this.getContentStream();g.push.apply(g,drawPage(h,{x:(s=n.x)!==null&&s!==void 0?s:this.x,y:(o=n.y)!==null&&o!==void 0?o:this.y,xScale:d,yScale:p,rotate:(l=n.rotate)!==null&&l!==void 0?l:degrees(0),xSkew:(c=n.xSkew)!==null&&c!==void 0?c:degrees(0),ySkew:(u=n.ySkew)!==null&&u!==void 0?u:degrees(0),graphicsState:f}))},a.prototype.drawSvgPath=function(e,n){var s,o,l,c,u,h,f,d,p;n===void 0&&(n={}),assertIs(e,"path",["string"]),assertOrUndefined(n.x,"options.x",["number"]),assertOrUndefined(n.y,"options.y",["number"]),assertOrUndefined(n.scale,"options.scale",["number"]),assertOrUndefined(n.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(n.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(n.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(n.opacity,"opacity.opacity",0,1),assertOrUndefined(n.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(n.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(n.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(n.borderLineCap,"options.borderLineCap",LineCapStyle),assertRangeOrUndefined(n.borderOpacity,"options.borderOpacity",0,1),assertIsOneOfOrUndefined(n.blendMode,"options.blendMode",BlendMode);var g=this.maybeEmbedGraphicsState({opacity:n.opacity,borderOpacity:n.borderOpacity,blendMode:n.blendMode});!("color"in n)&&!("borderColor"in n)&&(n.borderColor=rgb(0,0,0));var m=this.getContentStream();m.push.apply(m,drawSvgPath(e,{x:(s=n.x)!==null&&s!==void 0?s:this.x,y:(o=n.y)!==null&&o!==void 0?o:this.y,scale:n.scale,rotate:(l=n.rotate)!==null&&l!==void 0?l:degrees(0),color:(c=n.color)!==null&&c!==void 0?c:void 0,borderColor:(u=n.borderColor)!==null&&u!==void 0?u:void 0,borderWidth:(h=n.borderWidth)!==null&&h!==void 0?h:0,borderDashArray:(f=n.borderDashArray)!==null&&f!==void 0?f:void 0,borderDashPhase:(d=n.borderDashPhase)!==null&&d!==void 0?d:void 0,borderLineCap:(p=n.borderLineCap)!==null&&p!==void 0?p:void 0,graphicsState:g}))},a.prototype.drawLine=function(e){var n,s,o,l,c;assertIs(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),assertIs(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),assertIs(e.start.x,"options.start.x",["number"]),assertIs(e.start.y,"options.start.y",["number"]),assertIs(e.end.x,"options.end.x",["number"]),assertIs(e.end.y,"options.end.y",["number"]),assertOrUndefined(e.thickness,"options.thickness",["number"]),assertOrUndefined(e.color,"options.color",[[Object,"Color"]]),assertOrUndefined(e.dashArray,"options.dashArray",[Array]),assertOrUndefined(e.dashPhase,"options.dashPhase",["number"]),assertIsOneOfOrUndefined(e.lineCap,"options.lineCap",LineCapStyle),assertRangeOrUndefined(e.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(e.blendMode,"options.blendMode",BlendMode);var u=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=rgb(0,0,0));var h=this.getContentStream();h.push.apply(h,drawLine({start:e.start,end:e.end,thickness:(n=e.thickness)!==null&&n!==void 0?n:1,color:(s=e.color)!==null&&s!==void 0?s:void 0,dashArray:(o=e.dashArray)!==null&&o!==void 0?o:void 0,dashPhase:(l=e.dashPhase)!==null&&l!==void 0?l:void 0,lineCap:(c=e.lineCap)!==null&&c!==void 0?c:void 0,graphicsState:u}))},a.prototype.drawRectangle=function(e){var n,s,o,l,c,u,h,f,d,p,g,m,y;e===void 0&&(e={}),assertOrUndefined(e.x,"options.x",["number"]),assertOrUndefined(e.y,"options.y",["number"]),assertOrUndefined(e.width,"options.width",["number"]),assertOrUndefined(e.height,"options.height",["number"]),assertOrUndefined(e.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertOrUndefined(e.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(e.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(e.opacity,"opacity.opacity",0,1),assertOrUndefined(e.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(e.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(e.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(e.borderLineCap,"options.borderLineCap",LineCapStyle),assertRangeOrUndefined(e.borderOpacity,"options.borderOpacity",0,1),assertIsOneOfOrUndefined(e.blendMode,"options.blendMode",BlendMode);var _=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=rgb(0,0,0));var b=this.getContentStream();b.push.apply(b,drawRectangle({x:(n=e.x)!==null&&n!==void 0?n:this.x,y:(s=e.y)!==null&&s!==void 0?s:this.y,width:(o=e.width)!==null&&o!==void 0?o:150,height:(l=e.height)!==null&&l!==void 0?l:100,rotate:(c=e.rotate)!==null&&c!==void 0?c:degrees(0),xSkew:(u=e.xSkew)!==null&&u!==void 0?u:degrees(0),ySkew:(h=e.ySkew)!==null&&h!==void 0?h:degrees(0),borderWidth:(f=e.borderWidth)!==null&&f!==void 0?f:0,color:(d=e.color)!==null&&d!==void 0?d:void 0,borderColor:(p=e.borderColor)!==null&&p!==void 0?p:void 0,borderDashArray:(g=e.borderDashArray)!==null&&g!==void 0?g:void 0,borderDashPhase:(m=e.borderDashPhase)!==null&&m!==void 0?m:void 0,graphicsState:_,borderLineCap:(y=e.borderLineCap)!==null&&y!==void 0?y:void 0}))},a.prototype.drawSquare=function(e){e===void 0&&(e={});var n=e.size;assertOrUndefined(n,"size",["number"]),this.drawRectangle(__assign(__assign({},e),{width:n,height:n}))},a.prototype.drawEllipse=function(e){var n,s,o,l,c,u,h,f,d,p,g;e===void 0&&(e={}),assertOrUndefined(e.x,"options.x",["number"]),assertOrUndefined(e.y,"options.y",["number"]),assertOrUndefined(e.xScale,"options.xScale",["number"]),assertOrUndefined(e.yScale,"options.yScale",["number"]),assertOrUndefined(e.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(e.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(e.opacity,"opacity.opacity",0,1),assertOrUndefined(e.borderColor,"options.borderColor",[[Object,"Color"]]),assertRangeOrUndefined(e.borderOpacity,"options.borderOpacity",0,1),assertOrUndefined(e.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(e.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(e.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(e.borderLineCap,"options.borderLineCap",LineCapStyle),assertIsOneOfOrUndefined(e.blendMode,"options.blendMode",BlendMode);var m=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=rgb(0,0,0));var y=this.getContentStream();y.push.apply(y,drawEllipse({x:(n=e.x)!==null&&n!==void 0?n:this.x,y:(s=e.y)!==null&&s!==void 0?s:this.y,xScale:(o=e.xScale)!==null&&o!==void 0?o:100,yScale:(l=e.yScale)!==null&&l!==void 0?l:100,rotate:(c=e.rotate)!==null&&c!==void 0?c:void 0,color:(u=e.color)!==null&&u!==void 0?u:void 0,borderColor:(h=e.borderColor)!==null&&h!==void 0?h:void 0,borderWidth:(f=e.borderWidth)!==null&&f!==void 0?f:0,borderDashArray:(d=e.borderDashArray)!==null&&d!==void 0?d:void 0,borderDashPhase:(p=e.borderDashPhase)!==null&&p!==void 0?p:void 0,borderLineCap:(g=e.borderLineCap)!==null&&g!==void 0?g:void 0,graphicsState:m}))},a.prototype.drawCircle=function(e){e===void 0&&(e={});var n=e.size,s=n===void 0?100:n;assertOrUndefined(s,"size",["number"]),this.drawEllipse(__assign(__assign({},e),{xScale:s,yScale:s}))},a.prototype.setOrEmbedFont=function(e){var n=this.font,s=this.fontKey;e?this.setFont(e):this.getFont();var o=this.font,l=this.fontKey;return{oldFont:n,oldFontKey:s,newFont:o,newFontKey:l}},a.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(StandardFonts.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},a.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},a.prototype.getContentStream=function(e){return e===void 0&&(e=!0),e&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},a.prototype.createContentStream=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var s=this.doc.context.obj({}),o=PDFContentStream.of(s,e);return o},a.prototype.maybeEmbedGraphicsState=function(e){var n=e.opacity,s=e.borderOpacity,o=e.blendMode;if(!(n===void 0&&s===void 0&&o===void 0)){var l=this.doc.context.obj({Type:"ExtGState",ca:n,CA:s,BM:o}),c=this.node.newExtGState("GS",l);return c}},a.prototype.scaleAnnot=function(e,n,s){for(var o=["RD","CL","Vertices","QuadPoints","L","Rect"],l=0,c=o.length;l<c;l++){var u=e.lookup(PDFName.of(o[l]));u instanceof PDFArray&&u.scalePDFNumbers(n,s)}var h=e.lookup(PDFName.of("InkList"));if(h instanceof PDFArray)for(var l=0,c=h.size();l<c;l++){var f=h.lookup(l);f instanceof PDFArray&&f.scalePDFNumbers(n,s)}},a.of=function(e,n,s){return new a(e,n,s)},a.create=function(e){assertIs(e,"doc",[[PDFDocument,"PDFDocument"]]);var n=PDFRef.of(-1),s=PDFPageLeaf.withContextAndParent(e.context,n),o=e.context.register(s);return new a(s,o,e)},a}(),PDFButton=function(a){__extends(e,a);function e(n,s,o){var l=a.call(this,n,s,o)||this;return assertIs(n,"acroButton",[[PDFAcroPushButton,"PDFAcroPushButton"]]),l.acroField=n,l}return e.prototype.setImage=function(n,s){s===void 0&&(s=ImageAlignment.Center);for(var o=this.acroField.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l],h=this.createImageAppearanceStream(u,n,s);this.updateWidgetAppearances(u,{normal:h})}this.markAsClean()},e.prototype.setFontSize=function(n){assertPositive(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.addToPage=function(n,s,o){var l,c,u,h,f,d,p,g,m,y,_;assertOrUndefined(n,"text",["string"]),assertOrUndefined(s,"page",[[PDFPage,"PDFPage"]]),assertFieldAppearanceOptions(o);var b=this.createWidget({x:((l=o==null?void 0:o.x)!==null&&l!==void 0?l:0)-((c=o==null?void 0:o.borderWidth)!==null&&c!==void 0?c:0)/2,y:((u=o==null?void 0:o.y)!==null&&u!==void 0?u:0)-((h=o==null?void 0:o.borderWidth)!==null&&h!==void 0?h:0)/2,width:(f=o==null?void 0:o.width)!==null&&f!==void 0?f:100,height:(d=o==null?void 0:o.height)!==null&&d!==void 0?d:50,textColor:(p=o==null?void 0:o.textColor)!==null&&p!==void 0?p:rgb(0,0,0),backgroundColor:(g=o==null?void 0:o.backgroundColor)!==null&&g!==void 0?g:rgb(.75,.75,.75),borderColor:o==null?void 0:o.borderColor,borderWidth:(m=o==null?void 0:o.borderWidth)!==null&&m!==void 0?m:0,rotate:(y=o==null?void 0:o.rotate)!==null&&y!==void 0?y:degrees(0),caption:n,hidden:o==null?void 0:o.hidden,page:s.ref}),x=this.doc.context.register(b.dict);this.acroField.addWidget(x);var P=(_=o==null?void 0:o.font)!==null&&_!==void 0?_:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(b,P),s.node.addAnnot(x)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var s=this.acroField.getWidgets(),o=0,l=s.length;o<l;o++){var c=s[o],u=((n=c.getAppearances())===null||n===void 0?void 0:n.normal)instanceof PDFStream;if(!u)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){assertIs(n,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,s){assertIs(n,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(s,"provider",[Function]);for(var o=this.acroField.getWidgets(),l=0,c=o.length;l<c;l++){var u=o[l];this.updateWidgetAppearance(u,n,s)}},e.prototype.updateWidgetAppearance=function(n,s,o){var l=o??defaultButtonAppearanceProvider,c=normalizeAppearance(l(this,n,s));this.updateWidgetAppearanceWithFont(n,s,c)},e.of=function(n,s,o){return new e(n,s,o)},e}(PDFField);function evaled(str,fields){return(function(){let prelude="";for(const[a,e]of Object.entries(fields))a&&e&&(prelude+=`const ${a} = "${e}";
`);return eval(prelude+str)}).call(fields)}async function makepdf(a,e,n){const s=await fetch(a).then(c=>c.arrayBuffer()),o=await PDFDocument.load(s),l=o.getForm();for(const{where:c,from:u}of n){try{l.getTextField(c).setText(evaled(u,e));continue}catch{}try{const h=l.getCheckBox(c);evaled(u,e)&&h.check();continue}catch{}try{const[h,f]=c.split(":"),d=l.getRadioGroup(h);evaled(u,e)&&d.select(f);continue}catch{}}return l.flatten(),await o.saveAsBase64({dataUri:!0})}async function pdfGetDoc(a){const e=await fetch(a).then(s=>s.arrayBuffer());return await PDFDocument.load(e)}async function pdfListformsonpage(a,e){const n=await fetch(a).then(u=>u.arrayBuffer()),s=await PDFDocument.load(n),o=s.getForm(),l=o.getFields(),c=[];return l.forEach(u=>{const h=u.getName();try{o.getTextField(h).acroField.getWidgets().forEach(p=>{const g=p.getRectangle(),m=s.getPages().find(_=>_.ref===p.P()),y=s.getPages().findIndex(_=>_.ref===p.P());y==e&&c.push({name:h,pageIndex:y,rectangle:g})})}catch{}try{o.getRadioGroup(h).acroField.getWidgets().forEach(p=>{const g=p.getRectangle(),m=s.getPages().find(_=>_.ref===p.P()),y=s.getPages().findIndex(_=>_.ref===p.P());y==e&&c.push({name:h,pageIndex:y,rectangle:g})})}catch{}try{o.getCheckBox(h).acroField.getWidgets().forEach(p=>{const g=p.getRectangle(),m=s.getPages().find(_=>_.ref===p.P()),y=s.getPages().findIndex(_=>_.ref===p.P());y==e&&c.push({name:h,pageIndex:y,rectangle:g})})}catch{}}),c}async function getpagesNums(a){return a?(await pdfGetDoc(a.pdf)).computePages().length:0}function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var e=a.default;if(typeof e=="function"){var n=function s(){if(this instanceof s){var o=[null];o.push.apply(o,arguments);var l=Function.bind.apply(e,o);return new l}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(a).forEach(function(s){var o=Object.getOwnPropertyDescriptor(a,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return a[s]}})}),n}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=a.length;e<n;++e)lookup[e]=a[e],revLookup[a.charCodeAt(e)]=e;revLookup[45]=62,revLookup[95]=63}function toByteArray(a){inited||init();var e,n,s,o,l,c,u=a.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l=a[u-2]==="="?2:a[u-1]==="="?1:0,c=new Arr(u*3/4-l),s=l>0?u-4:u;var h=0;for(e=0,n=0;e<s;e+=4,n+=3)o=revLookup[a.charCodeAt(e)]<<18|revLookup[a.charCodeAt(e+1)]<<12|revLookup[a.charCodeAt(e+2)]<<6|revLookup[a.charCodeAt(e+3)],c[h++]=o>>16&255,c[h++]=o>>8&255,c[h++]=o&255;return l===2?(o=revLookup[a.charCodeAt(e)]<<2|revLookup[a.charCodeAt(e+1)]>>4,c[h++]=o&255):l===1&&(o=revLookup[a.charCodeAt(e)]<<10|revLookup[a.charCodeAt(e+1)]<<4|revLookup[a.charCodeAt(e+2)]>>2,c[h++]=o>>8&255,c[h++]=o&255),c}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,e,n){for(var s,o=[],l=e;l<n;l+=3)s=(a[l]<<16)+(a[l+1]<<8)+a[l+2],o.push(tripletToBase64(s));return o.join("")}function fromByteArray(a){inited||init();for(var e,n=a.length,s=n%3,o="",l=[],c=16383,u=0,h=n-s;u<h;u+=c)l.push(encodeChunk(a,u,u+c>h?h:u+c));return s===1?(e=a[n-1],o+=lookup[e>>2],o+=lookup[e<<4&63],o+="=="):s===2&&(e=(a[n-2]<<8)+a[n-1],o+=lookup[e>>10],o+=lookup[e>>4&63],o+=lookup[e<<2&63],o+="="),l.push(o),l.join("")}function read(a,e,n,s,o){var l,c,u=o*8-s-1,h=(1<<u)-1,f=h>>1,d=-7,p=n?o-1:0,g=n?-1:1,m=a[e+p];for(p+=g,l=m&(1<<-d)-1,m>>=-d,d+=u;d>0;l=l*256+a[e+p],p+=g,d-=8);for(c=l&(1<<-d)-1,l>>=-d,d+=s;d>0;c=c*256+a[e+p],p+=g,d-=8);if(l===0)l=1-f;else{if(l===h)return c?NaN:(m?-1:1)*(1/0);c=c+Math.pow(2,s),l=l-f}return(m?-1:1)*c*Math.pow(2,l-s)}function write(a,e,n,s,o,l){var c,u,h,f=l*8-o-1,d=(1<<f)-1,p=d>>1,g=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=s?0:l-1,y=s?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,c=d):(c=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-c))<1&&(c--,h*=2),c+p>=1?e+=g/h:e+=g*Math.pow(2,1-p),e*h>=2&&(c++,h/=2),c+p>=d?(u=0,c=d):c+p>=1?(u=(e*h-1)*Math.pow(2,o),c=c+p):(u=e*Math.pow(2,p-1)*Math.pow(2,o),c=0));o>=8;a[n+m]=u&255,m+=y,u/=256,o-=8);for(c=c<<o|u,f+=o;f>0;a[n+m]=c&255,m+=y,c/=256,f-=8);a[n+m-y]|=_*128}var toString={}.toString,isArray$2=Array.isArray||function(a){return toString.call(a)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(a,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(e),a.__proto__=Buffer.prototype):(a===null&&(a=new Buffer(e)),a.length=e),a}function Buffer(a,e,n){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(a,e,n);if(typeof a=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,a)}return from(this,a,e,n)}Buffer.poolSize=8192;Buffer._augment=function(a){return a.__proto__=Buffer.prototype,a};function from(a,e,n,s){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?fromArrayBuffer(a,e,n,s):typeof e=="string"?fromString(a,e,n):fromObject(a,e)}Buffer.from=function(a,e,n){return from(null,a,e,n)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);function assertSize(a){if(typeof a!="number")throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function alloc(a,e,n,s){return assertSize(e),e<=0?createBuffer(a,e):n!==void 0?typeof s=="string"?createBuffer(a,e).fill(n,s):createBuffer(a,e).fill(n):createBuffer(a,e)}Buffer.alloc=function(a,e,n){return alloc(null,a,e,n)};function allocUnsafe(a,e){if(assertSize(e),a=createBuffer(a,e<0?0:checked(e)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)a[n]=0;return a}Buffer.allocUnsafe=function(a){return allocUnsafe(null,a)};Buffer.allocUnsafeSlow=function(a){return allocUnsafe(null,a)};function fromString(a,e,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var s=byteLength(e,n)|0;a=createBuffer(a,s);var o=a.write(e,n);return o!==s&&(a=a.slice(0,o)),a}function fromArrayLike(a,e){var n=e.length<0?0:checked(e.length)|0;a=createBuffer(a,n);for(var s=0;s<n;s+=1)a[s]=e[s]&255;return a}function fromArrayBuffer(a,e,n,s){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(s||0))throw new RangeError("'length' is out of bounds");return n===void 0&&s===void 0?e=new Uint8Array(e):s===void 0?e=new Uint8Array(e,n):e=new Uint8Array(e,n,s),Buffer.TYPED_ARRAY_SUPPORT?(a=e,a.__proto__=Buffer.prototype):a=fromArrayLike(a,e),a}function fromObject(a,e){if(internalIsBuffer(e)){var n=checked(e.length)|0;return a=createBuffer(a,n),a.length===0||e.copy(a,0,0,n),a}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||isnan(e.length)?createBuffer(a,0):fromArrayLike(a,e);if(e.type==="Buffer"&&isArray$2(e.data))return fromArrayLike(a,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(a){if(a>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return a|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(a){return!!(a!=null&&a._isBuffer)}Buffer.compare=function a(e,n){if(!internalIsBuffer(e)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var s=e.length,o=n.length,l=0,c=Math.min(s,o);l<c;++l)if(e[l]!==n[l]){s=e[l],o=n[l];break}return s<o?-1:o<s?1:0};Buffer.isEncoding=function a(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function a(e,n){if(!isArray$2(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);var s;if(n===void 0)for(n=0,s=0;s<e.length;++s)n+=e[s].length;var o=Buffer.allocUnsafe(n),l=0;for(s=0;s<e.length;++s){var c=e[s];if(!internalIsBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(o,l),l+=c.length}return o};function byteLength(a,e){if(internalIsBuffer(a))return a.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;typeof a!="string"&&(a=""+a);var n=a.length;if(n===0)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return base64ToBytes(a).length;default:if(s)return utf8ToBytes(a).length;e=(""+e).toLowerCase(),s=!0}}Buffer.byteLength=byteLength;function slowToString(a,e,n){var s=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(a||(a="utf8");;)switch(a){case"hex":return hexSlice(this,e,n);case"utf8":case"utf-8":return utf8Slice(this,e,n);case"ascii":return asciiSlice(this,e,n);case"latin1":case"binary":return latin1Slice(this,e,n);case"base64":return base64Slice(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,n);default:if(s)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),s=!0}}Buffer.prototype._isBuffer=!0;function swap(a,e,n){var s=a[e];a[e]=a[n],a[n]=s}Buffer.prototype.swap16=function a(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)swap(this,n,n+1);return this};Buffer.prototype.swap32=function a(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this};Buffer.prototype.swap64=function a(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this};Buffer.prototype.toString=function a(){var e=this.length|0;return e===0?"":arguments.length===0?utf8Slice(this,0,e):slowToString.apply(this,arguments)};Buffer.prototype.equals=function a(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer.compare(this,e)===0};Buffer.prototype.inspect=function a(){var e="",n=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"};Buffer.prototype.compare=function a(e,n,s,o,l){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),s===void 0&&(s=e?e.length:0),o===void 0&&(o=0),l===void 0&&(l=this.length),n<0||s>e.length||o<0||l>this.length)throw new RangeError("out of range index");if(o>=l&&n>=s)return 0;if(o>=l)return-1;if(n>=s)return 1;if(n>>>=0,s>>>=0,o>>>=0,l>>>=0,this===e)return 0;for(var c=l-o,u=s-n,h=Math.min(c,u),f=this.slice(o,l),d=e.slice(n,s),p=0;p<h;++p)if(f[p]!==d[p]){c=f[p],u=d[p];break}return c<u?-1:u<c?1:0};function bidirectionalIndexOf(a,e,n,s,o){if(a.length===0)return-1;if(typeof n=="string"?(s=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:a.length-1),n<0&&(n=a.length+n),n>=a.length){if(o)return-1;n=a.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof e=="string"&&(e=Buffer.from(e,s)),internalIsBuffer(e))return e.length===0?-1:arrayIndexOf(a,e,n,s,o);if(typeof e=="number")return e=e&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(a,e,n):Uint8Array.prototype.lastIndexOf.call(a,e,n):arrayIndexOf(a,[e],n,s,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(a,e,n,s,o){var l=1,c=a.length,u=e.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(a.length<2||e.length<2)return-1;l=2,c/=2,u/=2,n/=2}function h(m,y){return l===1?m[y]:m.readUInt16BE(y*l)}var f;if(o){var d=-1;for(f=n;f<c;f++)if(h(a,f)===h(e,d===-1?0:f-d)){if(d===-1&&(d=f),f-d+1===u)return d*l}else d!==-1&&(f-=f-d),d=-1}else for(n+u>c&&(n=c-u),f=n;f>=0;f--){for(var p=!0,g=0;g<u;g++)if(h(a,f+g)!==h(e,g)){p=!1;break}if(p)return f}return-1}Buffer.prototype.includes=function a(e,n,s){return this.indexOf(e,n,s)!==-1};Buffer.prototype.indexOf=function a(e,n,s){return bidirectionalIndexOf(this,e,n,s,!0)};Buffer.prototype.lastIndexOf=function a(e,n,s){return bidirectionalIndexOf(this,e,n,s,!1)};function hexWrite(a,e,n,s){n=Number(n)||0;var o=a.length-n;s?(s=Number(s),s>o&&(s=o)):s=o;var l=e.length;if(l%2!==0)throw new TypeError("Invalid hex string");s>l/2&&(s=l/2);for(var c=0;c<s;++c){var u=parseInt(e.substr(c*2,2),16);if(isNaN(u))return c;a[n+c]=u}return c}function utf8Write(a,e,n,s){return blitBuffer(utf8ToBytes(e,a.length-n),a,n,s)}function asciiWrite(a,e,n,s){return blitBuffer(asciiToBytes(e),a,n,s)}function latin1Write(a,e,n,s){return asciiWrite(a,e,n,s)}function base64Write(a,e,n,s){return blitBuffer(base64ToBytes(e),a,n,s)}function ucs2Write(a,e,n,s){return blitBuffer(utf16leToBytes(e,a.length-n),a,n,s)}Buffer.prototype.write=function a(e,n,s,o){if(n===void 0)o="utf8",s=this.length,n=0;else if(s===void 0&&typeof n=="string")o=n,s=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(s)?(s=s|0,o===void 0&&(o="utf8")):(o=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var l=this.length-n;if((s===void 0||s>l)&&(s=l),e.length>0&&(s<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var c=!1;;)switch(o){case"hex":return hexWrite(this,e,n,s);case"utf8":case"utf-8":return utf8Write(this,e,n,s);case"ascii":return asciiWrite(this,e,n,s);case"latin1":case"binary":return latin1Write(this,e,n,s);case"base64":return base64Write(this,e,n,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,n,s);default:if(c)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),c=!0}};Buffer.prototype.toJSON=function a(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(a,e,n){return e===0&&n===a.length?fromByteArray(a):fromByteArray(a.slice(e,n))}function utf8Slice(a,e,n){n=Math.min(a.length,n);for(var s=[],o=e;o<n;){var l=a[o],c=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u<=n){var h,f,d,p;switch(u){case 1:l<128&&(c=l);break;case 2:h=a[o+1],(h&192)===128&&(p=(l&31)<<6|h&63,p>127&&(c=p));break;case 3:h=a[o+1],f=a[o+2],(h&192)===128&&(f&192)===128&&(p=(l&15)<<12|(h&63)<<6|f&63,p>2047&&(p<55296||p>57343)&&(c=p));break;case 4:h=a[o+1],f=a[o+2],d=a[o+3],(h&192)===128&&(f&192)===128&&(d&192)===128&&(p=(l&15)<<18|(h&63)<<12|(f&63)<<6|d&63,p>65535&&p<1114112&&(c=p))}}c===null?(c=65533,u=1):c>65535&&(c-=65536,s.push(c>>>10&1023|55296),c=56320|c&1023),s.push(c),o+=u}return decodeCodePointsArray(s)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(a){var e=a.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,a);for(var n="",s=0;s<e;)n+=String.fromCharCode.apply(String,a.slice(s,s+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(a,e,n){var s="";n=Math.min(a.length,n);for(var o=e;o<n;++o)s+=String.fromCharCode(a[o]&127);return s}function latin1Slice(a,e,n){var s="";n=Math.min(a.length,n);for(var o=e;o<n;++o)s+=String.fromCharCode(a[o]);return s}function hexSlice(a,e,n){var s=a.length;(!e||e<0)&&(e=0),(!n||n<0||n>s)&&(n=s);for(var o="",l=e;l<n;++l)o+=toHex(a[l]);return o}function utf16leSlice(a,e,n){for(var s=a.slice(e,n),o="",l=0;l<s.length;l+=2)o+=String.fromCharCode(s[l]+s[l+1]*256);return o}Buffer.prototype.slice=function a(e,n){var s=this.length;e=~~e,n=n===void 0?s:~~n,e<0?(e+=s,e<0&&(e=0)):e>s&&(e=s),n<0?(n+=s,n<0&&(n=0)):n>s&&(n=s),n<e&&(n=e);var o;if(Buffer.TYPED_ARRAY_SUPPORT)o=this.subarray(e,n),o.__proto__=Buffer.prototype;else{var l=n-e;o=new Buffer(l,void 0);for(var c=0;c<l;++c)o[c]=this[c+e]}return o};function checkOffset(a,e,n){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+e>n)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function a(e,n,s){e=e|0,n=n|0,s||checkOffset(e,n,this.length);for(var o=this[e],l=1,c=0;++c<n&&(l*=256);)o+=this[e+c]*l;return o};Buffer.prototype.readUIntBE=function a(e,n,s){e=e|0,n=n|0,s||checkOffset(e,n,this.length);for(var o=this[e+--n],l=1;n>0&&(l*=256);)o+=this[e+--n]*l;return o};Buffer.prototype.readUInt8=function a(e,n){return n||checkOffset(e,1,this.length),this[e]};Buffer.prototype.readUInt16LE=function a(e,n){return n||checkOffset(e,2,this.length),this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function a(e,n){return n||checkOffset(e,2,this.length),this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function a(e,n){return n||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function a(e,n){return n||checkOffset(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function a(e,n,s){e=e|0,n=n|0,s||checkOffset(e,n,this.length);for(var o=this[e],l=1,c=0;++c<n&&(l*=256);)o+=this[e+c]*l;return l*=128,o>=l&&(o-=Math.pow(2,8*n)),o};Buffer.prototype.readIntBE=function a(e,n,s){e=e|0,n=n|0,s||checkOffset(e,n,this.length);for(var o=n,l=1,c=this[e+--o];o>0&&(l*=256);)c+=this[e+--o]*l;return l*=128,c>=l&&(c-=Math.pow(2,8*n)),c};Buffer.prototype.readInt8=function a(e,n){return n||checkOffset(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer.prototype.readInt16LE=function a(e,n){n||checkOffset(e,2,this.length);var s=this[e]|this[e+1]<<8;return s&32768?s|4294901760:s};Buffer.prototype.readInt16BE=function a(e,n){n||checkOffset(e,2,this.length);var s=this[e+1]|this[e]<<8;return s&32768?s|4294901760:s};Buffer.prototype.readInt32LE=function a(e,n){return n||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function a(e,n){return n||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function a(e,n){return n||checkOffset(e,4,this.length),read(this,e,!0,23,4)};Buffer.prototype.readFloatBE=function a(e,n){return n||checkOffset(e,4,this.length),read(this,e,!1,23,4)};Buffer.prototype.readDoubleLE=function a(e,n){return n||checkOffset(e,8,this.length),read(this,e,!0,52,8)};Buffer.prototype.readDoubleBE=function a(e,n){return n||checkOffset(e,8,this.length),read(this,e,!1,52,8)};function checkInt(a,e,n,s,o,l){if(!internalIsBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<l)throw new RangeError('"value" argument is out of bounds');if(n+s>a.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function a(e,n,s,o){if(e=+e,n=n|0,s=s|0,!o){var l=Math.pow(2,8*s)-1;checkInt(this,e,n,s,l,0)}var c=1,u=0;for(this[n]=e&255;++u<s&&(c*=256);)this[n+u]=e/c&255;return n+s};Buffer.prototype.writeUIntBE=function a(e,n,s,o){if(e=+e,n=n|0,s=s|0,!o){var l=Math.pow(2,8*s)-1;checkInt(this,e,n,s,l,0)}var c=s-1,u=1;for(this[n+c]=e&255;--c>=0&&(u*=256);)this[n+c]=e/u&255;return n+s};Buffer.prototype.writeUInt8=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e&255,n+1};function objectWriteUInt16(a,e,n,s){e<0&&(e=65535+e+1);for(var o=0,l=Math.min(a.length-n,2);o<l;++o)a[n+o]=(e&255<<8*(s?o:1-o))>>>(s?o:1-o)*8}Buffer.prototype.writeUInt16LE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2};Buffer.prototype.writeUInt16BE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):objectWriteUInt16(this,e,n,!1),n+2};function objectWriteUInt32(a,e,n,s){e<0&&(e=4294967295+e+1);for(var o=0,l=Math.min(a.length-n,4);o<l;++o)a[n+o]=e>>>(s?o:3-o)*8&255}Buffer.prototype.writeUInt32LE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255):objectWriteUInt32(this,e,n,!0),n+4};Buffer.prototype.writeUInt32BE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):objectWriteUInt32(this,e,n,!1),n+4};Buffer.prototype.writeIntLE=function a(e,n,s,o){if(e=+e,n=n|0,!o){var l=Math.pow(2,8*s-1);checkInt(this,e,n,s,l-1,-l)}var c=0,u=1,h=0;for(this[n]=e&255;++c<s&&(u*=256);)e<0&&h===0&&this[n+c-1]!==0&&(h=1),this[n+c]=(e/u>>0)-h&255;return n+s};Buffer.prototype.writeIntBE=function a(e,n,s,o){if(e=+e,n=n|0,!o){var l=Math.pow(2,8*s-1);checkInt(this,e,n,s,l-1,-l)}var c=s-1,u=1,h=0;for(this[n+c]=e&255;--c>=0&&(u*=256);)e<0&&h===0&&this[n+c+1]!==0&&(h=1),this[n+c]=(e/u>>0)-h&255;return n+s};Buffer.prototype.writeInt8=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e&255,n+1};Buffer.prototype.writeInt16LE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2};Buffer.prototype.writeInt16BE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):objectWriteUInt16(this,e,n,!1),n+2};Buffer.prototype.writeInt32LE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):objectWriteUInt32(this,e,n,!0),n+4};Buffer.prototype.writeInt32BE=function a(e,n,s){return e=+e,n=n|0,s||checkInt(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):objectWriteUInt32(this,e,n,!1),n+4};function checkIEEE754(a,e,n,s,o,l){if(n+s>a.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(a,e,n,s,o){return o||checkIEEE754(a,e,n,4),write(a,e,n,s,23,4),n+4}Buffer.prototype.writeFloatLE=function a(e,n,s){return writeFloat(this,e,n,!0,s)};Buffer.prototype.writeFloatBE=function a(e,n,s){return writeFloat(this,e,n,!1,s)};function writeDouble(a,e,n,s,o){return o||checkIEEE754(a,e,n,8),write(a,e,n,s,52,8),n+8}Buffer.prototype.writeDoubleLE=function a(e,n,s){return writeDouble(this,e,n,!0,s)};Buffer.prototype.writeDoubleBE=function a(e,n,s){return writeDouble(this,e,n,!1,s)};Buffer.prototype.copy=function a(e,n,s,o){if(s||(s=0),!o&&o!==0&&(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<s&&(o=s),o===s||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-s&&(o=e.length-n+s);var l=o-s,c;if(this===e&&s<n&&n<o)for(c=l-1;c>=0;--c)e[c+n]=this[c+s];else if(l<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(c=0;c<l;++c)e[c+n]=this[c+s];else Uint8Array.prototype.set.call(e,this.subarray(s,s+l),n);return l};Buffer.prototype.fill=function a(e,n,s,o){if(typeof e=="string"){if(typeof n=="string"?(o=n,n=0,s=this.length):typeof s=="string"&&(o=s,s=this.length),e.length===1){var l=e.charCodeAt(0);l<256&&(e=l)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<s)throw new RangeError("Out of range index");if(s<=n)return this;n=n>>>0,s=s===void 0?this.length:s>>>0,e||(e=0);var c;if(typeof e=="number")for(c=n;c<s;++c)this[c]=e;else{var u=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,o).toString()),h=u.length;for(c=0;c<s-n;++c)this[c+n]=u[c%h]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(a){if(a=stringtrim(a).replace(INVALID_BASE64_RE,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function stringtrim(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function toHex(a){return a<16?"0"+a.toString(16):a.toString(16)}function utf8ToBytes(a,e){e=e||1/0;for(var n,s=a.length,o=null,l=[],c=0;c<s;++c){if(n=a.charCodeAt(c),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&l.push(239,191,189);continue}else if(c+1===s){(e-=3)>-1&&l.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&l.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&l.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;l.push(n)}else if(n<2048){if((e-=2)<0)break;l.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;l.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return l}function asciiToBytes(a){for(var e=[],n=0;n<a.length;++n)e.push(a.charCodeAt(n)&255);return e}function utf16leToBytes(a,e){for(var n,s,o,l=[],c=0;c<a.length&&!((e-=2)<0);++c)n=a.charCodeAt(c),s=n>>8,o=n%256,l.push(o),l.push(s);return l}function base64ToBytes(a){return toByteArray(base64clean(a))}function blitBuffer(a,e,n,s){for(var o=0;o<s&&!(o+n>=e.length||o>=a.length);++o)e[o+n]=a[o];return o}function isnan(a){return a!==a}function isBuffer(a){return a!=null&&(!!a._isBuffer||isFastBuffer(a)||isSlowBuffer(a))}function isFastBuffer(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isSlowBuffer(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&isFastBuffer(a.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(a){if(cachedSetTimeout===setTimeout)return setTimeout(a,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(a,0);try{return cachedSetTimeout(a,0)}catch{try{return cachedSetTimeout.call(null,a,0)}catch{return cachedSetTimeout.call(this,a,0)}}}function runClearTimeout(a){if(cachedClearTimeout===clearTimeout)return clearTimeout(a);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(a);try{return cachedClearTimeout(a)}catch{try{return cachedClearTimeout.call(null,a)}catch{return cachedClearTimeout.call(this,a)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var a=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(a)}}function nextTick(a){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item(a,e)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(a,e){this.fun=a,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser$1=!0,env={},argv=[],version="",versions={},release={},config$1={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding$1(a){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(a){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(a){var e=performanceNow.call(performance$1)*.001,n=Math.floor(e),s=Math.floor(e%1*1e9);return a&&(n=n-a[0],s=s-a[1],s<0&&(n--,s+=1e9)),[n,s]}var startTime=new Date;function uptime(){var a=new Date,e=a-startTime;return e/1e3}var browser$1$1={nextTick,title,browser:browser$1,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding:binding$1,cwd,chdir,umask,hrtime,platform,release,config:config$1,uptime};function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0=getAugmentedNamespace(_polyfillNode_fs$1),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),hasFetch=isFunction$1(global$1.fetch)&&isFunction$1(global$1.ReadableStream),_blobConstructor;function blobConstructor(){if(typeof _blobConstructor<"u")return _blobConstructor;try{new global$1.Blob([new ArrayBuffer(1)]),_blobConstructor=!0}catch{_blobConstructor=!1}return _blobConstructor}var xhr;function checkTypeSupport(a){xhr||(xhr=new global$1.XMLHttpRequest,xhr.open("GET",global$1.location.host?"/":"https://example.com"));try{return xhr.responseType=a,xhr.responseType===a}catch{return!1}}var haveArrayBuffer=typeof global$1.ArrayBuffer<"u",haveSlice=haveArrayBuffer&&isFunction$1(global$1.ArrayBuffer.prototype.slice),arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer"),msstream=!hasFetch&&haveSlice&&checkTypeSupport("ms-stream"),mozchunkedarraybuffer=!hasFetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer"),overrideMimeType=isFunction$1(xhr.overrideMimeType),vbArray=isFunction$1(global$1.VBArray);function isFunction$1(a){return typeof a=="function"}xhr=null;var inherits;typeof Object.create=="function"?inherits=function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:inherits=function(e,n){e.super_=n;var s=function(){};s.prototype=n.prototype,e.prototype=new s,e.prototype.constructor=e};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format$1(a){if(!isString(a)){for(var e=[],n=0;n<arguments.length;n++)e.push(inspect(arguments[n]));return e.join(" ")}for(var n=1,s=arguments,o=s.length,l=String(a).replace(formatRegExp,function(u){if(u==="%%")return"%";if(n>=o)return u;switch(u){case"%s":return String(s[n++]);case"%d":return Number(s[n++]);case"%j":try{return JSON.stringify(s[n++])}catch{return"[Circular]"}default:return u}}),c=s[n];n<o;c=s[++n])isNull(c)||!isObject$1(c)?l+=" "+c:l+=" "+inspect(c);return l}function deprecate(a,e){if(isUndefined(global$1.process))return function(){return deprecate(a,e).apply(this,arguments)};if(browser$1$1.noDeprecation===!0)return a;var n=!1;function s(){if(!n){if(browser$1$1.throwDeprecation)throw new Error(e);browser$1$1.traceDeprecation?console.trace(e):console.error(e),n=!0}return a.apply(this,arguments)}return s}var debugs={},debugEnviron;function debuglog(a){if(isUndefined(debugEnviron)&&(debugEnviron=browser$1$1.env.NODE_DEBUG||""),a=a.toUpperCase(),!debugs[a])if(new RegExp("\\b"+a+"\\b","i").test(debugEnviron)){var e=0;debugs[a]=function(){var n=format$1.apply(null,arguments);console.error("%s %d: %s",a,e,n)}}else debugs[a]=function(){};return debugs[a]}function inspect(a,e){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(e)?n.showHidden=e:e&&_extend(n,e),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,a,n.depth)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(a,e){var n=inspect.styles[e];return n?"\x1B["+inspect.colors[n][0]+"m"+a+"\x1B["+inspect.colors[n][1]+"m":a}function stylizeNoColor(a,e){return a}function arrayToHash(a){var e={};return a.forEach(function(n,s){e[n]=!0}),e}function formatValue(a,e,n){if(a.customInspect&&e&&isFunction(e.inspect)&&e.inspect!==inspect&&!(e.constructor&&e.constructor.prototype===e)){var s=e.inspect(n,a);return isString(s)||(s=formatValue(a,s,n)),s}var o=formatPrimitive(a,e);if(o)return o;var l=Object.keys(e),c=arrayToHash(l);if(a.showHidden&&(l=Object.getOwnPropertyNames(e)),isError(e)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return formatError(e);if(l.length===0){if(isFunction(e)){var u=e.name?": "+e.name:"";return a.stylize("[Function"+u+"]","special")}if(isRegExp(e))return a.stylize(RegExp.prototype.toString.call(e),"regexp");if(isDate(e))return a.stylize(Date.prototype.toString.call(e),"date");if(isError(e))return formatError(e)}var h="",f=!1,d=["{","}"];if(isArray$1(e)&&(f=!0,d=["[","]"]),isFunction(e)){var p=e.name?": "+e.name:"";h=" [Function"+p+"]"}if(isRegExp(e)&&(h=" "+RegExp.prototype.toString.call(e)),isDate(e)&&(h=" "+Date.prototype.toUTCString.call(e)),isError(e)&&(h=" "+formatError(e)),l.length===0&&(!f||e.length==0))return d[0]+h+d[1];if(n<0)return isRegExp(e)?a.stylize(RegExp.prototype.toString.call(e),"regexp"):a.stylize("[Object]","special");a.seen.push(e);var g;return f?g=formatArray(a,e,n,c,l):g=l.map(function(m){return formatProperty(a,e,n,c,m,f)}),a.seen.pop(),reduceToSingleString(g,h,d)}function formatPrimitive(a,e){if(isUndefined(e))return a.stylize("undefined","undefined");if(isString(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(n,"string")}if(isNumber(e))return a.stylize(""+e,"number");if(isBoolean(e))return a.stylize(""+e,"boolean");if(isNull(e))return a.stylize("null","null")}function formatError(a){return"["+Error.prototype.toString.call(a)+"]"}function formatArray(a,e,n,s,o){for(var l=[],c=0,u=e.length;c<u;++c)hasOwnProperty$1(e,String(c))?l.push(formatProperty(a,e,n,s,String(c),!0)):l.push("");return o.forEach(function(h){h.match(/^\d+$/)||l.push(formatProperty(a,e,n,s,h,!0))}),l}function formatProperty(a,e,n,s,o,l){var c,u,h;if(h=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},h.get?h.set?u=a.stylize("[Getter/Setter]","special"):u=a.stylize("[Getter]","special"):h.set&&(u=a.stylize("[Setter]","special")),hasOwnProperty$1(s,o)||(c="["+o+"]"),u||(a.seen.indexOf(h.value)<0?(isNull(n)?u=formatValue(a,h.value,null):u=formatValue(a,h.value,n-1),u.indexOf(`
`)>-1&&(l?u=u.split(`
`).map(function(f){return"  "+f}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(f){return"   "+f}).join(`
`))):u=a.stylize("[Circular]","special")),isUndefined(c)){if(l&&o.match(/^\d+$/))return u;c=JSON.stringify(""+o),c.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=a.stylize(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=a.stylize(c,"string"))}return c+": "+u}function reduceToSingleString(a,e,n){var s=a.reduce(function(o,l){return l.indexOf(`
`)>=0,o+l.replace(/\u001b\[\d\d?m/g,"").length+1},0);return s>60?n[0]+(e===""?"":e+`
 `)+" "+a.join(`,
  `)+" "+n[1]:n[0]+e+" "+a.join(", ")+" "+n[1]}function isArray$1(a){return Array.isArray(a)}function isBoolean(a){return typeof a=="boolean"}function isNull(a){return a===null}function isNullOrUndefined(a){return a==null}function isNumber(a){return typeof a=="number"}function isString(a){return typeof a=="string"}function isUndefined(a){return a===void 0}function isRegExp(a){return isObject$1(a)&&objectToString(a)==="[object RegExp]"}function isObject$1(a){return typeof a=="object"&&a!==null}function isDate(a){return isObject$1(a)&&objectToString(a)==="[object Date]"}function isError(a){return isObject$1(a)&&(objectToString(a)==="[object Error]"||a instanceof Error)}function isFunction(a){return typeof a=="function"}function objectToString(a){return Object.prototype.toString.call(a)}function _extend(a,e){if(!e||!isObject$1(e))return a;for(var n=Object.keys(e),s=n.length;s--;)a[n[s]]=e[n[s]];return a}function hasOwnProperty$1(a,e){return Object.prototype.hasOwnProperty.call(a,e)}var domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=!1;EventEmitter.prototype.domain=void 0;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function a(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function $getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return $getMaxListeners(this)};function emitNone(a,e,n){if(e)a.call(n);else for(var s=a.length,o=arrayClone(a,s),l=0;l<s;++l)o[l].call(n)}function emitOne(a,e,n,s){if(e)a.call(n,s);else for(var o=a.length,l=arrayClone(a,o),c=0;c<o;++c)l[c].call(n,s)}function emitTwo(a,e,n,s,o){if(e)a.call(n,s,o);else for(var l=a.length,c=arrayClone(a,l),u=0;u<l;++u)c[u].call(n,s,o)}function emitThree(a,e,n,s,o,l){if(e)a.call(n,s,o,l);else for(var c=a.length,u=arrayClone(a,c),h=0;h<c;++h)u[h].call(n,s,o,l)}function emitMany(a,e,n,s){if(e)a.apply(n,s);else for(var o=a.length,l=arrayClone(a,o),c=0;c<o;++c)l[c].apply(n,s)}EventEmitter.prototype.emit=function a(e){var n,s,o,l,c,u,h,f=e==="error";if(u=this._events,u)f=f&&u.error==null;else if(!f)return!1;if(h=this.domain,f){if(n=arguments[1],h)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=h,n.domainThrown=!1,h.emit("error",n);else{if(n instanceof Error)throw n;var d=new Error('Uncaught, unspecified "error" event. ('+n+")");throw d.context=n,d}return!1}if(s=u[e],!s)return!1;var p=typeof s=="function";switch(o=arguments.length,o){case 1:emitNone(s,p,this);break;case 2:emitOne(s,p,this,arguments[1]);break;case 3:emitTwo(s,p,this,arguments[1],arguments[2]);break;case 4:emitThree(s,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(l=new Array(o-1),c=1;c<o;c++)l[c-1]=arguments[c];emitMany(s,p,this,l)}return!0};function _addListener(a,e,n,s){var o,l,c;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(l=a._events,l?(l.newListener&&(a.emit("newListener",e,n.listener?n.listener:n),l=a._events),c=l[e]):(l=a._events=new EventHandlers,a._eventsCount=0),!c)c=l[e]=n,++a._eventsCount;else if(typeof c=="function"?c=l[e]=s?[n,c]:[c,n]:s?c.unshift(n):c.push(n),!c.warned&&(o=$getMaxListeners(a),o&&o>0&&c.length>o)){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=a,u.type=e,u.count=c.length,emitWarning(u)}return a}function emitWarning(a){typeof console.warn=="function"?console.warn(a):console.log(a)}EventEmitter.prototype.addListener=function a(e,n){return _addListener(this,e,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function a(e,n){return _addListener(this,e,n,!0)};function _onceWrap(a,e,n){var s=!1;function o(){a.removeListener(e,o),s||(s=!0,n.apply(a,arguments))}return o.listener=n,o}EventEmitter.prototype.once=function a(e,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,n)),this};EventEmitter.prototype.prependOnceListener=function a(e,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter.prototype.removeListener=function a(e,n){var s,o,l,c,u;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(o=this._events,!o)return this;if(s=o[e],!s)return this;if(s===n||s.listener&&s.listener===n)--this._eventsCount===0?this._events=new EventHandlers:(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||n));else if(typeof s!="function"){for(l=-1,c=s.length;c-- >0;)if(s[c]===n||s[c].listener&&s[c].listener===n){u=s[c].listener,l=c;break}if(l<0)return this;if(s.length===1){if(s[0]=void 0,--this._eventsCount===0)return this._events=new EventHandlers,this;delete o[e]}else spliceOne(s,l);o.removeListener&&this.emit("removeListener",e,u||n)}return this};EventEmitter.prototype.off=function(a,e){return this.removeListener(a,e)};EventEmitter.prototype.removeAllListeners=function a(e){var n,s;if(s=this._events,!s)return this;if(!s.removeListener)return arguments.length===0?(this._events=new EventHandlers,this._eventsCount=0):s[e]&&(--this._eventsCount===0?this._events=new EventHandlers:delete s[e]),this;if(arguments.length===0){for(var o=Object.keys(s),l=0,c;l<o.length;++l)c=o[l],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if(n=s[e],typeof n=="function")this.removeListener(e,n);else if(n)do this.removeListener(e,n[n.length-1]);while(n[0]);return this};EventEmitter.prototype.listeners=function a(e){var n,s,o=this._events;return o?(n=o[e],n?typeof n=="function"?s=[n.listener||n]:s=unwrapListeners(n):s=[]):s=[],s};EventEmitter.listenerCount=function(a,e){return typeof a.listenerCount=="function"?a.listenerCount(e):listenerCount$1.call(a,e)};EventEmitter.prototype.listenerCount=listenerCount$1;function listenerCount$1(a){var e=this._events;if(e){var n=e[a];if(typeof n=="function")return 1;if(n)return n.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(a,e){for(var n=e,s=n+1,o=a.length;s<o;n+=1,s+=1)a[n]=a[s];a.pop()}function arrayClone(a,e){for(var n=new Array(e);e--;)n[e]=a[e];return n}function unwrapListeners(a){for(var e=new Array(a.length),n=0;n<e.length;++n)e[n]=a[n].listener||a[n];return e}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(a){var e={data:a,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};BufferList.prototype.unshift=function(a){var e={data:a,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(a){if(this.length===0)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=a+e.data;return n};BufferList.prototype.concat=function(a){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;for(var e=Buffer.allocUnsafe(a>>>0),n=this.head,s=0;n;)n.data.copy(e,s),s+=n.data.length,n=n.next;return e};var isBufferEncoding=Buffer.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(a){if(a&&!isBufferEncoding(a))throw new Error("Unknown encoding: "+a)}function StringDecoder(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}StringDecoder.prototype.write=function(a){for(var e="";this.charLength;){var n=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";a=a.slice(n,a.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=e.charCodeAt(e.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,a.length===0)return e;break}this.detectIncompleteChar(a);var s=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,s),s-=this.charReceived),e+=a.toString(this.encoding,0,s);var s=e.length-1,o=e.charCodeAt(s);if(o>=55296&&o<=56319){var l=this.surrogateSize;return this.charLength+=l,this.charReceived+=l,this.charBuffer.copy(this.charBuffer,l,0,l),a.copy(this.charBuffer,0,0,l),e.substring(0,s)}return e};StringDecoder.prototype.detectIncompleteChar=function(a){for(var e=a.length>=3?3:a.length;e>0;e--){var n=a[a.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e};StringDecoder.prototype.end=function(a){var e="";if(a&&a.length&&(e=this.write(a)),this.charReceived){var n=this.charReceived,s=this.charBuffer,o=this.encoding;e+=s.slice(0,n).toString(o)}return e};function passThroughWrite(a){return a.toString(this.encoding)}function utf16DetectIncompleteChar(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter);function prependListener(a,e,n){if(typeof a.prependListener=="function")return a.prependListener(e,n);!a._events||!a._events[e]?a.on(e,n):Array.isArray(a._events[e])?a._events[e].unshift(n):a._events[e]=[n,a._events[e]]}function listenerCount(a,e){return a.listeners(e).length}function ReadableState(a,e){a=a||{},this.objectMode=!!a.objectMode,e instanceof Duplex&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var n=a.highWaterMark,s=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:s,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(this.decoder=new StringDecoder(a.encoding),this.encoding=a.encoding)}function Readable(a){if(!(this instanceof Readable))return new Readable(a);this._readableState=new ReadableState(a,this),this.readable=!0,a&&typeof a.read=="function"&&(this._read=a.read),EventEmitter.call(this)}Readable.prototype.push=function(a,e){var n=this._readableState;return!n.objectMode&&typeof a=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(a=Buffer.from(a,e),e="")),readableAddChunk(this,n,a,e,!1)};Readable.prototype.unshift=function(a){var e=this._readableState;return readableAddChunk(this,e,a,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(a,e,n,s,o){var l=chunkInvalid(e,n);if(l)a.emit("error",l);else if(n===null)e.reading=!1,onEofChunk(a,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var c=new Error("stream.push() after EOF");a.emit("error",c)}else if(e.endEmitted&&o){var u=new Error("stream.unshift() after end event");a.emit("error",u)}else{var h;e.decoder&&!o&&!s&&(n=e.decoder.write(n),h=!e.objectMode&&n.length===0),o||(e.reading=!1),h||(e.flowing&&e.length===0&&!e.sync?(a.emit("data",n),a.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&emitReadable(a))),maybeReadMore(a,e)}else o||(e.reading=!1);return needMoreData(e)}function needMoreData(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}Readable.prototype.setEncoding=function(a){return this._readableState.decoder=new StringDecoder(a),this._readableState.encoding=a,this};var MAX_HWM=8388608;function computeNewHighWaterMark(a){return a>=MAX_HWM?a=MAX_HWM:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function howMuchToRead(a,e){return a<=0||e.length===0&&e.ended?0:e.objectMode?1:a!==a?e.flowing&&e.length?e.buffer.head.data.length:e.length:(a>e.highWaterMark&&(e.highWaterMark=computeNewHighWaterMark(a)),a<=e.length?a:e.ended?e.length:(e.needReadable=!0,0))}Readable.prototype.read=function(a){debug("read",a),a=parseInt(a,10);var e=this._readableState,n=a;if(a!==0&&(e.emittedReadable=!1),a===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return debug("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?endReadable(this):emitReadable(this),null;if(a=howMuchToRead(a,e),a===0&&e.ended)return e.length===0&&endReadable(this),null;var s=e.needReadable;debug("need readable",s),(e.length===0||e.length-a<e.highWaterMark)&&(s=!0,debug("length less than watermark",s)),e.ended||e.reading?(s=!1,debug("reading or ended",s)):s&&(debug("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(a=howMuchToRead(n,e)));var o;return a>0?o=fromList(a,e):o=null,o===null?(e.needReadable=!0,a=0):e.length-=a,e.length===0&&(e.ended||(e.needReadable=!0),n!==a&&e.ended&&endReadable(this)),o!==null&&this.emit("data",o),o};function chunkInvalid(a,e){var n=null;return!Buffer.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!a.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(a,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,emitReadable(a)}}function emitReadable(a){var e=a._readableState;e.needReadable=!1,e.emittedReadable||(debug("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?nextTick(emitReadable_,a):emitReadable_(a))}function emitReadable_(a){debug("emit readable"),a.emit("readable"),flow(a)}function maybeReadMore(a,e){e.readingMore||(e.readingMore=!0,nextTick(maybeReadMore_,a,e))}function maybeReadMore_(a,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(debug("maybeReadMore read 0"),a.read(0),n!==e.length);)n=e.length;e.readingMore=!1}Readable.prototype._read=function(a){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(a,e){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=a;break;case 1:s.pipes=[s.pipes,a];break;default:s.pipes.push(a);break}s.pipesCount+=1,debug("pipe count=%d opts=%j",s.pipesCount,e);var o=!e||e.end!==!1,l=o?u:d;s.endEmitted?nextTick(l):n.once("end",l),a.on("unpipe",c);function c(x){debug("onunpipe"),x===n&&d()}function u(){debug("onend"),a.end()}var h=pipeOnDrain(n);a.on("drain",h);var f=!1;function d(){debug("cleanup"),a.removeListener("close",y),a.removeListener("finish",_),a.removeListener("drain",h),a.removeListener("error",m),a.removeListener("unpipe",c),n.removeListener("end",u),n.removeListener("end",d),n.removeListener("data",g),f=!0,s.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&h()}var p=!1;n.on("data",g);function g(x){debug("ondata"),p=!1;var P=a.write(x);P===!1&&!p&&((s.pipesCount===1&&s.pipes===a||s.pipesCount>1&&indexOf(s.pipes,a)!==-1)&&!f&&(debug("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function m(x){debug("onerror",x),b(),a.removeListener("error",m),listenerCount(a,"error")===0&&a.emit("error",x)}prependListener(a,"error",m);function y(){a.removeListener("finish",_),b()}a.once("close",y);function _(){debug("onfinish"),a.removeListener("close",y),b()}a.once("finish",_);function b(){debug("unpipe"),n.unpipe(a)}return a.emit("pipe",n),s.flowing||(debug("pipe resume"),n.resume()),a};function pipeOnDrain(a){return function(){var e=a._readableState;debug("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&a.listeners("data").length&&(e.flowing=!0,flow(a))}}Readable.prototype.unpipe=function(a){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return a&&a!==e.pipes?this:(a||(a=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var n=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<s;o++)n[o].emit("unpipe",this);return this}var l=indexOf(e.pipes,a);return l===-1?this:(e.pipes.splice(l,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),a.emit("unpipe",this),this)};Readable.prototype.on=function(a,e){var n=EventEmitter.prototype.on.call(this,a,e);if(a==="data")this._readableState.flowing!==!1&&this.resume();else if(a==="readable"){var s=this._readableState;!s.endEmitted&&!s.readableListening&&(s.readableListening=s.needReadable=!0,s.emittedReadable=!1,s.reading?s.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return n};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(a){debug("readable nexttick read 0"),a.read(0)}Readable.prototype.resume=function(){var a=this._readableState;return a.flowing||(debug("resume"),a.flowing=!0,resume(this,a)),this};function resume(a,e){e.resumeScheduled||(e.resumeScheduled=!0,nextTick(resume_,a,e))}function resume_(a,e){e.reading||(debug("resume read 0"),a.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,a.emit("resume"),flow(a),e.flowing&&!e.reading&&a.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(a){var e=a._readableState;for(debug("flow",e.flowing);e.flowing&&a.read()!==null;);}Readable.prototype.wrap=function(a){var e=this._readableState,n=!1,s=this;a.on("end",function(){if(debug("wrapped end"),e.decoder&&!e.ended){var c=e.decoder.end();c&&c.length&&s.push(c)}s.push(null)}),a.on("data",function(c){if(debug("wrapped data"),e.decoder&&(c=e.decoder.write(c)),!(e.objectMode&&c==null)&&!(!e.objectMode&&(!c||!c.length))){var u=s.push(c);u||(n=!0,a.pause())}});for(var o in a)this[o]===void 0&&typeof a[o]=="function"&&(this[o]=function(c){return function(){return a[c].apply(a,arguments)}}(o));var l=["error","close","destroy","pause","resume"];return forEach(l,function(c){a.on(c,s.emit.bind(s,c))}),s._read=function(c){debug("wrapped _read",c),n&&(n=!1,a.resume())},s};Readable._fromList=fromList;function fromList(a,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!a||a>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=fromListPartial(a,e.buffer,e.decoder),n}function fromListPartial(a,e,n){var s;return a<e.head.data.length?(s=e.head.data.slice(0,a),e.head.data=e.head.data.slice(a)):a===e.head.data.length?s=e.shift():s=n?copyFromBufferString(a,e):copyFromBuffer(a,e),s}function copyFromBufferString(a,e){var n=e.head,s=1,o=n.data;for(a-=o.length;n=n.next;){var l=n.data,c=a>l.length?l.length:a;if(c===l.length?o+=l:o+=l.slice(0,a),a-=c,a===0){c===l.length?(++s,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=l.slice(c));break}++s}return e.length-=s,o}function copyFromBuffer(a,e){var n=Buffer.allocUnsafe(a),s=e.head,o=1;for(s.data.copy(n),a-=s.data.length;s=s.next;){var l=s.data,c=a>l.length?l.length:a;if(l.copy(n,n.length-a,0,c),a-=c,a===0){c===l.length?(++o,s.next?e.head=s.next:e.head=e.tail=null):(e.head=s,s.data=l.slice(c));break}++o}return e.length-=o,n}function endReadable(a){var e=a._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,nextTick(endReadableNT,e,a))}function endReadableNT(a,e){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,e.readable=!1,e.emit("end"))}function forEach(a,e){for(var n=0,s=a.length;n<s;n++)e(a[n],n)}function indexOf(a,e){for(var n=0,s=a.length;n<s;n++)if(a[n]===e)return n;return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter);function nop(){}function WriteReq(a,e,n){this.chunk=a,this.encoding=e,this.callback=n,this.next=null}function WritableState(a,e){Object.defineProperty(this,"buffer",{get:deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),a=a||{},this.objectMode=!!a.objectMode,e instanceof Duplex&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var n=a.highWaterMark,s=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:s,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=a.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(l){onwrite(e,l)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function a(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};function Writable(a){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(a);this._writableState=new WritableState(a,this),this.writable=!0,a&&(typeof a.write=="function"&&(this._write=a.write),typeof a.writev=="function"&&(this._writev=a.writev)),EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(a,e){var n=new Error("write after end");a.emit("error",n),nextTick(e,n)}function validChunk(a,e,n,s){var o=!0,l=!1;return n===null?l=new TypeError("May not write null values to stream"):!Buffer.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!e.objectMode&&(l=new TypeError("Invalid non-string/buffer chunk")),l&&(a.emit("error",l),nextTick(s,l),o=!1),o}Writable.prototype.write=function(a,e,n){var s=this._writableState,o=!1;return typeof e=="function"&&(n=e,e=null),Buffer.isBuffer(a)?e="buffer":e||(e=s.defaultEncoding),typeof n!="function"&&(n=nop),s.ended?writeAfterEnd(this,n):validChunk(this,s,a,n)&&(s.pendingcb++,o=writeOrBuffer(this,s,a,e,n)),o};Writable.prototype.cork=function(){var a=this._writableState;a.corked++};Writable.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.finished&&!a.bufferProcessing&&a.bufferedRequest&&clearBuffer(this,a))};Writable.prototype.setDefaultEncoding=function a(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function decodeChunk(a,e,n){return!a.objectMode&&a.decodeStrings!==!1&&typeof e=="string"&&(e=Buffer.from(e,n)),e}function writeOrBuffer(a,e,n,s,o){n=decodeChunk(e,n,s),Buffer.isBuffer(n)&&(s="buffer");var l=e.objectMode?1:n.length;e.length+=l;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new WriteReq(n,s,o),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else doWrite(a,e,!1,l,n,s,o);return c}function doWrite(a,e,n,s,o,l,c){e.writelen=s,e.writecb=c,e.writing=!0,e.sync=!0,n?a._writev(o,e.onwrite):a._write(o,l,e.onwrite),e.sync=!1}function onwriteError(a,e,n,s,o){--e.pendingcb,n?nextTick(o,s):o(s),a._writableState.errorEmitted=!0,a.emit("error",s)}function onwriteStateUpdate(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function onwrite(a,e){var n=a._writableState,s=n.sync,o=n.writecb;if(onwriteStateUpdate(n),e)onwriteError(a,n,s,e,o);else{var l=needFinish(n);!l&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(a,n),s?nextTick(afterWrite,a,n,l,o):afterWrite(a,n,l,o)}}function afterWrite(a,e,n,s){n||onwriteDrain(a,e),e.pendingcb--,s(),finishMaybe(a,e)}function onwriteDrain(a,e){e.length===0&&e.needDrain&&(e.needDrain=!1,a.emit("drain"))}function clearBuffer(a,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(a._writev&&n&&n.next){var s=e.bufferedRequestCount,o=new Array(s),l=e.corkedRequestsFree;l.entry=n;for(var c=0;n;)o[c]=n,n=n.next,c+=1;doWrite(a,e,!0,e.length,o,"",l.finish),e.pendingcb++,e.lastBufferedRequest=null,l.next?(e.corkedRequestsFree=l.next,l.next=null):e.corkedRequestsFree=new CorkedRequest(e)}else{for(;n;){var u=n.chunk,h=n.encoding,f=n.callback,d=e.objectMode?1:u.length;if(doWrite(a,e,!1,d,u,h,f),n=n.next,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}Writable.prototype._write=function(a,e,n){n(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(a,e,n){var s=this._writableState;typeof a=="function"?(n=a,a=null,e=null):typeof e=="function"&&(n=e,e=null),a!=null&&this.write(a,e),s.corked&&(s.corked=1,this.uncork()),!s.ending&&!s.finished&&endWritable(this,s,n)};function needFinish(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function prefinish(a,e){e.prefinished||(e.prefinished=!0,a.emit("prefinish"))}function finishMaybe(a,e){var n=needFinish(e);return n&&(e.pendingcb===0?(prefinish(a,e),e.finished=!0,a.emit("finish")):prefinish(a,e)),n}function endWritable(a,e,n){e.ending=!0,finishMaybe(a,e),n&&(e.finished?nextTick(n):a.once("finish",n)),e.ended=!0,a.writable=!1}function CorkedRequest(a){var e=this;this.next=null,this.entry=null,this.finish=function(n){var s=e.entry;for(e.entry=null;s;){var o=s.callback;a.pendingcb--,o(n),s=s.next}a.corkedRequestsFree?a.corkedRequestsFree.next=e:a.corkedRequestsFree=e}}inherits$1(Duplex,Readable);var keys$1=Object.keys(Writable.prototype);for(var v=0;v<keys$1.length;v++){var method=keys$1[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(a){if(!(this instanceof Duplex))return new Duplex(a);Readable.call(this,a),Writable.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(a){a.end()}inherits$1(Transform,Duplex);function TransformState(a){this.afterTransform=function(e,n){return afterTransform(a,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(a,e,n){var s=a._transformState;s.transforming=!1;var o=s.writecb;if(!o)return a.emit("error",new Error("no writecb in Transform class"));s.writechunk=null,s.writecb=null,n!=null&&a.push(n),o(e);var l=a._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&a._read(l.highWaterMark)}function Transform(a){if(!(this instanceof Transform))return new Transform(a);Duplex.call(this,a),this._transformState=new TransformState(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){done(e,n)}):done(e)})}Transform.prototype.push=function(a,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,a,e)};Transform.prototype._transform=function(a,e,n){throw new Error("Not implemented")};Transform.prototype._write=function(a,e,n){var s=this._transformState;if(s.writecb=n,s.writechunk=a,s.writeencoding=e,!s.transforming){var o=this._readableState;(s.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Transform.prototype._read=function(a){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function done(a,e){if(e)return a.emit("error",e);var n=a._writableState,s=a._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(s.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}inherits$1(PassThrough,Transform);function PassThrough(a){if(!(this instanceof PassThrough))return new PassThrough(a);Transform.call(this,a)}PassThrough.prototype._transform=function(a,e,n){n(null,a)};inherits$1(Stream,EventEmitter);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter.call(this)}Stream.prototype.pipe=function(a,e){var n=this;function s(d){a.writable&&a.write(d)===!1&&n.pause&&n.pause()}n.on("data",s);function o(){n.readable&&n.resume&&n.resume()}a.on("drain",o),!a._isStdio&&(!e||e.end!==!1)&&(n.on("end",c),n.on("close",u));var l=!1;function c(){l||(l=!0,a.end())}function u(){l||(l=!0,typeof a.destroy=="function"&&a.destroy())}function h(d){if(f(),EventEmitter.listenerCount(this,"error")===0)throw d}n.on("error",h),a.on("error",h);function f(){n.removeListener("data",s),a.removeListener("drain",o),n.removeListener("end",c),n.removeListener("close",u),n.removeListener("error",h),a.removeListener("error",h),n.removeListener("end",f),n.removeListener("close",f),a.removeListener("close",f)}return n.on("end",f),n.on("close",f),a.on("close",f),a.emit("pipe",n),a};var rStates={LOADING:3,DONE:4};function IncomingMessage(a,e,n){var s=this;Readable.call(s),s._mode=n,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",function(){browser$1$1.nextTick(function(){s.emit("close")})});var o;if(n==="fetch"){s._fetchResponse=e,s.url=e.url,s.statusCode=e.status,s.statusMessage=e.statusText;for(var l,c,u=e.headers[Symbol.iterator]();l=(c=u.next()).value,!c.done;)s.headers[l[0].toLowerCase()]=l[1],s.rawHeaders.push(l[0],l[1]);var h=e.body.getReader();o=function(){h.read().then(function(g){if(!s._destroyed){if(g.done){s.push(null);return}s.push(new Buffer(g.value)),o()}})},o()}else{s._xhr=a,s._pos=0,s.url=a.responseURL,s.statusCode=a.status,s.statusMessage=a.statusText;var f=a.getAllResponseHeaders().split(/\r?\n/);if(f.forEach(function(g){var m=g.match(/^([^:]+):\s*(.*)/);if(m){var y=m[1].toLowerCase();y==="set-cookie"?(s.headers[y]===void 0&&(s.headers[y]=[]),s.headers[y].push(m[2])):s.headers[y]!==void 0?s.headers[y]+=", "+m[2]:s.headers[y]=m[2],s.rawHeaders.push(m[1],m[2])}}),s._charset="x-user-defined",!overrideMimeType){var d=s.rawHeaders["mime-type"];if(d){var p=d.match(/;\s*charset=([^;])(;|$)/);p&&(s._charset=p[1].toLowerCase())}s._charset||(s._charset="utf-8")}}}inherits$1(IncomingMessage,Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var a=this,e=a._xhr,n=null;switch(a._mode){case"text:vbarray":if(e.readyState!==rStates.DONE)break;try{n=new global$1.VBArray(e.responseBody).toArray()}catch{}if(n!==null){a.push(new Buffer(n));break}case"text":try{n=e.responseText}catch{a._mode="text:vbarray";break}if(n.length>a._pos){var s=n.substr(a._pos);if(a._charset==="x-user-defined"){for(var o=new Buffer(s.length),l=0;l<s.length;l++)o[l]=s.charCodeAt(l)&255;a.push(o)}else a.push(s,a._charset);a._pos=n.length}break;case"arraybuffer":if(e.readyState!==rStates.DONE||!e.response)break;n=e.response,a.push(new Buffer(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==rStates.LOADING||!n)break;a.push(new Buffer(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==rStates.LOADING)break;var c=new global$1.MSStreamReader;c.onprogress=function(){c.result.byteLength>a._pos&&(a.push(new Buffer(new Uint8Array(c.result.slice(a._pos)))),a._pos=c.result.byteLength)},c.onload=function(){a.push(null)},c.readAsArrayBuffer(n);break}a._xhr.readyState===rStates.DONE&&a._mode!=="ms-stream"&&a.push(null)};function toArrayBuffer(a){if(a instanceof Uint8Array){if(a.byteOffset===0&&a.byteLength===a.buffer.byteLength)return a.buffer;if(typeof a.buffer.slice=="function")return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}if(isBuffer(a)){for(var e=new Uint8Array(a.length),n=a.length,s=0;s<n;s++)e[s]=a[s];return e.buffer}else throw new Error("Argument must be a Buffer")}function decideMode(a,e){return hasFetch&&e?"fetch":mozchunkedarraybuffer?"moz-chunked-arraybuffer":msstream?"ms-stream":arraybuffer&&a?"arraybuffer":vbArray&&a?"text:vbarray":"text"}function ClientRequest(a){var e=this;Writable.call(e),e._opts=a,e._body=[],e._headers={},a.auth&&e.setHeader("Authorization","Basic "+new Buffer(a.auth).toString("base64")),Object.keys(a.headers).forEach(function(o){e.setHeader(o,a.headers[o])});var n,s=!0;if(a.mode==="disable-fetch")s=!1,n=!0;else if(a.mode==="prefer-streaming")n=!1;else if(a.mode==="allow-wrong-content-type")n=!overrideMimeType;else if(!a.mode||a.mode==="default"||a.mode==="prefer-fast")n=!0;else throw new Error("Invalid value for opts.mode");e._mode=decideMode(n,s),e.on("finish",function(){e._onFinish()})}inherits$1(ClientRequest,Writable);var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];ClientRequest.prototype.setHeader=function(a,e){var n=this,s=a.toLowerCase();unsafeHeaders.indexOf(s)===-1&&(n._headers[s]={name:a,value:e})};ClientRequest.prototype.getHeader=function(a){var e=this;return e._headers[a.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(a){var e=this;delete e._headers[a.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var a=this;if(!a._destroyed){var e=a._opts,n=a._headers,s;if((e.method==="POST"||e.method==="PUT"||e.method==="PATCH")&&(blobConstructor()?s=new global$1.Blob(a._body.map(function(c){return toArrayBuffer(c)}),{type:(n["content-type"]||{}).value||""}):s=Buffer.concat(a._body).toString()),a._mode==="fetch"){var o=Object.keys(n).map(function(c){return[n[c].name,n[c].value]});global$1.fetch(a._opts.url,{method:a._opts.method,headers:o,body:s,mode:"cors",credentials:e.withCredentials?"include":"same-origin"}).then(function(c){a._fetchResponse=c,a._connect()},function(c){a.emit("error",c)})}else{var l=a._xhr=new global$1.XMLHttpRequest;try{l.open(a._opts.method,a._opts.url,!0)}catch(c){browser$1$1.nextTick(function(){a.emit("error",c)});return}"responseType"in l&&(l.responseType=a._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!e.withCredentials),a._mode==="text"&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach(function(c){l.setRequestHeader(n[c].name,n[c].value)}),a._response=null,l.onreadystatechange=function(){switch(l.readyState){case rStates.LOADING:case rStates.DONE:a._onXHRProgress();break}},a._mode==="moz-chunked-arraybuffer"&&(l.onprogress=function(){a._onXHRProgress()}),l.onerror=function(){a._destroyed||a.emit("error",new Error("XHR error"))};try{l.send(s)}catch(c){browser$1$1.nextTick(function(){a.emit("error",c)});return}}}};function statusValid(a){try{var e=a.status;return e!==null&&e!==0}catch{return!1}}ClientRequest.prototype._onXHRProgress=function(){var a=this;!statusValid(a._xhr)||a._destroyed||(a._response||a._connect(),a._response._onXHRProgress())};ClientRequest.prototype._connect=function(){var a=this;a._destroyed||(a._response=new IncomingMessage(a._xhr,a._fetchResponse,a._mode),a.emit("response",a._response))};ClientRequest.prototype._write=function(a,e,n){var s=this;s._body.push(a),n()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var a=this;a._destroyed=!0,a._response&&(a._response._destroyed=!0),a._xhr&&a._xhr.abort()};ClientRequest.prototype.end=function(a,e,n){var s=this;typeof a=="function"&&(n=a,a=void 0),Writable.prototype.end.call(s,a,e,n)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};/*! https://mths.be/punycode v1.4.1 by @mathias */var maxInt=2147483647,base$1=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base$1-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(a){throw new RangeError(errors[a])}function map$1(a,e){for(var n=a.length,s=[];n--;)s[n]=e(a[n]);return s}function mapDomain(a,e){var n=a.split("@"),s="";n.length>1&&(s=n[0]+"@",a=n[1]),a=a.replace(regexSeparators,".");var o=a.split("."),l=map$1(o,e).join(".");return s+l}function ucs2decode(a){for(var e=[],n=0,s=a.length,o,l;n<s;)o=a.charCodeAt(n++),o>=55296&&o<=56319&&n<s?(l=a.charCodeAt(n++),(l&64512)==56320?e.push(((o&1023)<<10)+(l&1023)+65536):(e.push(o),n--)):e.push(o);return e}function digitToBasic(a,e){return a+22+75*(a<26)-((e!=0)<<5)}function adapt(a,e,n){var s=0;for(a=n?floor(a/damp):a>>1,a+=floor(a/e);a>baseMinusTMin*tMax>>1;s+=base$1)a=floor(a/baseMinusTMin);return floor(s+(baseMinusTMin+1)*a/(a+skew))}function encode(a){var e,n,s,o,l,c,u,h,f,d,p,g=[],m,y,_,b;for(a=ucs2decode(a),m=a.length,e=initialN,n=0,l=initialBias,c=0;c<m;++c)p=a[c],p<128&&g.push(stringFromCharCode(p));for(s=o=g.length,o&&g.push(delimiter);s<m;){for(u=maxInt,c=0;c<m;++c)p=a[c],p>=e&&p<u&&(u=p);for(y=s+1,u-e>floor((maxInt-n)/y)&&error("overflow"),n+=(u-e)*y,e=u,c=0;c<m;++c)if(p=a[c],p<e&&++n>maxInt&&error("overflow"),p==e){for(h=n,f=base$1;d=f<=l?tMin:f>=l+tMax?tMax:f-l,!(h<d);f+=base$1)b=h-d,_=base$1-d,g.push(stringFromCharCode(digitToBasic(d+b%_,0))),h=floor(b/_);g.push(stringFromCharCode(digitToBasic(h,0))),l=adapt(n,y,s==o),n=0,++s}++n,++e}return g.join("")}function toASCII(a){return mapDomain(a,function(e){return regexNonASCII.test(e)?"xn--"+encode(e):e})}function hasOwnProperty(a,e){return Object.prototype.hasOwnProperty.call(a,e)}var isArray$3=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function stringifyPrimitive(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}}function stringify$1(a,e,n,s){return e=e||"&",n=n||"=",a===null&&(a=void 0),typeof a=="object"?map(objectKeys(a),function(o){var l=encodeURIComponent(stringifyPrimitive(o))+n;return isArray$3(a[o])?map(a[o],function(c){return l+encodeURIComponent(stringifyPrimitive(c))}).join(e):l+encodeURIComponent(stringifyPrimitive(a[o]))}).join(e):""}function map(a,e){if(a.map)return a.map(e);for(var n=[],s=0;s<a.length;s++)n.push(e(a[s],s));return n}var objectKeys=Object.keys||function(a){var e=[];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&e.push(n);return e};function parse$1(a,e,n,s){e=e||"&",n=n||"=";var o={};if(typeof a!="string"||a.length===0)return o;var l=/\+/g;a=a.split(e);var c=1e3,u=a.length;u>c&&(u=c);for(var h=0;h<u;++h){var f=a[h].replace(l,"%20"),d=f.indexOf(n),p,g,m,y;d>=0?(p=f.substr(0,d),g=f.substr(d+1)):(p=f,g=""),m=decodeURIComponent(p),y=decodeURIComponent(g),hasOwnProperty(o,m)?isArray$3(o[m])?o[m].push(y):o[m]=[o[m],y]:o[m]=y}return o}const URL$1=global$1.URL,URLSearchParams$1=global$1.URLSearchParams;var _polyfillNode_url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,Url,URL:URL$1,URLSearchParams:URLSearchParams$1};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(a,e,n){if(a&&isObject$1(a)&&a instanceof Url)return a;var s=new Url;return s.parse(a,e,n),s}Url.prototype.parse=function(a,e,n){return parse(this,a,e,n)};function parse(a,e,n,s){if(!isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),l=o!==-1&&o<e.indexOf("#")?"?":"#",c=e.split(l),u=/\\/g;c[0]=c[0].replace(u,"/"),e=c.join(l);var h=e;if(h=h.trim(),!s&&e.split("#").length===1){var f=simplePathPattern.exec(h);if(f)return a.path=h,a.href=h,a.pathname=f[1],f[2]?(a.search=f[2],n?a.query=parse$1(a.search.substr(1)):a.query=a.search.substr(1)):n&&(a.search="",a.query={}),a}var d=protocolPattern.exec(h);if(d){d=d[0];var p=d.toLowerCase();a.protocol=p,h=h.substr(d.length)}if(s||d||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var g=h.substr(0,2)==="//";g&&!(d&&hostlessProtocol[d])&&(h=h.substr(2),a.slashes=!0)}var m,y,_,b;if(!hostlessProtocol[d]&&(g||d&&!slashedProtocol[d])){var x=-1;for(m=0;m<hostEndingChars.length;m++)y=h.indexOf(hostEndingChars[m]),y!==-1&&(x===-1||y<x)&&(x=y);var P,T;for(x===-1?T=h.lastIndexOf("@"):T=h.lastIndexOf("@",x),T!==-1&&(P=h.slice(0,T),h=h.slice(T+1),a.auth=decodeURIComponent(P)),x=-1,m=0;m<nonHostChars.length;m++)y=h.indexOf(nonHostChars[m]),y!==-1&&(x===-1||y<x)&&(x=y);x===-1&&(x=h.length),a.host=h.slice(0,x),h=h.slice(x),parseHost(a),a.hostname=a.hostname||"";var k=a.hostname[0]==="["&&a.hostname[a.hostname.length-1]==="]";if(!k){var S=a.hostname.split(/\./);for(m=0,_=S.length;m<_;m++){var A=S[m];if(A&&!A.match(hostnamePartPattern)){for(var w="",E=0,F=A.length;E<F;E++)A.charCodeAt(E)>127?w+="x":w+=A[E];if(!w.match(hostnamePartPattern)){var O=S.slice(0,m),M=S.slice(m+1),V=A.match(hostnamePartStart);V&&(O.push(V[1]),M.unshift(V[2])),M.length&&(h="/"+M.join(".")+h),a.hostname=O.join(".");break}}}}a.hostname.length>hostnameMaxLen?a.hostname="":a.hostname=a.hostname.toLowerCase(),k||(a.hostname=toASCII(a.hostname)),b=a.port?":"+a.port:"";var G=a.hostname||"";a.host=G+b,a.href+=a.host,k&&(a.hostname=a.hostname.substr(1,a.hostname.length-2),h[0]!=="/"&&(h="/"+h))}if(!unsafeProtocol[p])for(m=0,_=autoEscape.length;m<_;m++){var te=autoEscape[m];if(h.indexOf(te)!==-1){var ce=encodeURIComponent(te);ce===te&&(ce=escape(te)),h=h.split(te).join(ce)}}var se=h.indexOf("#");se!==-1&&(a.hash=h.substr(se),h=h.slice(0,se));var le=h.indexOf("?");if(le!==-1?(a.search=h.substr(le),a.query=h.substr(le+1),n&&(a.query=parse$1(a.query)),h=h.slice(0,le)):n&&(a.search="",a.query={}),h&&(a.pathname=h),slashedProtocol[p]&&a.hostname&&!a.pathname&&(a.pathname="/"),a.pathname||a.search){b=a.pathname||"";var fe=a.search||"";a.path=b+fe}return a.href=format(a),a}function urlFileURLToPath(a){if(typeof a=="string")a=new Url().parse(a);else if(!(a instanceof Url))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof a+String(a));if(a.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(a)}function getPathFromURLPosix(a){const e=a.pathname;for(let n=0;n<e.length;n++)if(e[n]==="%"){const s=e.codePointAt(n+2)|32;if(e[n+1]==="2"&&s===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(e)}function urlFormat(a){return isString(a)&&(a=parse({},a)),format(a)}function format(a){var e=a.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var n=a.protocol||"",s=a.pathname||"",o=a.hash||"",l=!1,c="";a.host?l=e+a.host:a.hostname&&(l=e+(a.hostname.indexOf(":")===-1?a.hostname:"["+this.hostname+"]"),a.port&&(l+=":"+a.port)),a.query&&isObject$1(a.query)&&Object.keys(a.query).length&&(c=stringify$1(a.query));var u=a.search||c&&"?"+c||"";return n&&n.substr(-1)!==":"&&(n+=":"),a.slashes||(!n||slashedProtocol[n])&&l!==!1?(l="//"+(l||""),s&&s.charAt(0)!=="/"&&(s="/"+s)):l||(l=""),o&&o.charAt(0)!=="#"&&(o="#"+o),u&&u.charAt(0)!=="?"&&(u="?"+u),s=s.replace(/[?#]/g,function(h){return encodeURIComponent(h)}),u=u.replace("#","%23"),n+l+s+u+o}Url.prototype.format=function(){return format(this)};function urlResolve(a,e){return urlParse(a,!1,!0).resolve(e)}Url.prototype.resolve=function(a){return this.resolveObject(urlParse(a,!1,!0)).format()};function urlResolveObject(a,e){return a?urlParse(a,!1,!0).resolveObject(e):e}Url.prototype.resolveObject=function(a){if(isString(a)){var e=new Url;e.parse(a,!1,!0),a=e}for(var n=new Url,s=Object.keys(this),o=0;o<s.length;o++){var l=s[o];n[l]=this[l]}if(n.hash=a.hash,a.href==="")return n.href=n.format(),n;if(a.slashes&&!a.protocol){for(var c=Object.keys(a),u=0;u<c.length;u++){var h=c[u];h!=="protocol"&&(n[h]=a[h])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var f;if(a.protocol&&a.protocol!==n.protocol){if(!slashedProtocol[a.protocol]){for(var d=Object.keys(a),p=0;p<d.length;p++){var g=d[p];n[g]=a[g]}return n.href=n.format(),n}if(n.protocol=a.protocol,!a.host&&!hostlessProtocol[a.protocol]){for(f=(a.pathname||"").split("/");f.length&&!(a.host=f.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),f[0]!==""&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}else n.pathname=a.pathname;if(n.search=a.search,n.query=a.query,n.host=a.host||"",n.auth=a.auth,n.hostname=a.hostname||a.host,n.port=a.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||a.slashes,n.href=n.format(),n}var _=n.pathname&&n.pathname.charAt(0)==="/",b=a.host||a.pathname&&a.pathname.charAt(0)==="/",x=b||_||n.host&&a.pathname,P=x,T=n.pathname&&n.pathname.split("/")||[],k=n.protocol&&!slashedProtocol[n.protocol];f=a.pathname&&a.pathname.split("/")||[],k&&(n.hostname="",n.port=null,n.host&&(T[0]===""?T[0]=n.host:T.unshift(n.host)),n.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(f[0]===""?f[0]=a.host:f.unshift(a.host)),a.host=null),x=x&&(f[0]===""||T[0]===""));var S;if(b)n.host=a.host||a.host===""?a.host:n.host,n.hostname=a.hostname||a.hostname===""?a.hostname:n.hostname,n.search=a.search,n.query=a.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),n.search=a.search,n.query=a.query;else if(!isNullOrUndefined(a.search))return k&&(n.hostname=n.host=T.shift(),S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())),n.search=a.search,n.query=a.query,(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=T.slice(-1)[0],w=(n.host||a.host||T.length>1)&&(A==="."||A==="..")||A==="",E=0,F=T.length;F>=0;F--)A=T[F],A==="."?T.splice(F,1):A===".."?(T.splice(F,1),E++):E&&(T.splice(F,1),E--);if(!x&&!P)for(;E--;E)T.unshift("..");x&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),w&&T.join("/").substr(-1)!=="/"&&T.push("");var O=T[0]===""||T[0]&&T[0].charAt(0)==="/";return k&&(n.hostname=n.host=O?"":T.length?T.shift():"",S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())),x=x||n.host&&T.length,x&&!O&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=a.auth||n.auth,n.slashes=n.slashes||a.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(a){var e=a.host,n=portPattern.exec(e);n&&(n=n[0],n!==":"&&(a.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(a.hostname=e)}var _polyfillNode_url$1=Object.freeze({__proto__:null,URL:URL$1,URLSearchParams:URLSearchParams$1,Url,default:_polyfillNode_url,fileURLToPath:urlFileURLToPath,format:urlFormat,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject});function request$1(a,e){typeof a=="string"&&(a=urlParse(a));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",s=a.protocol||n,o=a.hostname||a.host,l=a.port,c=a.path||"/";o&&o.indexOf(":")!==-1&&(o="["+o+"]"),a.url=(o?s+"//"+o:"")+(l?":"+l:"")+c,a.method=(a.method||"GET").toUpperCase(),a.headers=a.headers||{};var u=new ClientRequest(a);return e&&u.on("response",e),u}function get$1(a,e){var n=request$1(a,e);return n.end(),n}function Agent$1(){}Agent$1.defaultMaxSockets=4;var METHODS$1=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES$1={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_http={request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1},_polyfillNode_http$1=Object.freeze({__proto__:null,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1,default:_polyfillNode_http,get:get$1,request:request$1}),require$$2=getAugmentedNamespace(_polyfillNode_http$1);function request(a,e){typeof a=="string"&&(a=urlParse(a));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",s=a.protocol||n,o=a.hostname||a.host,l=a.port,c=a.path||"/";o&&o.indexOf(":")!==-1&&(o="["+o+"]"),a.url=(o?s+"//"+o:"")+(l?":"+l:"")+c,a.method=(a.method||"GET").toUpperCase(),a.headers=a.headers||{};var u=new ClientRequest(a);return e&&u.on("response",e),u}function get(a,e){var n=request(a,e);return n.end(),n}function Agent(){}Agent.defaultMaxSockets=4;var METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_https={request,get,Agent,METHODS,STATUS_CODES},_polyfillNode_https$1=Object.freeze({__proto__:null,Agent,METHODS,STATUS_CODES,default:_polyfillNode_https,get,request}),require$$3=getAugmentedNamespace(_polyfillNode_https$1),require$$4=getAugmentedNamespace(_polyfillNode_url$1),msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(a,e,n,s,o){if(e.subarray&&a.subarray){a.set(e.subarray(n,n+s),o);return}for(var l=0;l<s;l++)a[o+l]=e[n+l]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(a){for(var e=a.length;--e>=0;)a[e]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(a,e,n,s,o){this.static_tree=a,this.extra_bits=e,this.extra_base=n,this.elems=s,this.max_length=o,this.has_stree=a&&a.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(a,e){this.dyn_tree=a,this.max_code=0,this.stat_desc=e}function d_code(a){return a<256?_dist_code[a]:_dist_code[256+(a>>>7)]}function put_short(a,e){a.pending_buf[a.pending++]=e&255,a.pending_buf[a.pending++]=e>>>8&255}function send_bits(a,e,n){a.bi_valid>Buf_size-n?(a.bi_buf|=e<<a.bi_valid&65535,put_short(a,a.bi_buf),a.bi_buf=e>>Buf_size-a.bi_valid,a.bi_valid+=n-Buf_size):(a.bi_buf|=e<<a.bi_valid&65535,a.bi_valid+=n)}function send_code(a,e,n){send_bits(a,n[e*2],n[e*2+1])}function bi_reverse(a,e){var n=0;do n|=a&1,a>>>=1,n<<=1;while(--e>0);return n>>>1}function bi_flush(a){a.bi_valid===16?(put_short(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}function gen_bitlen(a,e){var n=e.dyn_tree,s=e.max_code,o=e.stat_desc.static_tree,l=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,h=e.stat_desc.max_length,f,d,p,g,m,y,_=0;for(g=0;g<=MAX_BITS$1;g++)a.bl_count[g]=0;for(n[a.heap[a.heap_max]*2+1]=0,f=a.heap_max+1;f<HEAP_SIZE$1;f++)d=a.heap[f],g=n[n[d*2+1]*2+1]+1,g>h&&(g=h,_++),n[d*2+1]=g,!(d>s)&&(a.bl_count[g]++,m=0,d>=u&&(m=c[d-u]),y=n[d*2],a.opt_len+=y*(g+m),l&&(a.static_len+=y*(o[d*2+1]+m)));if(_!==0){do{for(g=h-1;a.bl_count[g]===0;)g--;a.bl_count[g]--,a.bl_count[g+1]+=2,a.bl_count[h]--,_-=2}while(_>0);for(g=h;g!==0;g--)for(d=a.bl_count[g];d!==0;)p=a.heap[--f],!(p>s)&&(n[p*2+1]!==g&&(a.opt_len+=(g-n[p*2+1])*n[p*2],n[p*2+1]=g),d--)}}function gen_codes(a,e,n){var s=new Array(MAX_BITS$1+1),o=0,l,c;for(l=1;l<=MAX_BITS$1;l++)s[l]=o=o+n[l-1]<<1;for(c=0;c<=e;c++){var u=a[c*2+1];u!==0&&(a[c*2]=bi_reverse(s[u]++,u))}}function tr_static_init(){var a,e,n,s,o,l=new Array(MAX_BITS$1+1);for(n=0,s=0;s<LENGTH_CODES$1-1;s++)for(base_length[s]=n,a=0;a<1<<extra_lbits[s];a++)_length_code[n++]=s;for(_length_code[n-1]=s,o=0,s=0;s<16;s++)for(base_dist[s]=o,a=0;a<1<<extra_dbits[s];a++)_dist_code[o++]=s;for(o>>=7;s<D_CODES$1;s++)for(base_dist[s]=o<<7,a=0;a<1<<extra_dbits[s]-7;a++)_dist_code[256+o++]=s;for(e=0;e<=MAX_BITS$1;e++)l[e]=0;for(a=0;a<=143;)static_ltree[a*2+1]=8,a++,l[8]++;for(;a<=255;)static_ltree[a*2+1]=9,a++,l[9]++;for(;a<=279;)static_ltree[a*2+1]=7,a++,l[7]++;for(;a<=287;)static_ltree[a*2+1]=8,a++,l[8]++;for(gen_codes(static_ltree,L_CODES$1+1,l),a=0;a<D_CODES$1;a++)static_dtree[a*2+1]=5,static_dtree[a*2]=bi_reverse(a,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(a){var e;for(e=0;e<L_CODES$1;e++)a.dyn_ltree[e*2]=0;for(e=0;e<D_CODES$1;e++)a.dyn_dtree[e*2]=0;for(e=0;e<BL_CODES$1;e++)a.bl_tree[e*2]=0;a.dyn_ltree[END_BLOCK*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function bi_windup(a){a.bi_valid>8?put_short(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function copy_block(a,e,n,s){bi_windup(a),put_short(a,n),put_short(a,~n),arraySet(a.pending_buf,a.window,e,n,a.pending),a.pending+=n}function smaller(a,e,n,s){var o=e*2,l=n*2;return a[o]<a[l]||a[o]===a[l]&&s[e]<=s[n]}function pqdownheap(a,e,n){for(var s=a.heap[n],o=n<<1;o<=a.heap_len&&(o<a.heap_len&&smaller(e,a.heap[o+1],a.heap[o],a.depth)&&o++,!smaller(e,s,a.heap[o],a.depth));)a.heap[n]=a.heap[o],n=o,o<<=1;a.heap[n]=s}function compress_block(a,e,n){var s,o,l=0,c,u;if(a.last_lit!==0)do s=a.pending_buf[a.d_buf+l*2]<<8|a.pending_buf[a.d_buf+l*2+1],o=a.pending_buf[a.l_buf+l],l++,s===0?send_code(a,o,e):(c=_length_code[o],send_code(a,c+LITERALS$1+1,e),u=extra_lbits[c],u!==0&&(o-=base_length[c],send_bits(a,o,u)),s--,c=d_code(s),send_code(a,c,n),u=extra_dbits[c],u!==0&&(s-=base_dist[c],send_bits(a,s,u)));while(l<a.last_lit);send_code(a,END_BLOCK,e)}function build_tree(a,e){var n=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,c,u,h=-1,f;for(a.heap_len=0,a.heap_max=HEAP_SIZE$1,c=0;c<l;c++)n[c*2]!==0?(a.heap[++a.heap_len]=h=c,a.depth[c]=0):n[c*2+1]=0;for(;a.heap_len<2;)f=a.heap[++a.heap_len]=h<2?++h:0,n[f*2]=1,a.depth[f]=0,a.opt_len--,o&&(a.static_len-=s[f*2+1]);for(e.max_code=h,c=a.heap_len>>1;c>=1;c--)pqdownheap(a,n,c);f=l;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],pqdownheap(a,n,1),u=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=u,n[f*2]=n[c*2]+n[u*2],a.depth[f]=(a.depth[c]>=a.depth[u]?a.depth[c]:a.depth[u])+1,n[c*2+1]=n[u*2+1]=f,a.heap[1]=f++,pqdownheap(a,n,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],gen_bitlen(a,e),gen_codes(n,h,a.bl_count)}function scan_tree(a,e,n){var s,o=-1,l,c=e[0*2+1],u=0,h=7,f=4;for(c===0&&(h=138,f=3),e[(n+1)*2+1]=65535,s=0;s<=n;s++)l=c,c=e[(s+1)*2+1],!(++u<h&&l===c)&&(u<f?a.bl_tree[l*2]+=u:l!==0?(l!==o&&a.bl_tree[l*2]++,a.bl_tree[REP_3_6*2]++):u<=10?a.bl_tree[REPZ_3_10*2]++:a.bl_tree[REPZ_11_138*2]++,u=0,o=l,c===0?(h=138,f=3):l===c?(h=6,f=3):(h=7,f=4))}function send_tree(a,e,n){var s,o=-1,l,c=e[0*2+1],u=0,h=7,f=4;for(c===0&&(h=138,f=3),s=0;s<=n;s++)if(l=c,c=e[(s+1)*2+1],!(++u<h&&l===c)){if(u<f)do send_code(a,l,a.bl_tree);while(--u!==0);else l!==0?(l!==o&&(send_code(a,l,a.bl_tree),u--),send_code(a,REP_3_6,a.bl_tree),send_bits(a,u-3,2)):u<=10?(send_code(a,REPZ_3_10,a.bl_tree),send_bits(a,u-3,3)):(send_code(a,REPZ_11_138,a.bl_tree),send_bits(a,u-11,7));u=0,o=l,c===0?(h=138,f=3):l===c?(h=6,f=3):(h=7,f=4)}}function build_bl_tree(a){var e;for(scan_tree(a,a.dyn_ltree,a.l_desc.max_code),scan_tree(a,a.dyn_dtree,a.d_desc.max_code),build_tree(a,a.bl_desc),e=BL_CODES$1-1;e>=3&&a.bl_tree[bl_order[e]*2+1]===0;e--);return a.opt_len+=3*(e+1)+5+5+4,e}function send_all_trees(a,e,n,s){var o;for(send_bits(a,e-257,5),send_bits(a,n-1,5),send_bits(a,s-4,4),o=0;o<s;o++)send_bits(a,a.bl_tree[bl_order[o]*2+1],3);send_tree(a,a.dyn_ltree,e-1),send_tree(a,a.dyn_dtree,n-1)}function detect_data_type(a){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&a.dyn_ltree[n*2]!==0)return Z_BINARY$1;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(n=32;n<LITERALS$1;n++)if(a.dyn_ltree[n*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(a){static_init_done||(tr_static_init(),static_init_done=!0),a.l_desc=new TreeDesc(a.dyn_ltree,static_l_desc),a.d_desc=new TreeDesc(a.dyn_dtree,static_d_desc),a.bl_desc=new TreeDesc(a.bl_tree,static_bl_desc),a.bi_buf=0,a.bi_valid=0,init_block(a)}function _tr_stored_block(a,e,n,s){send_bits(a,(STORED_BLOCK<<1)+(s?1:0),3),copy_block(a,e,n)}function _tr_align(a){send_bits(a,STATIC_TREES<<1,3),send_code(a,END_BLOCK,static_ltree),bi_flush(a)}function _tr_flush_block(a,e,n,s){var o,l,c=0;a.level>0?(a.strm.data_type===Z_UNKNOWN$2&&(a.strm.data_type=detect_data_type(a)),build_tree(a,a.l_desc),build_tree(a,a.d_desc),c=build_bl_tree(a),o=a.opt_len+3+7>>>3,l=a.static_len+3+7>>>3,l<=o&&(o=l)):o=l=n+5,n+4<=o&&e!==-1?_tr_stored_block(a,e,n,s):a.strategy===Z_FIXED$2||l===o?(send_bits(a,(STATIC_TREES<<1)+(s?1:0),3),compress_block(a,static_ltree,static_dtree)):(send_bits(a,(DYN_TREES<<1)+(s?1:0),3),send_all_trees(a,a.l_desc.max_code+1,a.d_desc.max_code+1,c+1),compress_block(a,a.dyn_ltree,a.dyn_dtree)),init_block(a),s&&bi_windup(a)}function _tr_tally(a,e,n){return a.pending_buf[a.d_buf+a.last_lit*2]=e>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=e&255,a.pending_buf[a.l_buf+a.last_lit]=n&255,a.last_lit++,e===0?a.dyn_ltree[n*2]++:(a.matches++,e--,a.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,a.dyn_dtree[d_code(e)*2]++),a.last_lit===a.lit_bufsize-1}function adler32(a,e,n,s){for(var o=a&65535|0,l=a>>>16&65535|0,c=0;n!==0;){c=n>2e3?2e3:n,n-=c;do o=o+e[s++]|0,l=l+o|0;while(--c);o%=65521,l%=65521}return o|l<<16|0}function makeTable(){for(var a,e=[],n=0;n<256;n++){a=n;for(var s=0;s<8;s++)a=a&1?3988292384^a>>>1:a>>>1;e[n]=a}return e}var crcTable=makeTable();function crc32(a,e,n,s){var o=crcTable,l=s+n;a^=-1;for(var c=s;c<l;c++)a=a>>>8^o[(a^e[c])&255];return a^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS$2=256,L_CODES=LITERALS$2+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(a,e){return a.msg=msg[e],e}function rank(a){return(a<<1)-(a>4?9:0)}function zero(a){for(var e=a.length;--e>=0;)a[e]=0}function flush_pending(a){var e=a.state,n=e.pending;n>a.avail_out&&(n=a.avail_out),n!==0&&(arraySet(a.output,e.pending_buf,e.pending_out,n,a.next_out),a.next_out+=n,e.pending_out+=n,a.total_out+=n,a.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function flush_block_only(a,e){_tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,e),a.block_start=a.strstart,flush_pending(a.strm)}function put_byte(a,e){a.pending_buf[a.pending++]=e}function putShortMSB(a,e){a.pending_buf[a.pending++]=e>>>8&255,a.pending_buf[a.pending++]=e&255}function read_buf(a,e,n,s){var o=a.avail_in;return o>s&&(o=s),o===0?0:(a.avail_in-=o,arraySet(e,a.input,a.next_in,o,n),a.state.wrap===1?a.adler=adler32(a.adler,e,o,n):a.state.wrap===2&&(a.adler=crc32(a.adler,e,o,n)),a.next_in+=o,a.total_in+=o,o)}function longest_match(a,e){var n=a.max_chain_length,s=a.strstart,o,l,c=a.prev_length,u=a.nice_match,h=a.strstart>a.w_size-MIN_LOOKAHEAD?a.strstart-(a.w_size-MIN_LOOKAHEAD):0,f=a.window,d=a.w_mask,p=a.prev,g=a.strstart+MAX_MATCH,m=f[s+c-1],y=f[s+c];a.prev_length>=a.good_match&&(n>>=2),u>a.lookahead&&(u=a.lookahead);do if(o=e,!(f[o+c]!==y||f[o+c-1]!==m||f[o]!==f[s]||f[++o]!==f[s+1])){s+=2,o++;do;while(f[++s]===f[++o]&&f[++s]===f[++o]&&f[++s]===f[++o]&&f[++s]===f[++o]&&f[++s]===f[++o]&&f[++s]===f[++o]&&f[++s]===f[++o]&&f[++s]===f[++o]&&s<g);if(l=MAX_MATCH-(g-s),s=g-MAX_MATCH,l>c){if(a.match_start=e,c=l,l>=u)break;m=f[s+c-1],y=f[s+c]}}while((e=p[e&d])>h&&--n!==0);return c<=a.lookahead?c:a.lookahead}function fill_window(a){var e=a.w_size,n,s,o,l,c;do{if(l=a.window_size-a.lookahead-a.strstart,a.strstart>=e+(e-MIN_LOOKAHEAD)){arraySet(a.window,a.window,e,e,0),a.match_start-=e,a.strstart-=e,a.block_start-=e,s=a.hash_size,n=s;do o=a.head[--n],a.head[n]=o>=e?o-e:0;while(--s);s=e,n=s;do o=a.prev[--n],a.prev[n]=o>=e?o-e:0;while(--s);l+=e}if(a.strm.avail_in===0)break;if(s=read_buf(a.strm,a.window,a.strstart+a.lookahead,l),a.lookahead+=s,a.lookahead+a.insert>=MIN_MATCH)for(c=a.strstart-a.insert,a.ins_h=a.window[c],a.ins_h=(a.ins_h<<a.hash_shift^a.window[c+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[c+MIN_MATCH-1])&a.hash_mask,a.prev[c&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=c,c++,a.insert--,!(a.lookahead+a.insert<MIN_MATCH)););}while(a.lookahead<MIN_LOOKAHEAD&&a.strm.avail_in!==0)}function deflate_stored(a,e){var n=65535;for(n>a.pending_buf_size-5&&(n=a.pending_buf_size-5);;){if(a.lookahead<=1){if(fill_window(a),a.lookahead===0&&e===Z_NO_FLUSH$1)return BS_NEED_MORE;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;var s=a.block_start+n;if((a.strstart===0||a.strstart>=s)&&(a.lookahead=a.strstart-s,a.strstart=s,flush_block_only(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-MIN_LOOKAHEAD&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=0,e===Z_FINISH$2?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(a.strstart>a.block_start&&(flush_block_only(a,!1),a.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(a,e){for(var n,s;;){if(a.lookahead<MIN_LOOKAHEAD){if(fill_window(a),a.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$1)return BS_NEED_MORE;if(a.lookahead===0)break}if(n=0,a.lookahead>=MIN_MATCH&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+MIN_MATCH-1])&a.hash_mask,n=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),n!==0&&a.strstart-n<=a.w_size-MIN_LOOKAHEAD&&(a.match_length=longest_match(a,n)),a.match_length>=MIN_MATCH)if(s=_tr_tally(a,a.strstart-a.match_start,a.match_length-MIN_MATCH),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=MIN_MATCH){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+MIN_MATCH-1])&a.hash_mask,n=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else s=_tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(s&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=a.strstart<MIN_MATCH-1?a.strstart:MIN_MATCH-1,e===Z_FINISH$2?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.last_lit&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(a,e){for(var n,s,o;;){if(a.lookahead<MIN_LOOKAHEAD){if(fill_window(a),a.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$1)return BS_NEED_MORE;if(a.lookahead===0)break}if(n=0,a.lookahead>=MIN_MATCH&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+MIN_MATCH-1])&a.hash_mask,n=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=MIN_MATCH-1,n!==0&&a.prev_length<a.max_lazy_match&&a.strstart-n<=a.w_size-MIN_LOOKAHEAD&&(a.match_length=longest_match(a,n),a.match_length<=5&&(a.strategy===Z_FILTERED$1||a.match_length===MIN_MATCH&&a.strstart-a.match_start>4096)&&(a.match_length=MIN_MATCH-1)),a.prev_length>=MIN_MATCH&&a.match_length<=a.prev_length){o=a.strstart+a.lookahead-MIN_MATCH,s=_tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-MIN_MATCH),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=o&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+MIN_MATCH-1])&a.hash_mask,n=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=MIN_MATCH-1,a.strstart++,s&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}else if(a.match_available){if(s=_tr_tally(a,0,a.window[a.strstart-1]),s&&flush_block_only(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return BS_NEED_MORE}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(s=_tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<MIN_MATCH-1?a.strstart:MIN_MATCH-1,e===Z_FINISH$2?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.last_lit&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(a,e){for(var n,s,o,l,c=a.window;;){if(a.lookahead<=MAX_MATCH){if(fill_window(a),a.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH$1)return BS_NEED_MORE;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=MIN_MATCH&&a.strstart>0&&(o=a.strstart-1,s=c[o],s===c[++o]&&s===c[++o]&&s===c[++o])){l=a.strstart+MAX_MATCH;do;while(s===c[++o]&&s===c[++o]&&s===c[++o]&&s===c[++o]&&s===c[++o]&&s===c[++o]&&s===c[++o]&&s===c[++o]&&o<l);a.match_length=MAX_MATCH-(l-o),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=MIN_MATCH?(n=_tr_tally(a,1,a.match_length-MIN_MATCH),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(n=_tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),n&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=0,e===Z_FINISH$2?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.last_lit&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(a,e){for(var n;;){if(a.lookahead===0&&(fill_window(a),a.lookahead===0)){if(e===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(a.match_length=0,n=_tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,n&&(flush_block_only(a,!1),a.strm.avail_out===0))return BS_NEED_MORE}return a.insert=0,e===Z_FINISH$2?(flush_block_only(a,!0),a.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):a.last_lit&&(flush_block_only(a,!1),a.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(a,e,n,s,o){this.good_length=a,this.max_lazy=e,this.nice_length=n,this.max_chain=s,this.func=o}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(a){a.window_size=2*a.w_size,zero(a.head),a.max_lazy_match=configuration_table[a.level].max_lazy,a.good_match=configuration_table[a.level].good_length,a.nice_match=configuration_table[a.level].nice_length,a.max_chain_length=configuration_table[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=MIN_MATCH-1,a.match_available=0,a.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(a){var e;return!a||!a.state?err(a,Z_STREAM_ERROR$2):(a.total_in=a.total_out=0,a.data_type=Z_UNKNOWN$1,e=a.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?INIT_STATE:BUSY_STATE,a.adler=e.wrap===2?0:1,e.last_flush=Z_NO_FLUSH$1,_tr_init(e),Z_OK$2)}function deflateReset(a){var e=deflateResetKeep(a);return e===Z_OK$2&&lm_init(a.state),e}function deflateInit2(a,e,n,s,o,l){if(!a)return Z_STREAM_ERROR$2;var c=1;if(e===Z_DEFAULT_COMPRESSION$1&&(e=6),s<0?(c=0,s=-s):s>15&&(c=2,s-=16),o<1||o>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||s<8||s>15||e<0||e>9||l<0||l>Z_FIXED$1)return err(a,Z_STREAM_ERROR$2);s===8&&(s=9);var u=new DeflateState;return a.state=u,u.strm=a,u.wrap=c,u.gzhead=null,u.w_bits=s,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+MIN_MATCH-1)/MIN_MATCH),u.window=new Buf8(u.w_size*2),u.head=new Buf16(u.hash_size),u.prev=new Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=l,u.method=n,deflateReset(a)}function deflate$1(a,e){var n,s,o,l;if(!a||!a.state||e>Z_BLOCK$2||e<0)return a?err(a,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(s=a.state,!a.output||!a.input&&a.avail_in!==0||s.status===FINISH_STATE&&e!==Z_FINISH$2)return err(a,a.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(s.strm=a,n=s.last_flush,s.last_flush=e,s.status===INIT_STATE)if(s.wrap===2)a.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,s.gzhead.time&255),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY$1||s.level<2?4:0),put_byte(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,s.gzhead.extra.length&255),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(a.adler=crc32(a.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=EXTRA_STATE):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY$1||s.level<2?4:0),put_byte(s,OS_CODE),s.status=BUSY_STATE);else{var c=Z_DEFLATED$2+(s.w_bits-8<<4)<<8,u=-1;s.strategy>=Z_HUFFMAN_ONLY$1||s.level<2?u=0:s.level<6?u=1:s.level===6?u=2:u=3,c|=u<<6,s.strstart!==0&&(c|=PRESET_DICT),c+=31-c%31,s.status=BUSY_STATE,putShortMSB(s,c),s.strstart!==0&&(putShortMSB(s,a.adler>>>16),putShortMSB(s,a.adler&65535)),a.adler=1}if(s.status===EXTRA_STATE)if(s.gzhead.extra){for(o=s.pending;s.gzindex<(s.gzhead.extra.length&65535)&&!(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(a.adler=crc32(a.adler,s.pending_buf,s.pending-o,o)),flush_pending(a),o=s.pending,s.pending===s.pending_buf_size));)put_byte(s,s.gzhead.extra[s.gzindex]&255),s.gzindex++;s.gzhead.hcrc&&s.pending>o&&(a.adler=crc32(a.adler,s.pending_buf,s.pending-o,o)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=NAME_STATE)}else s.status=NAME_STATE;if(s.status===NAME_STATE)if(s.gzhead.name){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(a.adler=crc32(a.adler,s.pending_buf,s.pending-o,o)),flush_pending(a),o=s.pending,s.pending===s.pending_buf_size)){l=1;break}s.gzindex<s.gzhead.name.length?l=s.gzhead.name.charCodeAt(s.gzindex++)&255:l=0,put_byte(s,l)}while(l!==0);s.gzhead.hcrc&&s.pending>o&&(a.adler=crc32(a.adler,s.pending_buf,s.pending-o,o)),l===0&&(s.gzindex=0,s.status=COMMENT_STATE)}else s.status=COMMENT_STATE;if(s.status===COMMENT_STATE)if(s.gzhead.comment){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(a.adler=crc32(a.adler,s.pending_buf,s.pending-o,o)),flush_pending(a),o=s.pending,s.pending===s.pending_buf_size)){l=1;break}s.gzindex<s.gzhead.comment.length?l=s.gzhead.comment.charCodeAt(s.gzindex++)&255:l=0,put_byte(s,l)}while(l!==0);s.gzhead.hcrc&&s.pending>o&&(a.adler=crc32(a.adler,s.pending_buf,s.pending-o,o)),l===0&&(s.status=HCRC_STATE)}else s.status=HCRC_STATE;if(s.status===HCRC_STATE&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(a),s.pending+2<=s.pending_buf_size&&(put_byte(s,a.adler&255),put_byte(s,a.adler>>8&255),a.adler=0,s.status=BUSY_STATE)):s.status=BUSY_STATE),s.pending!==0){if(flush_pending(a),a.avail_out===0)return s.last_flush=-1,Z_OK$2}else if(a.avail_in===0&&rank(e)<=rank(n)&&e!==Z_FINISH$2)return err(a,Z_BUF_ERROR$2);if(s.status===FINISH_STATE&&a.avail_in!==0)return err(a,Z_BUF_ERROR$2);if(a.avail_in!==0||s.lookahead!==0||e!==Z_NO_FLUSH$1&&s.status!==FINISH_STATE){var h=s.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(s,e):s.strategy===Z_RLE$1?deflate_rle(s,e):configuration_table[s.level].func(s,e);if((h===BS_FINISH_STARTED||h===BS_FINISH_DONE)&&(s.status=FINISH_STATE),h===BS_NEED_MORE||h===BS_FINISH_STARTED)return a.avail_out===0&&(s.last_flush=-1),Z_OK$2;if(h===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH$1?_tr_align(s):e!==Z_BLOCK$2&&(_tr_stored_block(s,0,0,!1),e===Z_FULL_FLUSH$1&&(zero(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(a),a.avail_out===0))return s.last_flush=-1,Z_OK$2}return e!==Z_FINISH$2?Z_OK$2:s.wrap<=0?Z_STREAM_END$2:(s.wrap===2?(put_byte(s,a.adler&255),put_byte(s,a.adler>>8&255),put_byte(s,a.adler>>16&255),put_byte(s,a.adler>>24&255),put_byte(s,a.total_in&255),put_byte(s,a.total_in>>8&255),put_byte(s,a.total_in>>16&255),put_byte(s,a.total_in>>24&255)):(putShortMSB(s,a.adler>>>16),putShortMSB(s,a.adler&65535)),flush_pending(a),s.wrap>0&&(s.wrap=-s.wrap),s.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(a){var e;return!a||!a.state?Z_STREAM_ERROR$2:(e=a.state.status,e!==INIT_STATE&&e!==EXTRA_STATE&&e!==NAME_STATE&&e!==COMMENT_STATE&&e!==HCRC_STATE&&e!==BUSY_STATE&&e!==FINISH_STATE?err(a,Z_STREAM_ERROR$2):(a.state=null,e===BUSY_STATE?err(a,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(a,e){var n,s,o,l,c,u,h,f,d,p,g,m,y,_,b,x,P,T,k,S,A,w,E,F,O;n=a.state,s=a.next_in,F=a.input,o=s+(a.avail_in-5),l=a.next_out,O=a.output,c=l-(e-a.avail_out),u=l+(a.avail_out-257),h=n.dmax,f=n.wsize,d=n.whave,p=n.wnext,g=n.window,m=n.hold,y=n.bits,_=n.lencode,b=n.distcode,x=(1<<n.lenbits)-1,P=(1<<n.distbits)-1;e:do{y<15&&(m+=F[s++]<<y,y+=8,m+=F[s++]<<y,y+=8),T=_[m&x];t:for(;;){if(k=T>>>24,m>>>=k,y-=k,k=T>>>16&255,k===0)O[l++]=T&65535;else if(k&16){S=T&65535,k&=15,k&&(y<k&&(m+=F[s++]<<y,y+=8),S+=m&(1<<k)-1,m>>>=k,y-=k),y<15&&(m+=F[s++]<<y,y+=8,m+=F[s++]<<y,y+=8),T=b[m&P];r:for(;;){if(k=T>>>24,m>>>=k,y-=k,k=T>>>16&255,k&16){if(A=T&65535,k&=15,y<k&&(m+=F[s++]<<y,y+=8,y<k&&(m+=F[s++]<<y,y+=8)),A+=m&(1<<k)-1,A>h){a.msg="invalid distance too far back",n.mode=BAD$1;break e}if(m>>>=k,y-=k,k=l-c,A>k){if(k=A-k,k>d&&n.sane){a.msg="invalid distance too far back",n.mode=BAD$1;break e}if(w=0,E=g,p===0){if(w+=f-k,k<S){S-=k;do O[l++]=g[w++];while(--k);w=l-A,E=O}}else if(p<k){if(w+=f+p-k,k-=p,k<S){S-=k;do O[l++]=g[w++];while(--k);if(w=0,p<S){k=p,S-=k;do O[l++]=g[w++];while(--k);w=l-A,E=O}}}else if(w+=p-k,k<S){S-=k;do O[l++]=g[w++];while(--k);w=l-A,E=O}for(;S>2;)O[l++]=E[w++],O[l++]=E[w++],O[l++]=E[w++],S-=3;S&&(O[l++]=E[w++],S>1&&(O[l++]=E[w++]))}else{w=l-A;do O[l++]=O[w++],O[l++]=O[w++],O[l++]=O[w++],S-=3;while(S>2);S&&(O[l++]=O[w++],S>1&&(O[l++]=O[w++]))}}else if((k&64)===0){T=b[(T&65535)+(m&(1<<k)-1)];continue r}else{a.msg="invalid distance code",n.mode=BAD$1;break e}break}}else if((k&64)===0){T=_[(T&65535)+(m&(1<<k)-1)];continue t}else if(k&32){n.mode=TYPE$1;break e}else{a.msg="invalid literal/length code",n.mode=BAD$1;break e}break}}while(s<o&&l<u);S=y>>3,s-=S,y-=S<<3,m&=(1<<y)-1,a.next_in=s,a.next_out=l,a.avail_in=s<o?5+(o-s):5-(s-o),a.avail_out=l<u?257+(u-l):257-(l-u),n.hold=m,n.bits=y}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(a,e,n,s,o,l,c,u){var h=u.bits,f=0,d=0,p=0,g=0,m=0,y=0,_=0,b=0,x=0,P=0,T,k,S,A,w,E=null,F=0,O,M=new Buf16(MAXBITS+1),V=new Buf16(MAXBITS+1),G=null,te=0,ce,se,le;for(f=0;f<=MAXBITS;f++)M[f]=0;for(d=0;d<s;d++)M[e[n+d]]++;for(m=h,g=MAXBITS;g>=1&&M[g]===0;g--);if(m>g&&(m=g),g===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,u.bits=1,0;for(p=1;p<g&&M[p]===0;p++);for(m<p&&(m=p),b=1,f=1;f<=MAXBITS;f++)if(b<<=1,b-=M[f],b<0)return-1;if(b>0&&(a===CODES$1||g!==1))return-1;for(V[1]=0,f=1;f<MAXBITS;f++)V[f+1]=V[f]+M[f];for(d=0;d<s;d++)e[n+d]!==0&&(c[V[e[n+d]]++]=d);if(a===CODES$1?(E=G=c,O=19):a===LENS$1?(E=lbase,F-=257,G=lext,te-=257,O=256):(E=dbase,G=dext,O=-1),P=0,d=0,f=p,w=l,y=m,_=0,S=-1,x=1<<m,A=x-1,a===LENS$1&&x>ENOUGH_LENS$1||a===DISTS$1&&x>ENOUGH_DISTS$1)return 1;for(;;){ce=f-_,c[d]<O?(se=0,le=c[d]):c[d]>O?(se=G[te+c[d]],le=E[F+c[d]]):(se=96,le=0),T=1<<f-_,k=1<<y,p=k;do k-=T,o[w+(P>>_)+k]=ce<<24|se<<16|le|0;while(k!==0);for(T=1<<f-1;P&T;)T>>=1;if(T!==0?(P&=T-1,P+=T):P=0,d++,--M[f]===0){if(f===g)break;f=e[n+c[d]]}if(f>m&&(P&A)!==S){for(_===0&&(_=m),w+=p,y=f-_,b=1<<y;y+_<g&&(b-=M[y+_],!(b<=0));)y++,b<<=1;if(x+=1<<y,a===LENS$1&&x>ENOUGH_LENS$1||a===DISTS$1&&x>ENOUGH_DISTS$1)return 1;S=P&A,o[S]=m<<24|y<<16|w-l|0}}return P!==0&&(o[w+P]=f-_<<24|64<<16|0),u.bits=m,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(a){var e;return!a||!a.state?Z_STREAM_ERROR$1:(e=a.state,a.total_in=a.total_out=e.total=0,a.msg="",e.wrap&&(a.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Buf32(ENOUGH_LENS),e.distcode=e.distdyn=new Buf32(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1)}function inflateReset(a){var e;return!a||!a.state?Z_STREAM_ERROR$1:(e=a.state,e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(a))}function inflateReset2(a,e){var n,s;return!a||!a.state||(s=a.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Z_STREAM_ERROR$1:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=n,s.wbits=e,inflateReset(a))}function inflateInit2(a,e){var n,s;return a?(s=new InflateState,a.state=s,s.window=null,n=inflateReset2(a,e),n!==Z_OK$1&&(a.state=null),n):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(a){if(virgin){var e;for(lenfix=new Buf32(512),distfix=new Buf32(32),e=0;e<144;)a.lens[e++]=8;for(;e<256;)a.lens[e++]=9;for(;e<280;)a.lens[e++]=7;for(;e<288;)a.lens[e++]=8;for(inflate_table(LENS,a.lens,0,288,lenfix,0,a.work,{bits:9}),e=0;e<32;)a.lens[e++]=5;inflate_table(DISTS,a.lens,0,32,distfix,0,a.work,{bits:5}),virgin=!1}a.lencode=lenfix,a.lenbits=9,a.distcode=distfix,a.distbits=5}function updatewindow(a,e,n,s){var o,l=a.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Buf8(l.wsize)),s>=l.wsize?(arraySet(l.window,e,n-l.wsize,l.wsize,0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>s&&(o=s),arraySet(l.window,e,n-s,o,l.wnext),s-=o,s?(arraySet(l.window,e,n-s,s,0),l.wnext=s,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0}function inflate$1(a,e){var n,s,o,l,c,u,h,f,d,p,g,m,y,_,b=0,x,P,T,k,S,A,w,E,F=new Buf8(4),O,M,V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&a.avail_in!==0)return Z_STREAM_ERROR$1;n=a.state,n.mode===TYPE&&(n.mode=TYPEDO),c=a.next_out,o=a.output,h=a.avail_out,l=a.next_in,s=a.input,u=a.avail_in,f=n.hold,d=n.bits,p=u,g=h,E=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;d<16;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(n.wrap&2&&f===35615){n.check=0,F[0]=f&255,F[1]=f>>>8&255,n.check=crc32(n.check,F,2,0),f=0,d=0,n.mode=FLAGS;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){a.msg="incorrect header check",n.mode=BAD;break}if((f&15)!==Z_DEFLATED$1){a.msg="unknown compression method",n.mode=BAD;break}if(f>>>=4,d-=4,w=(f&15)+8,n.wbits===0)n.wbits=w;else if(w>n.wbits){a.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<w,a.adler=n.check=1,n.mode=f&512?DICTID:TYPE,f=0,d=0;break;case FLAGS:for(;d<16;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(n.flags=f,(n.flags&255)!==Z_DEFLATED$1){a.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){a.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&(F[0]=f&255,F[1]=f>>>8&255,n.check=crc32(n.check,F,2,0)),f=0,d=0,n.mode=TIME;case TIME:for(;d<32;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}n.head&&(n.head.time=f),n.flags&512&&(F[0]=f&255,F[1]=f>>>8&255,F[2]=f>>>16&255,F[3]=f>>>24&255,n.check=crc32(n.check,F,4,0)),f=0,d=0,n.mode=OS;case OS:for(;d<16;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&(F[0]=f&255,F[1]=f>>>8&255,n.check=crc32(n.check,F,2,0)),f=0,d=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;d<16;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&(F[0]=f&255,F[1]=f>>>8&255,n.check=crc32(n.check,F,2,0)),f=0,d=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(m=n.length,m>u&&(m=u),m&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),arraySet(n.head.extra,s,l,m,w)),n.flags&512&&(n.check=crc32(n.check,s,m,l)),u-=m,l+=m,n.length-=m),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(u===0)break e;m=0;do w=s[l+m++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w));while(w&&m<u);if(n.flags&512&&(n.check=crc32(n.check,s,m,l)),u-=m,l+=m,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(u===0)break e;m=0;do w=s[l+m++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w));while(w&&m<u);if(n.flags&512&&(n.check=crc32(n.check,s,m,l)),u-=m,l+=m,w)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;d<16;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(f!==(n.check&65535)){a.msg="header crc mismatch",n.mode=BAD;break}f=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),a.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;d<32;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}a.adler=n.check=zswap32(f),f=0,d=0,n.mode=DICT;case DICT:if(n.havedict===0)return a.next_out=c,a.avail_out=h,a.next_in=l,a.avail_in=u,n.hold=f,n.bits=d,Z_NEED_DICT$1;a.adler=n.check=1,n.mode=TYPE;case TYPE:if(e===Z_BLOCK$1||e===Z_TREES$1)break e;case TYPEDO:if(n.last){f>>>=d&7,d-=d&7,n.mode=CHECK;break}for(;d<3;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}switch(n.last=f&1,f>>>=1,d-=1,f&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,e===Z_TREES$1){f>>>=2,d-=2;break e}break;case 2:n.mode=TABLE;break;case 3:a.msg="invalid block type",n.mode=BAD}f>>>=2,d-=2;break;case STORED:for(f>>>=d&7,d-=d&7;d<32;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if((f&65535)!==(f>>>16^65535)){a.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=f&65535,f=0,d=0,n.mode=COPY_,e===Z_TREES$1)break e;case COPY_:n.mode=COPY;case COPY:if(m=n.length,m){if(m>u&&(m=u),m>h&&(m=h),m===0)break e;arraySet(o,s,l,m,c),u-=m,l+=m,h-=m,c+=m,n.length-=m;break}n.mode=TYPE;break;case TABLE:for(;d<14;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(n.nlen=(f&31)+257,f>>>=5,d-=5,n.ndist=(f&31)+1,f>>>=5,d-=5,n.ncode=(f&15)+4,f>>>=4,d-=4,n.nlen>286||n.ndist>30){a.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;d<3;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}n.lens[V[n.have++]]=f&7,f>>>=3,d-=3}for(;n.have<19;)n.lens[V[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},E=inflate_table(CODES,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,E){a.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[f&(1<<n.lenbits)-1],x=b>>>24,P=b>>>16&255,T=b&65535,!(x<=d);){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(T<16)f>>>=x,d-=x,n.lens[n.have++]=T;else{if(T===16){for(M=x+2;d<M;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(f>>>=x,d-=x,n.have===0){a.msg="invalid bit length repeat",n.mode=BAD;break}w=n.lens[n.have-1],m=3+(f&3),f>>>=2,d-=2}else if(T===17){for(M=x+3;d<M;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}f>>>=x,d-=x,w=0,m=3+(f&7),f>>>=3,d-=3}else{for(M=x+7;d<M;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}f>>>=x,d-=x,w=0,m=11+(f&127),f>>>=7,d-=7}if(n.have+m>n.nlen+n.ndist){a.msg="invalid bit length repeat",n.mode=BAD;break}for(;m--;)n.lens[n.have++]=w}}if(n.mode===BAD)break;if(n.lens[256]===0){a.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,O={bits:n.lenbits},E=inflate_table(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,E){a.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},E=inflate_table(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,E){a.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,e===Z_TREES$1)break e;case LEN_:n.mode=LEN;case LEN:if(u>=6&&h>=258){a.next_out=c,a.avail_out=h,a.next_in=l,a.avail_in=u,n.hold=f,n.bits=d,inflate_fast(a,g),c=a.next_out,o=a.output,h=a.avail_out,l=a.next_in,s=a.input,u=a.avail_in,f=n.hold,d=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;b=n.lencode[f&(1<<n.lenbits)-1],x=b>>>24,P=b>>>16&255,T=b&65535,!(x<=d);){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(P&&(P&240)===0){for(k=x,S=P,A=T;b=n.lencode[A+((f&(1<<k+S)-1)>>k)],x=b>>>24,P=b>>>16&255,T=b&65535,!(k+x<=d);){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}f>>>=k,d-=k,n.back+=k}if(f>>>=x,d-=x,n.back+=x,n.length=T,P===0){n.mode=LIT;break}if(P&32){n.back=-1,n.mode=TYPE;break}if(P&64){a.msg="invalid literal/length code",n.mode=BAD;break}n.extra=P&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(M=n.extra;d<M;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;b=n.distcode[f&(1<<n.distbits)-1],x=b>>>24,P=b>>>16&255,T=b&65535,!(x<=d);){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if((P&240)===0){for(k=x,S=P,A=T;b=n.distcode[A+((f&(1<<k+S)-1)>>k)],x=b>>>24,P=b>>>16&255,T=b&65535,!(k+x<=d);){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}f>>>=k,d-=k,n.back+=k}if(f>>>=x,d-=x,n.back+=x,P&64){a.msg="invalid distance code",n.mode=BAD;break}n.offset=T,n.extra=P&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(M=n.extra;d<M;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){a.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(h===0)break e;if(m=g-h,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){a.msg="invalid distance too far back",n.mode=BAD;break}m>n.wnext?(m-=n.wnext,y=n.wsize-m):y=n.wnext-m,m>n.length&&(m=n.length),_=n.window}else _=o,y=c-n.offset,m=n.length;m>h&&(m=h),h-=m,n.length-=m;do o[c++]=_[y++];while(--m);n.length===0&&(n.mode=LEN);break;case LIT:if(h===0)break e;o[c++]=n.length,h--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;d<32;){if(u===0)break e;u--,f|=s[l++]<<d,d+=8}if(g-=h,a.total_out+=g,n.total+=g,g&&(a.adler=n.check=n.flags?crc32(n.check,o,g,c-g):adler32(n.check,o,g,c-g)),g=h,(n.flags?f:zswap32(f))!==n.check){a.msg="incorrect data check",n.mode=BAD;break}f=0,d=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;d<32;){if(u===0)break e;u--,f+=s[l++]<<d,d+=8}if(f!==(n.total&4294967295)){a.msg="incorrect length check",n.mode=BAD;break}f=0,d=0}n.mode=DONE;case DONE:E=Z_STREAM_END$1;break e;case BAD:E=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return a.next_out=c,a.avail_out=h,a.next_in=l,a.avail_in=u,n.hold=f,n.bits=d,(n.wsize||g!==a.avail_out&&n.mode<BAD&&(n.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(a,a.output,a.next_out,g-a.avail_out),p-=a.avail_in,g-=a.avail_out,a.total_in+=p,a.total_out+=g,n.total+=g,n.wrap&&g&&(a.adler=n.check=n.flags?crc32(n.check,o,g,a.next_out-g):adler32(n.check,o,g,a.next_out-g)),a.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(p===0&&g===0||e===Z_FINISH$1)&&E===Z_OK$1&&(E=Z_BUF_ERROR$1),E}function inflateEnd(a){if(!a||!a.state)return Z_STREAM_ERROR$1;var e=a.state;return e.window&&(e.window=null),a.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(a){if(a<DEFLATE||a>UNZIP)throw new TypeError("Bad argument");this.mode=a,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(a,e,n,s,o){this.windowBits=a,this.level=e,this.memLevel=n,this.strategy=s,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var l;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:l=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:l=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(l!==Z_OK){this._error(l);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(a,e,n,s,o,l,c){this._writeCheck(),this.write_in_progress=!0;var u=this;return browser$1$1.nextTick(function(){u.write_in_progress=!1;var h=u._write(a,e,n,s,o,l,c);u.callback(h[0],h[1]),u.pending_close&&u.close()}),this};function bufferSet(a,e){for(var n=0;n<a.length;n++)this[e+n]=a[n]}Zlib$1.prototype.writeSync=function(a,e,n,s,o,l,c){return this._writeCheck(),this._write(a,e,n,s,o,l,c)};Zlib$1.prototype._write=function(a,e,n,s,o,l,c){if(this.write_in_progress=!0,a!==Z_NO_FLUSH&&a!==Z_PARTIAL_FLUSH&&a!==Z_SYNC_FLUSH&&a!==Z_FULL_FLUSH&&a!==Z_FINISH&&a!==Z_BLOCK)throw new Error("Invalid flush value");e==null&&(e=new Buffer(0),s=0,n=0),o._set?o.set=o._set:o.set=bufferSet;var u=this.strm;u.avail_in=s,u.input=e,u.next_in=n,u.avail_out=c,u.output=o,u.next_out=l;var h;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:h=deflate$1(u,a);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:h=inflate$1(u,a);break;default:throw new Error("Unknown mode "+this.mode)}return h!==Z_STREAM_END&&h!==Z_OK&&this._error(h),this.write_in_progress=!1,[u.avail_in,u.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(a){this.onerror(msg[a]+": "+this.strm.msg,a),this.write_in_progress=!1,this.pending_close&&this.close()};var _binding=Object.freeze({__proto__:null,DEFLATE,DEFLATERAW,GUNZIP,GZIP,INFLATE,INFLATERAW,NONE,UNZIP,Z_BEST_COMPRESSION,Z_BEST_SPEED,Z_BINARY,Z_BLOCK,Z_BUF_ERROR,Z_DATA_ERROR,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED,Z_ERRNO,Z_FILTERED,Z_FINISH,Z_FIXED,Z_FULL_FLUSH,Z_HUFFMAN_ONLY,Z_NEED_DICT,Z_NO_COMPRESSION,Z_NO_FLUSH,Z_OK,Z_PARTIAL_FLUSH,Z_RLE,Z_STREAM_END,Z_STREAM_ERROR,Z_SYNC_FLUSH,Z_TEXT,Z_TREES,Z_UNKNOWN,Zlib:Zlib$1});function assert(a,e){if(!a)throw new Error(e)}var binding={};Object.keys(_binding).forEach(function(a){binding[a]=_binding[a]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(a){codes[codes[a]]=a});function createDeflate(a){return new Deflate(a)}function createInflate(a){return new Inflate(a)}function createDeflateRaw(a){return new DeflateRaw(a)}function createInflateRaw(a){return new InflateRaw(a)}function createGzip(a){return new Gzip(a)}function createGunzip(a){return new Gunzip(a)}function createUnzip(a){return new Unzip(a)}function deflate(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new Deflate(e),a,n)}function deflateSync(a,e){return zlibBufferSync(new Deflate(e),a)}function gzip(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new Gzip(e),a,n)}function gzipSync(a,e){return zlibBufferSync(new Gzip(e),a)}function deflateRaw(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new DeflateRaw(e),a,n)}function deflateRawSync(a,e){return zlibBufferSync(new DeflateRaw(e),a)}function unzip(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new Unzip(e),a,n)}function unzipSync(a,e){return zlibBufferSync(new Unzip(e),a)}function inflate(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new Inflate(e),a,n)}function inflateSync(a,e){return zlibBufferSync(new Inflate(e),a)}function gunzip(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new Gunzip(e),a,n)}function gunzipSync(a,e){return zlibBufferSync(new Gunzip(e),a)}function inflateRaw(a,e,n){return typeof e=="function"&&(n=e,e={}),zlibBuffer(new InflateRaw(e),a,n)}function inflateRawSync(a,e){return zlibBufferSync(new InflateRaw(e),a)}function zlibBuffer(a,e,n){var s=[],o=0;a.on("error",c),a.on("end",u),a.end(e),l();function l(){for(var h;(h=a.read())!==null;)s.push(h),o+=h.length;a.once("readable",l)}function c(h){a.removeListener("end",u),a.removeListener("readable",l),n(h)}function u(){var h=Buffer.concat(s,o);s=[],n(null,h),a.close()}}function zlibBufferSync(a,e){if(typeof e=="string"&&(e=new Buffer(e)),!Buffer.isBuffer(e))throw new TypeError("Not a string or buffer");var n=binding.Z_FINISH;return a._processChunk(e,n)}function Deflate(a){if(!(this instanceof Deflate))return new Deflate(a);Zlib.call(this,a,binding.DEFLATE)}function Inflate(a){if(!(this instanceof Inflate))return new Inflate(a);Zlib.call(this,a,binding.INFLATE)}function Gzip(a){if(!(this instanceof Gzip))return new Gzip(a);Zlib.call(this,a,binding.GZIP)}function Gunzip(a){if(!(this instanceof Gunzip))return new Gunzip(a);Zlib.call(this,a,binding.GUNZIP)}function DeflateRaw(a){if(!(this instanceof DeflateRaw))return new DeflateRaw(a);Zlib.call(this,a,binding.DEFLATERAW)}function InflateRaw(a){if(!(this instanceof InflateRaw))return new InflateRaw(a);Zlib.call(this,a,binding.INFLATERAW)}function Unzip(a){if(!(this instanceof Unzip))return new Unzip(a);Zlib.call(this,a,binding.UNZIP)}function Zlib(a,e){if(this._opts=a=a||{},this._chunkSize=a.chunkSize||binding.Z_DEFAULT_CHUNK,Transform.call(this,a),a.flush&&a.flush!==binding.Z_NO_FLUSH&&a.flush!==binding.Z_PARTIAL_FLUSH&&a.flush!==binding.Z_SYNC_FLUSH&&a.flush!==binding.Z_FULL_FLUSH&&a.flush!==binding.Z_FINISH&&a.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+a.flush);if(this._flushFlag=a.flush||binding.Z_NO_FLUSH,a.chunkSize&&(a.chunkSize<binding.Z_MIN_CHUNK||a.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+a.chunkSize);if(a.windowBits&&(a.windowBits<binding.Z_MIN_WINDOWBITS||a.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+a.windowBits);if(a.level&&(a.level<binding.Z_MIN_LEVEL||a.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+a.level);if(a.memLevel&&(a.memLevel<binding.Z_MIN_MEMLEVEL||a.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+a.memLevel);if(a.strategy&&a.strategy!=binding.Z_FILTERED&&a.strategy!=binding.Z_HUFFMAN_ONLY&&a.strategy!=binding.Z_RLE&&a.strategy!=binding.Z_FIXED&&a.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+a.strategy);if(a.dictionary&&!Buffer.isBuffer(a.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(e);var n=this;this._hadError=!1,this._binding.onerror=function(l,c){n._binding=null,n._hadError=!0;var u=new Error(l);u.errno=c,u.code=binding.codes[c],n.emit("error",u)};var s=binding.Z_DEFAULT_COMPRESSION;typeof a.level=="number"&&(s=a.level);var o=binding.Z_DEFAULT_STRATEGY;typeof a.strategy=="number"&&(o=a.strategy),this._binding.init(a.windowBits||binding.Z_DEFAULT_WINDOWBITS,s,a.memLevel||binding.Z_DEFAULT_MEMLEVEL,o,a.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=s,this._strategy=o,this.once("end",this.close)}inherits$1(Zlib,Transform);Zlib.prototype.params=function(a,e,n){if(a<binding.Z_MIN_LEVEL||a>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+a);if(e!=binding.Z_FILTERED&&e!=binding.Z_HUFFMAN_ONLY&&e!=binding.Z_RLE&&e!=binding.Z_FIXED&&e!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+e);if(this._level!==a||this._strategy!==e){var s=this;this.flush(binding.Z_SYNC_FLUSH,function(){s._binding.params(a,e),s._hadError||(s._level=a,s._strategy=e,n&&n())})}else browser$1$1.nextTick(n)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(a){this._transform(new Buffer(0),"",a)};Zlib.prototype.flush=function(a,e){var n=this._writableState;if((typeof a=="function"||a===void 0&&!e)&&(e=a,a=binding.Z_FULL_FLUSH),n.ended)e&&browser$1$1.nextTick(e);else if(n.ending)e&&this.once("end",e);else if(n.needDrain){var s=this;this.once("drain",function(){s.flush(e)})}else this._flushFlag=a,this.write(new Buffer(0),"",e)};Zlib.prototype.close=function(a){if(a&&browser$1$1.nextTick(a),!this._closed){this._closed=!0,this._binding.close();var e=this;browser$1$1.nextTick(function(){e.emit("close")})}};Zlib.prototype._transform=function(a,e,n){var s,o=this._writableState,l=o.ending||o.ended,c=l&&(!a||o.length===a.length);if(!a===null&&!Buffer.isBuffer(a))return n(new Error("invalid input"));c?s=binding.Z_FINISH:(s=this._flushFlag,a.length>=o.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(a,s,n)};Zlib.prototype._processChunk=function(a,e,n){var s=a&&a.length,o=this._chunkSize-this._offset,l=0,c=this,u=typeof n=="function";if(!u){var h=[],f=0,d;this.on("error",function(_){d=_});do var p=this._binding.writeSync(e,a,l,s,this._buffer,this._offset,o);while(!this._hadError&&y(p[0],p[1]));if(this._hadError)throw d;var g=Buffer.concat(h,f);return this.close(),g}var m=this._binding.write(e,a,l,s,this._buffer,this._offset,o);m.buffer=a,m.callback=y;function y(_,b){if(!c._hadError){var x=o-b;if(assert(x>=0,"have should not go down"),x>0){var P=c._buffer.slice(c._offset,c._offset+x);c._offset+=x,u?c.push(P):(h.push(P),f+=P.length)}if((b===0||c._offset>=c._chunkSize)&&(o=c._chunkSize,c._offset=0,c._buffer=new Buffer(c._chunkSize)),b===0){if(l+=s-_,s=_,!u)return!0;var T=c._binding.write(e,a,l,s,c._buffer,c._offset,c._chunkSize);T.callback=y,T.buffer=a;return}if(!u)return!1;n()}}};inherits$1(Deflate,Zlib);inherits$1(Inflate,Zlib);inherits$1(Gzip,Zlib);inherits$1(Gunzip,Zlib);inherits$1(DeflateRaw,Zlib);inherits$1(InflateRaw,Zlib);inherits$1(Unzip,Zlib);var _polyfillNode_zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},_polyfillNode_zlib$1=Object.freeze({__proto__:null,Deflate,DeflateRaw,Gunzip,Gzip,Inflate,InflateRaw,Unzip,Zlib,codes,createDeflate,createDeflateRaw,createGunzip,createGzip,createInflate,createInflateRaw,createUnzip,default:_polyfillNode_zlib,deflate,deflateRaw,deflateRawSync,deflateSync,gunzip,gunzipSync,gzip,gzipSync,inflate,inflateRaw,inflateRawSync,inflateSync,unzip,unzipSync}),require$$5=getAugmentedNamespace(_polyfillNode_zlib$1);(function(module,exports){(function(e,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(a,e)=>{var Oe;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=_e,e.bytesToString=U,e.createValidAbsoluteUrl=ae,e.getModificationDate=qe,e.getVerbosityLevel=le,e.info=fe,e.isArrayBuffer=Me,e.isArrayEqual=Le,e.normalizeUnicode=Pe,e.objectFromMap=ee,e.objectSize=j,e.setVerbosityLevel=se,e.shadow=B,e.string32=L,e.stringToBytes=z,e.stringToPDFString=ve,e.stringToUTF8String=Se,e.unreachable=xe,e.utf8StringToString=De,e.warn=ge;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const s=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=s;const o=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=o;const l=1.35;e.LINE_FACTOR=l;const c=.35;e.LINE_DESCENT_FACTOR=c;const u=c/l;e.BASELINE_FACTOR=u;const h={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=h;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=f;const d="pdfjs_internal_editor_";e.AnnotationEditorPrefix=d;const p={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=p;const g={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=g;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=m;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=y;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=_;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=b;const x={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=x;const P={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=P;const T={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=T;const k={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=k;const S={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=S;const A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=A;const w={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=w;const E={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=E;const F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=F;const O={O:"PageOpen",C:"PageClose"};e.PageActionEventType=O;const M={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=M;const V={NONE:0,BINARY:1};e.CMapCompressionType=V;const G={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=G;const te={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=te;let ce=M.WARNINGS;function se(re){Number.isInteger(re)&&(ce=re)}function le(){return ce}function fe(re){ce>=M.INFOS&&console.log(`Info: ${re}`)}function ge(re){ce>=M.WARNINGS&&console.log(`Warning: ${re}`)}function xe(re){throw new Error(re)}function _e(re,oe){re||xe(oe)}function Ce(re){switch(re==null?void 0:re.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ae(re,oe=null,N=null){if(!re)return null;try{if(N&&typeof re=="string"){if(N.addDefaultProtocol&&re.startsWith("www.")){const Ne=re.match(/\./g);(Ne==null?void 0:Ne.length)>=2&&(re=`http://${re}`)}if(N.tryConvertEncoding)try{re=Se(re)}catch{}}const be=oe?new URL(re,oe):new URL(re);if(Ce(be))return be}catch{}return null}function B(re,oe,N,be=!1){return Object.defineProperty(re,oe,{value:N,enumerable:!be,configurable:!0,writable:!1}),N}const I=function(){function oe(N,be){this.constructor===oe&&xe("Cannot initialize BaseException."),this.message=N,this.name=be}return oe.prototype=new Error,oe.constructor=oe,oe}();e.BaseException=I;class q extends I{constructor(oe,N){super(oe,"PasswordException"),this.code=N}}e.PasswordException=q;class K extends I{constructor(oe,N){super(oe,"UnknownErrorException"),this.details=N}}e.UnknownErrorException=K;class Q extends I{constructor(oe){super(oe,"InvalidPDFException")}}e.InvalidPDFException=Q;class $ extends I{constructor(oe){super(oe,"MissingPDFException")}}e.MissingPDFException=$;class Z extends I{constructor(oe,N){super(oe,"UnexpectedResponseException"),this.status=N}}e.UnexpectedResponseException=Z;class J extends I{constructor(oe){super(oe,"FormatError")}}e.FormatError=J;class R extends I{constructor(oe){super(oe,"AbortException")}}e.AbortException=R;function U(re){(typeof re!="object"||(re==null?void 0:re.length)===void 0)&&xe("Invalid argument for bytesToString");const oe=re.length,N=8192;if(oe<N)return String.fromCharCode.apply(null,re);const be=[];for(let Ne=0;Ne<oe;Ne+=N){const D=Math.min(Ne+N,oe),we=re.subarray(Ne,D);be.push(String.fromCharCode.apply(null,we))}return be.join("")}function z(re){typeof re!="string"&&xe("Invalid argument for stringToBytes");const oe=re.length,N=new Uint8Array(oe);for(let be=0;be<oe;++be)N[be]=re.charCodeAt(be)&255;return N}function L(re){return String.fromCharCode(re>>24&255,re>>16&255,re>>8&255,re&255)}function j(re){return Object.keys(re).length}function ee(re){const oe=Object.create(null);for(const[N,be]of re)oe[N]=be;return oe}function he(){const re=new Uint8Array(4);return re[0]=1,new Uint32Array(re.buffer,0,1)[0]===1}function ye(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return B(this,"isLittleEndian",he())}static get isEvalSupported(){return B(this,"isEvalSupported",ye())}static get isOffscreenCanvasSupported(){return B(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?B(this,"platform",{isWin:!1,isMac:!1}):B(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}e.FeatureTest=pe;const ne=[...Array(256).keys()].map(re=>re.toString(16).padStart(2,"0"));class de{static makeHexColor(oe,N,be){return`#${ne[oe]}${ne[N]}${ne[be]}`}static scaleMinMax(oe,N){let be;oe[0]?(oe[0]<0&&(be=N[0],N[0]=N[1],N[1]=be),N[0]*=oe[0],N[1]*=oe[0],oe[3]<0&&(be=N[2],N[2]=N[3],N[3]=be),N[2]*=oe[3],N[3]*=oe[3]):(be=N[0],N[0]=N[2],N[2]=be,be=N[1],N[1]=N[3],N[3]=be,oe[1]<0&&(be=N[2],N[2]=N[3],N[3]=be),N[2]*=oe[1],N[3]*=oe[1],oe[2]<0&&(be=N[0],N[0]=N[1],N[1]=be),N[0]*=oe[2],N[1]*=oe[2]),N[0]+=oe[4],N[1]+=oe[4],N[2]+=oe[5],N[3]+=oe[5]}static transform(oe,N){return[oe[0]*N[0]+oe[2]*N[1],oe[1]*N[0]+oe[3]*N[1],oe[0]*N[2]+oe[2]*N[3],oe[1]*N[2]+oe[3]*N[3],oe[0]*N[4]+oe[2]*N[5]+oe[4],oe[1]*N[4]+oe[3]*N[5]+oe[5]]}static applyTransform(oe,N){const be=oe[0]*N[0]+oe[1]*N[2]+N[4],Ne=oe[0]*N[1]+oe[1]*N[3]+N[5];return[be,Ne]}static applyInverseTransform(oe,N){const be=N[0]*N[3]-N[1]*N[2],Ne=(oe[0]*N[3]-oe[1]*N[2]+N[2]*N[5]-N[4]*N[3])/be,D=(-oe[0]*N[1]+oe[1]*N[0]+N[4]*N[1]-N[5]*N[0])/be;return[Ne,D]}static getAxialAlignedBoundingBox(oe,N){const be=de.applyTransform(oe,N),Ne=de.applyTransform(oe.slice(2,4),N),D=de.applyTransform([oe[0],oe[3]],N),we=de.applyTransform([oe[2],oe[1]],N);return[Math.min(be[0],Ne[0],D[0],we[0]),Math.min(be[1],Ne[1],D[1],we[1]),Math.max(be[0],Ne[0],D[0],we[0]),Math.max(be[1],Ne[1],D[1],we[1])]}static inverseTransform(oe){const N=oe[0]*oe[3]-oe[1]*oe[2];return[oe[3]/N,-oe[1]/N,-oe[2]/N,oe[0]/N,(oe[2]*oe[5]-oe[4]*oe[3])/N,(oe[4]*oe[1]-oe[5]*oe[0])/N]}static singularValueDecompose2dScale(oe){const N=[oe[0],oe[2],oe[1],oe[3]],be=oe[0]*N[0]+oe[1]*N[2],Ne=oe[0]*N[1]+oe[1]*N[3],D=oe[2]*N[0]+oe[3]*N[2],we=oe[2]*N[1]+oe[3]*N[3],Ae=(be+we)/2,X=Math.sqrt((be+we)**2-4*(be*we-D*Ne))/2,H=Ae+X||1,ue=Ae-X||1;return[Math.sqrt(H),Math.sqrt(ue)]}static normalizeRect(oe){const N=oe.slice(0);return oe[0]>oe[2]&&(N[0]=oe[2],N[2]=oe[0]),oe[1]>oe[3]&&(N[1]=oe[3],N[3]=oe[1]),N}static intersect(oe,N){const be=Math.max(Math.min(oe[0],oe[2]),Math.min(N[0],N[2])),Ne=Math.min(Math.max(oe[0],oe[2]),Math.max(N[0],N[2]));if(be>Ne)return null;const D=Math.max(Math.min(oe[1],oe[3]),Math.min(N[1],N[3])),we=Math.min(Math.max(oe[1],oe[3]),Math.max(N[1],N[3]));return D>we?null:[be,D,Ne,we]}static bezierBoundingBox(oe,N,be,Ne,D,we,Ae,X){const H=[],ue=[[],[]];let ke,Fe,Be,Ve,je,Ue,He,Je;for(let dt=0;dt<2;++dt){if(dt===0?(Fe=6*oe-12*be+6*D,ke=-3*oe+9*be-9*D+3*Ae,Be=3*be-3*oe):(Fe=6*N-12*Ne+6*we,ke=-3*N+9*Ne-9*we+3*X,Be=3*Ne-3*N),Math.abs(ke)<1e-12){if(Math.abs(Fe)<1e-12)continue;Ve=-Be/Fe,0<Ve&&Ve<1&&H.push(Ve);continue}He=Fe*Fe-4*Be*ke,Je=Math.sqrt(He),!(He<0)&&(je=(-Fe+Je)/(2*ke),0<je&&je<1&&H.push(je),Ue=(-Fe-Je)/(2*ke),0<Ue&&Ue<1&&H.push(Ue))}let Ze=H.length,et;const ht=Ze;for(;Ze--;)Ve=H[Ze],et=1-Ve,ue[0][Ze]=et*et*et*oe+3*et*et*Ve*be+3*et*Ve*Ve*D+Ve*Ve*Ve*Ae,ue[1][Ze]=et*et*et*N+3*et*et*Ve*Ne+3*et*Ve*Ve*we+Ve*Ve*Ve*X;return ue[0][ht]=oe,ue[1][ht]=N,ue[0][ht+1]=Ae,ue[1][ht+1]=X,ue[0].length=ue[1].length=ht+2,[Math.min(...ue[0]),Math.min(...ue[1]),Math.max(...ue[0]),Math.max(...ue[1])]}}e.Util=de;const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ve(re){if(re[0]>="ï"){let N;if(re[0]==="þ"&&re[1]==="ÿ"?N="utf-16be":re[0]==="ÿ"&&re[1]==="þ"?N="utf-16le":re[0]==="ï"&&re[1]==="»"&&re[2]==="¿"&&(N="utf-8"),N)try{const be=new TextDecoder(N,{fatal:!0}),Ne=z(re);return be.decode(Ne)}catch(be){ge(`stringToPDFString: "${be}".`)}}const oe=[];for(let N=0,be=re.length;N<be;N++){const Ne=me[re.charCodeAt(N)];oe.push(Ne?String.fromCharCode(Ne):re.charAt(N))}return oe.join("")}function Se(re){return decodeURIComponent(escape(re))}function De(re){return unescape(encodeURIComponent(re))}function Me(re){return typeof re=="object"&&(re==null?void 0:re.byteLength)!==void 0}function Le(re,oe){if(re.length!==oe.length)return!1;for(let N=0,be=re.length;N<be;N++)if(re[N]!==oe[N])return!1;return!0}function qe(re=new Date){return[re.getUTCFullYear().toString(),(re.getUTCMonth()+1).toString().padStart(2,"0"),re.getUTCDate().toString().padStart(2,"0"),re.getUTCHours().toString().padStart(2,"0"),re.getUTCMinutes().toString().padStart(2,"0"),re.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ke{constructor(){Re(this,Oe,!1);this.promise=new Promise((oe,N)=>{this.resolve=be=>{Ie(this,Oe,!0),oe(be)},this.reject=be=>{Ie(this,Oe,!0),N(be)}})}get settled(){return W(this,Oe)}}Oe=new WeakMap,e.PromiseCapability=Ke;let Y=null,Te=null;function Pe(re){return Y||(Y=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Te=new Map([["ﬅ","ſt"]])),re.replaceAll(Y,(oe,N,be)=>N?N.normalize("NFKC"):Te.get(be))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var a,n,s,o,Dt,qt,u,h,f,d,p,g,m,y,rr,b,x,nr,T,k;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:A,NodeCMapReaderFactory:w,NodeFilterFactory:E,NodeStandardFontDataFactory:F}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=A,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=w,exports.DefaultFilterFactory=DefaultFilterFactory=E,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=F}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:A}=__w_pdfjs_require__(21);createPDFNetworkStream=w=>new A(w)}else{const{PDFNetworkStream:A}=__w_pdfjs_require__(24),{PDFFetchStream:w}=__w_pdfjs_require__(25);createPDFNetworkStream=E=>(0,_display_utils.isValidFetchUrl)(E.url)?new w(E):new A(E)}function getDocument(A){if(typeof A=="string"||A instanceof URL?A={url:A}:(0,_util.isArrayBuffer)(A)&&(A={data:A}),typeof A!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const w=new PDFDocumentLoadingTask,{docId:E}=w,F=A.url?getUrlProp(A.url):null,O=A.data?getDataProp(A.data):null,M=A.httpHeaders||null,V=A.withCredentials===!0,G=A.password??null,te=A.range instanceof PDFDataRangeTransport?A.range:null,ce=Number.isInteger(A.rangeChunkSize)&&A.rangeChunkSize>0?A.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let se=A.worker instanceof PDFWorker?A.worker:null;const le=A.verbosity,fe=typeof A.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(A.docBaseUrl)?A.docBaseUrl:null,ge=typeof A.cMapUrl=="string"?A.cMapUrl:null,xe=A.cMapPacked!==!1,_e=A.CMapReaderFactory||DefaultCMapReaderFactory,Ce=typeof A.standardFontDataUrl=="string"?A.standardFontDataUrl:null,ae=A.StandardFontDataFactory||DefaultStandardFontDataFactory,B=A.stopAtErrors!==!0,I=Number.isInteger(A.maxImageSize)&&A.maxImageSize>-1?A.maxImageSize:-1,q=A.isEvalSupported!==!1,K=typeof A.isOffscreenCanvasSupported=="boolean"?A.isOffscreenCanvasSupported:!_is_node.isNodeJS,Q=Number.isInteger(A.canvasMaxAreaInBytes)?A.canvasMaxAreaInBytes:-1,$=typeof A.disableFontFace=="boolean"?A.disableFontFace:_is_node.isNodeJS,Z=A.fontExtraProperties===!0,J=A.enableXfa===!0,R=A.ownerDocument||globalThis.document,U=A.disableRange===!0,z=A.disableStream===!0,L=A.disableAutoFetch===!0,j=A.pdfBug===!0,ee=te?te.length:A.length??NaN,he=typeof A.useSystemFonts=="boolean"?A.useSystemFonts:!_is_node.isNodeJS&&!$,ye=typeof A.useWorkerFetch=="boolean"?A.useWorkerFetch:_e===_display_utils.DOMCMapReaderFactory&&ae===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ge,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Ce,document.baseURI),pe=A.canvasFactory||new DefaultCanvasFactory({ownerDocument:R}),ne=A.filterFactory||new DefaultFilterFactory({docId:E,ownerDocument:R}),de=null;(0,_util.setVerbosityLevel)(le);const me={canvasFactory:pe,filterFactory:ne};if(ye||(me.cMapReaderFactory=new _e({baseUrl:ge,isCompressed:xe}),me.standardFontDataFactory=new ae({baseUrl:Ce})),!se){const De={verbosity:le,port:_worker_options.GlobalWorkerOptions.workerPort};se=De.port?PDFWorker.fromPort(De):new PDFWorker(De),w._worker=se}const ve={docId:E,apiVersion:"3.6.172",data:O,password:G,disableAutoFetch:L,rangeChunkSize:ce,length:ee,docBaseUrl:fe,enableXfa:J,evaluatorOptions:{maxImageSize:I,disableFontFace:$,ignoreErrors:B,isEvalSupported:q,isOffscreenCanvasSupported:K,canvasMaxAreaInBytes:Q,fontExtraProperties:Z,useSystemFonts:he,cMapUrl:ye?ge:null,standardFontDataUrl:ye?Ce:null}},Se={ignoreErrors:B,isEvalSupported:q,disableFontFace:$,fontExtraProperties:Z,enableXfa:J,ownerDocument:R,disableAutoFetch:L,pdfBug:j,styleElement:de};return se.promise.then(function(){if(w.destroyed)throw new Error("Loading aborted");const De=_fetchDocument(se,ve),Me=new Promise(function(Le){let qe;te?qe=new _transport_stream.PDFDataTransportStream({length:ee,initialData:te.initialData,progressiveDone:te.progressiveDone,contentDispositionFilename:te.contentDispositionFilename,disableRange:U,disableStream:z},te):O||(qe=createPDFNetworkStream({url:F,length:ee,httpHeaders:M,withCredentials:V,rangeChunkSize:ce,disableRange:U,disableStream:z})),Le(qe)});return Promise.all([De,Me]).then(function([Le,qe]){if(w.destroyed)throw new Error("Loading aborted");const Ke=new _message_handler.MessageHandler(E,Le,se.port),Y=new WorkerTransport(Ke,w,qe,Se,me);w._transport=Y,Ke.send("Ready",null)})}).catch(w._capability.reject),w}async function _fetchDocument(A,w){if(A.destroyed)throw new Error("Worker was destroyed");const E=await A.messageHandler.sendWithPromise("GetDocRequest",w,w.data?[w.data.buffer]:null);if(A.destroyed)throw new Error("Worker was destroyed");return E}function getUrlProp(A){if(A instanceof URL)return A.href;try{return new URL(A,window.location).href}catch{if(_is_node.isNodeJS&&typeof A=="string")return A}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(A){if(_is_node.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(A);if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)return A;if(typeof A=="string")return(0,_util.stringToBytes)(A);if(typeof A=="object"&&!isNaN(A==null?void 0:A.length)||(0,_util.isArrayBuffer)(A))return new Uint8Array(A);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Wt(e,a)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var w;this.destroyed=!0,await((w=this._transport)==null?void 0:w.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};a=new WeakMap,Re(e,a,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(w,E,F=!1,O=null){this.length=w,this.initialData=E,this.progressiveDone=F,this.contentDispositionFilename=O,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(w){this._rangeListeners.push(w)}addProgressListener(w){this._progressListeners.push(w)}addProgressiveReadListener(w){this._progressiveReadListeners.push(w)}addProgressiveDoneListener(w){this._progressiveDoneListeners.push(w)}onDataRange(w,E){for(const F of this._rangeListeners)F(w,E)}onDataProgress(w,E){this._readyCapability.promise.then(()=>{for(const F of this._progressListeners)F(w,E)})}onDataProgressiveRead(w){this._readyCapability.promise.then(()=>{for(const E of this._progressiveReadListeners)E(w)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const w of this._progressiveDoneListeners)w()})}transportReady(){this._readyCapability.resolve()}requestDataRange(w,E){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(w,E){this._pdfInfo=w,this._transport=E}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(w){return this._transport.getPage(w)}getPageIndex(w){return this._transport.getPageIndex(w)}getDestinations(){return this._transport.getDestinations()}getDestination(w){return this._transport.getDestination(w)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(w=!1){return this._transport.startCleanup(w||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(w,E,F,O=!1){Re(this,o);Re(this,n,null);Re(this,s,!1);this._pageIndex=w,this._pageInfo=E,this._transport=F,this._stats=O?new _display_utils.StatTimer:null,this._pdfBug=O,this.commonObjs=F.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:w,rotation:E=this.rotate,offsetX:F=0,offsetY:O=0,dontFlip:M=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:w,rotation:E,offsetX:F,offsetY:O,dontFlip:M})}getAnnotations({intent:w="display"}={}){const E=this._transport.getRenderingIntent(w);return this._transport.getAnnotations(this._pageIndex,E.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var w;return((w=this._transport._htmlForXfa)==null?void 0:w.children[this._pageIndex])||null}render({canvasContext:w,viewport:E,intent:F="display",annotationMode:O=_util.AnnotationMode.ENABLE,transform:M=null,background:V=null,optionalContentConfigPromise:G=null,annotationCanvasMap:te=null,pageColors:ce=null,printAnnotationStorage:se=null}){var ae,B,I;if((ae=arguments[0])!=null&&ae.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(B=this._stats)==null||B.time("Overall");const le=this._transport.getRenderingIntent(F,O,se);Ie(this,s,!1),Ee(this,o,qt).call(this),G||(G=this._transport.getOptionalContentConfig());let fe=this._intentStates.get(le.cacheKey);fe||(fe=Object.create(null),this._intentStates.set(le.cacheKey,fe)),fe.streamReaderCancelTimeout&&(clearTimeout(fe.streamReaderCancelTimeout),fe.streamReaderCancelTimeout=null);const ge=!!(le.renderingIntent&_util.RenderingIntentFlag.PRINT);fe.displayReadyCapability||(fe.displayReadyCapability=new _util.PromiseCapability,fe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(le));const xe=q=>{var K,Q;fe.renderTasks.delete(_e),(this._maybeCleanupAfterRender||ge)&&Ie(this,s,!0),Ee(this,o,Dt).call(this,!ge),q?(_e.capability.reject(q),this._abortOperatorList({intentState:fe,reason:q instanceof Error?q:new Error(q)})):_e.capability.resolve(),(K=this._stats)==null||K.timeEnd("Rendering"),(Q=this._stats)==null||Q.timeEnd("Overall")},_e=new InternalRenderTask({callback:xe,params:{canvasContext:w,viewport:E,transform:M,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:te,operatorList:fe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ge,pdfBug:this._pdfBug,pageColors:ce});(fe.renderTasks||(fe.renderTasks=new Set)).add(_e);const Ce=_e.task;return Promise.all([fe.displayReadyCapability.promise,G]).then(([q,K])=>{var Q;if(W(this,s)){xe();return}(Q=this._stats)==null||Q.time("Rendering"),_e.initializeGraphics({transparency:q,optionalContentConfig:K}),_e.operatorListChanged()}).catch(xe),Ce}getOperatorList({intent:w="display",annotationMode:E=_util.AnnotationMode.ENABLE,printAnnotationStorage:F=null}={}){var te;function O(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(G))}const M=this._transport.getRenderingIntent(w,E,F,!0);let V=this._intentStates.get(M.cacheKey);V||(V=Object.create(null),this._intentStates.set(M.cacheKey,V));let G;return V.opListReadCapability||(G=Object.create(null),G.operatorListChanged=O,V.opListReadCapability=new _util.PromiseCapability,(V.renderTasks||(V.renderTasks=new Set)).add(G),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(te=this._stats)==null||te.time("Page Request"),this._pumpOperatorList(M)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:w=!1,disableNormalization:E=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:w===!0,disableNormalization:E===!0},{highWaterMark:100,size(O){return O.items.length}})}getTextContent(w={}){if(this._transport._htmlForXfa)return this.getXfa().then(F=>_xfa_text.XfaText.textContent(F));const E=this.streamTextContent(w);return new Promise(function(F,O){function M(){V.read().then(function({value:te,done:ce}){if(ce){F(G);return}Object.assign(G.styles,te.styles),G.items.push(...te.items),M()},O)}const V=E.getReader(),G={items:[],styles:Object.create(null)};M()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const w=[];for(const E of this._intentStates.values())if(this._abortOperatorList({intentState:E,reason:new Error("Page was destroyed."),force:!0}),!E.opListReadCapability)for(const F of E.renderTasks)w.push(F.completed),F.cancel();return this.objs.clear(),Ie(this,s,!1),Ee(this,o,qt).call(this),Promise.all(w)}cleanup(w=!1){Ie(this,s,!0);const E=Ee(this,o,Dt).call(this,!1);return w&&E&&this._stats&&(this._stats=new _display_utils.StatTimer),E}_startRenderPage(w,E){var O,M;const F=this._intentStates.get(E);F&&((O=this._stats)==null||O.timeEnd("Page Request"),(M=F.displayReadyCapability)==null||M.resolve(w))}_renderPageChunk(w,E){for(let F=0,O=w.length;F<O;F++)E.operatorList.fnArray.push(w.fnArray[F]),E.operatorList.argsArray.push(w.argsArray[F]);E.operatorList.lastChunk=w.lastChunk,E.operatorList.separateAnnots=w.separateAnnots;for(const F of E.renderTasks)F.operatorListChanged();w.lastChunk&&Ee(this,o,Dt).call(this,!0)}_pumpOperatorList({renderingIntent:w,cacheKey:E,annotationStorageMap:F}){const M=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:w,cacheKey:E,annotationStorage:F}).getReader(),V=this._intentStates.get(E);V.streamReader=M;const G=()=>{M.read().then(({value:te,done:ce})=>{if(ce){V.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(te,V),G())},te=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const ce of V.renderTasks)ce.operatorListChanged();Ee(this,o,Dt).call(this,!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(te);else if(V.opListReadCapability)V.opListReadCapability.reject(te);else throw te}})};G()}_abortOperatorList({intentState:w,reason:E,force:F=!1}){if(w.streamReader){if(w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null),!F){if(w.renderTasks.size>0)return;if(E instanceof _display_utils.RenderingCancelledException){let O=RENDERING_CANCELLED_TIMEOUT;E.extraDelay>0&&E.extraDelay<1e3&&(O+=E.extraDelay),w.streamReaderCancelTimeout=setTimeout(()=>{w.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:w,reason:E,force:!0})},O);return}}if(w.streamReader.cancel(new _util.AbortException(E.message)).catch(()=>{}),w.streamReader=null,!this._transport.destroyed){for(const[O,M]of this._intentStates)if(M===w){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,s=new WeakMap,o=new WeakSet,Dt=function(w=!1){if(Ee(this,o,qt).call(this),!W(this,s))return!1;if(w)return Ie(this,n,setTimeout(()=>{Ie(this,n,null),Ee(this,o,Dt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:E,operatorList:F}of this._intentStates.values())if(E.size>0||!F.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ie(this,s,!1),!0},qt=function(){W(this,n)&&(clearTimeout(W(this,n)),Ie(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Re(this,u,new Set);Re(this,h,Promise.resolve())}postMessage(w,E){const F={data:structuredClone(w,E?{transfer:E}:null)};W(this,h).then(()=>{for(const O of W(this,u))O.call(this,F)})}addEventListener(w,E){W(this,u).add(E)}removeEventListener(w,E){W(this,u).delete(E)}terminate(){W(this,u).clear()}}u=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,w){let E;try{if(E=new URL(A),!E.origin||E.origin==="null")return!1}catch{return!1}const F=new URL(w,E);return E.origin===F.origin},PDFWorkerUtil.createCDNWrapper=function(A){const w=`importScripts("${A}");`;return URL.createObjectURL(new Blob([w]))}}const _PDFWorker=class _PDFWorker{constructor({name:A=null,port:w=null,verbosity:E=(0,_util.getVerbosityLevel)()}={}){if(w&&W(_PDFWorker,d).has(w))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=A,this.destroyed=!1,this.verbosity=E,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,w){W(_PDFWorker,d).set(w,this),this._initializeFromPort(w);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:A}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const w=new Worker(A),E=new _message_handler.MessageHandler("main","worker",w),F=()=>{w.removeEventListener("error",O),E.destroy(),w.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},O=()=>{this._webWorker||F()};w.addEventListener("error",O),E.on("test",V=>{if(w.removeEventListener("error",O),this.destroyed){F();return}V?(this._messageHandler=E,this._port=w,this._webWorker=w,this._readyCapability.resolve(),E.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),E.destroy(),w.terminate())}),E.on("ready",V=>{if(w.removeEventListener("error",O),this.destroyed){F();return}try{M()}catch{this._setupFakeWorker()}});const M=()=>{const V=new Uint8Array;E.send("test",V,[V.buffer])};M();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const w=new LoopbackPort;this._port=w;const E=`fake${PDFWorkerUtil.fakeWorkerId++}`,F=new _message_handler.MessageHandler(E+"_worker",E,w);A.setup(F,w);const O=new _message_handler.MessageHandler(E,E+"_worker",w);this._messageHandler=O,this._readyCapability.resolve(),O.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),W(_PDFWorker,d).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return W(this,d).has(A.port)?W(this,d).get(A.port):new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};d=new WeakMap,Re(_PDFWorker,d,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(w,E,F,O,M){Re(this,y);Re(this,p,new Map);Re(this,g,new Map);Re(this,m,new Map);this.messageHandler=w,this.loadingTask=E,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:O.ownerDocument,styleElement:O.styleElement}),this._params=O,this.canvasFactory=M.canvasFactory,this.filterFactory=M.filterFactory,this.cMapReaderFactory=M.cMapReaderFactory,this.standardFontDataFactory=M.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=F,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(w,E=_util.AnnotationMode.ENABLE,F=null,O=!1){let M=_util.RenderingIntentFlag.DISPLAY,V=null;switch(w){case"any":M=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":M=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${w}`)}switch(E){case _util.AnnotationMode.DISABLE:M+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:M+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:M+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(M&_util.RenderingIntentFlag.PRINT&&F instanceof _annotation_storage.PrintAnnotationStorage?F:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${E}`)}return O&&(M+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:M,cacheKey:`${M}_${_annotation_storage.AnnotationStorage.getHash(V)}`,annotationStorageMap:V}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const w=[];for(const F of W(this,g).values())w.push(F._destroy());W(this,g).clear(),W(this,m).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const E=this.messageHandler.sendWithPromise("Terminate",null);return w.push(E),Promise.all(w).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),W(this,p).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:w,loadingTask:E}=this;w.on("GetReader",(F,O)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=M=>{this._lastProgress={loaded:M.loaded,total:M.total}},O.onPull=()=>{this._fullReader.read().then(function({value:M,done:V}){if(V){O.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{O.error(M)})},O.onCancel=M=>{this._fullReader.cancel(M),O.ready.catch(V=>{if(!this.destroyed)throw V})}}),w.on("ReaderHeadersReady",F=>{const O=new _util.PromiseCapability,M=this._fullReader;return M.headersReady.then(()=>{var V;(!M.isStreamingSupported||!M.isRangeSupported)&&(this._lastProgress&&((V=E.onProgress)==null||V.call(E,this._lastProgress)),M.onProgress=G=>{var te;(te=E.onProgress)==null||te.call(E,{loaded:G.loaded,total:G.total})}),O.resolve({isStreamingSupported:M.isStreamingSupported,isRangeSupported:M.isRangeSupported,contentLength:M.contentLength})},O.reject),O.promise}),w.on("GetRangeReader",(F,O)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const M=this._networkStream.getRangeReader(F.begin,F.end);if(!M){O.close();return}O.onPull=()=>{M.read().then(function({value:V,done:G}){if(G){O.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{O.error(V)})},O.onCancel=V=>{M.cancel(V),O.ready.catch(G=>{if(!this.destroyed)throw G})}}),w.on("GetDoc",({pdfInfo:F})=>{this._numPages=F.numPages,this._htmlForXfa=F.htmlForXfa,delete F.htmlForXfa,E._capability.resolve(new PDFDocumentProxy(F,this))}),w.on("DocException",function(F){let O;switch(F.name){case"PasswordException":O=new _util.PasswordException(F.message,F.code);break;case"InvalidPDFException":O=new _util.InvalidPDFException(F.message);break;case"MissingPDFException":O=new _util.MissingPDFException(F.message);break;case"UnexpectedResponseException":O=new _util.UnexpectedResponseException(F.message,F.status);break;case"UnknownErrorException":O=new _util.UnknownErrorException(F.message,F.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}E._capability.reject(O)}),w.on("PasswordRequest",F=>{if(this._passwordCapability=new _util.PromiseCapability,E.onPassword){const O=M=>{M instanceof Error?this._passwordCapability.reject(M):this._passwordCapability.resolve({password:M})};try{E.onPassword(O,F.code)}catch(M){this._passwordCapability.reject(M)}}else this._passwordCapability.reject(new _util.PasswordException(F.message,F.code));return this._passwordCapability.promise}),w.on("DataLoaded",F=>{var O;(O=E.onProgress)==null||O.call(E,{loaded:F.length,total:F.length}),this.downloadInfoCapability.resolve(F)}),w.on("StartRenderPage",F=>{if(this.destroyed)return;W(this,g).get(F.pageIndex)._startRenderPage(F.transparency,F.cacheKey)}),w.on("commonobj",([F,O,M])=>{var V;if(!this.destroyed&&!this.commonObjs.has(F))switch(O){case"Font":const G=this._params;if("error"in M){const se=M.error;(0,_util.warn)(`Error during font loading: ${se}`),this.commonObjs.resolve(F,se);break}const te=G.pdfBug&&((V=globalThis.FontInspector)!=null&&V.enabled)?(se,le)=>globalThis.FontInspector.fontAdded(se,le):null,ce=new _font_loader.FontFaceObject(M,{isEvalSupported:G.isEvalSupported,disableFontFace:G.disableFontFace,ignoreErrors:G.ignoreErrors,inspectFont:te});this.fontLoader.bind(ce).catch(se=>w.sendWithPromise("FontFallback",{id:F})).finally(()=>{!G.fontExtraProperties&&ce.data&&(ce.data=null),this.commonObjs.resolve(F,ce)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(F,M);break;default:throw new Error(`Got unknown common object type ${O}`)}}),w.on("obj",([F,O,M,V])=>{var te;if(this.destroyed)return;const G=W(this,g).get(O);if(!G.objs.has(F))switch(M){case"Image":if(G.objs.resolve(F,V),V){let ce;if(V.bitmap){const{width:se,height:le}=V;ce=se*le*4}else ce=((te=V.data)==null?void 0:te.length)||0;ce>_util.MAX_IMAGE_SIZE_TO_CACHE&&(G._maybeCleanupAfterRender=!0)}break;case"Pattern":G.objs.resolve(F,V);break;default:throw new Error(`Got unknown object type ${M}`)}}),w.on("DocProgress",F=>{var O;this.destroyed||(O=E.onProgress)==null||O.call(E,{loaded:F.loaded,total:F.total})}),w.on("FetchBuiltInCMap",F=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(F):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),w.on("FetchStandardFontData",F=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(F):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var w;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((w=this._fullReader)==null?void 0:w.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(w){if(!Number.isInteger(w)||w<=0||w>this._numPages)return Promise.reject(new Error("Invalid page request."));const E=w-1,F=W(this,m).get(E);if(F)return F;const O=this.messageHandler.sendWithPromise("GetPage",{pageIndex:E}).then(M=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new PDFPageProxy(E,M,this,this._params.pdfBug);return W(this,g).set(E,V),V});return W(this,m).set(E,O),O}getPageIndex(w){return typeof w!="object"||w===null||!Number.isInteger(w.num)||w.num<0||!Number.isInteger(w.gen)||w.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:w.num,gen:w.gen})}getAnnotations(w,E){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:w,intent:E})}getFieldObjects(){return Ee(this,y,rr).call(this,"GetFieldObjects")}hasJSActions(){return Ee(this,y,rr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(w){return typeof w!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:w})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(w){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:w})}getStructTree(w){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:w})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(w=>new _optional_content_config.OptionalContentConfig(w))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const w="GetMetadata",E=W(this,p).get(w);if(E)return E;const F=this.messageHandler.sendWithPromise(w,null).then(O=>{var M,V;return{info:O[0],metadata:O[1]?new _metadata.Metadata(O[1]):null,contentDispositionFilename:((M=this._fullReader)==null?void 0:M.filename)??null,contentLength:((V=this._fullReader)==null?void 0:V.contentLength)??null}});return W(this,p).set(w,F),F}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(w=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const E of W(this,g).values())if(!E.cleanup())throw new Error(`startCleanup: Page ${E.pageNumber} is currently rendering.`);this.commonObjs.clear(),w||this.fontLoader.clear(),W(this,p).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:w,enableXfa:E}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:w,enableXfa:E})}}p=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakSet,rr=function(w,E=null){const F=W(this,p).get(w);if(F)return F;const O=this.messageHandler.sendWithPromise(w,E);return W(this,p).set(w,O),O};class PDFObjects{constructor(){Re(this,x);Re(this,b,Object.create(null))}get(w,E=null){if(E){const O=Ee(this,x,nr).call(this,w);return O.capability.promise.then(()=>E(O.data)),null}const F=W(this,b)[w];if(!(F!=null&&F.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${w}.`);return F.data}has(w){const E=W(this,b)[w];return(E==null?void 0:E.capability.settled)||!1}resolve(w,E=null){const F=Ee(this,x,nr).call(this,w);F.data=E,F.capability.resolve()}clear(){var w;for(const E in W(this,b)){const{data:F}=W(this,b)[E];(w=F==null?void 0:F.bitmap)==null||w.close()}Ie(this,b,Object.create(null))}}b=new WeakMap,x=new WeakSet,nr=function(w){const E=W(this,b)[w];return E||(W(this,b)[w]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(w){Re(this,T,null);Ie(this,T,w),this.onContinue=null}get promise(){return W(this,T).capability.promise}cancel(w=0){W(this,T).cancel(null,w)}get separateAnnots(){const{separateAnnots:w}=W(this,T).operatorList;if(!w)return!1;const{annotationCanvasMap:E}=W(this,T);return w.form||w.canvas&&(E==null?void 0:E.size)>0}}T=new WeakMap,exports.RenderTask=RenderTask;const S=class S{constructor({callback:w,params:E,objs:F,commonObjs:O,annotationCanvasMap:M,operatorList:V,pageIndex:G,canvasFactory:te,filterFactory:ce,useRequestAnimationFrame:se=!1,pdfBug:le=!1,pageColors:fe=null}){this.callback=w,this.params=E,this.objs=F,this.commonObjs=O,this.annotationCanvasMap=M,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=G,this.canvasFactory=te,this.filterFactory=ce,this._pdfBug=le,this.pageColors=fe,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=se===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=E.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:w=!1,optionalContentConfig:E}){var G,te;if(this.cancelled)return;if(this._canvas){if(W(S,k).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");W(S,k).add(this._canvas)}this._pdfBug&&((G=globalThis.StepperManager)!=null&&G.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:F,viewport:O,transform:M,background:V}=this.params;this.gfx=new _canvas.CanvasGraphics(F,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:E},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:M,viewport:O,transparency:w,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,(te=this.graphicsReadyCallback)==null||te.call(this)}cancel(w=null,E=0){var F;this.running=!1,this.cancelled=!0,(F=this.gfx)==null||F.endDrawing(),this._canvas&&W(S,k).delete(this._canvas),this.callback(w||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",E))}operatorListChanged(){var w;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(w=this.stepper)==null||w.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&W(S,k).delete(this._canvas),this.callback())))}};k=new WeakMap,Re(S,k,new WeakSet);let InternalRenderTask=S;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(a,e,n)=>{var h,f,d,Or,g;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var s=n(1),o=n(4),l=n(8);class c{constructor(){Re(this,d);Re(this,h,!1);Re(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(y,_){const b=W(this,f).get(y);return b===void 0?_:Object.assign(_,b)}getRawValue(y){return W(this,f).get(y)}remove(y){if(W(this,f).delete(y),W(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const _ of W(this,f).values())if(_ instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(y,_){const b=W(this,f).get(y);let x=!1;if(b!==void 0)for(const[P,T]of Object.entries(_))b[P]!==T&&(x=!0,b[P]=T);else x=!0,W(this,f).set(y,_);x&&Ee(this,d,Or).call(this),_ instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(_.constructor._type)}has(y){return W(this,f).has(y)}getAll(){return W(this,f).size>0?(0,s.objectFromMap)(W(this,f)):null}setAll(y){for(const[_,b]of Object.entries(y))this.setValue(_,b)}get size(){return W(this,f).size}resetModified(){W(this,h)&&(Ie(this,h,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new u(this)}get serializable(){if(W(this,f).size===0)return null;const y=new Map;for(const[_,b]of W(this,f)){const x=b instanceof o.AnnotationEditor?b.serialize():b;x&&y.set(_,x)}return y}static getHash(y){if(!y)return"";const _=new l.MurmurHash3_64;for(const[b,x]of y)_.update(`${b}:${JSON.stringify(x)}`);return _.hexdigest()}}h=new WeakMap,f=new WeakMap,d=new WeakSet,Or=function(){W(this,h)||(Ie(this,h,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=c;class u extends c{constructor(_){super();Re(this,g,null);Ie(this,g,structuredClone(_.serializable))}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return W(this,g)}}g=new WeakMap,e.PrintAnnotationStorage=u},(a,e,n)=>{var c,u,h,f,d,p;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var s=n(5),o=n(1);const g=class g{constructor(y){Re(this,c,this.focusin.bind(this));Re(this,u,this.focusout.bind(this));Re(this,h,!1);Re(this,f,!1);Re(this,d,!1);rt(this,"_uiManager",null);Re(this,p,g._zIndex++);this.constructor===g&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=y.parent,this.id=y.id,this.width=this.height=null,this.pageIndex=y.parent.pageIndex,this.name=y.name,this.div=null,this._uiManager=y.uiManager;const{rotation:_,rawDims:{pageWidth:b,pageHeight:x,pageX:P,pageY:T}}=this.parent.viewport;this.rotation=_,this.pageRotation=(360+_-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[b,x],this.pageTranslation=[P,T];const[k,S]=this.parentDimensions;this.x=y.x/k,this.y=y.y/S,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(y){this._uiManager.addCommands(y)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=W(this,p)}setParent(y){y!==null&&(this.pageIndex=y.pageIndex,this.pageDimensions=y.pageDimensions),this.parent=y}focusin(y){W(this,h)?Ie(this,h,!1):this.parent.setSelected(this)}focusout(y){var b;if(!this.isAttachedToDOM)return;const _=y.relatedTarget;_!=null&&_.closest(`#${this.id}`)||(y.preventDefault(),(b=this.parent)!=null&&b.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(y){const _=this.parent.div.getBoundingClientRect();this.startX=y.clientX-_.x,this.startY=y.clientY-_.y,y.dataTransfer.setData("text/plain",this.id),y.dataTransfer.effectAllowed="move"}setAt(y,_,b,x){const[P,T]=this.parentDimensions;[b,x]=this.screenToPageTranslation(b,x),this.x=(y+b)/P,this.y=(_+x)/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(y,_){const[b,x]=this.parentDimensions;[y,_]=this.screenToPageTranslation(y,_),this.x+=y/b,this.y+=_/x,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(y,_){switch(this.parentRotation){case 90:return[_,-y];case 180:return[-y,-_];case 270:return[-_,y];default:return[y,_]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:y}=this._uiManager.viewParameters,[_,b]=this.pageDimensions;return[_*y,b*y]}setDims(y,_){const[b,x]=this.parentDimensions;this.div.style.width=`${100*y/b}%`,this.div.style.height=`${100*_/x}%`}fixDims(){const{style:y}=this.div,{height:_,width:b}=y,x=b.endsWith("%"),P=_.endsWith("%");if(x&&P)return;const[T,k]=this.parentDimensions;x||(y.width=`${100*parseFloat(b)/T}%`),P||(y.height=`${100*parseFloat(_)/k}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",W(this,c)),this.div.addEventListener("focusout",W(this,u));const[y,_]=this.getInitialTranslation();return this.translate(y,_),(0,s.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(y){const{isMac:_}=o.FeatureTest.platform;if(y.button!==0||y.ctrlKey&&_){y.preventDefault();return}y.ctrlKey&&!_||y.shiftKey||y.metaKey&&_?this.parent.toggleSelected(this):this.parent.setSelected(this),Ie(this,h,!0)}getRect(y,_){const b=this.parentScale,[x,P]=this.pageDimensions,[T,k]=this.pageTranslation,S=y/b,A=_/b,w=this.x*x,E=this.y*P,F=this.width*x,O=this.height*P;switch(this.rotation){case 0:return[w+S+T,P-E-A-O+k,w+S+F+T,P-E-A+k];case 90:return[w+A+T,P-E+S+k,w+A+O+T,P-E+S+F+k];case 180:return[w-S-F+T,P-E+A+k,w-S+T,P-E+A+O+k];case 270:return[w-A-O+T,P-E-S-F+k,w-A+T,P-E-S+k];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(y,_){const[b,x,P,T]=y,k=P-b,S=T-x;switch(this.rotation){case 0:return[b,_-T,k,S];case 90:return[b,_-x,S,k];case 180:return[P,_-x,k,S];case 270:return[P,_-T,S,k];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ie(this,d,!0)}disableEditMode(){Ie(this,d,!1)}isInEditMode(){return W(this,d)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var y;(y=this.div)==null||y.addEventListener("focusin",W(this,c))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(y,_,b){const x=new this.prototype.constructor({parent:_,id:_.getNextId(),uiManager:b});x.rotation=y.rotation;const[P,T]=x.pageDimensions,[k,S,A,w]=x.getRectInCurrentCoords(y.rect,T);return x.x=k/P,x.y=S/T,x.width=A/P,x.height=w/T,x}remove(){this.div.removeEventListener("focusin",W(this,c)),this.div.removeEventListener("focusout",W(this,u)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var y;(y=this.div)==null||y.classList.add("selectedEditor")}unselect(){var y;(y=this.div)==null||y.classList.remove("selectedEditor")}updateParams(y,_){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return W(this,f)}set isEditing(y){Ie(this,f,y),y?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};c=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,rt(g,"_colorManager",new s.ColorManager),rt(g,"_zIndex",1);let l=g;e.AnnotationEditor=l},(a,e,n)=>{var g,m,y,_,b,x,Mr,k,S,A,w,E,F,O,M,V,G,te,ce,se,le,fe,ge,xe,_e,Ce,ae,B,I,q,K,Nr,ir,Ir,Lr,gt,Lt,Br,Ur,ar,Bt,sr;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=l,e.opacityToHex=c;var s=n(1),o=n(6);function l(pe,ne,de){for(const me of de)ne.addEventListener(me,pe[me].bind(pe))}function c(pe){return Math.round(Math.min(255,Math.max(1,255*pe))).toString(16).padStart(2,"0")}class u{constructor(){Re(this,g,0)}getId(){return`${s.AnnotationEditorPrefix}${Wt(this,g)._++}`}}g=new WeakMap;class h{constructor(ne=128){Re(this,m,[]);Re(this,y,!1);Re(this,_);Re(this,b,-1);Ie(this,_,ne)}add({cmd:ne,undo:de,mustExec:me,type:ve=NaN,overwriteIfSameType:Se=!1,keepUndo:De=!1}){if(me&&ne(),W(this,y))return;const Me={cmd:ne,undo:de,type:ve};if(W(this,b)===-1){W(this,m).length>0&&(W(this,m).length=0),Ie(this,b,0),W(this,m).push(Me);return}if(Se&&W(this,m)[W(this,b)].type===ve){De&&(Me.undo=W(this,m)[W(this,b)].undo),W(this,m)[W(this,b)]=Me;return}const Le=W(this,b)+1;Le===W(this,_)?W(this,m).splice(0,1):(Ie(this,b,Le),Le<W(this,m).length&&W(this,m).splice(Le)),W(this,m).push(Me)}undo(){W(this,b)!==-1&&(Ie(this,y,!0),W(this,m)[W(this,b)].undo(),Ie(this,y,!1),Ie(this,b,W(this,b)-1))}redo(){W(this,b)<W(this,m).length-1&&(Ie(this,b,W(this,b)+1),Ie(this,y,!0),W(this,m)[W(this,b)].cmd(),Ie(this,y,!1))}hasSomethingToUndo(){return W(this,b)!==-1}hasSomethingToRedo(){return W(this,b)<W(this,m).length-1}destroy(){Ie(this,m,null)}}m=new WeakMap,y=new WeakMap,_=new WeakMap,b=new WeakMap,e.CommandManager=h;class f{constructor(ne){Re(this,x);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:de}=s.FeatureTest.platform;for(const[me,ve]of ne)for(const Se of me){const De=Se.startsWith("mac+");de&&De?(this.callbacks.set(Se.slice(4),ve),this.allKeys.add(Se.split("+").at(-1))):!de&&!De&&(this.callbacks.set(Se,ve),this.allKeys.add(Se.split("+").at(-1)))}}exec(ne,de){if(!this.allKeys.has(de.key))return;const me=this.callbacks.get(Ee(this,x,Mr).call(this,de));me&&(me.bind(ne)(),de.stopPropagation(),de.preventDefault())}}x=new WeakSet,Mr=function(ne){ne.altKey&&this.buffer.push("alt"),ne.ctrlKey&&this.buffer.push("ctrl"),ne.metaKey&&this.buffer.push("meta"),ne.shiftKey&&this.buffer.push("shift"),this.buffer.push(ne.key);const de=this.buffer.join("+");return this.buffer.length=0,de},e.KeyboardManager=f;const T=class T{get _colors(){const ne=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(ne),(0,s.shadow)(this,"_colors",ne)}convert(ne){const de=(0,o.getRGB)(ne);if(!window.matchMedia("(forced-colors: active)").matches)return de;for(const[me,ve]of this._colors)if(ve.every((Se,De)=>Se===de[De]))return T._colorsMapping.get(me);return de}getHexCode(ne){const de=this._colors.get(ne);return de?s.Util.makeHexColor(...de):ne}};rt(T,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let d=T;e.ColorManager=d;const ye=class ye{constructor(ne,de,me){Re(this,K);Re(this,k,null);Re(this,S,new Map);Re(this,A,new Map);Re(this,w,null);Re(this,E,new h);Re(this,F,0);Re(this,O,null);Re(this,M,new Set);Re(this,V,null);Re(this,G,new u);Re(this,te,!1);Re(this,ce,s.AnnotationEditorType.NONE);Re(this,se,new Set);Re(this,le,this.copy.bind(this));Re(this,fe,this.cut.bind(this));Re(this,ge,this.paste.bind(this));Re(this,xe,this.keydown.bind(this));Re(this,_e,this.onEditingAction.bind(this));Re(this,Ce,this.onPageChanging.bind(this));Re(this,ae,this.onScaleChanging.bind(this));Re(this,B,this.onRotationChanging.bind(this));Re(this,I,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Re(this,q,null);Ie(this,q,ne),Ie(this,V,de),W(this,V)._on("editingaction",W(this,_e)),W(this,V)._on("pagechanging",W(this,Ce)),W(this,V)._on("scalechanging",W(this,ae)),W(this,V)._on("rotationchanging",W(this,B)),Ie(this,w,me),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){Ee(this,K,ir).call(this),W(this,V)._off("editingaction",W(this,_e)),W(this,V)._off("pagechanging",W(this,Ce)),W(this,V)._off("scalechanging",W(this,ae)),W(this,V)._off("rotationchanging",W(this,B));for(const ne of W(this,A).values())ne.destroy();W(this,A).clear(),W(this,S).clear(),W(this,M).clear(),Ie(this,k,null),W(this,se).clear(),W(this,E).destroy()}onPageChanging({pageNumber:ne}){Ie(this,F,ne-1)}focusMainContainer(){W(this,q).focus()}addShouldRescale(ne){W(this,M).add(ne)}removeShouldRescale(ne){W(this,M).delete(ne)}onScaleChanging({scale:ne}){this.commitOrRemove(),this.viewParameters.realScale=ne*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const de of W(this,M))de.onScaleChanging()}onRotationChanging({pagesRotation:ne}){this.commitOrRemove(),this.viewParameters.rotation=ne}addToAnnotationStorage(ne){!ne.isEmpty()&&W(this,w)&&!W(this,w).has(ne.id)&&W(this,w).setValue(ne.id,ne)}copy(ne){if(ne.preventDefault(),W(this,k)&&W(this,k).commitOrRemove(),!this.hasSelection)return;const de=[];for(const me of W(this,se))me.isEmpty()||de.push(me.serialize());de.length!==0&&ne.clipboardData.setData("application/pdfjs",JSON.stringify(de))}cut(ne){this.copy(ne),this.delete()}paste(ne){ne.preventDefault();let de=ne.clipboardData.getData("application/pdfjs");if(!de)return;try{de=JSON.parse(de)}catch(ve){(0,s.warn)(`paste: "${ve.message}".`);return}if(!Array.isArray(de))return;this.unselectAll();const me=W(this,A).get(W(this,F));try{const ve=[];for(const Me of de){const Le=me.deserialize(Me);if(!Le)return;ve.push(Le)}const Se=()=>{for(const Me of ve)Ee(this,K,ar).call(this,Me);Ee(this,K,sr).call(this,ve)},De=()=>{for(const Me of ve)Me.remove()};this.addCommands({cmd:Se,undo:De,mustExec:!0})}catch(ve){(0,s.warn)(`paste: "${ve.message}".`)}}keydown(ne){var de;(de=this.getActive())!=null&&de.shouldGetKeyboardEvents()||ye._keyboardManager.exec(this,ne)}onEditingAction(ne){["undo","redo","delete","selectAll"].includes(ne.name)&&this[ne.name]()}setEditingState(ne){ne?(Ee(this,K,Nr).call(this),Ee(this,K,Ir).call(this),Ee(this,K,gt).call(this,{isEditing:W(this,ce)!==s.AnnotationEditorType.NONE,isEmpty:Ee(this,K,Bt).call(this),hasSomethingToUndo:W(this,E).hasSomethingToUndo(),hasSomethingToRedo:W(this,E).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ee(this,K,ir).call(this),Ee(this,K,Lr).call(this),Ee(this,K,gt).call(this,{isEditing:!1}))}registerEditorTypes(ne){if(!W(this,O)){Ie(this,O,ne);for(const de of W(this,O))Ee(this,K,Lt).call(this,de.defaultPropertiesToUpdate)}}getId(){return W(this,G).getId()}get currentLayer(){return W(this,A).get(W(this,F))}get currentPageIndex(){return W(this,F)}addLayer(ne){W(this,A).set(ne.pageIndex,ne),W(this,te)?ne.enable():ne.disable()}removeLayer(ne){W(this,A).delete(ne.pageIndex)}updateMode(ne){if(Ie(this,ce,ne),ne===s.AnnotationEditorType.NONE)this.setEditingState(!1),Ee(this,K,Ur).call(this);else{this.setEditingState(!0),Ee(this,K,Br).call(this);for(const de of W(this,A).values())de.updateMode(ne)}}updateToolbar(ne){ne!==W(this,ce)&&W(this,V).dispatch("switchannotationeditormode",{source:this,mode:ne})}updateParams(ne,de){if(W(this,O)){for(const me of W(this,se))me.updateParams(ne,de);for(const me of W(this,O))me.updateDefaultParams(ne,de)}}getEditors(ne){const de=[];for(const me of W(this,S).values())me.pageIndex===ne&&de.push(me);return de}getEditor(ne){return W(this,S).get(ne)}addEditor(ne){W(this,S).set(ne.id,ne)}removeEditor(ne){var de;W(this,S).delete(ne.id),this.unselect(ne),(de=W(this,w))==null||de.remove(ne.id)}setActiveEditor(ne){W(this,k)!==ne&&(Ie(this,k,ne),ne&&Ee(this,K,Lt).call(this,ne.propertiesToUpdate))}toggleSelected(ne){if(W(this,se).has(ne)){W(this,se).delete(ne),ne.unselect(),Ee(this,K,gt).call(this,{hasSelectedEditor:this.hasSelection});return}W(this,se).add(ne),ne.select(),Ee(this,K,Lt).call(this,ne.propertiesToUpdate),Ee(this,K,gt).call(this,{hasSelectedEditor:!0})}setSelected(ne){for(const de of W(this,se))de!==ne&&de.unselect();W(this,se).clear(),W(this,se).add(ne),ne.select(),Ee(this,K,Lt).call(this,ne.propertiesToUpdate),Ee(this,K,gt).call(this,{hasSelectedEditor:!0})}isSelected(ne){return W(this,se).has(ne)}unselect(ne){ne.unselect(),W(this,se).delete(ne),Ee(this,K,gt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return W(this,se).size!==0}undo(){W(this,E).undo(),Ee(this,K,gt).call(this,{hasSomethingToUndo:W(this,E).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ee(this,K,Bt).call(this)})}redo(){W(this,E).redo(),Ee(this,K,gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:W(this,E).hasSomethingToRedo(),isEmpty:Ee(this,K,Bt).call(this)})}addCommands(ne){W(this,E).add(ne),Ee(this,K,gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ee(this,K,Bt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ne=[...W(this,se)],de=()=>{for(const ve of ne)ve.remove()},me=()=>{for(const ve of ne)Ee(this,K,ar).call(this,ve)};this.addCommands({cmd:de,undo:me,mustExec:!0})}commitOrRemove(){var ne;(ne=W(this,k))==null||ne.commitOrRemove()}selectAll(){for(const ne of W(this,se))ne.commit();Ee(this,K,sr).call(this,W(this,S).values())}unselectAll(){if(W(this,k)){W(this,k).commitOrRemove();return}if(W(this,se).size!==0){for(const ne of W(this,se))ne.unselect();W(this,se).clear(),Ee(this,K,gt).call(this,{hasSelectedEditor:!1})}}isActive(ne){return W(this,k)===ne}getActive(){return W(this,k)}getMode(){return W(this,ce)}};k=new WeakMap,S=new WeakMap,A=new WeakMap,w=new WeakMap,E=new WeakMap,F=new WeakMap,O=new WeakMap,M=new WeakMap,V=new WeakMap,G=new WeakMap,te=new WeakMap,ce=new WeakMap,se=new WeakMap,le=new WeakMap,fe=new WeakMap,ge=new WeakMap,xe=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ae=new WeakMap,B=new WeakMap,I=new WeakMap,q=new WeakMap,K=new WeakSet,Nr=function(){W(this,q).addEventListener("keydown",W(this,xe))},ir=function(){W(this,q).removeEventListener("keydown",W(this,xe))},Ir=function(){document.addEventListener("copy",W(this,le)),document.addEventListener("cut",W(this,fe)),document.addEventListener("paste",W(this,ge))},Lr=function(){document.removeEventListener("copy",W(this,le)),document.removeEventListener("cut",W(this,fe)),document.removeEventListener("paste",W(this,ge))},gt=function(ne){Object.entries(ne).some(([me,ve])=>W(this,I)[me]!==ve)&&W(this,V).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(W(this,I),ne)})},Lt=function(ne){W(this,V).dispatch("annotationeditorparamschanged",{source:this,details:ne})},Br=function(){if(!W(this,te)){Ie(this,te,!0);for(const ne of W(this,A).values())ne.enable()}},Ur=function(){if(this.unselectAll(),W(this,te)){Ie(this,te,!1);for(const ne of W(this,A).values())ne.disable()}},ar=function(ne){const de=W(this,A).get(ne.pageIndex);de?de.addOrRebuild(ne):this.addEditor(ne)},Bt=function(){if(W(this,S).size===0)return!0;if(W(this,S).size===1)for(const ne of W(this,S).values())return ne.isEmpty();return!1},sr=function(ne){W(this,se).clear();for(const de of ne)de.isEmpty()||(W(this,se).add(de),de.select());Ee(this,K,gt).call(this,{hasSelectedEditor:!0})},rt(ye,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],ye.prototype.selectAll],[["ctrl+z","mac+meta+z"],ye.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ye.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ye.prototype.delete],[["Escape","mac+Escape"],ye.prototype.unselectAll]]));let p=ye;e.AnnotationEditorUIManager=p},(a,e,n)=>{var le,fe,ge,xe,_e,Ce,ae,B,I,Rt,Tt,_t;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=w,e.getColorValues=V,e.getCurrentTransform=G,e.getCurrentTransformInverse=te,e.getFilenameFromUrl=P,e.getPdfFilenameFromUrl=T,e.getRGB=M,e.getXfaPageViewport=O,e.isDataScheme=b,e.isPdfFile=x,e.isValidFetchUrl=S,e.loadScript=A,e.setLayerDimensions=ce;var s=n(7),o=n(1);const l="http://www.w3.org/2000/svg",c="pdfjs_internal_id_";e.AnnotationPrefix=c;const se=class se{};rt(se,"CSS",96),rt(se,"PDF",72),rt(se,"PDF_TO_CSS_UNITS",se.CSS/se.PDF);let u=se;e.PixelsPerInch=u;class h extends s.BaseFilterFactory{constructor({docId:J,ownerDocument:R=globalThis.document}={}){super();Re(this,I);Re(this,le);Re(this,fe);Re(this,ge);Re(this,xe);Re(this,_e);Re(this,Ce);Re(this,ae);Re(this,B,0);Ie(this,ge,J),Ie(this,xe,R)}addFilter(J){if(!J)return"none";let R=W(this,I,Rt).get(J);if(R)return R;let U,z,L,j;if(J.length===1){const ne=J[0],de=new Array(256);for(let me=0;me<256;me++)de[me]=ne[me]/255;j=U=z=L=de.join(",")}else{const[ne,de,me]=J,ve=new Array(256),Se=new Array(256),De=new Array(256);for(let Me=0;Me<256;Me++)ve[Me]=ne[Me]/255,Se[Me]=de[Me]/255,De[Me]=me[Me]/255;U=ve.join(","),z=Se.join(","),L=De.join(","),j=`${U}${z}${L}`}if(R=W(this,I,Rt).get(j),R)return W(this,I,Rt).set(J,R),R;const ee=`g_${W(this,ge)}_transfer_map_${Wt(this,B)._++}`,he=`url(#${ee})`;W(this,I,Rt).set(J,he),W(this,I,Rt).set(j,he);const ye=W(this,xe).createElementNS(l,"filter",l);ye.setAttribute("id",ee),ye.setAttribute("color-interpolation-filters","sRGB");const pe=W(this,xe).createElementNS(l,"feComponentTransfer");return ye.append(pe),Ee(this,I,_t).call(this,pe,"feFuncR",U),Ee(this,I,_t).call(this,pe,"feFuncG",z),Ee(this,I,_t).call(this,pe,"feFuncB",L),W(this,I,Tt).append(ye),he}addHCMFilter(J,R){var me;const U=`${J}-${R}`;if(W(this,Ce)===U)return W(this,ae);if(Ie(this,Ce,U),Ie(this,ae,"none"),(me=W(this,_e))==null||me.remove(),!J||!R)return W(this,ae);W(this,I,Tt).style.color=J,J=getComputedStyle(W(this,I,Tt)).getPropertyValue("color");const z=M(J);J=o.Util.makeHexColor(...z),W(this,I,Tt).style.color=R,R=getComputedStyle(W(this,I,Tt)).getPropertyValue("color");const L=M(R);if(R=o.Util.makeHexColor(...L),W(this,I,Tt).style.color="",J==="#000000"&&R==="#ffffff"||J===R)return W(this,ae);const j=new Array(256);for(let ve=0;ve<=255;ve++){const Se=ve/255;j[ve]=Se<=.03928?Se/12.92:((Se+.055)/1.055)**2.4}const ee=j.join(","),he=`g_${W(this,ge)}_hcm_filter`,ye=Ie(this,_e,W(this,xe).createElementNS(l,"filter",l));ye.setAttribute("id",he),ye.setAttribute("color-interpolation-filters","sRGB");let pe=W(this,xe).createElementNS(l,"feComponentTransfer");ye.append(pe),Ee(this,I,_t).call(this,pe,"feFuncR",ee),Ee(this,I,_t).call(this,pe,"feFuncG",ee),Ee(this,I,_t).call(this,pe,"feFuncB",ee);const ne=W(this,xe).createElementNS(l,"feColorMatrix");ne.setAttribute("type","matrix"),ne.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ye.append(ne),pe=W(this,xe).createElementNS(l,"feComponentTransfer"),ye.append(pe);const de=(ve,Se)=>{const De=z[ve]/255,Me=L[ve]/255,Le=new Array(Se+1);for(let qe=0;qe<=Se;qe++)Le[qe]=De+qe/Se*(Me-De);return Le.join(",")};return Ee(this,I,_t).call(this,pe,"feFuncR",de(0,5)),Ee(this,I,_t).call(this,pe,"feFuncG",de(1,5)),Ee(this,I,_t).call(this,pe,"feFuncB",de(2,5)),W(this,I,Tt).append(ye),Ie(this,ae,`url(#${he})`),W(this,ae)}destroy(J=!1){J&&W(this,ae)||(W(this,fe)&&(W(this,fe).parentNode.parentNode.remove(),Ie(this,fe,null)),W(this,le)&&(W(this,le).clear(),Ie(this,le,null)),Ie(this,B,0))}}le=new WeakMap,fe=new WeakMap,ge=new WeakMap,xe=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ae=new WeakMap,B=new WeakMap,I=new WeakSet,Rt=function(){return W(this,le)||Ie(this,le,new Map)},Tt=function(){if(!W(this,fe)){const J=W(this,xe).createElement("div"),{style:R}=J;R.visibility="hidden",R.contain="strict",R.width=R.height=0,R.position="absolute",R.top=R.left=0,R.zIndex=-1;const U=W(this,xe).createElementNS(l,"svg");U.setAttribute("width",0),U.setAttribute("height",0),Ie(this,fe,W(this,xe).createElementNS(l,"defs")),J.append(U),U.append(W(this,fe)),W(this,xe).body.append(J)}return W(this,fe)},_t=function(J,R,U){const z=W(this,xe).createElementNS(l,R);z.setAttribute("type","discrete"),z.setAttribute("tableValues",U),J.append(z)},e.DOMFilterFactory=h;class f extends s.BaseCanvasFactory{constructor({ownerDocument:Z=globalThis.document}={}){super(),this._document=Z}_createCanvas(Z,J){const R=this._document.createElement("canvas");return R.width=Z,R.height=J,R}}e.DOMCanvasFactory=f;async function d($,Z=!1){if(S($,document.baseURI)){const J=await fetch($);if(!J.ok)throw new Error(J.statusText);return Z?new Uint8Array(await J.arrayBuffer()):(0,o.stringToBytes)(await J.text())}return new Promise((J,R)=>{const U=new XMLHttpRequest;U.open("GET",$,!0),Z&&(U.responseType="arraybuffer"),U.onreadystatechange=()=>{if(U.readyState===XMLHttpRequest.DONE){if(U.status===200||U.status===0){let z;if(Z&&U.response?z=new Uint8Array(U.response):!Z&&U.responseText&&(z=(0,o.stringToBytes)(U.responseText)),z){J(z);return}}R(new Error(U.statusText))}},U.send(null)})}class p extends s.BaseCMapReaderFactory{_fetchData(Z,J){return d(Z,this.isCompressed).then(R=>({cMapData:R,compressionType:J}))}}e.DOMCMapReaderFactory=p;class g extends s.BaseStandardFontDataFactory{_fetchData(Z){return d(Z,!0)}}e.DOMStandardFontDataFactory=g;class m extends s.BaseSVGFactory{_createSVG(Z){return document.createElementNS(l,Z)}}e.DOMSVGFactory=m;class y{constructor({viewBox:Z,scale:J,rotation:R,offsetX:U=0,offsetY:z=0,dontFlip:L=!1}){this.viewBox=Z,this.scale=J,this.rotation=R,this.offsetX=U,this.offsetY=z;const j=(Z[2]+Z[0])/2,ee=(Z[3]+Z[1])/2;let he,ye,pe,ne;switch(R%=360,R<0&&(R+=360),R){case 180:he=-1,ye=0,pe=0,ne=1;break;case 90:he=0,ye=1,pe=1,ne=0;break;case 270:he=0,ye=-1,pe=-1,ne=0;break;case 0:he=1,ye=0,pe=0,ne=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}L&&(pe=-pe,ne=-ne);let de,me,ve,Se;he===0?(de=Math.abs(ee-Z[1])*J+U,me=Math.abs(j-Z[0])*J+z,ve=(Z[3]-Z[1])*J,Se=(Z[2]-Z[0])*J):(de=Math.abs(j-Z[0])*J+U,me=Math.abs(ee-Z[1])*J+z,ve=(Z[2]-Z[0])*J,Se=(Z[3]-Z[1])*J),this.transform=[he*J,ye*J,pe*J,ne*J,de-he*J*j-pe*J*ee,me-ye*J*j-ne*J*ee],this.width=ve,this.height=Se}get rawDims(){const{viewBox:Z}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Z[2]-Z[0],pageHeight:Z[3]-Z[1],pageX:Z[0],pageY:Z[1]})}clone({scale:Z=this.scale,rotation:J=this.rotation,offsetX:R=this.offsetX,offsetY:U=this.offsetY,dontFlip:z=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:Z,rotation:J,offsetX:R,offsetY:U,dontFlip:z})}convertToViewportPoint(Z,J){return o.Util.applyTransform([Z,J],this.transform)}convertToViewportRectangle(Z){const J=o.Util.applyTransform([Z[0],Z[1]],this.transform),R=o.Util.applyTransform([Z[2],Z[3]],this.transform);return[J[0],J[1],R[0],R[1]]}convertToPdfPoint(Z,J){return o.Util.applyInverseTransform([Z,J],this.transform)}}e.PageViewport=y;class _ extends o.BaseException{constructor(Z,J,R=0){super(Z,"RenderingCancelledException"),this.type=J,this.extraDelay=R}}e.RenderingCancelledException=_;function b($){const Z=$.length;let J=0;for(;J<Z&&$[J].trim()==="";)J++;return $.substring(J,J+5).toLowerCase()==="data:"}function x($){return typeof $=="string"&&/\.pdf$/i.test($)}function P($,Z=!1){return Z||([$]=$.split(/[#?]/,1)),$.substring($.lastIndexOf("/")+1)}function T($,Z="document.pdf"){if(typeof $!="string")return Z;if(b($))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Z;const J=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,R=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,U=J.exec($);let z=R.exec(U[1])||R.exec(U[2])||R.exec(U[3]);if(z&&(z=z[0],z.includes("%")))try{z=R.exec(decodeURIComponent(z))[0]}catch{}return z||Z}class k{constructor(){rt(this,"started",Object.create(null));rt(this,"times",[])}time(Z){Z in this.started&&(0,o.warn)(`Timer is already running for ${Z}`),this.started[Z]=Date.now()}timeEnd(Z){Z in this.started||(0,o.warn)(`Timer has not been started for ${Z}`),this.times.push({name:Z,start:this.started[Z],end:Date.now()}),delete this.started[Z]}toString(){const Z=[];let J=0;for(const{name:R}of this.times)J=Math.max(R.length,J);for(const{name:R,start:U,end:z}of this.times)Z.push(`${R.padEnd(J)} ${z-U}ms
`);return Z.join("")}}e.StatTimer=k;function S($,Z){try{const{protocol:J}=Z?new URL($,Z):new URL($);return J==="http:"||J==="https:"}catch{return!1}}function A($,Z=!1){return new Promise((J,R)=>{const U=document.createElement("script");U.src=$,U.onload=function(z){Z&&U.remove(),J(z)},U.onerror=function(){R(new Error(`Cannot load script at: ${U.src}`))},(document.head||document.documentElement).append(U)})}function w($){console.log("Deprecated API usage: "+$)}let E;class F{static toDateObject(Z){if(!Z||typeof Z!="string")return null;E||(E=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const J=E.exec(Z);if(!J)return null;const R=parseInt(J[1],10);let U=parseInt(J[2],10);U=U>=1&&U<=12?U-1:0;let z=parseInt(J[3],10);z=z>=1&&z<=31?z:1;let L=parseInt(J[4],10);L=L>=0&&L<=23?L:0;let j=parseInt(J[5],10);j=j>=0&&j<=59?j:0;let ee=parseInt(J[6],10);ee=ee>=0&&ee<=59?ee:0;const he=J[7]||"Z";let ye=parseInt(J[8],10);ye=ye>=0&&ye<=23?ye:0;let pe=parseInt(J[9],10)||0;return pe=pe>=0&&pe<=59?pe:0,he==="-"?(L+=ye,j+=pe):he==="+"&&(L-=ye,j-=pe),new Date(Date.UTC(R,U,z,L,j,ee))}}e.PDFDateString=F;function O($,{scale:Z=1,rotation:J=0}){const{width:R,height:U}=$.attributes.style,z=[0,0,parseInt(R),parseInt(U)];return new y({viewBox:z,scale:Z,rotation:J})}function M($){if($.startsWith("#")){const Z=parseInt($.slice(1),16);return[(Z&16711680)>>16,(Z&65280)>>8,Z&255]}return $.startsWith("rgb(")?$.slice(4,-1).split(",").map(Z=>parseInt(Z)):$.startsWith("rgba(")?$.slice(5,-1).split(",").map(Z=>parseInt(Z)).slice(0,3):((0,o.warn)(`Not a valid color format: "${$}"`),[0,0,0])}function V($){const Z=document.createElement("span");Z.style.visibility="hidden",document.body.append(Z);for(const J of $.keys()){Z.style.color=J;const R=window.getComputedStyle(Z).color;$.set(J,M(R))}Z.remove()}function G($){const{a:Z,b:J,c:R,d:U,e:z,f:L}=$.getTransform();return[Z,J,R,U,z,L]}function te($){const{a:Z,b:J,c:R,d:U,e:z,f:L}=$.getTransform().invertSelf();return[Z,J,R,U,z,L]}function ce($,Z,J=!1,R=!0){if(Z instanceof y){const{pageWidth:U,pageHeight:z}=Z.rawDims,{style:L}=$,j=`calc(var(--scale-factor) * ${U}px)`,ee=`calc(var(--scale-factor) * ${z}px)`;!J||Z.rotation%180===0?(L.width=j,L.height=ee):(L.width=ee,L.height=j)}R&&$.setAttribute("data-main-rotation",Z.rotation)}},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var s=n(1);class o{constructor(){this.constructor===o&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,p){return"none"}destroy(d=!1){}}e.BaseFilterFactory=o;class l{constructor(){this.constructor===l&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,p){if(d<=0||p<=0)throw new Error("Invalid canvas size");const g=this._createCanvas(d,p);return{canvas:g,context:g.getContext("2d")}}reset(d,p,g){if(!d.canvas)throw new Error("Canvas is not specified");if(p<=0||g<=0)throw new Error("Invalid canvas size");d.canvas.width=p,d.canvas.height=g}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,p){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=l;class c{constructor({baseUrl:d=null,isCompressed:p=!0}){this.constructor===c&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=p}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const p=this.baseUrl+d+(this.isCompressed?".bcmap":""),g=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(p,g).catch(m=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${p}`)})}_fetchData(d,p){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=c;class u{constructor({baseUrl:d=null}){this.constructor===u&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const p=`${this.baseUrl}${d}`;return this._fetchData(p).catch(g=>{throw new Error(`Unable to load font data at: ${p}`)})}_fetchData(d){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=u;class h{constructor(){this.constructor===h&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,p,g=!1){if(d<=0||p<=0)throw new Error("Invalid SVG dimensions");const m=this._createSVG("svg:svg");return m.setAttribute("version","1.1"),g||(m.setAttribute("width",`${d}px`),m.setAttribute("height",`${p}px`)),m.setAttribute("preserveAspectRatio","none"),m.setAttribute("viewBox",`0 0 ${d} ${p}`),m}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,s.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=h},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var s=n(1);const o=3285377520,l=4294901760,c=65535;class u{constructor(f){this.h1=f?f&4294967295:o,this.h2=f?f&4294967295:o}update(f){let d,p;if(typeof f=="string"){d=new Uint8Array(f.length*2),p=0;for(let w=0,E=f.length;w<E;w++){const F=f.charCodeAt(w);F<=255?d[p++]=F:(d[p++]=F>>>8,d[p++]=F&255)}}else if((0,s.isArrayBuffer)(f))d=f.slice(),p=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const g=p>>2,m=p-g*4,y=new Uint32Array(d.buffer,0,g);let _=0,b=0,x=this.h1,P=this.h2;const T=3432918353,k=461845907,S=T&c,A=k&c;for(let w=0;w<g;w++)w&1?(_=y[w],_=_*T&l|_*S&c,_=_<<15|_>>>17,_=_*k&l|_*A&c,x^=_,x=x<<13|x>>>19,x=x*5+3864292196):(b=y[w],b=b*T&l|b*S&c,b=b<<15|b>>>17,b=b*k&l|b*A&c,P^=b,P=P<<13|P>>>19,P=P*5+3864292196);switch(_=0,m){case 3:_^=d[g*4+2]<<16;case 2:_^=d[g*4+1]<<8;case 1:_^=d[g*4],_=_*T&l|_*S&c,_=_<<15|_>>>17,_=_*k&l|_*A&c,g&1?x^=_:P^=_}this.h1=x,this.h2=P}hexdigest(){let f=this.h1,d=this.h2;return f^=d>>>1,f=f*3981806797&l|f*36045&c,d=d*4283543511&l|((d<<16|f>>>16)*2950163797&l)>>>16,f^=d>>>1,f=f*444984403&l|f*60499&c,d=d*3301882366&l|((d<<16|f>>>16)*3120437893&l)>>>16,f^=d>>>1,(f>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=u},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var s=n(1),o=n(10);class l{constructor({ownerDocument:h=globalThis.document,styleElement:f=null}){this._document=h,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.push(h),this._document.fonts.add(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const f=this.styleElement.sheet;f.insertRule(h,f.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(h){if(h.attached||h.missingFile)return;if(h.attached=!0,this.isFontLoadingAPISupported){const d=h.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(p){throw(0,s.warn)(`Failed to load font '${d.family}': '${p}'.`),h.disableFontFace=!0,p}}return}const f=h.createFontFaceRule();if(f){if(this.insertRule(f),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const p=this._queueLoadingCallback(d);this._prepareFontLoadEvent(h,p)})}}get isFontLoadingAPISupported(){var f;const h=!!((f=this._document)!=null&&f.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function f(){for((0,s.assert)(!p.done,"completeRequest() cannot be called twice."),p.done=!0;d.length>0&&d[0].done;){const g=d.shift();setTimeout(g.callback,0)}}const{loadingRequests:d}=this,p={done:!1,complete:f,callback:h};return d.push(p),p}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,f){function d(M,V){return M.charCodeAt(V)<<24|M.charCodeAt(V+1)<<16|M.charCodeAt(V+2)<<8|M.charCodeAt(V+3)&255}function p(M,V,G,te){const ce=M.substring(0,V),se=M.substring(V+G);return ce+te+se}let g,m;const y=this._document.createElement("canvas");y.width=1,y.height=1;const _=y.getContext("2d");let b=0;function x(M,V){if(++b>30){(0,s.warn)("Load test font never loaded."),V();return}if(_.font="30px "+M,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(x.bind(null,M,V))}const P=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=p(T,976,P.length,P);const S=16,A=1482184792;let w=d(T,S);for(g=0,m=P.length-3;g<m;g+=4)w=w-A+d(P,g)|0;g<P.length&&(w=w-A+d(P+"XXX",g)|0),T=p(T,S,4,(0,s.string32)(w));const E=`url(data:font/opentype;base64,${btoa(T)});`,F=`@font-face {font-family:"${P}";src:${E}}`;this.insertRule(F);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const M of[h.loadedName,P]){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=M,O.append(V)}this._document.body.append(O),x(P,()=>{O.remove(),f.complete()})}}e.FontLoader=l;class c{constructor(h,{isEvalSupported:f=!0,disableFontFace:d=!1,ignoreErrors:p=!1,inspectFont:g=null}){this.compiledGlyphs=Object.create(null);for(const m in h)this[m]=h[m];this.isEvalSupported=f!==!1,this.disableFontFace=d===!0,this.ignoreErrors=p===!0,this._inspectFont=g}createNativeFontFace(){var f;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return(f=this._inspectFont)==null||f.call(this,this),h}createFontFaceRule(){var p;if(!this.data||this.disableFontFace)return null;const h=(0,s.bytesToString)(this.data),f=`url(data:${this.mimetype};base64,${btoa(h)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${f}}`;else{let g=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(g+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${g}src:${f}}`}return(p=this._inspectFont)==null||p.call(this,this,f),d}getPathGenerator(h,f){if(this.compiledGlyphs[f]!==void 0)return this.compiledGlyphs[f];let d;try{d=h.get(this.loadedName+"_path_"+f)}catch(p){if(!this.ignoreErrors)throw p;return(0,s.warn)(`getPathGenerator - ignoring character: "${p}".`),this.compiledGlyphs[f]=function(g,m){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const p=[];for(const g of d){const m=g.args!==void 0?g.args.join(","):"";p.push("c.",g.cmd,"(",m,`);
`)}return this.compiledGlyphs[f]=new Function("c","size",p.join(""))}return this.compiledGlyphs[f]=function(p,g){for(const m of d)m.cmd==="scale"&&(m.args=[g,-g]),p[m.cmd].apply(p,m.args)}}}e.FontFaceObject=c},(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const n=typeof browser$1$1=="object"&&browser$1$1+""=="[object process]"&&!browser$1$1.versions.nw&&!(browser$1$1.versions.electron&&browser$1$1.type&&browser$1$1.type!=="browser");e.isNodeJS=n},(a,e,n)=>{var ge,or,lr;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var s=n(1),o=n(6),l=n(12),c=n(13),u=n(10);const h=16,f=100,d=4096,p=15,g=10,m=1e3,y=16;function _(ae,B){if(ae._removeMirroring)throw new Error("Context is already forwarding operations.");ae.__originalSave=ae.save,ae.__originalRestore=ae.restore,ae.__originalRotate=ae.rotate,ae.__originalScale=ae.scale,ae.__originalTranslate=ae.translate,ae.__originalTransform=ae.transform,ae.__originalSetTransform=ae.setTransform,ae.__originalResetTransform=ae.resetTransform,ae.__originalClip=ae.clip,ae.__originalMoveTo=ae.moveTo,ae.__originalLineTo=ae.lineTo,ae.__originalBezierCurveTo=ae.bezierCurveTo,ae.__originalRect=ae.rect,ae.__originalClosePath=ae.closePath,ae.__originalBeginPath=ae.beginPath,ae._removeMirroring=()=>{ae.save=ae.__originalSave,ae.restore=ae.__originalRestore,ae.rotate=ae.__originalRotate,ae.scale=ae.__originalScale,ae.translate=ae.__originalTranslate,ae.transform=ae.__originalTransform,ae.setTransform=ae.__originalSetTransform,ae.resetTransform=ae.__originalResetTransform,ae.clip=ae.__originalClip,ae.moveTo=ae.__originalMoveTo,ae.lineTo=ae.__originalLineTo,ae.bezierCurveTo=ae.__originalBezierCurveTo,ae.rect=ae.__originalRect,ae.closePath=ae.__originalClosePath,ae.beginPath=ae.__originalBeginPath,delete ae._removeMirroring},ae.save=function(){B.save(),this.__originalSave()},ae.restore=function(){B.restore(),this.__originalRestore()},ae.translate=function(q,K){B.translate(q,K),this.__originalTranslate(q,K)},ae.scale=function(q,K){B.scale(q,K),this.__originalScale(q,K)},ae.transform=function(q,K,Q,$,Z,J){B.transform(q,K,Q,$,Z,J),this.__originalTransform(q,K,Q,$,Z,J)},ae.setTransform=function(q,K,Q,$,Z,J){B.setTransform(q,K,Q,$,Z,J),this.__originalSetTransform(q,K,Q,$,Z,J)},ae.resetTransform=function(){B.resetTransform(),this.__originalResetTransform()},ae.rotate=function(q){B.rotate(q),this.__originalRotate(q)},ae.clip=function(q){B.clip(q),this.__originalClip(q)},ae.moveTo=function(I,q){B.moveTo(I,q),this.__originalMoveTo(I,q)},ae.lineTo=function(I,q){B.lineTo(I,q),this.__originalLineTo(I,q)},ae.bezierCurveTo=function(I,q,K,Q,$,Z){B.bezierCurveTo(I,q,K,Q,$,Z),this.__originalBezierCurveTo(I,q,K,Q,$,Z)},ae.rect=function(I,q,K,Q){B.rect(I,q,K,Q),this.__originalRect(I,q,K,Q)},ae.closePath=function(){B.closePath(),this.__originalClosePath()},ae.beginPath=function(){B.beginPath(),this.__originalBeginPath()}}class b{constructor(B){this.canvasFactory=B,this.cache=Object.create(null)}getCanvas(B,I,q){let K;return this.cache[B]!==void 0?(K=this.cache[B],this.canvasFactory.reset(K,I,q)):(K=this.canvasFactory.create(I,q),this.cache[B]=K),K}delete(B){delete this.cache[B]}clear(){for(const B in this.cache){const I=this.cache[B];this.canvasFactory.destroy(I),delete this.cache[B]}}}function x(ae,B,I,q,K,Q,$,Z,J,R){const[U,z,L,j,ee,he]=(0,o.getCurrentTransform)(ae);if(z===0&&L===0){const ne=$*U+ee,de=Math.round(ne),me=Z*j+he,ve=Math.round(me),Se=($+J)*U+ee,De=Math.abs(Math.round(Se)-de)||1,Me=(Z+R)*j+he,Le=Math.abs(Math.round(Me)-ve)||1;return ae.setTransform(Math.sign(U),0,0,Math.sign(j),de,ve),ae.drawImage(B,I,q,K,Q,0,0,De,Le),ae.setTransform(U,z,L,j,ee,he),[De,Le]}if(U===0&&j===0){const ne=Z*L+ee,de=Math.round(ne),me=$*z+he,ve=Math.round(me),Se=(Z+R)*L+ee,De=Math.abs(Math.round(Se)-de)||1,Me=($+J)*z+he,Le=Math.abs(Math.round(Me)-ve)||1;return ae.setTransform(0,Math.sign(z),Math.sign(L),0,de,ve),ae.drawImage(B,I,q,K,Q,0,0,Le,De),ae.setTransform(U,z,L,j,ee,he),[Le,De]}ae.drawImage(B,I,q,K,Q,$,Z,J,R);const ye=Math.hypot(U,z),pe=Math.hypot(L,j);return[ye*J,pe*R]}function P(ae){const{width:B,height:I}=ae;if(B>m||I>m)return null;const q=1e3,K=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Q=B+1;let $=new Uint8Array(Q*(I+1)),Z,J,R;const U=B+7&-8;let z=new Uint8Array(U*I),L=0;for(const pe of ae.data){let ne=128;for(;ne>0;)z[L++]=pe&ne?0:255,ne>>=1}let j=0;for(L=0,z[L]!==0&&($[0]=1,++j),J=1;J<B;J++)z[L]!==z[L+1]&&($[J]=z[L]?2:1,++j),L++;for(z[L]!==0&&($[J]=2,++j),Z=1;Z<I;Z++){L=Z*U,R=Z*Q,z[L-U]!==z[L]&&($[R]=z[L]?1:8,++j);let pe=(z[L]?4:0)+(z[L-U]?8:0);for(J=1;J<B;J++)pe=(pe>>2)+(z[L+1]?4:0)+(z[L-U+1]?8:0),K[pe]&&($[R+J]=K[pe],++j),L++;if(z[L-U]!==z[L]&&($[R+J]=z[L]?2:4,++j),j>q)return null}for(L=U*(I-1),R=Z*Q,z[L]!==0&&($[R]=8,++j),J=1;J<B;J++)z[L]!==z[L+1]&&($[R+J]=z[L]?4:8,++j),L++;if(z[L]!==0&&($[R+J]=4,++j),j>q)return null;const ee=new Int32Array([0,Q,-1,0,-Q,0,0,0,1]),he=new Path2D;for(Z=0;j&&Z<=I;Z++){let pe=Z*Q;const ne=pe+B;for(;pe<ne&&!$[pe];)pe++;if(pe===ne)continue;he.moveTo(pe%Q,Z);const de=pe;let me=$[pe];do{const ve=ee[me];do pe+=ve;while(!$[pe]);const Se=$[pe];Se!==5&&Se!==10?(me=Se,$[pe]=0):(me=Se&51*me>>4,$[pe]&=me>>2|me<<2),he.lineTo(pe%Q,pe/Q|0),$[pe]||--j}while(de!==pe);--Z}return z=null,$=null,function(pe){pe.save(),pe.scale(1/B,-1/I),pe.translate(0,-I),pe.fill(he),pe.beginPath(),pe.restore()}}class T{constructor(B,I){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,B,I])}clone(){const B=Object.create(this);return B.clipBox=this.clipBox.slice(),B}setCurrentPoint(B,I){this.x=B,this.y=I}updatePathMinMax(B,I,q){[I,q]=s.Util.applyTransform([I,q],B),this.minX=Math.min(this.minX,I),this.minY=Math.min(this.minY,q),this.maxX=Math.max(this.maxX,I),this.maxY=Math.max(this.maxY,q)}updateRectMinMax(B,I){const q=s.Util.applyTransform(I,B),K=s.Util.applyTransform(I.slice(2),B);this.minX=Math.min(this.minX,q[0],K[0]),this.minY=Math.min(this.minY,q[1],K[1]),this.maxX=Math.max(this.maxX,q[0],K[0]),this.maxY=Math.max(this.maxY,q[1],K[1])}updateScalingPathMinMax(B,I){s.Util.scaleMinMax(B,I),this.minX=Math.min(this.minX,I[0]),this.maxX=Math.max(this.maxX,I[1]),this.minY=Math.min(this.minY,I[2]),this.maxY=Math.max(this.maxY,I[3])}updateCurvePathMinMax(B,I,q,K,Q,$,Z,J,R,U){const z=s.Util.bezierBoundingBox(I,q,K,Q,$,Z,J,R);if(U){U[0]=Math.min(U[0],z[0],z[2]),U[1]=Math.max(U[1],z[0],z[2]),U[2]=Math.min(U[2],z[1],z[3]),U[3]=Math.max(U[3],z[1],z[3]);return}this.updateRectMinMax(B,z)}getPathBoundingBox(B=l.PathType.FILL,I=null){const q=[this.minX,this.minY,this.maxX,this.maxY];if(B===l.PathType.STROKE){I||(0,s.unreachable)("Stroke bounding box must include transform.");const K=s.Util.singularValueDecompose2dScale(I),Q=K[0]*this.lineWidth/2,$=K[1]*this.lineWidth/2;q[0]-=Q,q[1]-=$,q[2]+=Q,q[3]+=$}return q}updateClipFromPath(){const B=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(B||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(B){this.clipBox=B,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(B=l.PathType.FILL,I=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(B,I))}}function k(ae,B){if(typeof ImageData<"u"&&B instanceof ImageData){ae.putImageData(B,0,0);return}const I=B.height,q=B.width,K=I%y,Q=(I-K)/y,$=K===0?Q:Q+1,Z=ae.createImageData(q,y);let J=0,R;const U=B.data,z=Z.data;let L,j,ee,he;if(B.kind===s.ImageKind.GRAYSCALE_1BPP){const ye=U.byteLength,pe=new Uint32Array(z.buffer,0,z.byteLength>>2),ne=pe.length,de=q+7>>3,me=4294967295,ve=s.FeatureTest.isLittleEndian?4278190080:255;for(L=0;L<$;L++){for(ee=L<Q?y:K,R=0,j=0;j<ee;j++){const Se=ye-J;let De=0;const Me=Se>de?q:Se*8-7,Le=Me&-8;let qe=0,Ke=0;for(;De<Le;De+=8)Ke=U[J++],pe[R++]=Ke&128?me:ve,pe[R++]=Ke&64?me:ve,pe[R++]=Ke&32?me:ve,pe[R++]=Ke&16?me:ve,pe[R++]=Ke&8?me:ve,pe[R++]=Ke&4?me:ve,pe[R++]=Ke&2?me:ve,pe[R++]=Ke&1?me:ve;for(;De<Me;De++)qe===0&&(Ke=U[J++],qe=128),pe[R++]=Ke&qe?me:ve,qe>>=1}for(;R<ne;)pe[R++]=0;ae.putImageData(Z,0,L*y)}}else if(B.kind===s.ImageKind.RGBA_32BPP){for(j=0,he=q*y*4,L=0;L<Q;L++)z.set(U.subarray(J,J+he)),J+=he,ae.putImageData(Z,0,j),j+=y;L<$&&(he=q*K*4,z.set(U.subarray(J,J+he)),ae.putImageData(Z,0,j))}else if(B.kind===s.ImageKind.RGB_24BPP)for(ee=y,he=q*ee,L=0;L<$;L++){for(L>=Q&&(ee=K,he=q*ee),R=0,j=he;j--;)z[R++]=U[J++],z[R++]=U[J++],z[R++]=U[J++],z[R++]=255;ae.putImageData(Z,0,L*y)}else throw new Error(`bad image kind: ${B.kind}`)}function S(ae,B){if(B.bitmap){ae.drawImage(B.bitmap,0,0);return}const I=B.height,q=B.width,K=I%y,Q=(I-K)/y,$=K===0?Q:Q+1,Z=ae.createImageData(q,y);let J=0;const R=B.data,U=Z.data;for(let z=0;z<$;z++){const L=z<Q?y:K;({srcPos:J}=(0,c.convertBlackAndWhiteToRGBA)({src:R,srcPos:J,dest:U,width:q,height:L,nonBlackColor:0})),ae.putImageData(Z,0,z*y)}}function A(ae,B){const I=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const q of I)ae[q]!==void 0&&(B[q]=ae[q]);ae.setLineDash!==void 0&&(B.setLineDash(ae.getLineDash()),B.lineDashOffset=ae.lineDashOffset)}function w(ae){ae.strokeStyle=ae.fillStyle="#000000",ae.fillRule="nonzero",ae.globalAlpha=1,ae.lineWidth=1,ae.lineCap="butt",ae.lineJoin="miter",ae.miterLimit=10,ae.globalCompositeOperation="source-over",ae.font="10px sans-serif",ae.setLineDash!==void 0&&(ae.setLineDash([]),ae.lineDashOffset=0),u.isNodeJS||(ae.filter="none")}function E(ae,B,I,q){const K=ae.length;for(let Q=3;Q<K;Q+=4){const $=ae[Q];if($===0)ae[Q-3]=B,ae[Q-2]=I,ae[Q-1]=q;else if($<255){const Z=255-$;ae[Q-3]=ae[Q-3]*$+B*Z>>8,ae[Q-2]=ae[Q-2]*$+I*Z>>8,ae[Q-1]=ae[Q-1]*$+q*Z>>8}}}function F(ae,B,I){const q=ae.length,K=1/255;for(let Q=3;Q<q;Q+=4){const $=I?I[ae[Q]]:ae[Q];B[Q]=B[Q]*$*K|0}}function O(ae,B,I){const q=ae.length;for(let K=3;K<q;K+=4){const Q=ae[K-3]*77+ae[K-2]*152+ae[K-1]*28;B[K]=I?B[K]*I[Q>>8]>>8:B[K]*Q>>16}}function M(ae,B,I,q,K,Q,$,Z,J,R,U){const z=!!Q,L=z?Q[0]:0,j=z?Q[1]:0,ee=z?Q[2]:0;let he;K==="Luminosity"?he=O:he=F;const pe=Math.min(q,Math.ceil(1048576/I));for(let ne=0;ne<q;ne+=pe){const de=Math.min(pe,q-ne),me=ae.getImageData(Z-R,ne+(J-U),I,de),ve=B.getImageData(Z,ne+J,I,de);z&&E(me.data,L,j,ee),he(me.data,ve.data,$),B.putImageData(ve,Z,ne+J)}}function V(ae,B,I,q){const K=q[0],Q=q[1],$=q[2]-K,Z=q[3]-Q;$===0||Z===0||(M(B.context,I,$,Z,B.subtype,B.backdrop,B.transferMap,K,Q,B.offsetX,B.offsetY),ae.save(),ae.globalAlpha=1,ae.globalCompositeOperation="source-over",ae.setTransform(1,0,0,1,0,0),ae.drawImage(I.canvas,0,0),ae.restore())}function G(ae,B){const I=s.Util.singularValueDecompose2dScale(ae);I[0]=Math.fround(I[0]),I[1]=Math.fround(I[1]);const q=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return B!==void 0?B:I[0]<=q||I[1]<=q}const te=["butt","round","square"],ce=["miter","round","bevel"],se={},le={},Ce=class Ce{constructor(B,I,q,K,Q,{optionalContentConfig:$,markedContentStack:Z=null},J,R){Re(this,ge);this.ctx=B,this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=I,this.objs=q,this.canvasFactory=K,this.filterFactory=Q,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Z||[],this.optionalContentConfig=$,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=J,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=R,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(B,I=null){return typeof B=="string"?B.startsWith("g_")?this.commonObjs.get(B):this.objs.get(B):I}beginDrawing({transform:B,viewport:I,transparency:q=!1,background:K=null}){const Q=this.ctx.canvas.width,$=this.ctx.canvas.height,Z=this.ctx.fillStyle;if(this.ctx.fillStyle=K||"#ffffff",this.ctx.fillRect(0,0,Q,$),this.ctx.fillStyle=Z,q){const J=this.cachedCanvases.getCanvas("transparent",Q,$);this.compositeCtx=this.ctx,this.transparentCanvas=J.canvas,this.ctx=J.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),w(this.ctx),B&&(this.ctx.transform(...B),this.outputScaleX=B[0],this.outputScaleY=B[0]),this.ctx.transform(...I.transform),this.viewportScale=I.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(B,I,q,K){const Q=B.argsArray,$=B.fnArray;let Z=I||0;const J=Q.length;if(J===Z)return Z;const R=J-Z>g&&typeof q=="function",U=R?Date.now()+p:0;let z=0;const L=this.commonObjs,j=this.objs;let ee;for(;;){if(K!==void 0&&Z===K.nextBreakPoint)return K.breakIt(Z,q),Z;if(ee=$[Z],ee!==s.OPS.dependency)this[ee].apply(this,Q[Z]);else for(const he of Q[Z]){const ye=he.startsWith("g_")?L:j;if(!ye.has(he))return ye.get(he,q),Z}if(Z++,Z===J)return Z;if(R&&++z>g){if(Date.now()>U)return q(),Z;z=0}}}endDrawing(){Ee(this,ge,or).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const B of this._cachedBitmapsMap.values()){for(const I of B.values())typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement&&(I.width=I.height=0);B.clear()}this._cachedBitmapsMap.clear(),Ee(this,ge,lr).call(this)}_scaleImage(B,I){const q=B.width,K=B.height;let Q=Math.max(Math.hypot(I[0],I[1]),1),$=Math.max(Math.hypot(I[2],I[3]),1),Z=q,J=K,R="prescale1",U,z;for(;Q>2&&Z>1||$>2&&J>1;){let L=Z,j=J;Q>2&&Z>1&&(L=Z>=16384?Math.floor(Z/2)-1||1:Math.ceil(Z/2),Q/=Z/L),$>2&&J>1&&(j=J>=16384?Math.floor(J/2)-1||1:Math.ceil(J)/2,$/=J/j),U=this.cachedCanvases.getCanvas(R,L,j),z=U.context,z.clearRect(0,0,L,j),z.drawImage(B,0,0,Z,J,0,0,L,j),B=U.canvas,Z=L,J=j,R=R==="prescale1"?"prescale2":"prescale1"}return{img:B,paintWidth:Z,paintHeight:J}}_createMaskCanvas(B){const I=this.ctx,{width:q,height:K}=B,Q=this.current.fillColor,$=this.current.patternFill,Z=(0,o.getCurrentTransform)(I);let J,R,U,z;if((B.bitmap||B.data)&&B.count>1){const De=B.bitmap||B.data.buffer;R=JSON.stringify($?Z:[Z.slice(0,4),Q]),J=this._cachedBitmapsMap.get(De),J||(J=new Map,this._cachedBitmapsMap.set(De,J));const Me=J.get(R);if(Me&&!$){const Le=Math.round(Math.min(Z[0],Z[2])+Z[4]),qe=Math.round(Math.min(Z[1],Z[3])+Z[5]);return{canvas:Me,offsetX:Le,offsetY:qe}}U=Me}U||(z=this.cachedCanvases.getCanvas("maskCanvas",q,K),S(z.context,B));let L=s.Util.transform(Z,[1/q,0,0,-1/K,0,0]);L=s.Util.transform(L,[1,0,0,1,0,-K]);const j=s.Util.applyTransform([0,0],L),ee=s.Util.applyTransform([q,K],L),he=s.Util.normalizeRect([j[0],j[1],ee[0],ee[1]]),ye=Math.round(he[2]-he[0])||1,pe=Math.round(he[3]-he[1])||1,ne=this.cachedCanvases.getCanvas("fillCanvas",ye,pe),de=ne.context,me=Math.min(j[0],ee[0]),ve=Math.min(j[1],ee[1]);de.translate(-me,-ve),de.transform(...L),U||(U=this._scaleImage(z.canvas,(0,o.getCurrentTransformInverse)(de)),U=U.img,J&&$&&J.set(R,U)),de.imageSmoothingEnabled=G((0,o.getCurrentTransform)(de),B.interpolate),x(de,U,0,0,U.width,U.height,0,0,q,K),de.globalCompositeOperation="source-in";const Se=s.Util.transform((0,o.getCurrentTransformInverse)(de),[1,0,0,1,-me,-ve]);return de.fillStyle=$?Q.getPattern(I,this,Se,l.PathType.FILL):Q,de.fillRect(0,0,q,K),J&&!$&&(this.cachedCanvases.delete("fillCanvas"),J.set(R,ne.canvas)),{canvas:ne.canvas,offsetX:Math.round(me),offsetY:Math.round(ve)}}setLineWidth(B){B!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=B,this.ctx.lineWidth=B}setLineCap(B){this.ctx.lineCap=te[B]}setLineJoin(B){this.ctx.lineJoin=ce[B]}setMiterLimit(B){this.ctx.miterLimit=B}setDash(B,I){const q=this.ctx;q.setLineDash!==void 0&&(q.setLineDash(B),q.lineDashOffset=I)}setRenderingIntent(B){}setFlatness(B){}setGState(B){for(const[I,q]of B)switch(I){case"LW":this.setLineWidth(q);break;case"LC":this.setLineCap(q);break;case"LJ":this.setLineJoin(q);break;case"ML":this.setMiterLimit(q);break;case"D":this.setDash(q[0],q[1]);break;case"RI":this.setRenderingIntent(q);break;case"FL":this.setFlatness(q);break;case"Font":this.setFont(q[0],q[1]);break;case"CA":this.current.strokeAlpha=q;break;case"ca":this.current.fillAlpha=q,this.ctx.globalAlpha=q;break;case"BM":this.ctx.globalCompositeOperation=q;break;case"SMask":this.current.activeSMask=q?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(q);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const B=this.inSMaskMode;this.current.activeSMask&&!B?this.beginSMaskMode():!this.current.activeSMask&&B&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const B=this.ctx.canvas.width,I=this.ctx.canvas.height,q="smaskGroupAt"+this.groupLevel,K=this.cachedCanvases.getCanvas(q,B,I);this.suspendedCtx=this.ctx,this.ctx=K.context;const Q=this.ctx;Q.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),A(this.suspendedCtx,Q),_(Q,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),A(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(B){if(!this.current.activeSMask)return;B?(B[0]=Math.floor(B[0]),B[1]=Math.floor(B[1]),B[2]=Math.ceil(B[2]),B[3]=Math.ceil(B[3])):B=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const I=this.current.activeSMask,q=this.suspendedCtx;V(q,I,this.ctx,B),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(A(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const B=this.current;this.stateStack.push(B),this.current=B.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),A(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(B,I,q,K,Q,$){this.ctx.transform(B,I,q,K,Q,$),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(B,I,q){const K=this.ctx,Q=this.current;let $=Q.x,Z=Q.y,J,R;const U=(0,o.getCurrentTransform)(K),z=U[0]===0&&U[3]===0||U[1]===0&&U[2]===0,L=z?q.slice(0):null;for(let j=0,ee=0,he=B.length;j<he;j++)switch(B[j]|0){case s.OPS.rectangle:$=I[ee++],Z=I[ee++];const ye=I[ee++],pe=I[ee++],ne=$+ye,de=Z+pe;K.moveTo($,Z),ye===0||pe===0?K.lineTo(ne,de):(K.lineTo(ne,Z),K.lineTo(ne,de),K.lineTo($,de)),z||Q.updateRectMinMax(U,[$,Z,ne,de]),K.closePath();break;case s.OPS.moveTo:$=I[ee++],Z=I[ee++],K.moveTo($,Z),z||Q.updatePathMinMax(U,$,Z);break;case s.OPS.lineTo:$=I[ee++],Z=I[ee++],K.lineTo($,Z),z||Q.updatePathMinMax(U,$,Z);break;case s.OPS.curveTo:J=$,R=Z,$=I[ee+4],Z=I[ee+5],K.bezierCurveTo(I[ee],I[ee+1],I[ee+2],I[ee+3],$,Z),Q.updateCurvePathMinMax(U,J,R,I[ee],I[ee+1],I[ee+2],I[ee+3],$,Z,L),ee+=6;break;case s.OPS.curveTo2:J=$,R=Z,K.bezierCurveTo($,Z,I[ee],I[ee+1],I[ee+2],I[ee+3]),Q.updateCurvePathMinMax(U,J,R,$,Z,I[ee],I[ee+1],I[ee+2],I[ee+3],L),$=I[ee+2],Z=I[ee+3],ee+=4;break;case s.OPS.curveTo3:J=$,R=Z,$=I[ee+2],Z=I[ee+3],K.bezierCurveTo(I[ee],I[ee+1],$,Z,$,Z),Q.updateCurvePathMinMax(U,J,R,I[ee],I[ee+1],$,Z,$,Z,L),ee+=4;break;case s.OPS.closePath:K.closePath();break}z&&Q.updateScalingPathMinMax(U,L),Q.setCurrentPoint($,Z)}closePath(){this.ctx.closePath()}stroke(B=!0){const I=this.ctx,q=this.current.strokeColor;I.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof q=="object"&&(q!=null&&q.getPattern)?(I.save(),I.strokeStyle=q.getPattern(I,this,(0,o.getCurrentTransformInverse)(I),l.PathType.STROKE),this.rescaleAndStroke(!1),I.restore()):this.rescaleAndStroke(!0)),B&&this.consumePath(this.current.getClippedPathBoundingBox()),I.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(B=!0){const I=this.ctx,q=this.current.fillColor,K=this.current.patternFill;let Q=!1;K&&(I.save(),I.fillStyle=q.getPattern(I,this,(0,o.getCurrentTransformInverse)(I),l.PathType.FILL),Q=!0);const $=this.current.getClippedPathBoundingBox();this.contentVisible&&$!==null&&(this.pendingEOFill?(I.fill("evenodd"),this.pendingEOFill=!1):I.fill()),Q&&I.restore(),B&&this.consumePath($)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=se}eoClip(){this.pendingClip=le}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const B=this.pendingTextPaths,I=this.ctx;if(B===void 0){I.beginPath();return}I.save(),I.beginPath();for(const q of B)I.setTransform(...q.transform),I.translate(q.x,q.y),q.addToPath(I,q.fontSize);I.restore(),I.clip(),I.beginPath(),delete this.pendingTextPaths}setCharSpacing(B){this.current.charSpacing=B}setWordSpacing(B){this.current.wordSpacing=B}setHScale(B){this.current.textHScale=B/100}setLeading(B){this.current.leading=-B}setFont(B,I){const q=this.commonObjs.get(B),K=this.current;if(!q)throw new Error(`Can't find font for ${B}`);if(K.fontMatrix=q.fontMatrix||s.FONT_IDENTITY_MATRIX,(K.fontMatrix[0]===0||K.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+B),I<0?(I=-I,K.fontDirection=-1):K.fontDirection=1,this.current.font=q,this.current.fontSize=I,q.isType3Font)return;const Q=q.loadedName||"sans-serif";let $="normal";q.black?$="900":q.bold&&($="bold");const Z=q.italic?"italic":"normal",J=`"${Q}", ${q.fallbackName}`;let R=I;I<h?R=h:I>f&&(R=f),this.current.fontSizeScale=I/R,this.ctx.font=`${Z} ${$} ${R}px ${J}`}setTextRenderingMode(B){this.current.textRenderingMode=B}setTextRise(B){this.current.textRise=B}moveText(B,I){this.current.x=this.current.lineX+=B,this.current.y=this.current.lineY+=I}setLeadingMoveText(B,I){this.setLeading(-I),this.moveText(B,I)}setTextMatrix(B,I,q,K,Q,$){this.current.textMatrix=[B,I,q,K,Q,$],this.current.textMatrixScale=Math.hypot(B,I),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(B,I,q,K){const Q=this.ctx,$=this.current,Z=$.font,J=$.textRenderingMode,R=$.fontSize/$.fontSizeScale,U=J&s.TextRenderingMode.FILL_STROKE_MASK,z=!!(J&s.TextRenderingMode.ADD_TO_PATH_FLAG),L=$.patternFill&&!Z.missingFile;let j;(Z.disableFontFace||z||L)&&(j=Z.getPathGenerator(this.commonObjs,B)),Z.disableFontFace||L?(Q.save(),Q.translate(I,q),Q.beginPath(),j(Q,R),K&&Q.setTransform(...K),(U===s.TextRenderingMode.FILL||U===s.TextRenderingMode.FILL_STROKE)&&Q.fill(),(U===s.TextRenderingMode.STROKE||U===s.TextRenderingMode.FILL_STROKE)&&Q.stroke(),Q.restore()):((U===s.TextRenderingMode.FILL||U===s.TextRenderingMode.FILL_STROKE)&&Q.fillText(B,I,q),(U===s.TextRenderingMode.STROKE||U===s.TextRenderingMode.FILL_STROKE)&&Q.strokeText(B,I,q)),z&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(Q),x:I,y:q,fontSize:R,addToPath:j})}get isFontSubpixelAAEnabled(){const{context:B}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);B.scale(1.5,1),B.fillText("I",0,10);const I=B.getImageData(0,0,10,10).data;let q=!1;for(let K=3;K<I.length;K+=4)if(I[K]>0&&I[K]<255){q=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",q)}showText(B){const I=this.current,q=I.font;if(q.isType3Font)return this.showType3Text(B);const K=I.fontSize;if(K===0)return;const Q=this.ctx,$=I.fontSizeScale,Z=I.charSpacing,J=I.wordSpacing,R=I.fontDirection,U=I.textHScale*R,z=B.length,L=q.vertical,j=L?1:-1,ee=q.defaultVMetrics,he=K*I.fontMatrix[0],ye=I.textRenderingMode===s.TextRenderingMode.FILL&&!q.disableFontFace&&!I.patternFill;Q.save(),Q.transform(...I.textMatrix),Q.translate(I.x,I.y+I.textRise),R>0?Q.scale(U,-1):Q.scale(U,1);let pe;if(I.patternFill){Q.save();const Se=I.fillColor.getPattern(Q,this,(0,o.getCurrentTransformInverse)(Q),l.PathType.FILL);pe=(0,o.getCurrentTransform)(Q),Q.restore(),Q.fillStyle=Se}let ne=I.lineWidth;const de=I.textMatrixScale;if(de===0||ne===0){const Se=I.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Se===s.TextRenderingMode.STROKE||Se===s.TextRenderingMode.FILL_STROKE)&&(ne=this.getSinglePixelWidth())}else ne/=de;if($!==1&&(Q.scale($,$),ne/=$),Q.lineWidth=ne,q.isInvalidPDFjsFont){const Se=[];let De=0;for(const Me of B)Se.push(Me.unicode),De+=Me.width;Q.fillText(Se.join(""),0,0),I.x+=De*he*U,Q.restore(),this.compose();return}let me=0,ve;for(ve=0;ve<z;++ve){const Se=B[ve];if(typeof Se=="number"){me+=j*Se*K/1e3;continue}let De=!1;const Me=(Se.isSpace?J:0)+Z,Le=Se.fontChar,qe=Se.accent;let Ke,Y,Te=Se.width;if(L){const Oe=Se.vmetric||ee,re=-(Se.vmetric?Oe[1]:Te*.5)*he,oe=Oe[2]*he;Te=Oe?-Oe[0]:Te,Ke=re/$,Y=(me+oe)/$}else Ke=me/$,Y=0;if(q.remeasure&&Te>0){const Oe=Q.measureText(Le).width*1e3/K*$;if(Te<Oe&&this.isFontSubpixelAAEnabled){const re=Te/Oe;De=!0,Q.save(),Q.scale(re,1),Ke/=re}else Te!==Oe&&(Ke+=(Te-Oe)/2e3*K/$)}if(this.contentVisible&&(Se.isInFont||q.missingFile)){if(ye&&!qe)Q.fillText(Le,Ke,Y);else if(this.paintChar(Le,Ke,Y,pe),qe){const Oe=Ke+K*qe.offset.x/$,re=Y-K*qe.offset.y/$;this.paintChar(qe.fontChar,Oe,re,pe)}}let Pe;L?Pe=Te*he-Me*R:Pe=Te*he+Me*R,me+=Pe,De&&Q.restore()}L?I.y-=me:I.x+=me*U,Q.restore(),this.compose()}showType3Text(B){const I=this.ctx,q=this.current,K=q.font,Q=q.fontSize,$=q.fontDirection,Z=K.vertical?1:-1,J=q.charSpacing,R=q.wordSpacing,U=q.textHScale*$,z=q.fontMatrix||s.FONT_IDENTITY_MATRIX,L=B.length,j=q.textRenderingMode===s.TextRenderingMode.INVISIBLE;let ee,he,ye,pe;if(!(j||Q===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,I.save(),I.transform(...q.textMatrix),I.translate(q.x,q.y),I.scale(U,$),ee=0;ee<L;++ee){if(he=B[ee],typeof he=="number"){pe=Z*he*Q/1e3,this.ctx.translate(pe,0),q.x+=pe*U;continue}const ne=(he.isSpace?R:0)+J,de=K.charProcOperatorList[he.operatorListId];if(!de){(0,s.warn)(`Type3 character "${he.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=he,this.save(),I.scale(Q,Q),I.transform(...z),this.executeOperatorList(de),this.restore()),ye=s.Util.applyTransform([he.width,0],z)[0]*Q+ne,I.translate(ye,0),q.x+=ye*U}I.restore(),this.processingType3=null}}setCharWidth(B,I){}setCharWidthAndBounds(B,I,q,K,Q,$){this.ctx.rect(q,K,Q-q,$-K),this.ctx.clip(),this.endPath()}getColorN_Pattern(B){let I;if(B[0]==="TilingPattern"){const q=B[1],K=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),Q={createCanvasGraphics:$=>new Ce($,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};I=new l.TilingPattern(B,q,this.ctx,Q,K)}else I=this._getPattern(B[1],B[2]);return I}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(B,I,q){const K=s.Util.makeHexColor(B,I,q);this.ctx.strokeStyle=K,this.current.strokeColor=K}setFillRGBColor(B,I,q){const K=s.Util.makeHexColor(B,I,q);this.ctx.fillStyle=K,this.current.fillColor=K,this.current.patternFill=!1}_getPattern(B,I=null){let q;return this.cachedPatterns.has(B)?q=this.cachedPatterns.get(B):(q=(0,l.getShadingPattern)(this.getObject(B)),this.cachedPatterns.set(B,q)),I&&(q.matrix=I),q}shadingFill(B){if(!this.contentVisible)return;const I=this.ctx;this.save();const q=this._getPattern(B);I.fillStyle=q.getPattern(I,this,(0,o.getCurrentTransformInverse)(I),l.PathType.SHADING);const K=(0,o.getCurrentTransformInverse)(I);if(K){const Q=I.canvas,$=Q.width,Z=Q.height,J=s.Util.applyTransform([0,0],K),R=s.Util.applyTransform([0,Z],K),U=s.Util.applyTransform([$,0],K),z=s.Util.applyTransform([$,Z],K),L=Math.min(J[0],R[0],U[0],z[0]),j=Math.min(J[1],R[1],U[1],z[1]),ee=Math.max(J[0],R[0],U[0],z[0]),he=Math.max(J[1],R[1],U[1],z[1]);this.ctx.fillRect(L,j,ee-L,he-j)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(B,I){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(B)&&B.length===6&&this.transform(...B),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),I)){const q=I[2]-I[0],K=I[3]-I[1];this.ctx.rect(I[0],I[1],q,K),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),I),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(B){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const I=this.ctx;B.isolated||(0,s.info)("TODO: Support non-isolated groups."),B.knockout&&(0,s.warn)("Knockout groups not supported.");const q=(0,o.getCurrentTransform)(I);if(B.matrix&&I.transform(...B.matrix),!B.bbox)throw new Error("Bounding box is required.");let K=s.Util.getAxialAlignedBoundingBox(B.bbox,(0,o.getCurrentTransform)(I));const Q=[0,0,I.canvas.width,I.canvas.height];K=s.Util.intersect(K,Q)||[0,0,0,0];const $=Math.floor(K[0]),Z=Math.floor(K[1]);let J=Math.max(Math.ceil(K[2])-$,1),R=Math.max(Math.ceil(K[3])-Z,1),U=1,z=1;J>d&&(U=J/d,J=d),R>d&&(z=R/d,R=d),this.current.startNewPathAndClipBox([0,0,J,R]);let L="groupAt"+this.groupLevel;B.smask&&(L+="_smask_"+this.smaskCounter++%2);const j=this.cachedCanvases.getCanvas(L,J,R),ee=j.context;ee.scale(1/U,1/z),ee.translate(-$,-Z),ee.transform(...q),B.smask?this.smaskStack.push({canvas:j.canvas,context:ee,offsetX:$,offsetY:Z,scaleX:U,scaleY:z,subtype:B.smask.subtype,backdrop:B.smask.backdrop,transferMap:B.smask.transferMap||null,startTransformInverse:null}):(I.setTransform(1,0,0,1,0,0),I.translate($,Z),I.scale(U,z),I.save()),A(I,ee),this.ctx=ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(I),this.groupLevel++}endGroup(B){if(!this.contentVisible)return;this.groupLevel--;const I=this.ctx,q=this.groupStack.pop();if(this.ctx=q,this.ctx.imageSmoothingEnabled=!1,B.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const K=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...K);const Q=s.Util.getAxialAlignedBoundingBox([0,0,I.canvas.width,I.canvas.height],K);this.ctx.drawImage(I.canvas,0,0),this.ctx.restore(),this.compose(Q)}}beginAnnotation(B,I,q,K,Q){if(Ee(this,ge,or).call(this),w(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(I)&&I.length===4){const $=I[2]-I[0],Z=I[3]-I[1];if(Q&&this.annotationCanvasMap){q=q.slice(),q[4]-=I[0],q[5]-=I[1],I=I.slice(),I[0]=I[1]=0,I[2]=$,I[3]=Z;const[J,R]=s.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:U}=this,z=Math.ceil($*this.outputScaleX*U),L=Math.ceil(Z*this.outputScaleY*U);this.annotationCanvas=this.canvasFactory.create(z,L);const{canvas:j,context:ee}=this.annotationCanvas;this.annotationCanvasMap.set(B,j),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ee,this.ctx.save(),this.ctx.setTransform(J,0,0,-R,0,Z*R),w(this.ctx)}else w(this.ctx),this.ctx.rect(I[0],I[1],$,Z),this.ctx.clip(),this.endPath()}this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...q),this.transform(...K)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ee(this,ge,lr).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(B){if(!this.contentVisible)return;const I=B.count;B=this.getObject(B.data,B),B.count=I;const q=this.ctx,K=this.processingType3;if(K&&(K.compiled===void 0&&(K.compiled=P(B)),K.compiled)){K.compiled(q);return}const Q=this._createMaskCanvas(B),$=Q.canvas;q.save(),q.setTransform(1,0,0,1,0,0),q.drawImage($,Q.offsetX,Q.offsetY),q.restore(),this.compose()}paintImageMaskXObjectRepeat(B,I,q=0,K=0,Q,$){if(!this.contentVisible)return;B=this.getObject(B.data,B);const Z=this.ctx;Z.save();const J=(0,o.getCurrentTransform)(Z);Z.transform(I,q,K,Q,0,0);const R=this._createMaskCanvas(B);Z.setTransform(1,0,0,1,R.offsetX-J[4],R.offsetY-J[5]);for(let U=0,z=$.length;U<z;U+=2){const L=s.Util.transform(J,[I,q,K,Q,$[U],$[U+1]]),[j,ee]=s.Util.applyTransform([0,0],L);Z.drawImage(R.canvas,j,ee)}Z.restore(),this.compose()}paintImageMaskXObjectGroup(B){if(!this.contentVisible)return;const I=this.ctx,q=this.current.fillColor,K=this.current.patternFill;for(const Q of B){const{data:$,width:Z,height:J,transform:R}=Q,U=this.cachedCanvases.getCanvas("maskCanvas",Z,J),z=U.context;z.save();const L=this.getObject($,Q);S(z,L),z.globalCompositeOperation="source-in",z.fillStyle=K?q.getPattern(z,this,(0,o.getCurrentTransformInverse)(I),l.PathType.FILL):q,z.fillRect(0,0,Z,J),z.restore(),I.save(),I.transform(...R),I.scale(1,-1),x(I,U.canvas,0,0,Z,J,0,-1,1,1),I.restore()}this.compose()}paintImageXObject(B){if(!this.contentVisible)return;const I=this.getObject(B);if(!I){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(I)}paintImageXObjectRepeat(B,I,q,K){if(!this.contentVisible)return;const Q=this.getObject(B);if(!Q){(0,s.warn)("Dependent image isn't ready yet");return}const $=Q.width,Z=Q.height,J=[];for(let R=0,U=K.length;R<U;R+=2)J.push({transform:[I,0,0,q,K[R],K[R+1]],x:0,y:0,w:$,h:Z});this.paintInlineImageXObjectGroup(Q,J)}applyTransferMapsToCanvas(B){return this.current.transferMaps!=="none"&&(B.filter=this.current.transferMaps,B.drawImage(B.canvas,0,0),B.filter="none"),B.canvas}applyTransferMapsToBitmap(B){if(this.current.transferMaps==="none")return B.bitmap;const{bitmap:I,width:q,height:K}=B,Q=this.cachedCanvases.getCanvas("inlineImage",q,K),$=Q.context;return $.filter=this.current.transferMaps,$.drawImage(I,0,0),$.filter="none",Q.canvas}paintInlineImageXObject(B){if(!this.contentVisible)return;const I=B.width,q=B.height,K=this.ctx;this.save(),u.isNodeJS||(K.filter="none"),K.scale(1/I,-1/q);let Q;if(B.bitmap)Q=this.applyTransferMapsToBitmap(B);else if(typeof HTMLElement=="function"&&B instanceof HTMLElement||!B.data)Q=B;else{const J=this.cachedCanvases.getCanvas("inlineImage",I,q).context;k(J,B),Q=this.applyTransferMapsToCanvas(J)}const $=this._scaleImage(Q,(0,o.getCurrentTransformInverse)(K));K.imageSmoothingEnabled=G((0,o.getCurrentTransform)(K),B.interpolate),x(K,$.img,0,0,$.paintWidth,$.paintHeight,0,-q,I,q),this.compose(),this.restore()}paintInlineImageXObjectGroup(B,I){if(!this.contentVisible)return;const q=this.ctx;let K;if(B.bitmap)K=B.bitmap;else{const Q=B.width,$=B.height,J=this.cachedCanvases.getCanvas("inlineImage",Q,$).context;k(J,B),K=this.applyTransferMapsToCanvas(J)}for(const Q of I)q.save(),q.transform(...Q.transform),q.scale(1,-1),x(q,K,Q.x,Q.y,Q.w,Q.h,0,-1,1,1),q.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(B){}markPointProps(B,I){}beginMarkedContent(B){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(B,I){B==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(I)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(B){const I=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(B);const q=this.ctx;this.pendingClip&&(I||(this.pendingClip===le?q.clip("evenodd"):q.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),q.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const B=(0,o.getCurrentTransform)(this.ctx);if(B[1]===0&&B[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(B[0]),Math.abs(B[3]));else{const I=Math.abs(B[0]*B[3]-B[2]*B[1]),q=Math.hypot(B[0],B[2]),K=Math.hypot(B[1],B[3]);this._cachedGetSinglePixelWidth=Math.max(q,K)/I}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:B}=this.current,I=(0,o.getCurrentTransform)(this.ctx);let q,K;if(I[1]===0&&I[2]===0){const Q=Math.abs(I[0]),$=Math.abs(I[3]);if(B===0)q=1/Q,K=1/$;else{const Z=Q*B,J=$*B;q=Z<1?1/Z:1,K=J<1?1/J:1}}else{const Q=Math.abs(I[0]*I[3]-I[2]*I[1]),$=Math.hypot(I[0],I[1]),Z=Math.hypot(I[2],I[3]);if(B===0)q=Z/Q,K=$/Q;else{const J=B*Q;q=Z>J?Z/J:1,K=$>J?$/J:1}}this._cachedScaleForStroking=[q,K]}return this._cachedScaleForStroking}rescaleAndStroke(B){const{ctx:I}=this,{lineWidth:q}=this.current,[K,Q]=this.getScaleForStroking();if(I.lineWidth=q||1,K===1&&Q===1){I.stroke();return}let $,Z,J;B&&($=(0,o.getCurrentTransform)(I),Z=I.getLineDash().slice(),J=I.lineDashOffset),I.scale(K,Q);const R=Math.max(K,Q);I.setLineDash(I.getLineDash().map(U=>U/R)),I.lineDashOffset/=R,I.stroke(),B&&(I.setTransform(...$),I.setLineDash(Z),I.lineDashOffset=J)}isContentVisible(){for(let B=this.markedContentStack.length-1;B>=0;B--)if(!this.markedContentStack[B].visible)return!1;return!0}};ge=new WeakSet,or=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},lr=function(){if(this.pageColors){const B=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(B!=="none"){const I=this.ctx.filter;this.ctx.filter=B,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=I}}};let fe=Ce;e.CanvasGraphics=fe;for(const ae in s.OPS)fe.prototype[ae]!==void 0&&(fe.prototype[s.OPS[ae]]=fe.prototype[ae])},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=m;var s=n(1),o=n(6);const l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=l;function c(x,P){if(!P)return;const T=P[2]-P[0],k=P[3]-P[1],S=new Path2D;S.rect(P[0],P[1],T,k),x.clip(S)}class u{constructor(){this.constructor===u&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class h extends u{constructor(P){super(),this._type=P[1],this._bbox=P[2],this._colorStops=P[3],this._p0=P[4],this._p1=P[5],this._r0=P[6],this._r1=P[7],this.matrix=null}_createGradient(P){let T;this._type==="axial"?T=P.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(T=P.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)T.addColorStop(k[0],k[1]);return T}getPattern(P,T,k,S){let A;if(S===l.STROKE||S===l.FILL){const w=T.current.getClippedPathBoundingBox(S,(0,o.getCurrentTransform)(P))||[0,0,0,0],E=Math.ceil(w[2]-w[0])||1,F=Math.ceil(w[3]-w[1])||1,O=T.cachedCanvases.getCanvas("pattern",E,F,!0),M=O.context;M.clearRect(0,0,M.canvas.width,M.canvas.height),M.beginPath(),M.rect(0,0,M.canvas.width,M.canvas.height),M.translate(-w[0],-w[1]),k=s.Util.transform(k,[1,0,0,1,w[0],w[1]]),M.transform(...T.baseTransform),this.matrix&&M.transform(...this.matrix),c(M,this._bbox),M.fillStyle=this._createGradient(M),M.fill(),A=P.createPattern(O.canvas,"no-repeat");const V=new DOMMatrix(k);A.setTransform(V)}else c(P,this._bbox),A=this._createGradient(P);return A}}function f(x,P,T,k,S,A,w,E){const F=P.coords,O=P.colors,M=x.data,V=x.width*4;let G;F[T+1]>F[k+1]&&(G=T,T=k,k=G,G=A,A=w,w=G),F[k+1]>F[S+1]&&(G=k,k=S,S=G,G=w,w=E,E=G),F[T+1]>F[k+1]&&(G=T,T=k,k=G,G=A,A=w,w=G);const te=(F[T]+P.offsetX)*P.scaleX,ce=(F[T+1]+P.offsetY)*P.scaleY,se=(F[k]+P.offsetX)*P.scaleX,le=(F[k+1]+P.offsetY)*P.scaleY,fe=(F[S]+P.offsetX)*P.scaleX,ge=(F[S+1]+P.offsetY)*P.scaleY;if(ce>=ge)return;const xe=O[A],_e=O[A+1],Ce=O[A+2],ae=O[w],B=O[w+1],I=O[w+2],q=O[E],K=O[E+1],Q=O[E+2],$=Math.round(ce),Z=Math.round(ge);let J,R,U,z,L,j,ee,he;for(let ye=$;ye<=Z;ye++){if(ye<le){let ve;ye<ce?ve=0:ve=(ce-ye)/(ce-le),J=te-(te-se)*ve,R=xe-(xe-ae)*ve,U=_e-(_e-B)*ve,z=Ce-(Ce-I)*ve}else{let ve;ye>ge?ve=1:le===ge?ve=0:ve=(le-ye)/(le-ge),J=se-(se-fe)*ve,R=ae-(ae-q)*ve,U=B-(B-K)*ve,z=I-(I-Q)*ve}let pe;ye<ce?pe=0:ye>ge?pe=1:pe=(ce-ye)/(ce-ge),L=te-(te-fe)*pe,j=xe-(xe-q)*pe,ee=_e-(_e-K)*pe,he=Ce-(Ce-Q)*pe;const ne=Math.round(Math.min(J,L)),de=Math.round(Math.max(J,L));let me=V*ye+ne*4;for(let ve=ne;ve<=de;ve++)pe=(J-ve)/(J-L),pe<0?pe=0:pe>1&&(pe=1),M[me++]=R-(R-j)*pe|0,M[me++]=U-(U-ee)*pe|0,M[me++]=z-(z-he)*pe|0,M[me++]=255}}function d(x,P,T){const k=P.coords,S=P.colors;let A,w;switch(P.type){case"lattice":const E=P.verticesPerRow,F=Math.floor(k.length/E)-1,O=E-1;for(A=0;A<F;A++){let M=A*E;for(let V=0;V<O;V++,M++)f(x,T,k[M],k[M+1],k[M+E],S[M],S[M+1],S[M+E]),f(x,T,k[M+E+1],k[M+1],k[M+E],S[M+E+1],S[M+1],S[M+E])}break;case"triangles":for(A=0,w=k.length;A<w;A+=3)f(x,T,k[A],k[A+1],k[A+2],S[A],S[A+1],S[A+2]);break;default:throw new Error("illegal figure")}}class p extends u{constructor(P){super(),this._coords=P[2],this._colors=P[3],this._figures=P[4],this._bounds=P[5],this._bbox=P[7],this._background=P[8],this.matrix=null}_createMeshCanvas(P,T,k){const E=Math.floor(this._bounds[0]),F=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-E,M=Math.ceil(this._bounds[3])-F,V=Math.min(Math.ceil(Math.abs(O*P[0]*1.1)),3e3),G=Math.min(Math.ceil(Math.abs(M*P[1]*1.1)),3e3),te=O/V,ce=M/G,se={coords:this._coords,colors:this._colors,offsetX:-E,offsetY:-F,scaleX:1/te,scaleY:1/ce},le=V+2*2,fe=G+2*2,ge=k.getCanvas("mesh",le,fe,!1),xe=ge.context,_e=xe.createImageData(V,G);if(T){const ae=_e.data;for(let B=0,I=ae.length;B<I;B+=4)ae[B]=T[0],ae[B+1]=T[1],ae[B+2]=T[2],ae[B+3]=255}for(const ae of this._figures)d(_e,ae,se);return xe.putImageData(_e,2,2),{canvas:ge.canvas,offsetX:E-2*te,offsetY:F-2*ce,scaleX:te,scaleY:ce}}getPattern(P,T,k,S){c(P,this._bbox);let A;if(S===l.SHADING)A=s.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(P));else if(A=s.Util.singularValueDecompose2dScale(T.baseTransform),this.matrix){const E=s.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*E[0],A[1]*E[1]]}const w=this._createMeshCanvas(A,S===l.SHADING?null:this._background,T.cachedCanvases);return S!==l.SHADING&&(P.setTransform(...T.baseTransform),this.matrix&&P.transform(...this.matrix)),P.translate(w.offsetX,w.offsetY),P.scale(w.scaleX,w.scaleY),P.createPattern(w.canvas,"no-repeat")}}class g extends u{getPattern(){return"hotpink"}}function m(x){switch(x[0]){case"RadialAxial":return new h(x);case"Mesh":return new p(x);case"Dummy":return new g}throw new Error(`Unknown IR type: ${x[0]}`)}const y={COLORED:1,UNCOLORED:2},b=class b{constructor(P,T,k,S,A){this.operatorList=P[2],this.matrix=P[3]||[1,0,0,1,0,0],this.bbox=P[4],this.xstep=P[5],this.ystep=P[6],this.paintType=P[7],this.tilingType=P[8],this.color=T,this.ctx=k,this.canvasGraphicsFactory=S,this.baseTransform=A}createPatternCanvas(P){const T=this.operatorList,k=this.bbox,S=this.xstep,A=this.ystep,w=this.paintType,E=this.tilingType,F=this.color,O=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+E);const M=k[0],V=k[1],G=k[2],te=k[3],ce=s.Util.singularValueDecompose2dScale(this.matrix),se=s.Util.singularValueDecompose2dScale(this.baseTransform),le=[ce[0]*se[0],ce[1]*se[1]],fe=this.getSizeAndScale(S,this.ctx.canvas.width,le[0]),ge=this.getSizeAndScale(A,this.ctx.canvas.height,le[1]),xe=P.cachedCanvases.getCanvas("pattern",fe.size,ge.size,!0),_e=xe.context,Ce=O.createCanvasGraphics(_e);Ce.groupLevel=P.groupLevel,this.setFillAndStrokeStyleToContext(Ce,w,F);let ae=M,B=V,I=G,q=te;return M<0&&(ae=0,I+=Math.abs(M)),V<0&&(B=0,q+=Math.abs(V)),_e.translate(-(fe.scale*ae),-(ge.scale*B)),Ce.transform(fe.scale,0,0,ge.scale,0,0),_e.save(),this.clipBbox(Ce,ae,B,I,q),Ce.baseTransform=(0,o.getCurrentTransform)(Ce.ctx),Ce.executeOperatorList(T),Ce.endDrawing(),{canvas:xe.canvas,scaleX:fe.scale,scaleY:ge.scale,offsetX:ae,offsetY:B}}getSizeAndScale(P,T,k){P=Math.abs(P);const S=Math.max(b.MAX_PATTERN_SIZE,T);let A=Math.ceil(P*k);return A>=S?A=S:k=A/P,{scale:k,size:A}}clipBbox(P,T,k,S,A){const w=S-T,E=A-k;P.ctx.rect(T,k,w,E),P.current.updateRectMinMax((0,o.getCurrentTransform)(P.ctx),[T,k,S,A]),P.clip(),P.endPath()}setFillAndStrokeStyleToContext(P,T,k){const S=P.ctx,A=P.current;switch(T){case y.COLORED:const w=this.ctx;S.fillStyle=w.fillStyle,S.strokeStyle=w.strokeStyle,A.fillColor=w.fillStyle,A.strokeColor=w.strokeStyle;break;case y.UNCOLORED:const E=s.Util.makeHexColor(k[0],k[1],k[2]);S.fillStyle=E,S.strokeStyle=E,A.fillColor=E,A.strokeColor=E;break;default:throw new s.FormatError(`Unsupported paint type: ${T}`)}}getPattern(P,T,k,S){let A=k;S!==l.SHADING&&(A=s.Util.transform(A,T.baseTransform),this.matrix&&(A=s.Util.transform(A,this.matrix)));const w=this.createPatternCanvas(T);let E=new DOMMatrix(A);E=E.translate(w.offsetX,w.offsetY),E=E.scale(1/w.scaleX,1/w.scaleY);const F=P.createPattern(w.canvas,"repeat");return F.setTransform(E),F}};rt(b,"MAX_PATTERN_SIZE",3e3);let _=b;e.TilingPattern=_},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=l,e.convertToRGBA=o,e.grayToRGBA=u;var s=n(1);function o(h){switch(h.kind){case s.ImageKind.GRAYSCALE_1BPP:return l(h);case s.ImageKind.RGB_24BPP:return c(h)}return null}function l({src:h,srcPos:f=0,dest:d,width:p,height:g,nonBlackColor:m=4294967295,inverseDecode:y=!1}){const _=s.FeatureTest.isLittleEndian?4278190080:255,[b,x]=y?[m,_]:[_,m],P=p>>3,T=p&7,k=h.length;d=new Uint32Array(d.buffer);let S=0;for(let A=0;A<g;A++){for(const E=f+P;f<E;f++){const F=f<k?h[f]:255;d[S++]=F&128?x:b,d[S++]=F&64?x:b,d[S++]=F&32?x:b,d[S++]=F&16?x:b,d[S++]=F&8?x:b,d[S++]=F&4?x:b,d[S++]=F&2?x:b,d[S++]=F&1?x:b}if(T===0)continue;const w=f<k?h[f++]:255;for(let E=0;E<T;E++)d[S++]=w&1<<7-E?x:b}return{srcPos:f,destPos:S}}function c({src:h,srcPos:f=0,dest:d,destPos:p=0,width:g,height:m}){let y=0;const _=h.length>>2,b=new Uint32Array(h.buffer,f,_);if(s.FeatureTest.isLittleEndian){for(;y<_-2;y+=3,p+=4){const x=b[y],P=b[y+1],T=b[y+2];d[p]=x|4278190080,d[p+1]=x>>>24|P<<8|4278190080,d[p+2]=P>>>16|T<<16|4278190080,d[p+3]=T>>>8|4278190080}for(let x=y*4,P=h.length;x<P;x+=3)d[p++]=h[x]|h[x+1]<<8|h[x+2]<<16|4278190080}else{for(;y<_-2;y+=3,p+=4){const x=b[y],P=b[y+1],T=b[y+2];d[p]=x|255,d[p+1]=x<<24|P>>>8|255,d[p+2]=P<<16|T>>>16|255,d[p+3]=T<<8|255}for(let x=y*4,P=h.length;x<P;x+=3)d[p++]=h[x]<<24|h[x+1]<<16|h[x+2]<<8|255}return{srcPos:f,destPos:p}}function u(h,f){if(s.FeatureTest.isLittleEndian)for(let d=0,p=h.length;d<p;d++)f[d]=h[d]*65793|4278190080;else for(let d=0,p=h.length;d<p;d++)f[d]=h[d]*16843008|255}},(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(a,e,n)=>{var h,zr,Hr,Gt;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var s=n(1);const o={DATA:1,ERROR:2},l={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function c(g){switch(g instanceof Error||typeof g=="object"&&g!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new s.AbortException(g.message);case"MissingPDFException":return new s.MissingPDFException(g.message);case"PasswordException":return new s.PasswordException(g.message,g.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(g.message,g.status);case"UnknownErrorException":return new s.UnknownErrorException(g.message,g.details);default:return new s.UnknownErrorException(g.message,g.toString())}}class u{constructor(m,y,_){Re(this,h);this.sourceName=m,this.targetName=y,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const x=b.data;if(x.targetName!==this.sourceName)return;if(x.stream){Ee(this,h,Hr).call(this,x);return}if(x.callback){const T=x.callbackId,k=this.callbackCapabilities[T];if(!k)throw new Error(`Cannot resolve callback ${T}`);if(delete this.callbackCapabilities[T],x.callback===o.DATA)k.resolve(x.data);else if(x.callback===o.ERROR)k.reject(c(x.reason));else throw new Error("Unexpected callback case");return}const P=this.actionHandler[x.action];if(!P)throw new Error(`Unknown action from worker: ${x.action}`);if(x.callbackId){const T=this.sourceName,k=x.sourceName;new Promise(function(S){S(P(x.data))}).then(function(S){_.postMessage({sourceName:T,targetName:k,callback:o.DATA,callbackId:x.callbackId,data:S})},function(S){_.postMessage({sourceName:T,targetName:k,callback:o.ERROR,callbackId:x.callbackId,reason:c(S)})});return}if(x.streamId){Ee(this,h,zr).call(this,x);return}P(x.data)},_.addEventListener("message",this._onComObjOnMessage)}on(m,y){const _=this.actionHandler;if(_[m])throw new Error(`There is already an actionName called "${m}"`);_[m]=y}send(m,y,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,data:y},_)}sendWithPromise(m,y,_){const b=this.callbackId++,x=new s.PromiseCapability;this.callbackCapabilities[b]=x;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,callbackId:b,data:y},_)}catch(P){x.reject(P)}return x.promise}sendWithStream(m,y,_,b){const x=this.streamId++,P=this.sourceName,T=this.targetName,k=this.comObj;return new ReadableStream({start:S=>{const A=new s.PromiseCapability;return this.streamControllers[x]={controller:S,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},k.postMessage({sourceName:P,targetName:T,action:m,streamId:x,data:y,desiredSize:S.desiredSize},b),A.promise},pull:S=>{const A=new s.PromiseCapability;return this.streamControllers[x].pullCall=A,k.postMessage({sourceName:P,targetName:T,stream:l.PULL,streamId:x,desiredSize:S.desiredSize}),A.promise},cancel:S=>{(0,s.assert)(S instanceof Error,"cancel must have a valid reason");const A=new s.PromiseCapability;return this.streamControllers[x].cancelCall=A,this.streamControllers[x].isClosed=!0,k.postMessage({sourceName:P,targetName:T,stream:l.CANCEL,streamId:x,reason:c(S)}),A.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,zr=function(m){const y=m.streamId,_=this.sourceName,b=m.sourceName,x=this.comObj,P=this,T=this.actionHandler[m.action],k={enqueue(S,A=1,w){if(this.isCancelled)return;const E=this.desiredSize;this.desiredSize-=A,E>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),x.postMessage({sourceName:_,targetName:b,stream:l.ENQUEUE,streamId:y,chunk:S},w)},close(){this.isCancelled||(this.isCancelled=!0,x.postMessage({sourceName:_,targetName:b,stream:l.CLOSE,streamId:y}),delete P.streamSinks[y])},error(S){(0,s.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,x.postMessage({sourceName:_,targetName:b,stream:l.ERROR,streamId:y,reason:c(S)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:m.desiredSize,ready:null};k.sinkCapability.resolve(),k.ready=k.sinkCapability.promise,this.streamSinks[y]=k,new Promise(function(S){S(T(m.data,k))}).then(function(){x.postMessage({sourceName:_,targetName:b,stream:l.START_COMPLETE,streamId:y,success:!0})},function(S){x.postMessage({sourceName:_,targetName:b,stream:l.START_COMPLETE,streamId:y,reason:c(S)})})},Hr=function(m){const y=m.streamId,_=this.sourceName,b=m.sourceName,x=this.comObj,P=this.streamControllers[y],T=this.streamSinks[y];switch(m.stream){case l.START_COMPLETE:m.success?P.startCall.resolve():P.startCall.reject(c(m.reason));break;case l.PULL_COMPLETE:m.success?P.pullCall.resolve():P.pullCall.reject(c(m.reason));break;case l.PULL:if(!T){x.postMessage({sourceName:_,targetName:b,stream:l.PULL_COMPLETE,streamId:y,success:!0});break}T.desiredSize<=0&&m.desiredSize>0&&T.sinkCapability.resolve(),T.desiredSize=m.desiredSize,new Promise(function(k){var S;k((S=T.onPull)==null?void 0:S.call(T))}).then(function(){x.postMessage({sourceName:_,targetName:b,stream:l.PULL_COMPLETE,streamId:y,success:!0})},function(k){x.postMessage({sourceName:_,targetName:b,stream:l.PULL_COMPLETE,streamId:y,reason:c(k)})});break;case l.ENQUEUE:if((0,s.assert)(P,"enqueue should have stream controller"),P.isClosed)break;P.controller.enqueue(m.chunk);break;case l.CLOSE:if((0,s.assert)(P,"close should have stream controller"),P.isClosed)break;P.isClosed=!0,P.controller.close(),Ee(this,h,Gt).call(this,P,y);break;case l.ERROR:(0,s.assert)(P,"error should have stream controller"),P.controller.error(c(m.reason)),Ee(this,h,Gt).call(this,P,y);break;case l.CANCEL_COMPLETE:m.success?P.cancelCall.resolve():P.cancelCall.reject(c(m.reason)),Ee(this,h,Gt).call(this,P,y);break;case l.CANCEL:if(!T)break;new Promise(function(k){var S;k((S=T.onCancel)==null?void 0:S.call(T,c(m.reason)))}).then(function(){x.postMessage({sourceName:_,targetName:b,stream:l.CANCEL_COMPLETE,streamId:y,success:!0})},function(k){x.postMessage({sourceName:_,targetName:b,stream:l.CANCEL_COMPLETE,streamId:y,reason:c(k)})}),T.sinkCapability.reject(c(m.reason)),T.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}},Gt=async function(m,y){var _,b,x;await Promise.allSettled([(_=m.startCall)==null?void 0:_.promise,(b=m.pullCall)==null?void 0:b.promise,(x=m.cancelCall)==null?void 0:x.promise]),delete this.streamControllers[y]},e.MessageHandler=u},(a,e,n)=>{var l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var s=n(1);class o{constructor({parsedData:h,rawData:f}){Re(this,l);Re(this,c);Ie(this,l,h),Ie(this,c,f)}getRaw(){return W(this,c)}get(h){return W(this,l).get(h)??null}getAll(){return(0,s.objectFromMap)(W(this,l))}has(h){return W(this,l).has(h)}}l=new WeakMap,c=new WeakMap,e.Metadata=o},(a,e,n)=>{var h,f,d,p,g,m,cr;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var s=n(1),o=n(8);const l=Symbol("INTERNAL");class c{constructor(b,x){Re(this,h,!0);this.name=b,this.intent=x}get visible(){return W(this,h)}_setVisible(b,x){b!==l&&(0,s.unreachable)("Internal method `_setVisible` called."),Ie(this,h,x)}}h=new WeakMap;class u{constructor(b){Re(this,m);Re(this,f,null);Re(this,d,new Map);Re(this,p,null);Re(this,g,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,Ie(this,g,b.order);for(const x of b.groups)W(this,d).set(x.id,new c(x.name,x.intent));if(b.baseState==="OFF")for(const x of W(this,d).values())x._setVisible(l,!1);for(const x of b.on)W(this,d).get(x)._setVisible(l,!0);for(const x of b.off)W(this,d).get(x)._setVisible(l,!1);Ie(this,p,this.getHash())}}isVisible(b){if(W(this,d).size===0)return!0;if(!b)return(0,s.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return W(this,d).has(b.id)?W(this,d).get(b.id).visible:((0,s.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return Ee(this,m,cr).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const x of b.ids){if(!W(this,d).has(x))return(0,s.warn)(`Optional content group not found: ${x}`),!0;if(W(this,d).get(x).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const x of b.ids){if(!W(this,d).has(x))return(0,s.warn)(`Optional content group not found: ${x}`),!0;if(!W(this,d).get(x).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const x of b.ids){if(!W(this,d).has(x))return(0,s.warn)(`Optional content group not found: ${x}`),!0;if(!W(this,d).get(x).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const x of b.ids){if(!W(this,d).has(x))return(0,s.warn)(`Optional content group not found: ${x}`),!0;if(W(this,d).get(x).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,s.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,x=!0){if(!W(this,d).has(b)){(0,s.warn)(`Optional content group not found: ${b}`);return}W(this,d).get(b)._setVisible(l,!!x),Ie(this,f,null)}get hasInitialVisibility(){return this.getHash()===W(this,p)}getOrder(){return W(this,d).size?W(this,g)?W(this,g).slice():[...W(this,d).keys()]:null}getGroups(){return W(this,d).size>0?(0,s.objectFromMap)(W(this,d)):null}getGroup(b){return W(this,d).get(b)||null}getHash(){if(W(this,f)!==null)return W(this,f);const b=new o.MurmurHash3_64;for(const[x,P]of W(this,d))b.update(`${x}:${P.visible}`);return Ie(this,f,b.hexdigest())}}f=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakSet,cr=function(b){const x=b.length;if(x<2)return!0;const P=b[0];for(let T=1;T<x;T++){const k=b[T];let S;if(Array.isArray(k))S=Ee(this,m,cr).call(this,k);else if(W(this,d).has(k))S=W(this,d).get(k).visible;else return(0,s.warn)(`Optional content group not found: ${k}`),!0;switch(P){case"And":if(!S)return!1;break;case"Or":if(S)return!0;break;case"Not":return!S;default:return!0}}return P==="And"},e.OptionalContentConfig=u},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var s=n(1),o=n(6);class l{constructor({length:f,initialData:d,progressiveDone:p=!1,contentDispositionFilename:g=null,disableRange:m=!1,disableStream:y=!1},_){if((0,s.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=p,this._contentDispositionFilename=g,(d==null?void 0:d.length)>0){const b=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!y,this._isRangeSupported=!m,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,x)=>{this._onReceiveData({begin:b,chunk:x})}),this._pdfDataRangeTransport.addProgressListener((b,x)=>{this._onProgress({loaded:b,total:x})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:f,chunk:d}){const p=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(f===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(p):this._queuedChunks.push(p);else{const g=this._rangeReaders.some(function(m){return m._begin!==f?!1:(m._enqueue(p),!0)});(0,s.assert)(g,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}_onProgress(f){var d,p,g,m;f.total===void 0?(p=(d=this._rangeReaders[0])==null?void 0:d.onProgress)==null||p.call(d,{loaded:f.loaded}):(m=(g=this._fullRequestReader)==null?void 0:g.onProgress)==null||m.call(g,{loaded:f.loaded,total:f.total})}_onProgressiveDone(){var f;(f=this._fullRequestReader)==null||f.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const d=this._rangeReaders.indexOf(f);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new c(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,d){if(d<=this._progressiveDataLength)return null;const p=new u(this,f,d);return this._pdfDataRangeTransport.requestDataRange(f,d),this._rangeReaders.push(p),p}cancelAllRequests(f){var d;(d=this._fullRequestReader)==null||d.cancel(f);for(const p of this._rangeReaders.slice(0))p.cancel(f);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=l;class c{constructor(f,d,p=!1,g=null){this._stream=f,this._done=p||!1,this._filename=(0,o.isPdfFile)(g)?g:null,this._queuedChunks=d||[],this._loaded=0;for(const m of this._queuedChunks)this._loaded+=m.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=new s.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class u{constructor(f,d,p){this._stream=f,this._begin=d,this._end=p,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const f=new s.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(o){const l=[],c={items:l,styles:Object.create(null)};function u(h){var p;if(!h)return;let f=null;const d=h.name;if(d==="#text")f=h.value;else if(n.shouldBuildText(d))(p=h==null?void 0:h.attributes)!=null&&p.textContent?f=h.attributes.textContent:h.value&&(f=h.value);else return;if(f!==null&&l.push({str:f}),!!h.children)for(const g of h.children)u(g)}return u(o),c}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=n},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var s=n(7);const o=function(f){return new Promise((d,p)=>{require$$0.readFile(f,(m,y)=>{if(m||!y){p(new Error(m));return}d(new Uint8Array(y))})})};class l extends s.BaseFilterFactory{}e.NodeFilterFactory=l;class c extends s.BaseCanvasFactory{_createCanvas(d,p){return require$$1.createCanvas(d,p)}}e.NodeCanvasFactory=c;class u extends s.BaseCMapReaderFactory{_fetchData(d,p){return o(d).then(g=>({cMapData:g,compressionType:p}))}}e.NodeCMapReaderFactory=u;class h extends s.BaseStandardFontDataFactory{_fetchData(d){return o(d)}}e.NodeStandardFontDataFactory=h},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var s=n(1),o=n(22);const l=require$$0,c=require$$2,u=require$$3,h=require$$4,f=/^file:\/\/\/[a-zA-Z]:\//;function d(T){const k=h.parse(T);return k.protocol==="file:"||k.host?k:/^[a-z]:[/\\]/i.test(T)?h.parse(`file:///${T}`):(k.host||(k.protocol="file:"),k)}class p{constructor(k){this.source=k,this.url=d(k.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new _(this),this._fullRequestReader}getRangeReader(k,S){if(S<=this._progressiveDataLength)return null;const A=this.isFsUrl?new P(this,k,S):new b(this,k,S);return this._rangeRequestReaders.push(A),A}cancelAllRequests(k){var S;(S=this._fullRequestReader)==null||S.cancel(k);for(const A of this._rangeRequestReaders.slice(0))A.cancel(k)}}e.PDFNodeStream=p;class g{constructor(k){this._url=k.url,this._done=!1,this._storedError=null,this.onProgress=null;const S=k.source;this._contentLength=S.length,this._loaded=0,this._filename=null,this._disableRange=S.disableRange||!1,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!S.disableStream,this._isRangeSupported=!S.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const k=this._readableStream.read();return k===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=k.length,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(k).buffer,done:!1})}cancel(k){if(!this._readableStream){this._error(k);return}this._readableStream.destroy(k)}_error(k){this._storedError=k,this._readCapability.resolve()}_setReadableStream(k){this._readableStream=k,k.on("readable",()=>{this._readCapability.resolve()}),k.on("end",()=>{k.destroy(),this._done=!0,this._readCapability.resolve()}),k.on("error",S=>{this._error(S)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(k){this._url=k.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const S=k.source;this._isStreamingSupported=!S.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const k=this._readableStream.read();return k===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=k.length,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:new Uint8Array(k).buffer,done:!1})}cancel(k){if(!this._readableStream){this._error(k);return}this._readableStream.destroy(k)}_error(k){this._storedError=k,this._readCapability.resolve()}_setReadableStream(k){this._readableStream=k,k.on("readable",()=>{this._readCapability.resolve()}),k.on("end",()=>{k.destroy(),this._done=!0,this._readCapability.resolve()}),k.on("error",S=>{this._error(S)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function y(T,k){return{protocol:T.protocol,auth:T.auth,host:T.hostname,port:T.port,path:T.path,method:"GET",headers:k}}class _ extends g{constructor(k){super(k);const S=A=>{if(A.statusCode===404){const O=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O,this._headersCapability.reject(O);return}this._headersCapability.resolve(),this._setReadableStream(A);const w=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:E,suggestedLength:F}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:k.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=F||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(w)};this._request=null,this._url.protocol==="http:"?this._request=c.request(y(this._url,k.httpHeaders),S):this._request=u.request(y(this._url,k.httpHeaders),S),this._request.on("error",A=>{this._storedError=A,this._headersCapability.reject(A)}),this._request.end()}}class b extends m{constructor(k,S,A){super(k),this._httpHeaders={};for(const E in k.httpHeaders){const F=k.httpHeaders[E];F!==void 0&&(this._httpHeaders[E]=F)}this._httpHeaders.Range=`bytes=${S}-${A-1}`;const w=E=>{if(E.statusCode===404){const F=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=F;return}this._setReadableStream(E)};this._request=null,this._url.protocol==="http:"?this._request=c.request(y(this._url,this._httpHeaders),w):this._request=u.request(y(this._url,this._httpHeaders),w),this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class x extends g{constructor(k){super(k);let S=decodeURIComponent(this._url.path);f.test(this._url.href)&&(S=S.replace(/^\//,"")),l.lstat(S,(A,w)=>{if(A){A.code==="ENOENT"&&(A=new s.MissingPDFException(`Missing PDF "${S}".`)),this._storedError=A,this._headersCapability.reject(A);return}this._contentLength=w.size,this._setReadableStream(l.createReadStream(S)),this._headersCapability.resolve()})}}class P extends m{constructor(k,S,A){super(k);let w=decodeURIComponent(this._url.path);f.test(this._url.href)&&(w=w.replace(/^\//,"")),this._setReadableStream(l.createReadStream(w,{start:S,end:A-1}))}}},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=h,e.extractFilenameFromHeader=u,e.validateRangeRequestCapabilities=c,e.validateResponseStatus=f;var s=n(1),o=n(23),l=n(6);function c({getResponseHeader:d,isHttp:p,rangeChunkSize:g,disableRange:m}){const y={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(d("Content-Length"),10);return!Number.isInteger(_)||(y.suggestedLength=_,_<=2*g)||m||!p||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(y.allowRangeRequests=!0),y}function u(d){const p=d("Content-Disposition");if(p){let g=(0,o.getFilenameFromContentDispositionHeader)(p);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,l.isPdfFile)(g))return g}return null}function h(d,p){return d===404||d===0&&p.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+p+'".'):new s.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${p}".`,d)}function f(d){return d===200||d===206}},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var s=n(1);function o(l){let c=!0,u=h("filename\\*","i").exec(l);if(u){u=u[1];let _=g(u);return _=unescape(_),_=m(_),_=y(_),d(_)}if(u=p(l),u){const _=y(u);return d(_)}if(u=h("filename","i").exec(l),u){u=u[1];let _=g(u);return _=y(_),d(_)}function h(_,b){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function f(_,b){if(_){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const x=new TextDecoder(_,{fatal:!0}),P=(0,s.stringToBytes)(b);b=x.decode(P),c=!1}catch{}}return b}function d(_){return c&&/[\x80-\xff]/.test(_)&&(_=f("utf-8",_),c&&(_=f("iso-8859-1",_))),_}function p(_){const b=[];let x;const P=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=P.exec(_))!==null;){let[,k,S,A]=x;if(k=parseInt(k,10),k in b){if(k===0)break;continue}b[k]=[S,A]}const T=[];for(let k=0;k<b.length&&k in b;++k){let[S,A]=b[k];A=g(A),S&&(A=unescape(A),k===0&&(A=m(A))),T.push(A)}return T.join("")}function g(_){if(_.startsWith('"')){const b=_.slice(1).split('\\"');for(let x=0;x<b.length;++x){const P=b[x].indexOf('"');P!==-1&&(b[x]=b[x].slice(0,P),b.length=x+1),b[x]=b[x].replaceAll(/\\(.)/g,"$1")}_=b.join('"')}return _}function m(_){const b=_.indexOf("'");if(b===-1)return _;const x=_.slice(0,b),T=_.slice(b+1).replace(/^[^']*'/,"");return f(x,T)}function y(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,x,P,T){if(P==="q"||P==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,S){return String.fromCharCode(parseInt(S,16))}),f(x,T);try{T=atob(T)}catch{}return f(x,T)})}return""}},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var s=n(1),o=n(22);const l=200,c=206;function u(g){const m=g.response;return typeof m!="string"?m:(0,s.stringToBytes)(m).buffer}class h{constructor(m,y={}){this.url=m,this.isHttp=/^https?:/i.test(m),this.httpHeaders=this.isHttp&&y.httpHeaders||Object.create(null),this.withCredentials=y.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(m,y,_){const b={begin:m,end:y};for(const x in _)b[x]=_[x];return this.request(b)}requestFull(m){return this.request(m)}request(m){const y=new XMLHttpRequest,_=this.currXhrId++,b=this.pendingRequests[_]={xhr:y};y.open("GET",this.url),y.withCredentials=this.withCredentials;for(const x in this.httpHeaders){const P=this.httpHeaders[x];P!==void 0&&y.setRequestHeader(x,P)}return this.isHttp&&"begin"in m&&"end"in m?(y.setRequestHeader("Range",`bytes=${m.begin}-${m.end-1}`),b.expectedStatus=c):b.expectedStatus=l,y.responseType="arraybuffer",m.onError&&(y.onerror=function(x){m.onError(y.status)}),y.onreadystatechange=this.onStateChange.bind(this,_),y.onprogress=this.onProgress.bind(this,_),b.onHeadersReceived=m.onHeadersReceived,b.onDone=m.onDone,b.onError=m.onError,b.onProgress=m.onProgress,y.send(null),_}onProgress(m,y){var b;const _=this.pendingRequests[m];_&&((b=_.onProgress)==null||b.call(_,y))}onStateChange(m,y){var k,S,A;const _=this.pendingRequests[m];if(!_)return;const b=_.xhr;if(b.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),b.readyState!==4||!(m in this.pendingRequests))return;if(delete this.pendingRequests[m],b.status===0&&this.isHttp){(k=_.onError)==null||k.call(_,b.status);return}const x=b.status||l;if(!(x===l&&_.expectedStatus===c)&&x!==_.expectedStatus){(S=_.onError)==null||S.call(_,b.status);return}const T=u(b);if(x===c){const w=b.getResponseHeader("Content-Range"),E=/bytes (\d+)-(\d+)\/(\d+)/.exec(w);_.onDone({begin:parseInt(E[1],10),chunk:T})}else T?_.onDone({begin:0,chunk:T}):(A=_.onError)==null||A.call(_,b.status)}getRequestXhr(m){return this.pendingRequests[m].xhr}isPendingRequest(m){return m in this.pendingRequests}abortRequest(m){const y=this.pendingRequests[m].xhr;delete this.pendingRequests[m],y.abort()}}class f{constructor(m){this._source=m,this._manager=new h(m.url,{httpHeaders:m.httpHeaders,withCredentials:m.withCredentials}),this._rangeChunkSize=m.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(m){const y=this._rangeRequestReaders.indexOf(m);y>=0&&this._rangeRequestReaders.splice(y,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(m,y){const _=new p(this._manager,m,y);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(m){var y;(y=this._fullRequestReader)==null||y.cancel(m);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(m)}}e.PDFNetworkStream=f;class d{constructor(m,y){this._manager=m;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=m.requestFull(_),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const m=this._fullRequestId,y=this._manager.getRequestXhr(m),_=P=>y.getResponseHeader(P),{allowRangeRequests:b,suggestedLength:x}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(m),this._headersReceivedCapability.resolve()}_onDone(m){if(m&&(this._requests.length>0?this._requests.shift().resolve({value:m.chunk,done:!1}):this._cachedChunks.push(m.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(m){this._storedError=(0,o.createResponseStatusError)(m,this._url),this._headersReceivedCapability.reject(this._storedError);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(m){var y;(y=this.onProgress)==null||y.call(this,{loaded:m.loaded,total:m.lengthComputable?m.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new s.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0,this._headersReceivedCapability.reject(m);for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class p{constructor(m,y,_){this._manager=m;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._requestId=m.requestRange(y,_,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var m;(m=this.onClosed)==null||m.call(this,this)}_onDone(m){const y=m.chunk;this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunk=y,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(m){this._storedError=(0,o.createResponseStatusError)(m,this._url);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(m){var y;this.isStreamingSupported||(y=this.onProgress)==null||y.call(this,{loaded:m.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new s.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var s=n(1),o=n(22);function l(p,g,m){return{method:"GET",headers:p,signal:m.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function c(p){const g=new Headers;for(const m in p){const y=p[m];y!==void 0&&g.append(m,y)}return g}function u(p){return p instanceof Uint8Array?p.buffer:p instanceof ArrayBuffer?p:((0,s.warn)(`getArrayBuffer - unexpected data format: ${p}`),new Uint8Array(p).buffer)}class h{constructor(g){this.source=g,this.isHttp=/^https?:/i.test(g.url),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f(this),this._fullRequestReader}getRangeReader(g,m){if(m<=this._progressiveDataLength)return null;const y=new d(this,g,m);return this._rangeRequestReaders.push(y),y}cancelAllRequests(g){var m;(m=this._fullRequestReader)==null||m.cancel(g);for(const y of this._rangeRequestReaders.slice(0))y.cancel(g)}}e.PDFFetchStream=h;class f{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const m=g.source;this._withCredentials=m.withCredentials||!1,this._contentLength=m.length,this._headersCapability=new s.PromiseCapability,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._headers=c(this._stream.httpHeaders);const y=m.url;fetch(y,l(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,o.validateResponseStatus)(_.status))throw(0,o.createResponseStatusError)(_.status,y);this._reader=_.body.getReader(),this._headersCapability.resolve();const b=T=>_.headers.get(T),{allowRangeRequests:x,suggestedLength:P}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=P||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;await this._headersCapability.promise;const{value:g,done:m}=await this._reader.read();return m?{value:g,done:m}:(this._loaded+=g.byteLength,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:u(g),done:!1})}cancel(g){var m;(m=this._reader)==null||m.cancel(g),this._abortController.abort()}}class d{constructor(g,m,y){this._stream=g,this._reader=null,this._loaded=0;const _=g.source;this._withCredentials=_.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=c(this._stream.httpHeaders),this._headers.append("Range",`bytes=${m}-${y-1}`);const b=_.url;fetch(b,l(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,o.validateResponseStatus)(x.status))throw(0,o.createResponseStatusError)(x.status,b);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;await this._readCapability.promise;const{value:g,done:m}=await this._reader.read();return m?{value:g,done:m}:(this._loaded+=g.byteLength,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded}),{value:u(g),done:!1})}cancel(g){var m;(m=this._reader)==null||m.cancel(g),this._abortController.abort()}}},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=_,e.updateTextLayer=b;var s=n(1),o=n(6);const l=1e5,c=30,u=.8,h=new Map;function f(x,P){let T;if(P&&s.FeatureTest.isOffscreenCanvasSupported)T=new OffscreenCanvas(x,x).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=x,T=k.getContext("2d",{alpha:!1})}return T}function d(x,P){const T=h.get(x);if(T)return T;const k=f(c,P);k.font=`${c}px ${x}`;const S=k.measureText("");let A=S.fontBoundingBoxAscent,w=Math.abs(S.fontBoundingBoxDescent);if(A){const F=A/(A+w);return h.set(x,F),k.canvas.width=k.canvas.height=0,F}k.strokeStyle="red",k.clearRect(0,0,c,c),k.strokeText("g",0,0);let E=k.getImageData(0,0,c,c).data;w=0;for(let F=E.length-1-3;F>=0;F-=4)if(E[F]>0){w=Math.ceil(F/4/c);break}k.clearRect(0,0,c,c),k.strokeText("A",0,c),E=k.getImageData(0,0,c,c).data,A=0;for(let F=0,O=E.length;F<O;F+=4)if(E[F]>0){A=c-Math.floor(F/4/c);break}if(k.canvas.width=k.canvas.height=0,A){const F=A/(A+w);return h.set(x,F),F}return h.set(x,u),u}function p(x,P,T){const k=document.createElement("span"),S={angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,fontSize:0};x._textDivs.push(k);const A=s.Util.transform(x._transform,P.transform);let w=Math.atan2(A[1],A[0]);const E=T[P.fontName];E.vertical&&(w+=Math.PI/2);const F=Math.hypot(A[2],A[3]),O=F*d(E.fontFamily,x._isOffscreenCanvasSupported);let M,V;w===0?(M=A[4],V=A[5]-O):(M=A[4]+O*Math.sin(w),V=A[5]-O*Math.cos(w));const G="calc(var(--scale-factor)*",te=k.style;x._container===x._rootContainer?(te.left=`${(100*M/x._pageWidth).toFixed(2)}%`,te.top=`${(100*V/x._pageHeight).toFixed(2)}%`):(te.left=`${G}${M.toFixed(2)}px)`,te.top=`${G}${V.toFixed(2)}px)`),te.fontSize=`${G}${F.toFixed(2)}px)`,te.fontFamily=E.fontFamily,S.fontSize=F,k.setAttribute("role","presentation"),k.textContent=P.str,k.dir=P.dir,x._fontInspectorEnabled&&(k.dataset.fontName=P.fontName),w!==0&&(S.angle=w*(180/Math.PI));let ce=!1;if(P.str.length>1)ce=!0;else if(P.str!==" "&&P.transform[0]!==P.transform[3]){const se=Math.abs(P.transform[0]),le=Math.abs(P.transform[3]);se!==le&&Math.max(se,le)/Math.min(se,le)>1.5&&(ce=!0)}ce&&(S.canvasWidth=E.vertical?P.height:P.width),x._textDivProperties.set(k,S),x._isReadableStream&&x._layoutText(k)}function g(x){const{div:P,scale:T,properties:k,ctx:S,prevFontSize:A,prevFontFamily:w}=x,{style:E}=P;let F="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:O}=E,{canvasWidth:M,fontSize:V}=k;(A!==V||w!==O)&&(S.font=`${V*T}px ${O}`,x.prevFontSize=V,x.prevFontFamily=O);const{width:G}=S.measureText(P.textContent);G>0&&(F=`scaleX(${M*T/G})`)}k.angle!==0&&(F=`rotate(${k.angle}deg) ${F}`),F.length>0&&(E.transform=F)}function m(x){if(x._canceled)return;const P=x._textDivs,T=x._capability;if(P.length>l){T.resolve();return}if(!x._isReadableStream)for(const S of P)x._layoutText(S);T.resolve()}class y{constructor({textContentSource:P,container:T,viewport:k,textDivs:S,textDivProperties:A,textContentItemsStr:w,isOffscreenCanvasSupported:E}){var G;this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=T,this._textDivs=S||[],this._textContentItemsStr=w||[],this._isOffscreenCanvasSupported=E,this._fontInspectorEnabled=!!((G=globalThis.FontInspector)!=null&&G.enabled),this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f(0,E)};const{pageWidth:F,pageHeight:O,pageX:M,pageY:V}=k.rawDims;this._transform=[1,0,0,-1,-M,V+O],this._pageWidth=F,this._pageHeight=O,(0,o.setLayerDimensions)(T,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(P,T){for(const k of P){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const S=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),S.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),p(this,k,T)}}_layoutText(P){const T=this._layoutTextParams.properties=this._textDivProperties.get(P);if(this._layoutTextParams.div=P,g(this._layoutTextParams),T.hasText&&this._container.append(P),T.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const P=new s.PromiseCapability;let T=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:S,done:A})=>{if(A){P.resolve();return}Object.assign(T,S.styles),this._processItems(S.items,T),k()},P.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:S}=this._textContentSource;this._processItems(k,S),P.resolve()}else throw new Error('No "textContentSource" parameter specified.');P.promise.then(()=>{T=null,m(this)},this._capability.reject)}}e.TextLayerRenderTask=y;function _(x){!x.textContentSource&&(x.textContent||x.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),x.textContentSource=x.textContent||x.textContentStream);const{container:P,viewport:T}=x,k=getComputedStyle(P),S=k.getPropertyValue("visibility"),A=parseFloat(k.getPropertyValue("--scale-factor"));S==="visible"&&(!A||Math.abs(A-T.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const w=new y(x);return w._render(),w}function b({container:x,viewport:P,textDivs:T,textDivProperties:k,isOffscreenCanvasSupported:S,mustRotate:A=!0,mustRescale:w=!0}){if(A&&(0,o.setLayerDimensions)(x,{rotation:P.rotation}),w){const E=f(0,S),O={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E};for(const M of T)O.properties=k.get(M),O.div=M,g(O)}}},(a,e,n)=>{var f,d,p,g,m,y,_,b,x,ur,Vr,hr,fr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var s=n(1),o=n(5),l=n(28),c=n(29),u=n(6);const A=class A{constructor(E){Re(this,x);Re(this,f);Re(this,d,!1);Re(this,p,this.pointerup.bind(this));Re(this,g,this.pointerdown.bind(this));Re(this,m,new Map);Re(this,y,!1);Re(this,_,!1);Re(this,b);A._initialized||(A._initialized=!0,l.FreeTextEditor.initialize(E.l10n),c.InkEditor.initialize(E.l10n)),E.uiManager.registerEditorTypes([l.FreeTextEditor,c.InkEditor]),Ie(this,b,E.uiManager),this.pageIndex=E.pageIndex,this.div=E.div,Ie(this,f,E.accessibilityManager),W(this,b).addLayer(this)}get isEmpty(){return W(this,m).size===0}updateToolbar(E){W(this,b).updateToolbar(E)}updateMode(E=W(this,b).getMode()){Ee(this,x,fr).call(this),E===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),W(this,b).unselectAll(),E!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",E===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",E===s.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(E){if(!E&&W(this,b).getMode()!==s.AnnotationEditorType.INK)return;if(!E){for(const O of W(this,m).values())if(O.isEmpty()){O.setInBackground();return}}Ee(this,x,hr).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(E){W(this,b).setEditingState(E)}addCommands(E){W(this,b).addCommands(E)}enable(){this.div.style.pointerEvents="auto";for(const E of W(this,m).values())E.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const E of W(this,m).values())E.disableEditing();Ee(this,x,fr).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(E){W(this,b).getActive()!==E&&W(this,b).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",W(this,g)),this.div.addEventListener("pointerup",W(this,p))}disableClick(){this.div.removeEventListener("pointerdown",W(this,g)),this.div.removeEventListener("pointerup",W(this,p))}attach(E){W(this,m).set(E.id,E)}detach(E){var F;W(this,m).delete(E.id),(F=W(this,f))==null||F.removePointerInTextLayer(E.contentDiv)}remove(E){W(this,b).removeEditor(E),this.detach(E),E.div.style.display="none",setTimeout(()=>{E.div.style.display="",E.div.remove(),E.isAttachedToDOM=!1,document.activeElement===document.body&&W(this,b).focusMainContainer()},0),W(this,_)||this.addInkEditorIfNeeded(!1)}add(E){if(Ee(this,x,ur).call(this,E),W(this,b).addEditor(E),this.attach(E),!E.isAttachedToDOM){const F=E.render();this.div.append(F),E.isAttachedToDOM=!0}this.moveEditorInDOM(E),E.onceAdded(),W(this,b).addToAnnotationStorage(E)}moveEditorInDOM(E){var F;(F=W(this,f))==null||F.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addANewEditor(E){const F=()=>{this.addOrRebuild(E)},O=()=>{E.remove()};this.addCommands({cmd:F,undo:O,mustExec:!0})}addUndoableEditor(E){const F=()=>{this.addOrRebuild(E)},O=()=>{E.remove()};this.addCommands({cmd:F,undo:O,mustExec:!1})}getNextId(){return W(this,b).getId()}deserialize(E){switch(E.annotationType){case s.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(E,this,W(this,b));case s.AnnotationEditorType.INK:return c.InkEditor.deserialize(E,this,W(this,b))}return null}setSelected(E){W(this,b).setSelected(E)}toggleSelected(E){W(this,b).toggleSelected(E)}isSelected(E){return W(this,b).isSelected(E)}unselect(E){W(this,b).unselect(E)}pointerup(E){const{isMac:F}=s.FeatureTest.platform;if(!(E.button!==0||E.ctrlKey&&F)&&E.target===this.div&&W(this,y)){if(Ie(this,y,!1),!W(this,d)){Ie(this,d,!0);return}Ee(this,x,hr).call(this,E)}}pointerdown(E){const{isMac:F}=s.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&F||E.target!==this.div)return;Ie(this,y,!0);const O=W(this,b).getActive();Ie(this,d,!O||O.isEmpty())}drop(E){const F=E.dataTransfer.getData("text/plain"),O=W(this,b).getEditor(F);if(!O)return;E.preventDefault(),E.dataTransfer.dropEffect="move",Ee(this,x,ur).call(this,O);const M=this.div.getBoundingClientRect(),V=E.clientX-M.x,G=E.clientY-M.y;O.translate(V-O.startX,G-O.startY),this.moveEditorInDOM(O),O.div.focus()}dragover(E){E.preventDefault()}destroy(){var E,F;((E=W(this,b).getActive())==null?void 0:E.parent)===this&&W(this,b).setActiveEditor(null);for(const O of W(this,m).values())(F=W(this,f))==null||F.removePointerInTextLayer(O.contentDiv),O.setParent(null),O.isAttachedToDOM=!1,O.div.remove();this.div=null,W(this,m).clear(),W(this,b).removeLayer(this)}render({viewport:E}){this.viewport=E,(0,u.setLayerDimensions)(this.div,E),(0,o.bindEvents)(this,this.div,["dragover","drop"]);for(const F of W(this,b).getEditors(this.pageIndex))this.add(F);this.updateMode()}update({viewport:E}){W(this,b).commitOrRemove(),this.viewport=E,(0,u.setLayerDimensions)(this.div,{rotation:E.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:E,pageHeight:F}=this.viewport.rawDims;return[E,F]}};f=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,_=new WeakMap,b=new WeakMap,x=new WeakSet,ur=function(E){var F;E.parent!==this&&(this.attach(E),(F=E.parent)==null||F.detach(E),E.setParent(this),E.div&&E.isAttachedToDOM&&(E.div.remove(),this.div.append(E.div)))},Vr=function(E){switch(W(this,b).getMode()){case s.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(E);case s.AnnotationEditorType.INK:return new c.InkEditor(E)}return null},hr=function(E){const F=this.getNextId(),O=Ee(this,x,Vr).call(this,{parent:this,id:F,x:E.offsetX,y:E.offsetY,uiManager:W(this,b)});return O&&this.add(O),O},fr=function(){Ie(this,_,!0);for(const E of W(this,m).values())E.isEmpty()&&E.remove();Ie(this,_,!1)},rt(A,"_initialized",!1);let h=A;e.AnnotationEditorLayer=h},(a,e,n)=>{var u,h,f,d,p,g,m,y,_,b,jr,Wr,qr,dr;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var s=n(1),o=n(5),l=n(4);const S=class S extends l.AnnotationEditor{constructor(E){super({...E,name:"freeTextEditor"});Re(this,b);Re(this,u,this.editorDivBlur.bind(this));Re(this,h,this.editorDivFocus.bind(this));Re(this,f,this.editorDivInput.bind(this));Re(this,d,this.editorDivKeydown.bind(this));Re(this,p);Re(this,g,"");Re(this,m,`${this.id}-editor`);Re(this,y,!1);Re(this,_);Ie(this,p,E.color||S._defaultColor||l.AnnotationEditor._defaultLineColor),Ie(this,_,E.fontSize||S._defaultFontSize)}static initialize(E){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(O=>[O,E.get(O)]));const F=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(F.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,F){switch(E){case s.AnnotationEditorParamsType.FREETEXT_SIZE:S._defaultFontSize=F;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:S._defaultColor=F;break}}updateParams(E,F){switch(E){case s.AnnotationEditorParamsType.FREETEXT_SIZE:Ee(this,b,jr).call(this,F);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:Ee(this,b,Wr).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,S._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,S._defaultColor||l.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,W(this,_)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,W(this,p)]]}getInitialTranslation(){const E=this.parentScale;return[-S._internalPadding*E,-(S._internalPadding+W(this,_))*E]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",W(this,d)),this.editorDiv.addEventListener("focus",W(this,h)),this.editorDiv.addEventListener("blur",W(this,u)),this.editorDiv.addEventListener("input",W(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",W(this,m)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",W(this,d)),this.editorDiv.removeEventListener("focus",W(this,h)),this.editorDiv.removeEventListener("blur",W(this,u)),this.editorDiv.removeEventListener("input",W(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),W(this,y)||(Ie(this,y,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Ie(this,g,Ee(this,b,qr).call(this).trimEnd()),Ee(this,b,dr).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(E){this.enableEditMode(),this.editorDiv.focus()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(E){S._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,F;this.width&&(E=this.x,F=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",W(this,m)),this.enableEditing(),S._l10nPromise.get("editor_free_text2_aria_label").then(M=>{var V;return(V=this.editorDiv)==null?void 0:V.setAttribute("aria-label",M)}),S._l10nPromise.get("free_text2_default_content").then(M=>{var V;return(V=this.editorDiv)==null?void 0:V.setAttribute("default-content",M)}),this.editorDiv.contentEditable=!0;const{style:O}=this.editorDiv;if(O.fontSize=`calc(${W(this,_)}px * var(--scale-factor))`,O.color=W(this,p),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[M,V]=this.parentDimensions;this.setAt(E*M,F*V,this.width*M,this.height*V);for(const G of W(this,g).split(`
`)){const te=document.createElement("div");te.append(G?document.createTextNode(G):document.createElement("br")),this.editorDiv.append(te)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,F,O){const M=super.deserialize(E,F,O);return Ie(M,_,E.fontSize),Ie(M,p,s.Util.makeHexColor(...E.color)),Ie(M,g,E.value),M}serialize(){if(this.isEmpty())return null;const E=S._internalPadding*this.parentScale,F=this.getRect(E,E),O=l.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:W(this,p));return{annotationType:s.AnnotationEditorType.FREETEXT,color:O,fontSize:W(this,_),value:W(this,g),pageIndex:this.pageIndex,rect:F,rotation:this.rotation}}};u=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,_=new WeakMap,b=new WeakSet,jr=function(E){const F=M=>{this.editorDiv.style.fontSize=`calc(${M}px * var(--scale-factor))`,this.translate(0,-(M-W(this,_))*this.parentScale),Ie(this,_,M),Ee(this,b,dr).call(this)},O=W(this,_);this.addCommands({cmd:()=>{F(E)},undo:()=>{F(O)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Wr=function(E){const F=W(this,p);this.addCommands({cmd:()=>{Ie(this,p,this.editorDiv.style.color=E)},undo:()=>{Ie(this,p,this.editorDiv.style.color=F)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qr=function(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const F=[];for(const O of E)F.push(O.innerText.replace(/\r\n?|\n/,""));return F.join(`
`)},dr=function(){const[E,F]=this.parentDimensions;let O;if(this.isAttachedToDOM)O=this.div.getBoundingClientRect();else{const{currentLayer:M,div:V}=this,G=V.style.display;V.style.display="hidden",M.div.append(this.div),O=V.getBoundingClientRect(),V.remove(),V.style.display=G}this.width=O.width/E,this.height=O.height/F},rt(S,"_freeTextDefaultContent",""),rt(S,"_l10nPromise"),rt(S,"_internalPadding",0),rt(S,"_defaultColor",null),rt(S,"_defaultFontSize",10),rt(S,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],S.prototype.commitOrRemove]])),rt(S,"_type","freetext");let c=S;e.FreeTextEditor=c},(a,e,n)=>{var f,d,p,g,m,y,_,b,x,P,T,k,S,A,w,Gr,Kr,Xr,Zr,pr,Yr,Jr,Qr,xt,gr,Kt,Xt,Ot,mr,Zt,ae,vr,$r,en,tn,yr,Yt,Mt,br;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return l.fitCurve}});var s=n(1),o=n(4),l=n(30),c=n(5);const u=16,R=class R extends o.AnnotationEditor{constructor(L){super({...L,name:"inkEditor"});Re(this,w);Re(this,f,0);Re(this,d,0);Re(this,p,0);Re(this,g,this.canvasPointermove.bind(this));Re(this,m,this.canvasPointerleave.bind(this));Re(this,y,this.canvasPointerup.bind(this));Re(this,_,this.canvasPointerdown.bind(this));Re(this,b,!1);Re(this,x,!1);Re(this,P,null);Re(this,T,null);Re(this,k,0);Re(this,S,0);Re(this,A,null);this.color=L.color||null,this.thickness=L.thickness||null,this.opacity=L.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(L){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(j=>[j,L.get(j)]))}static updateDefaultParams(L,j){switch(L){case s.AnnotationEditorParamsType.INK_THICKNESS:R._defaultThickness=j;break;case s.AnnotationEditorParamsType.INK_COLOR:R._defaultColor=j;break;case s.AnnotationEditorParamsType.INK_OPACITY:R._defaultOpacity=j/100;break}}updateParams(L,j){switch(L){case s.AnnotationEditorParamsType.INK_THICKNESS:Ee(this,w,Gr).call(this,j);break;case s.AnnotationEditorParamsType.INK_COLOR:Ee(this,w,Kr).call(this,j);break;case s.AnnotationEditorParamsType.INK_OPACITY:Ee(this,w,Xr).call(this,j);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,R._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,R._defaultColor||o.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(R._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||R._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||R._defaultColor||o.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??R._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Ee(this,w,Kt).call(this),Ee(this,w,Xt).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ee(this,w,Ot).call(this)),Ee(this,w,Mt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,W(this,T).disconnect(),Ie(this,T,null),super.remove())}setParent(L){!this.parent&&L?this._uiManager.removeShouldRescale(this):this.parent&&L===null&&this._uiManager.addShouldRescale(this),super.setParent(L)}onScaleChanging(){const[L,j]=this.parentDimensions,ee=this.width*L,he=this.height*j;this.setDimensions(ee,he)}enableEditMode(){W(this,b)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",W(this,_)),this.canvas.addEventListener("pointerup",W(this,y)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",W(this,_)),this.canvas.removeEventListener("pointerup",W(this,y)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){W(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ie(this,b,!0),this.div.classList.add("disabled"),Ee(this,w,Mt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(L){super.focusin(L),this.enableEditMode()}canvasPointerdown(L){L.button!==0||!this.isInEditMode()||W(this,b)||(this.setInForeground(),L.type!=="mouse"&&this.div.focus(),L.stopPropagation(),this.canvas.addEventListener("pointerleave",W(this,m)),this.canvas.addEventListener("pointermove",W(this,g)),Ee(this,w,Yr).call(this,L.offsetX,L.offsetY))}canvasPointermove(L){L.stopPropagation(),Ee(this,w,Jr).call(this,L.offsetX,L.offsetY)}canvasPointerup(L){L.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(L.stopPropagation(),Ee(this,w,gr).call(this,L),this.setInBackground())}canvasPointerleave(L){Ee(this,w,gr).call(this,L),this.setInBackground()}render(){if(this.div)return this.div;let L,j;this.width&&(L=this.x,j=this.y),super.render(),R._l10nPromise.get("editor_ink2_aria_label").then(ne=>{var de;return(de=this.div)==null?void 0:de.setAttribute("aria-label",ne)});const[ee,he,ye,pe]=Ee(this,w,Zr).call(this);if(this.setAt(ee,he,0,0),this.setDims(ye,pe),Ee(this,w,Kt).call(this),this.width){const[ne,de]=this.parentDimensions;this.setAt(L*ne,j*de,this.width*ne,this.height*de),Ie(this,x,!0),Ee(this,w,Ot).call(this),this.setDims(this.width*ne,this.height*de),Ee(this,w,xt).call(this),Ee(this,w,br).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ee(this,w,Xt).call(this),this.div}setDimensions(L,j){const ee=Math.round(L),he=Math.round(j);if(W(this,k)===ee&&W(this,S)===he)return;Ie(this,k,ee),Ie(this,S,he),this.canvas.style.visibility="hidden",W(this,f)&&Math.abs(W(this,f)-L/j)>.01&&(j=Math.ceil(L/W(this,f)),this.setDims(L,j));const[ye,pe]=this.parentDimensions;this.width=L/ye,this.height=j/pe,W(this,b)&&Ee(this,w,mr).call(this,L,j),Ee(this,w,Ot).call(this),Ee(this,w,xt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(L,j,ee){var De,Me;const he=super.deserialize(L,j,ee);he.thickness=L.thickness,he.color=s.Util.makeHexColor(...L.color),he.opacity=L.opacity;const[ye,pe]=he.pageDimensions,ne=he.width*ye,de=he.height*pe,me=he.parentScale,ve=L.thickness/2;Ie(he,f,ne/de),Ie(he,b,!0),Ie(he,k,Math.round(ne)),Ie(he,S,Math.round(de));for(const{bezier:Le}of L.paths){const qe=[];he.paths.push(qe);let Ke=me*(Le[0]-ve),Y=me*(de-Le[1]-ve);for(let Pe=2,Oe=Le.length;Pe<Oe;Pe+=6){const re=me*(Le[Pe]-ve),oe=me*(de-Le[Pe+1]-ve),N=me*(Le[Pe+2]-ve),be=me*(de-Le[Pe+3]-ve),Ne=me*(Le[Pe+4]-ve),D=me*(de-Le[Pe+5]-ve);qe.push([[Ke,Y],[re,oe],[N,be],[Ne,D]]),Ke=Ne,Y=D}const Te=Ee(this,ae,vr).call(this,qe);he.bezierPath2D.push(Te)}const Se=Ee(De=he,w,yr).call(De);return Ie(he,p,Math.max(u,Se[2]-Se[0])),Ie(he,d,Math.max(u,Se[3]-Se[1])),Ee(Me=he,w,mr).call(Me,ne,de),he}serialize(){if(this.isEmpty())return null;const L=this.getRect(0,0),j=this.rotation%180===0?L[3]-L[1]:L[2]-L[0],ee=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:ee,thickness:this.thickness,opacity:this.opacity,paths:Ee(this,w,$r).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,j),pageIndex:this.pageIndex,rect:L,rotation:this.rotation}}};f=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,_=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakMap,w=new WeakSet,Gr=function(L){const j=this.thickness;this.addCommands({cmd:()=>{this.thickness=L,Ee(this,w,Mt).call(this)},undo:()=>{this.thickness=j,Ee(this,w,Mt).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Kr=function(L){const j=this.color;this.addCommands({cmd:()=>{this.color=L,Ee(this,w,xt).call(this)},undo:()=>{this.color=j,Ee(this,w,xt).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Xr=function(L){L/=100;const j=this.opacity;this.addCommands({cmd:()=>{this.opacity=L,Ee(this,w,xt).call(this)},undo:()=>{this.opacity=j,Ee(this,w,xt).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Zr=function(){const{parentRotation:L,parentDimensions:[j,ee]}=this;switch(L){case 90:return[0,ee,ee,j];case 180:return[j,ee,j,ee];case 270:return[j,0,ee,j];default:return[0,0,j,ee]}},pr=function(){const{ctx:L,color:j,opacity:ee,thickness:he,parentScale:ye,scaleFactor:pe}=this;L.lineWidth=he*ye/pe,L.lineCap="round",L.lineJoin="round",L.miterLimit=10,L.strokeStyle=`${j}${(0,c.opacityToHex)(ee)}`},Yr=function(L,j){this.isEditing=!0,W(this,x)||(Ie(this,x,!0),Ee(this,w,Ot).call(this),this.thickness||(this.thickness=R._defaultThickness),this.color||(this.color=R._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=R._defaultOpacity)),this.currentPath.push([L,j]),Ie(this,P,null),Ee(this,w,pr).call(this),this.ctx.beginPath(),this.ctx.moveTo(L,j),Ie(this,A,()=>{W(this,A)&&(W(this,P)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Ee(this,w,xt).call(this),this.ctx.lineTo(...W(this,P)),Ie(this,P,null),this.ctx.stroke()),window.requestAnimationFrame(W(this,A)))}),window.requestAnimationFrame(W(this,A))},Jr=function(L,j){const[ee,he]=this.currentPath.at(-1);L===ee&&j===he||(this.currentPath.push([L,j]),Ie(this,P,[L,j]))},Qr=function(L,j){var me;this.ctx.closePath(),Ie(this,A,null),L=Math.min(Math.max(L,0),this.canvas.width),j=Math.min(Math.max(j,0),this.canvas.height);const[ee,he]=this.currentPath.at(-1);(L!==ee||j!==he)&&this.currentPath.push([L,j]);let ye;if(this.currentPath.length!==1)ye=(0,l.fitCurve)(this.currentPath,30,null);else{const ve=[L,j];ye=[[ve,ve.slice(),ve.slice(),ve]]}const pe=Ee(me=R,ae,vr).call(me,ye);this.currentPath.length=0;const ne=()=>{this.paths.push(ye),this.bezierPath2D.push(pe),this.rebuild()},de=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ee(this,w,Kt).call(this),Ee(this,w,Xt).call(this)),Ee(this,w,Mt).call(this))};this.addCommands({cmd:ne,undo:de,mustExec:!0})},xt=function(){if(this.isEmpty()){Ee(this,w,Zt).call(this);return}Ee(this,w,pr).call(this);const{canvas:L,ctx:j}=this;j.setTransform(1,0,0,1,0,0),j.clearRect(0,0,L.width,L.height),Ee(this,w,Zt).call(this);for(const ee of this.bezierPath2D)j.stroke(ee)},gr=function(L){Ee(this,w,Qr).call(this,L.offsetX,L.offsetY),this.canvas.removeEventListener("pointerleave",W(this,m)),this.canvas.removeEventListener("pointermove",W(this,g)),this.addToAnnotationStorage()},Kt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",R._l10nPromise.get("editor_ink_canvas_aria_label").then(L=>{var j;return(j=this.canvas)==null?void 0:j.setAttribute("aria-label",L)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Xt=function(){Ie(this,T,new ResizeObserver(L=>{const j=L[0].contentRect;j.width&&j.height&&this.setDimensions(j.width,j.height)})),W(this,T).observe(this.div)},Ot=function(){if(!W(this,x))return;const[L,j]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*L),this.canvas.height=Math.ceil(this.height*j),Ee(this,w,Zt).call(this)},mr=function(L,j){const ee=Ee(this,w,Yt).call(this),he=(L-ee)/W(this,p),ye=(j-ee)/W(this,d);this.scaleFactor=Math.min(he,ye)},Zt=function(){const L=Ee(this,w,Yt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+L,this.translationY*this.scaleFactor+L)},ae=new WeakSet,vr=function(L){const j=new Path2D;for(let ee=0,he=L.length;ee<he;ee++){const[ye,pe,ne,de]=L[ee];ee===0&&j.moveTo(...ye),j.bezierCurveTo(pe[0],pe[1],ne[0],ne[1],de[0],de[1])}return j},$r=function(L,j,ee,he){const pe=[],ne=this.thickness/2;let de,me;for(const ve of this.paths){de=[],me=[];for(let Se=0,De=ve.length;Se<De;Se++){const[Me,Le,qe,Ke]=ve[Se],Y=L*(Me[0]+j)+ne,Te=he-L*(Me[1]+ee)-ne,Pe=L*(Le[0]+j)+ne,Oe=he-L*(Le[1]+ee)-ne,re=L*(qe[0]+j)+ne,oe=he-L*(qe[1]+ee)-ne,N=L*(Ke[0]+j)+ne,be=he-L*(Ke[1]+ee)-ne;Se===0&&(de.push(Y,Te),me.push(Y,Te)),de.push(Pe,Oe,re,oe,N,be),Ee(this,w,en).call(this,Y,Te,Pe,Oe,re,oe,N,be,4,me)}pe.push({bezier:de,points:me})}return pe},en=function(L,j,ee,he,ye,pe,ne,de,me,ve){if(Ee(this,w,tn).call(this,L,j,ee,he,ye,pe,ne,de)){ve.push(ne,de);return}for(let Se=1;Se<me-1;Se++){const De=Se/me,Me=1-De;let Le=De*L+Me*ee,qe=De*j+Me*he,Ke=De*ee+Me*ye,Y=De*he+Me*pe;const Te=De*ye+Me*ne,Pe=De*pe+Me*de;Le=De*Le+Me*Ke,qe=De*qe+Me*Y,Ke=De*Ke+Me*Te,Y=De*Y+Me*Pe,Le=De*Le+Me*Ke,qe=De*qe+Me*Y,ve.push(Le,qe)}ve.push(ne,de)},tn=function(L,j,ee,he,ye,pe,ne,de){const ve=(3*ee-2*L-ne)**2,Se=(3*he-2*j-de)**2,De=(3*ye-L-2*ne)**2,Me=(3*pe-j-2*de)**2;return Math.max(ve,De)+Math.max(Se,Me)<=10},yr=function(){let L=1/0,j=-1/0,ee=1/0,he=-1/0;for(const ye of this.paths)for(const[pe,ne,de,me]of ye){const ve=s.Util.bezierBoundingBox(...pe,...ne,...de,...me);L=Math.min(L,ve[0]),ee=Math.min(ee,ve[1]),j=Math.max(j,ve[2]),he=Math.max(he,ve[3])}return[L,ee,j,he]},Yt=function(){return W(this,b)?Math.ceil(this.thickness*this.parentScale):0},Mt=function(L=!1){if(this.isEmpty())return;if(!W(this,b)){Ee(this,w,xt).call(this);return}const j=Ee(this,w,yr).call(this),ee=Ee(this,w,Yt).call(this);Ie(this,p,Math.max(u,j[2]-j[0])),Ie(this,d,Math.max(u,j[3]-j[1]));const he=Math.ceil(ee+W(this,p)*this.scaleFactor),ye=Math.ceil(ee+W(this,d)*this.scaleFactor),[pe,ne]=this.parentDimensions;this.width=he/pe,this.height=ye/ne,Ie(this,f,he/ye),Ee(this,w,br).call(this);const de=this.translationX,me=this.translationY;this.translationX=-j[0],this.translationY=-j[1],Ee(this,w,Ot).call(this),Ee(this,w,xt).call(this),Ie(this,k,he),Ie(this,S,ye),this.setDims(he,ye);const ve=L?ee/this.scaleFactor/2:0;this.translate(de-this.translationX-ve,me-this.translationY-ve)},br=function(){const{style:L}=this.div;W(this,f)>=1?(L.minHeight=`${u}px`,L.minWidth=`${Math.round(W(this,f)*u)}px`):(L.minWidth=`${u}px`,L.minHeight=`${Math.round(u/W(this,f))}px`)},Re(R,ae),rt(R,"_defaultColor",null),rt(R,"_defaultOpacity",1),rt(R,"_defaultThickness",1),rt(R,"_l10nPromise"),rt(R,"_type","ink");let h=R;e.InkEditor=h},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const s=n(31);e.fitCurve=s},a=>{function e(y,_,b){if(!Array.isArray(y))throw new TypeError("First argument should be an array");if(y.forEach(k=>{if(!Array.isArray(k)||k.some(S=>typeof S!="number")||k.length!==y[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),y=y.filter((k,S)=>S===0||!k.every((A,w)=>A===y[S-1][w])),y.length<2)return[];const x=y.length,P=p(y[1],y[0]),T=p(y[x-2],y[x-1]);return n(y,P,T,_,b)}function n(y,_,b,x,P){var k,S,A,w,E,F,O,M,V,G,te,ce,se;if(y.length===2)return ce=g.vectorLen(g.subtract(y[0],y[1]))/3,k=[y[0],g.addArrays(y[0],g.mulItems(_,ce)),g.addArrays(y[1],g.mulItems(b,ce)),y[1]],[k];if(S=u(y),[k,w,F]=s(y,S,S,_,b,P),w===0||w<x)return[k];if(w<x*x)for(A=S,E=w,O=F,se=0;se<20;se++){if(A=l(k,y,A),[k,w,F]=s(y,S,A,_,b,P),w<x)return[k];if(F===O){let le=w/E;if(le>.9999&&le<1.0001)break}E=w,O=F}return te=[],M=g.subtract(y[F-1],y[F+1]),M.every(le=>le===0)&&(M=g.subtract(y[F-1],y[F]),[M[0],M[1]]=[-M[1],M[0]]),V=g.normalize(M),G=g.mulItems(V,-1),te=te.concat(n(y.slice(0,F+1),_,V,x,P)),te=te.concat(n(y.slice(F),G,b,x,P)),te}function s(y,_,b,x,P,T){var k,S,A;return k=o(y,b,x,P),[S,A]=h(y,k,_),T&&T({bez:k,points:y,params:_,maxErr:S,maxPoint:A}),[k,S,A]}function o(y,_,b,x){var P,T,k,S,A,w,E,F,O,M,V,G,te,ce,se,le,fe,ge=y[0],xe=y[y.length-1];for(P=[ge,null,null,xe],T=g.zeros_Xx2x2(_.length),te=0,ce=_.length;te<ce;te++)le=_[te],fe=1-le,k=T[te],k[0]=g.mulItems(b,3*le*(fe*fe)),k[1]=g.mulItems(x,3*fe*(le*le));for(S=[[0,0],[0,0]],A=[0,0],te=0,ce=y.length;te<ce;te++)le=_[te],k=T[te],S[0][0]+=g.dot(k[0],k[0]),S[0][1]+=g.dot(k[0],k[1]),S[1][0]+=g.dot(k[0],k[1]),S[1][1]+=g.dot(k[1],k[1]),se=g.subtract(y[te],m.q([ge,ge,xe,xe],le)),A[0]+=g.dot(k[0],se),A[1]+=g.dot(k[1],se);return w=S[0][0]*S[1][1]-S[1][0]*S[0][1],E=S[0][0]*A[1]-S[1][0]*A[0],F=A[0]*S[1][1]-A[1]*S[0][1],O=w===0?0:F/w,M=w===0?0:E/w,G=g.vectorLen(g.subtract(ge,xe)),V=1e-6*G,O<V||M<V?(P[1]=g.addArrays(ge,g.mulItems(b,G/3)),P[2]=g.addArrays(xe,g.mulItems(x,G/3))):(P[1]=g.addArrays(ge,g.mulItems(b,O)),P[2]=g.addArrays(xe,g.mulItems(x,M))),P}function l(y,_,b){return b.map((x,P)=>c(y,_[P],x))}function c(y,_,b){var x=g.subtract(m.q(y,b),_),P=m.qprime(y,b),T=g.mulMatrix(x,P),k=g.sum(g.squareItems(P))+2*g.mulMatrix(x,m.qprimeprime(y,b));return k===0?b:b-T/k}function u(y){var _=[],b,x,P;return y.forEach((T,k)=>{b=k?x+g.vectorLen(g.subtract(T,P)):0,_.push(b),x=b,P=T}),_=_.map(T=>T/x),_}function h(y,_,b){var x,P,T,k,S,A,w,E;P=0,T=Math.floor(y.length/2);const F=f(_,10);for(S=0,A=y.length;S<A;S++)w=y[S],E=d(_,b[S],F,10),k=g.subtract(m.q(_,E),w),x=k[0]*k[0]+k[1]*k[1],x>P&&(P=x,T=S);return[P,T]}var f=function(y,_){for(var b,x=[0],P=y[0],T=0,k=1;k<=_;k++)b=m.q(y,k/_),T+=g.vectorLen(g.subtract(b,P)),x.push(T),P=b;return x=x.map(S=>S/T),x};function d(y,_,b,x){if(_<0)return 0;if(_>1)return 1;for(var P,T,k,S,A,w=1;w<=x;w++)if(_<=b[w]){S=(w-1)/x,k=w/x,T=b[w-1],P=b[w],A=(_-T)/(P-T)*(k-S)+S;break}return A}function p(y,_){return g.normalize(g.subtract(y,_))}class g{static zeros_Xx2x2(_){for(var b=[];_--;)b.push([0,0]);return b}static mulItems(_,b){return _.map(x=>x*b)}static mulMatrix(_,b){return _.reduce((x,P,T)=>x+P*b[T],0)}static subtract(_,b){return _.map((x,P)=>x-b[P])}static addArrays(_,b){return _.map((x,P)=>x+b[P])}static addItems(_,b){return _.map(x=>x+b)}static sum(_){return _.reduce((b,x)=>b+x)}static dot(_,b){return g.mulMatrix(_,b)}static vectorLen(_){return Math.hypot(..._)}static divItems(_,b){return _.map(x=>x/b)}static squareItems(_){return _.map(b=>b*b)}static normalize(_){return this.divItems(_,this.vectorLen(_))}}class m{static q(_,b){var x=1-b,P=g.mulItems(_[0],x*x*x),T=g.mulItems(_[1],3*x*x*b),k=g.mulItems(_[2],3*x*b*b),S=g.mulItems(_[3],b*b*b);return g.addArrays(g.addArrays(P,T),g.addArrays(k,S))}static qprime(_,b){var x=1-b,P=g.mulItems(g.subtract(_[1],_[0]),3*x*x),T=g.mulItems(g.subtract(_[2],_[1]),6*x*b),k=g.mulItems(g.subtract(_[3],_[2]),3*b*b);return g.addArrays(g.addArrays(P,T),k)}static qprimeprime(_,b){return g.addArrays(g.mulItems(g.addArrays(g.subtract(_[2],g.mulItems(_[1],2)),_[0]),6*(1-b)),g.mulItems(g.addArrays(g.subtract(_[3],g.mulItems(_[2],2)),_[1]),6*b))}}a.exports=e,a.exports.fitCubic=n,a.exports.createTangent=p},(a,e,n)=>{var ae,Ft,rn,K,_r,xr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var s=n(1),o=n(6),l=n(3),c=n(33),u=n(34);const h=1e3,f=9,d=new WeakSet;function p(J){return{width:J[2]-J[0],height:J[3]-J[1]}}class g{static create(R){switch(R.data.annotationType){case s.AnnotationType.LINK:return new y(R);case s.AnnotationType.TEXT:return new _(R);case s.AnnotationType.WIDGET:switch(R.data.fieldType){case"Tx":return new x(R);case"Btn":return R.data.radioButton?new T(R):R.data.checkBox?new P(R):new k(R);case"Ch":return new S(R)}return new b(R);case s.AnnotationType.POPUP:return new A(R);case s.AnnotationType.FREETEXT:return new E(R);case s.AnnotationType.LINE:return new F(R);case s.AnnotationType.SQUARE:return new O(R);case s.AnnotationType.CIRCLE:return new M(R);case s.AnnotationType.POLYLINE:return new V(R);case s.AnnotationType.CARET:return new te(R);case s.AnnotationType.INK:return new ce(R);case s.AnnotationType.POLYGON:return new G(R);case s.AnnotationType.HIGHLIGHT:return new se(R);case s.AnnotationType.UNDERLINE:return new le(R);case s.AnnotationType.SQUIGGLY:return new fe(R);case s.AnnotationType.STRIKEOUT:return new ge(R);case s.AnnotationType.STAMP:return new xe(R);case s.AnnotationType.FILEATTACHMENT:return new _e(R);default:return new m(R)}}}class m{constructor(R,{isRenderable:U=!1,ignoreBorder:z=!1,createQuadrilaterals:L=!1}={}){this.isRenderable=U,this.data=R.data,this.layer=R.layer,this.page=R.page,this.viewport=R.viewport,this.linkService=R.linkService,this.downloadManager=R.downloadManager,this.imageResourcesPath=R.imageResourcesPath,this.renderForms=R.renderForms,this.svgFactory=R.svgFactory,this.annotationStorage=R.annotationStorage,this.enableScripting=R.enableScripting,this.hasJSActions=R.hasJSActions,this._fieldObjects=R.fieldObjects,U&&(this.container=this._createContainer(z)),L&&(this.quadrilaterals=this._createQuadrilaterals(z))}_createContainer(R=!1){const{data:U,page:z,viewport:L}=this,j=document.createElement("section");j.setAttribute("data-annotation-id",U.id),U.noRotate&&j.classList.add("norotate");const{pageWidth:ee,pageHeight:he,pageX:ye,pageY:pe}=L.rawDims,{width:ne,height:de}=p(U.rect),me=s.Util.normalizeRect([U.rect[0],z.view[3]-U.rect[1]+z.view[1],U.rect[2],z.view[3]-U.rect[3]+z.view[1]]);if(!R&&U.borderStyle.width>0){j.style.borderWidth=`${U.borderStyle.width}px`;const Se=U.borderStyle.horizontalCornerRadius,De=U.borderStyle.verticalCornerRadius;if(Se>0||De>0){const Le=`calc(${Se}px * var(--scale-factor)) / calc(${De}px * var(--scale-factor))`;j.style.borderRadius=Le}else if(this instanceof T){const Le=`calc(${ne}px * var(--scale-factor)) / calc(${de}px * var(--scale-factor))`;j.style.borderRadius=Le}switch(U.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:j.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:j.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:j.style.borderBottomStyle="solid";break}const Me=U.borderColor||null;Me?j.style.borderColor=s.Util.makeHexColor(Me[0]|0,Me[1]|0,Me[2]|0):j.style.borderWidth=0}j.style.left=`${100*(me[0]-ye)/ee}%`,j.style.top=`${100*(me[1]-pe)/he}%`;const{rotation:ve}=U;return U.hasOwnCanvas||ve===0?(j.style.width=`${100*ne/ee}%`,j.style.height=`${100*de/he}%`):this.setRotation(ve,j),j}setRotation(R,U=this.container){const{pageWidth:z,pageHeight:L}=this.viewport.rawDims,{width:j,height:ee}=p(this.data.rect);let he,ye;R%180===0?(he=100*j/z,ye=100*ee/L):(he=100*ee/z,ye=100*j/L),U.style.width=`${he}%`,U.style.height=`${ye}%`,U.setAttribute("data-main-rotation",(360-R)%360)}get _commonActions(){const R=(U,z,L)=>{const j=L.detail[U];L.target.style[z]=c.ColorConverters[`${j[0]}_HTML`](j.slice(1))};return(0,s.shadow)(this,"_commonActions",{display:U=>{const z=U.detail.display%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:z,print:U.detail.display===0||U.detail.display===3})},print:U=>{this.annotationStorage.setValue(this.data.id,{print:U.detail.print})},hidden:U=>{this.container.style.visibility=U.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:U.detail.hidden})},focus:U=>{setTimeout(()=>U.target.focus({preventScroll:!1}),0)},userName:U=>{U.target.title=U.detail.userName},readonly:U=>{U.detail.readonly?U.target.setAttribute("readonly",""):U.target.removeAttribute("readonly")},required:U=>{this._setRequired(U.target,U.detail.required)},bgColor:U=>{R("bgColor","backgroundColor",U)},fillColor:U=>{R("fillColor","backgroundColor",U)},fgColor:U=>{R("fgColor","color",U)},textColor:U=>{R("textColor","color",U)},borderColor:U=>{R("borderColor","borderColor",U)},strokeColor:U=>{R("strokeColor","borderColor",U)},rotation:U=>{const z=U.detail.rotation;this.setRotation(z),this.annotationStorage.setValue(this.data.id,{rotation:z})}})}_dispatchEventFromSandbox(R,U){const z=this._commonActions;for(const L of Object.keys(U.detail)){const j=R[L]||z[L];j==null||j(U)}}_setDefaultPropertiesFromJS(R){if(!this.enableScripting)return;const U=this.annotationStorage.getRawValue(this.data.id);if(!U)return;const z=this._commonActions;for(const[L,j]of Object.entries(U)){const ee=z[L];if(ee){const he={detail:{[L]:j},target:R};ee(he),delete U[L]}}}_createQuadrilaterals(R=!1){if(!this.data.quadPoints)return null;const U=[],z=this.data.rect;for(const L of this.data.quadPoints)this.data.rect=[L[2].x,L[2].y,L[1].x,L[1].y],U.push(this._createContainer(R));return this.data.rect=z,U}_createPopup(R,U){let z=this.container;this.quadrilaterals&&(R||(R=this.quadrilaterals),z=this.quadrilaterals[0]),R||(R=document.createElement("div"),R.classList.add("popupTriggerArea"),z.append(R));const j=new w({container:z,trigger:R,color:U.color,titleObj:U.titleObj,modificationDate:U.modificationDate,contentsObj:U.contentsObj,richText:U.richText,hideWrapper:!0}).render();j.style.left="100%",z.append(j)}_renderQuadrilaterals(R){for(const U of this.quadrilaterals)U.classList.add(R);return this.quadrilaterals}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(R,U=null){const z=[];if(this._fieldObjects){const L=this._fieldObjects[R];if(L)for(const{page:j,id:ee,exportValues:he}of L){if(j===-1||ee===U)continue;const ye=typeof he=="string"?he:null,pe=document.querySelector(`[data-element-id="${ee}"]`);if(pe&&!d.has(pe)){(0,s.warn)(`_getElementsByName - element not allowed: ${ee}`);continue}z.push({id:ee,exportValue:ye,domElement:pe})}return z}for(const L of document.getElementsByName(R)){const{exportValue:j}=L,ee=L.getAttribute("data-element-id");ee!==U&&d.has(L)&&z.push({id:ee,exportValue:j,domElement:L})}return z}}class y extends m{constructor(U,z=null){super(U,{isRenderable:!0,ignoreBorder:!!(z!=null&&z.ignoreBorder),createQuadrilaterals:!0});Re(this,ae);this.isTooltipOnly=U.data.isTooltipOnly}render(){const{data:U,linkService:z}=this,L=document.createElement("a");L.setAttribute("data-element-id",U.id);let j=!1;return U.url?(z.addLinkAttributes(L,U.url,U.newWindow),j=!0):U.action?(this._bindNamedAction(L,U.action),j=!0):U.attachment?(this._bindAttachment(L,U.attachment),j=!0):U.setOCGState?(Ee(this,ae,rn).call(this,L,U.setOCGState),j=!0):U.dest?(this._bindLink(L,U.dest),j=!0):(U.actions&&(U.actions.Action||U.actions["Mouse Up"]||U.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,U),j=!0),U.resetForm?(this._bindResetFormAction(L,U.resetForm),j=!0):this.isTooltipOnly&&!j&&(this._bindLink(L,""),j=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((ee,he)=>{const ye=he===0?L:L.cloneNode();return ee.append(ye),ee}):(this.container.classList.add("linkAnnotation"),j&&this.container.append(L),this.container)}_bindLink(U,z){U.href=this.linkService.getDestinationHash(z),U.onclick=()=>(z&&this.linkService.goToDestination(z),!1),(z||z==="")&&Ee(this,ae,Ft).call(this)}_bindNamedAction(U,z){U.href=this.linkService.getAnchorUrl(""),U.onclick=()=>(this.linkService.executeNamedAction(z),!1),Ee(this,ae,Ft).call(this)}_bindAttachment(U,z){U.href=this.linkService.getAnchorUrl(""),U.onclick=()=>{var L;return(L=this.downloadManager)==null||L.openOrDownloadData(this.container,z.content,z.filename),!1},Ee(this,ae,Ft).call(this)}_bindJSAction(U,z){U.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const j of Object.keys(z.actions)){const ee=L.get(j);ee&&(U[ee]=()=>{var he;return(he=this.linkService.eventBus)==null||he.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z.id,name:j}}),!1})}U.onclick||(U.onclick=()=>!1),Ee(this,ae,Ft).call(this)}_bindResetFormAction(U,z){const L=U.onclick;if(L||(U.href=this.linkService.getAnchorUrl("")),Ee(this,ae,Ft).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(U.onclick=()=>!1);return}U.onclick=()=>{var de;L==null||L();const{fields:j,refs:ee,include:he}=z,ye=[];if(j.length!==0||ee.length!==0){const me=new Set(ee);for(const ve of j){const Se=this._fieldObjects[ve]||[];for(const{id:De}of Se)me.add(De)}for(const ve of Object.values(this._fieldObjects))for(const Se of ve)me.has(Se.id)===he&&ye.push(Se)}else for(const me of Object.values(this._fieldObjects))ye.push(...me);const pe=this.annotationStorage,ne=[];for(const me of ye){const{id:ve}=me;switch(ne.push(ve),me.type){case"text":{const De=me.defaultValue||"";pe.setValue(ve,{value:De});break}case"checkbox":case"radiobutton":{const De=me.defaultValue===me.exportValues;pe.setValue(ve,{value:De});break}case"combobox":case"listbox":{const De=me.defaultValue||"";pe.setValue(ve,{value:De});break}default:continue}const Se=document.querySelector(`[data-element-id="${ve}"]`);if(Se){if(!d.has(Se)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${ve}`);continue}}else continue;Se.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ne,name:"ResetForm"}})),!1}}}ae=new WeakSet,Ft=function(){this.container.setAttribute("data-internal-link","")},rn=function(U,z){U.href=this.linkService.getAnchorUrl(""),U.onclick=()=>(this.linkService.executeSetOCGState(z),!1),Ee(this,ae,Ft).call(this)};class _ extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U})}render(){this.container.classList.add("textAnnotation");const R=document.createElement("img");return R.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",R.alt="[{{type}} Annotation]",R.dataset.l10nId="text_annotation_type",R.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(R,this.data),this.container.append(R),this.container}}class b extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(R){var U;this.data.hasOwnCanvas&&(((U=R.previousSibling)==null?void 0:U.nodeName)==="CANVAS"&&(R.previousSibling.hidden=!0),R.hidden=!1)}_getKeyModifier(R){const{isWin:U,isMac:z}=s.FeatureTest.platform;return U&&R.ctrlKey||z&&R.metaKey}_setEventListener(R,U,z,L){U.includes("mouse")?R.addEventListener(U,j=>{var ee;(ee=this.linkService.eventBus)==null||ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:L(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):R.addEventListener(U,j=>{var ee;(ee=this.linkService.eventBus)==null||ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:L(j)}})})}_setEventListeners(R,U,z){var L;for(const[j,ee]of U)(ee==="Action"||(L=this.data.actions)!=null&&L[ee])&&this._setEventListener(R,j,ee,z)}_setBackgroundColor(R){const U=this.data.backgroundColor||null;R.style.backgroundColor=U===null?"transparent":s.Util.makeHexColor(U[0],U[1],U[2])}_setTextStyle(R){const U=["left","center","right"],{fontColor:z}=this.data.defaultAppearanceData,L=this.data.defaultAppearanceData.fontSize||f,j=R.style;let ee;const he=2,ye=pe=>Math.round(10*pe)/10;if(this.data.multiLine){const pe=Math.abs(this.data.rect[3]-this.data.rect[1]-he),ne=Math.round(pe/(s.LINE_FACTOR*L))||1,de=pe/ne;ee=Math.min(L,ye(de/s.LINE_FACTOR))}else{const pe=Math.abs(this.data.rect[3]-this.data.rect[1]-he);ee=Math.min(L,ye(pe/s.LINE_FACTOR))}j.fontSize=`calc(${ee}px * var(--scale-factor))`,j.color=s.Util.makeHexColor(z[0],z[1],z[2]),this.data.textAlignment!==null&&(j.textAlign=U[this.data.textAlignment])}_setRequired(R,U){U?R.setAttribute("required",!0):R.removeAttribute("required"),R.setAttribute("aria-required",U)}}class x extends b{constructor(R){const U=R.renderForms||!R.data.hasAppearance&&!!R.data.fieldValue;super(R,{isRenderable:U})}setPropertyOnSiblings(R,U,z,L){const j=this.annotationStorage;for(const ee of this._getElementsByName(R.name,R.id))ee.domElement&&(ee.domElement[U]=z),j.setValue(ee.id,{[L]:z})}render(){var L;const R=this.annotationStorage,U=this.data.id;this.container.classList.add("textWidgetAnnotation");let z=null;if(this.renderForms){const j=R.getValue(U,{value:this.data.fieldValue});let ee=j.formattedValue||j.value||"";const he=R.getValue(U,{charLimit:this.data.maxLen}).charLimit;he&&ee.length>he&&(ee=ee.slice(0,he));const ye={userValue:ee,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(z=document.createElement("textarea"),z.textContent=ee,this.data.doNotScroll&&(z.style.overflowY="hidden")):(z=document.createElement("input"),z.type="text",z.setAttribute("value",ee),this.data.doNotScroll&&(z.style.overflowX="hidden")),this.data.hasOwnCanvas&&(z.hidden=!0),d.add(z),z.setAttribute("data-element-id",U),z.disabled=this.data.readOnly,z.name=this.data.fieldName,z.tabIndex=h,this._setRequired(z,this.data.required),he&&(z.maxLength=he),z.addEventListener("input",ne=>{R.setValue(U,{value:ne.target.value}),this.setPropertyOnSiblings(z,"value",ne.target.value,"value")}),z.addEventListener("resetform",ne=>{const de=this.data.defaultFieldValue??"";z.value=ye.userValue=de,ye.formattedValue=null});let pe=ne=>{const{formattedValue:de}=ye;de!=null&&(ne.target.value=de),ne.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){z.addEventListener("focus",de=>{const{target:me}=de;ye.userValue&&(me.value=ye.userValue),ye.lastCommittedValue=me.value,ye.commitKey=1}),z.addEventListener("updatefromsandbox",de=>{this.showElementAndHideCanvas(de.target);const me={value(ve){ye.userValue=ve.detail.value??"",R.setValue(U,{value:ye.userValue.toString()}),ve.target.value=ye.userValue},formattedValue(ve){const{formattedValue:Se}=ve.detail;ye.formattedValue=Se,Se!=null&&ve.target!==document.activeElement&&(ve.target.value=Se),R.setValue(U,{formattedValue:Se})},selRange(ve){ve.target.setSelectionRange(...ve.detail.selRange)},charLimit:ve=>{var Le;const{charLimit:Se}=ve.detail,{target:De}=ve;if(Se===0){De.removeAttribute("maxLength");return}De.setAttribute("maxLength",Se);let Me=ye.userValue;!Me||Me.length<=Se||(Me=Me.slice(0,Se),De.value=ye.userValue=Me,R.setValue(U,{value:Me}),(Le=this.linkService.eventBus)==null||Le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:Me,willCommit:!0,commitKey:1,selStart:De.selectionStart,selEnd:De.selectionEnd}}))}};this._dispatchEventFromSandbox(me,de)}),z.addEventListener("keydown",de=>{var Se;ye.commitKey=1;let me=-1;if(de.key==="Escape"?me=0:de.key==="Enter"&&!this.data.multiLine?me=2:de.key==="Tab"&&(ye.commitKey=3),me===-1)return;const{value:ve}=de.target;ye.lastCommittedValue!==ve&&(ye.lastCommittedValue=ve,ye.userValue=ve,(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:ve,willCommit:!0,commitKey:me,selStart:de.target.selectionStart,selEnd:de.target.selectionEnd}}))});const ne=pe;pe=null,z.addEventListener("blur",de=>{var ve;if(!de.relatedTarget)return;const{value:me}=de.target;ye.userValue=me,ye.lastCommittedValue!==me&&((ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:me,willCommit:!0,commitKey:ye.commitKey,selStart:de.target.selectionStart,selEnd:de.target.selectionEnd}})),ne(de)}),(L=this.data.actions)!=null&&L.Keystroke&&z.addEventListener("beforeinput",de=>{var Ke;ye.lastCommittedValue=null;const{data:me,target:ve}=de,{value:Se,selectionStart:De,selectionEnd:Me}=ve;let Le=De,qe=Me;switch(de.inputType){case"deleteWordBackward":{const Y=Se.substring(0,De).match(/\w*[^\w]*$/);Y&&(Le-=Y[0].length);break}case"deleteWordForward":{const Y=Se.substring(De).match(/^[^\w]*\w*/);Y&&(qe+=Y[0].length);break}case"deleteContentBackward":De===Me&&(Le-=1);break;case"deleteContentForward":De===Me&&(qe+=1);break}de.preventDefault(),(Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:Se,change:me||"",willCommit:!1,selStart:Le,selEnd:qe}})}),this._setEventListeners(z,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],de=>de.target.value)}if(pe&&z.addEventListener("blur",pe),this.data.comb){const de=(this.data.rect[2]-this.data.rect[0])/he;z.classList.add("comb"),z.style.letterSpacing=`calc(${de}px * var(--scale-factor) - 1ch)`}}else z=document.createElement("div"),z.textContent=this.data.fieldValue,z.style.verticalAlign="middle",z.style.display="table-cell";return this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class P extends b{constructor(R){super(R,{isRenderable:R.renderForms})}render(){const R=this.annotationStorage,U=this.data,z=U.id;let L=R.getValue(z,{value:U.exportValue===U.fieldValue}).value;typeof L=="string"&&(L=L!=="Off",R.setValue(z,{value:L})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const j=document.createElement("input");return d.add(j),j.setAttribute("data-element-id",z),j.disabled=U.readOnly,this._setRequired(j,this.data.required),j.type="checkbox",j.name=U.fieldName,L&&j.setAttribute("checked",!0),j.setAttribute("exportValue",U.exportValue),j.tabIndex=h,j.addEventListener("change",ee=>{const{name:he,checked:ye}=ee.target;for(const pe of this._getElementsByName(he,z)){const ne=ye&&pe.exportValue===U.exportValue;pe.domElement&&(pe.domElement.checked=ne),R.setValue(pe.id,{value:ne})}R.setValue(z,{value:ye})}),j.addEventListener("resetform",ee=>{const he=U.defaultFieldValue||"Off";ee.target.checked=he===U.exportValue}),this.enableScripting&&this.hasJSActions&&(j.addEventListener("updatefromsandbox",ee=>{const he={value(ye){ye.target.checked=ye.detail.value!=="Off",R.setValue(z,{value:ye.target.checked})}};this._dispatchEventFromSandbox(he,ee)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ee=>ee.target.checked)),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class T extends b{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const R=this.annotationStorage,U=this.data,z=U.id;let L=R.getValue(z,{value:U.fieldValue===U.buttonValue}).value;typeof L=="string"&&(L=L!==U.buttonValue,R.setValue(z,{value:L}));const j=document.createElement("input");if(d.add(j),j.setAttribute("data-element-id",z),j.disabled=U.readOnly,this._setRequired(j,this.data.required),j.type="radio",j.name=U.fieldName,L&&j.setAttribute("checked",!0),j.tabIndex=h,j.addEventListener("change",ee=>{const{name:he,checked:ye}=ee.target;for(const pe of this._getElementsByName(he,z))R.setValue(pe.id,{value:!1});R.setValue(z,{value:ye})}),j.addEventListener("resetform",ee=>{const he=U.defaultFieldValue;ee.target.checked=he!=null&&he===U.buttonValue}),this.enableScripting&&this.hasJSActions){const ee=U.buttonValue;j.addEventListener("updatefromsandbox",he=>{const ye={value:pe=>{const ne=ee===pe.detail.value;for(const de of this._getElementsByName(pe.target.name)){const me=ne&&de.id===z;de.domElement&&(de.domElement.checked=me),R.setValue(de.id,{value:me})}}};this._dispatchEventFromSandbox(ye,he)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],he=>he.target.checked)}return this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class k extends y{constructor(R){super(R,{ignoreBorder:R.data.hasAppearance})}render(){const R=super.render();R.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(R.title=this.data.alternativeText);const U=R.lastChild;return this.enableScripting&&this.hasJSActions&&U&&(this._setDefaultPropertiesFromJS(U),U.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({},z)})),R}}class S extends b{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const R=this.annotationStorage,U=this.data.id,z=R.getValue(U,{value:this.data.fieldValue}),L=document.createElement("select");d.add(L),L.setAttribute("data-element-id",U),L.disabled=this.data.readOnly,this._setRequired(L,this.data.required),L.name=this.data.fieldName,L.tabIndex=h;let j=this.data.combo&&this.data.options.length>0;this.data.combo||(L.size=this.data.options.length,this.data.multiSelect&&(L.multiple=!0)),L.addEventListener("resetform",ne=>{const de=this.data.defaultFieldValue;for(const me of L.options)me.selected=me.value===de});for(const ne of this.data.options){const de=document.createElement("option");de.textContent=ne.displayValue,de.value=ne.exportValue,z.value.includes(ne.exportValue)&&(de.setAttribute("selected",!0),j=!1),L.append(de)}let ee=null;if(j){const ne=document.createElement("option");ne.value=" ",ne.setAttribute("hidden",!0),ne.setAttribute("selected",!0),L.prepend(ne),ee=()=>{ne.remove(),L.removeEventListener("input",ee),ee=null},L.addEventListener("input",ee)}const he=ne=>{const de=ne?"value":"textContent",{options:me,multiple:ve}=L;return ve?Array.prototype.filter.call(me,Se=>Se.selected).map(Se=>Se[de]):me.selectedIndex===-1?null:me[me.selectedIndex][de]};let ye=he(!1);const pe=ne=>{const de=ne.target.options;return Array.prototype.map.call(de,me=>({displayValue:me.textContent,exportValue:me.value}))};return this.enableScripting&&this.hasJSActions?(L.addEventListener("updatefromsandbox",ne=>{const de={value(me){ee==null||ee();const ve=me.detail.value,Se=new Set(Array.isArray(ve)?ve:[ve]);for(const De of L.options)De.selected=Se.has(De.value);R.setValue(U,{value:he(!0)}),ye=he(!1)},multipleSelection(me){L.multiple=!0},remove(me){const ve=L.options,Se=me.detail.remove;ve[Se].selected=!1,L.remove(Se),ve.length>0&&Array.prototype.findIndex.call(ve,Me=>Me.selected)===-1&&(ve[0].selected=!0),R.setValue(U,{value:he(!0),items:pe(me)}),ye=he(!1)},clear(me){for(;L.length!==0;)L.remove(0);R.setValue(U,{value:null,items:[]}),ye=he(!1)},insert(me){const{index:ve,displayValue:Se,exportValue:De}=me.detail.insert,Me=L.children[ve],Le=document.createElement("option");Le.textContent=Se,Le.value=De,Me?Me.before(Le):L.append(Le),R.setValue(U,{value:he(!0),items:pe(me)}),ye=he(!1)},items(me){const{items:ve}=me.detail;for(;L.length!==0;)L.remove(0);for(const Se of ve){const{displayValue:De,exportValue:Me}=Se,Le=document.createElement("option");Le.textContent=De,Le.value=Me,L.append(Le)}L.options.length>0&&(L.options[0].selected=!0),R.setValue(U,{value:he(!0),items:pe(me)}),ye=he(!1)},indices(me){const ve=new Set(me.detail.indices);for(const Se of me.target.options)Se.selected=ve.has(Se.index);R.setValue(U,{value:he(!0)}),ye=he(!1)},editable(me){me.target.disabled=!me.detail.editable}};this._dispatchEventFromSandbox(de,ne)}),L.addEventListener("input",ne=>{var me;const de=he(!0);R.setValue(U,{value:de}),ne.preventDefault(),(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U,name:"Keystroke",value:ye,changeEx:de,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ne=>ne.target.value)):L.addEventListener("input",function(ne){R.setValue(U,{value:he(!0)})}),this.data.combo&&this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}const q=class q extends m{constructor(R){var L,j,ee;const{data:U}=R,z=!q.IGNORE_TYPES.has(U.parentType)&&!!((L=U.titleObj)!=null&&L.str||(j=U.contentsObj)!=null&&j.str||(ee=U.richText)!=null&&ee.str);super(R,{isRenderable:z})}render(){this.container.classList.add("popupAnnotation");const R=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(R.length===0)return this.container;const U=new w({container:this.container,trigger:Array.from(R),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),z=this.page,L=s.Util.normalizeRect([this.data.parentRect[0],z.view[3]-this.data.parentRect[1]+z.view[1],this.data.parentRect[2],z.view[3]-this.data.parentRect[3]+z.view[1]]),j=L[0]+this.data.parentRect[2]-this.data.parentRect[0],ee=L[1],{pageWidth:he,pageHeight:ye,pageX:pe,pageY:ne}=this.viewport.rawDims;return this.container.style.left=`${100*(j-pe)/he}%`,this.container.style.top=`${100*(ee-ne)/ye}%`,this.container.append(U.render()),this.container}};rt(q,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let A=q;class w{constructor(R){this.container=R.container,this.trigger=R.trigger,this.color=R.color,this.titleObj=R.titleObj,this.modificationDate=R.modificationDate,this.contentsObj=R.contentsObj,this.richText=R.richText,this.hideWrapper=R.hideWrapper||!1,this.pinned=!1}render(){var he,ye;const U=document.createElement("div");U.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?U:this.container,this.hideElement.hidden=!0;const z=document.createElement("div");z.classList.add("popup");const L=this.color;if(L){const pe=.7*(255-L[0])+L[0],ne=.7*(255-L[1])+L[1],de=.7*(255-L[2])+L[2];z.style.backgroundColor=s.Util.makeHexColor(pe|0,ne|0,de|0)}const j=document.createElement("h1");j.dir=this.titleObj.dir,j.textContent=this.titleObj.str,z.append(j);const ee=o.PDFDateString.toDateObject(this.modificationDate);if(ee){const pe=document.createElement("span");pe.classList.add("popupDate"),pe.textContent="{{date}}, {{time}}",pe.dataset.l10nId="annotation_date_string",pe.dataset.l10nArgs=JSON.stringify({date:ee.toLocaleDateString(),time:ee.toLocaleTimeString()}),z.append(pe)}if((he=this.richText)!=null&&he.str&&(!((ye=this.contentsObj)!=null&&ye.str)||this.contentsObj.str===this.richText.str))u.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:z}),z.lastChild.classList.add("richText","popupContent");else{const pe=this._formatContents(this.contentsObj);z.append(pe)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const pe of this.trigger)pe.addEventListener("click",this._toggle.bind(this)),pe.addEventListener("mouseover",this._show.bind(this,!1)),pe.addEventListener("mouseout",this._hide.bind(this,!1));return z.addEventListener("click",this._hide.bind(this,!0)),U.append(z),U}_formatContents({str:R,dir:U}){const z=document.createElement("p");z.classList.add("popupContent"),z.dir=U;const L=R.split(/(?:\r\n?|\n)/);for(let j=0,ee=L.length;j<ee;++j){const he=L[j];z.append(document.createTextNode(he)),j<ee-1&&z.append(document.createElement("br"))}return z}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(R=!1){R&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(R=!0){R&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class E extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0}),this.textContent=R.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const R=document.createElement("div");R.classList.add("annotationTextContent"),R.setAttribute("role","comment");for(const U of this.textContent){const z=document.createElement("span");z.textContent=U,R.append(z)}this.container.append(R)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const R=this.data,{width:U,height:z}=p(R.rect),L=this.svgFactory.create(U,z,!0),j=this.svgFactory.createElement("svg:line");return j.setAttribute("x1",R.rect[2]-R.lineCoordinates[0]),j.setAttribute("y1",R.rect[3]-R.lineCoordinates[1]),j.setAttribute("x2",R.rect[2]-R.lineCoordinates[2]),j.setAttribute("y2",R.rect[3]-R.lineCoordinates[3]),j.setAttribute("stroke-width",R.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),L.append(j),this.container.append(L),this._createPopup(j,R),this.container}}class O extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const R=this.data,{width:U,height:z}=p(R.rect),L=this.svgFactory.create(U,z,!0),j=R.borderStyle.width,ee=this.svgFactory.createElement("svg:rect");return ee.setAttribute("x",j/2),ee.setAttribute("y",j/2),ee.setAttribute("width",U-j),ee.setAttribute("height",z-j),ee.setAttribute("stroke-width",j||1),ee.setAttribute("stroke","transparent"),ee.setAttribute("fill","transparent"),L.append(ee),this.container.append(L),this._createPopup(ee,R),this.container}}class M extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const R=this.data,{width:U,height:z}=p(R.rect),L=this.svgFactory.create(U,z,!0),j=R.borderStyle.width,ee=this.svgFactory.createElement("svg:ellipse");return ee.setAttribute("cx",U/2),ee.setAttribute("cy",z/2),ee.setAttribute("rx",U/2-j/2),ee.setAttribute("ry",z/2-j/2),ee.setAttribute("stroke-width",j||1),ee.setAttribute("stroke","transparent"),ee.setAttribute("fill","transparent"),L.append(ee),this.container.append(L),this._createPopup(ee,R),this.container}}class V extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const R=this.data,{width:U,height:z}=p(R.rect),L=this.svgFactory.create(U,z,!0);let j=[];for(const he of R.vertices){const ye=he.x-R.rect[0],pe=R.rect[3]-he.y;j.push(ye+","+pe)}j=j.join(" ");const ee=this.svgFactory.createElement(this.svgElementName);return ee.setAttribute("points",j),ee.setAttribute("stroke-width",R.borderStyle.width||1),ee.setAttribute("stroke","transparent"),ee.setAttribute("fill","transparent"),L.append(ee),this.container.append(L),this._createPopup(ee,R),this.container}}class G extends V{constructor(R){super(R),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class te extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ce extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const R=this.data,{width:U,height:z}=p(R.rect),L=this.svgFactory.create(U,z,!0);for(const j of R.inkLists){let ee=[];for(const ye of j){const pe=ye.x-R.rect[0],ne=R.rect[3]-ye.y;ee.push(`${pe},${ne}`)}ee=ee.join(" ");const he=this.svgFactory.createElement(this.svgElementName);he.setAttribute("points",ee),he.setAttribute("stroke-width",R.borderStyle.width||1),he.setAttribute("stroke","transparent"),he.setAttribute("fill","transparent"),this._createPopup(he,R),L.append(he)}return this.container.append(L),this.container}}class se extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class le extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class fe extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ge extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class xe extends m{constructor(R){var z,L,j;const U=!!(R.data.hasPopup||(z=R.data.titleObj)!=null&&z.str||(L=R.data.contentsObj)!=null&&L.str||(j=R.data.richText)!=null&&j.str);super(R,{isRenderable:U,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _e extends m{constructor(R){var L;super(R,{isRenderable:!0});const{filename:U,content:z}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(U,!0),this.content=z,(L=this.linkService.eventBus)==null||L.dispatch("fileattachmentannotation",{source:this,filename:U,content:z})}render(){var U,z;this.container.classList.add("fileAttachmentAnnotation");let R;return this.data.hasAppearance?R=document.createElement("div"):(R=document.createElement("img"),R.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),R.classList.add("popupTriggerArea"),R.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((U=this.data.titleObj)!=null&&U.str||(z=this.data.contentsObj)!=null&&z.str||this.data.richText)&&this._createPopup(R,this.data),this.container.append(R),this.container}_download(){var R;(R=this.downloadManager)==null||R.openOrDownloadData(this.container,this.content,this.filename)}}const Z=class Z{static render(R){var ye,pe;const{annotations:U,div:z,viewport:L,accessibilityManager:j}=R;(0,o.setLayerDimensions)(z,L);const ee={data:null,layer:z,page:R.page,viewport:L,linkService:R.linkService,downloadManager:R.downloadManager,imageResourcesPath:R.imageResourcesPath||"",renderForms:R.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:R.annotationStorage||new l.AnnotationStorage,enableScripting:R.enableScripting===!0,hasJSActions:R.hasJSActions,fieldObjects:R.fieldObjects};let he=0;for(const ne of U){if(ne.noHTML)continue;if(ne.annotationType!==s.AnnotationType.POPUP){const{width:ve,height:Se}=p(ne.rect);if(ve<=0||Se<=0)continue}ee.data=ne;const de=g.create(ee);if(!de.isRenderable)continue;const me=de.render();if(ne.hidden&&(me.style.visibility="hidden"),Array.isArray(me))for(const ve of me)ve.style.zIndex=he++,Ee(ye=Z,K,_r).call(ye,ve,ne.id,z,j);else me.style.zIndex=he++,de instanceof A?z.prepend(me):Ee(pe=Z,K,_r).call(pe,me,ne.id,z,j)}Ee(this,K,xr).call(this,z,R.annotationCanvasMap)}static update(R){const{annotationCanvasMap:U,div:z,viewport:L}=R;(0,o.setLayerDimensions)(z,{rotation:L.rotation}),Ee(this,K,xr).call(this,z,U),z.hidden=!1}};K=new WeakSet,_r=function(R,U,z,L){const j=R.firstChild||R;j.id=`${o.AnnotationPrefix}${U}`,z.append(R),L==null||L.moveElementInDOM(z,R,j,!1)},xr=function(R,U){if(U){for(const[z,L]of U){const j=R.querySelector(`[data-annotation-id="${z}"]`);if(!j)continue;const{firstChild:ee}=j;ee?ee.nodeName==="CANVAS"?ee.replaceWith(L):ee.before(L):j.append(L)}U.clear()}},Re(Z,K);let Ce=Z;e.AnnotationLayer=Ce},(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class s{static CMYK_G([l,c,u,h]){return["G",1-Math.min(1,.3*l+.59*u+.11*c+h)]}static G_CMYK([l]){return["CMYK",0,0,0,1-l]}static G_RGB([l]){return["RGB",l,l,l]}static G_HTML([l]){const c=n(l);return`#${c}${c}${c}`}static RGB_G([l,c,u]){return["G",.3*l+.59*c+.11*u]}static RGB_HTML([l,c,u]){const h=n(l),f=n(c),d=n(u);return`#${h}${f}${d}`}static T_HTML(){return"#00000000"}static CMYK_RGB([l,c,u,h]){return["RGB",1-Math.min(1,l+h),1-Math.min(1,u+h),1-Math.min(1,c+h)]}static CMYK_HTML(l){const c=this.CMYK_RGB(l).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([l,c,u]){const h=1-l,f=1-c,d=1-u,p=Math.min(h,f,d);return["CMYK",h,f,d,p]}}e.ColorConverters=s},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var s=n(19);class o{static setupStorage(c,u,h,f,d){const p=f.getValue(u,{value:null});switch(h.name){case"textarea":if(p.value!==null&&(c.textContent=p.value),d==="print")break;c.addEventListener("input",g=>{f.setValue(u,{value:g.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(p.value===h.attributes.xfaOn?c.setAttribute("checked",!0):p.value===h.attributes.xfaOff&&c.removeAttribute("checked"),d==="print")break;c.addEventListener("change",g=>{f.setValue(u,{value:g.target.checked?g.target.getAttribute("xfaOn"):g.target.getAttribute("xfaOff")})})}else{if(p.value!==null&&c.setAttribute("value",p.value),d==="print")break;c.addEventListener("input",g=>{f.setValue(u,{value:g.target.value})})}break;case"select":if(p.value!==null)for(const g of h.children)g.attributes.value===p.value&&(g.attributes.selected=!0);c.addEventListener("input",g=>{const m=g.target.options,y=m.selectedIndex===-1?"":m[m.selectedIndex].value;f.setValue(u,{value:y})});break}}static setAttributes({html:c,element:u,storage:h=null,intent:f,linkService:d}){const{attributes:p}=u,g=c instanceof HTMLAnchorElement;p.type==="radio"&&(p.name=`${p.name}-${f}`);for(const[m,y]of Object.entries(p))if(y!=null)switch(m){case"class":y.length&&c.setAttribute(m,y.join(" "));break;case"dataId":break;case"id":c.setAttribute("data-element-id",y);break;case"style":Object.assign(c.style,y);break;case"textContent":c.textContent=y;break;default:(!g||m!=="href"&&m!=="newWindow")&&c.setAttribute(m,y)}g&&d.addLinkAttributes(c,p.href,p.newWindow),h&&p.dataId&&this.setupStorage(c,p.dataId,u,h)}static render(c){var _;const u=c.annotationStorage,h=c.linkService,f=c.xfaHtml,d=c.intent||"display",p=document.createElement(f.name);f.attributes&&this.setAttributes({html:p,element:f,intent:d,linkService:h});const g=[[f,-1,p]],m=c.div;if(m.append(p),c.viewport){const b=`matrix(${c.viewport.transform.join(",")})`;m.style.transform=b}d!=="richText"&&m.setAttribute("class","xfaLayer xfaFont");const y=[];for(;g.length>0;){const[b,x,P]=g.at(-1);if(x+1===b.children.length){g.pop();continue}const T=b.children[++g.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const A=document.createTextNode(T.value);y.push(A),P.append(A);continue}let S;if((_=T==null?void 0:T.attributes)!=null&&_.xmlns?S=document.createElementNS(T.attributes.xmlns,k):S=document.createElement(k),P.append(S),T.attributes&&this.setAttributes({html:S,element:T,storage:u,intent:d,linkService:h}),T.children&&T.children.length>0)g.push([T,-1,S]);else if(T.value){const A=document.createTextNode(T.value);s.XfaText.shouldBuildText(k)&&y.push(A),S.append(A)}}for(const b of m.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:y}}static update(c){const u=`matrix(${c.viewport.transform.join(",")})`;c.div.style.transform=u,c.div.hidden=!1}}e.XfaLayer=o},(a,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var s=n(6),o=n(1),l=n(10);let c=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=c;{let _=function(S){let A=[];const w=[];for(const E of S){if(E.fn==="save"){A.push({fnId:92,fn:"group",items:[]}),w.push(A),A=A.at(-1).items;continue}E.fn==="restore"?A=w.pop():A.push(E)}return A},b=function(S){if(Number.isInteger(S))return S.toString();const A=S.toFixed(10);let w=A.length-1;if(A[w]!=="0")return A;do w--;while(A[w]==="0");return A.substring(0,A[w]==="."?w:w+1)},x=function(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${b(S[0])} ${b(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const A=Math.acos(S[0])*180/Math.PI;return`rotate(${b(A)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${b(S[4])} ${b(S[5])})`;return`matrix(${b(S[0])} ${b(S[1])} ${b(S[2])} ${b(S[3])} ${b(S[4])} ${b(S[5])})`};const u={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/1999/xlink",d=["butt","round","square"],p=["miter","round","bevel"],g=function(S,A="",w=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!w)return URL.createObjectURL(new Blob([S],{type:A}));const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F=`data:${A};base64,`;for(let O=0,M=S.length;O<M;O+=3){const V=S[O]&255,G=S[O+1]&255,te=S[O+2]&255,ce=V>>2,se=(V&3)<<4|G>>4,le=O+1<M?(G&15)<<2|te>>6:64,fe=O+2<M?te&63:64;F+=E[ce]+E[se]+E[le]+E[fe]}return F},m=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),A=12,w=new Int32Array(256);for(let te=0;te<256;te++){let ce=te;for(let se=0;se<8;se++)ce&1?ce=3988292384^ce>>1&2147483647:ce=ce>>1&2147483647;w[te]=ce}function E(te,ce,se){let le=-1;for(let fe=ce;fe<se;fe++){const ge=(le^te[fe])&255,xe=w[ge];le=le>>>8^xe}return le^-1}function F(te,ce,se,le){let fe=le;const ge=ce.length;se[fe]=ge>>24&255,se[fe+1]=ge>>16&255,se[fe+2]=ge>>8&255,se[fe+3]=ge&255,fe+=4,se[fe]=te.charCodeAt(0)&255,se[fe+1]=te.charCodeAt(1)&255,se[fe+2]=te.charCodeAt(2)&255,se[fe+3]=te.charCodeAt(3)&255,fe+=4,se.set(ce,fe),fe+=ce.length;const xe=E(se,le+4,fe);se[fe]=xe>>24&255,se[fe+1]=xe>>16&255,se[fe+2]=xe>>8&255,se[fe+3]=xe&255}function O(te,ce,se){let le=1,fe=0;for(let ge=ce;ge<se;++ge)le=(le+(te[ge]&255))%65521,fe=(fe+le)%65521;return fe<<16|le}function M(te){if(!l.isNodeJS)return V(te);try{let ce;parseInt(browser$1$1.versions.node)>=8?ce=te:ce=Buffer.from(te);const se=require$$5.deflateSync(ce,{level:9});return se instanceof Uint8Array?se:new Uint8Array(se)}catch(ce){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ce)}return V(te)}function V(te){let ce=te.length;const se=65535,le=Math.ceil(ce/se),fe=new Uint8Array(2+ce+le*5+4);let ge=0;fe[ge++]=120,fe[ge++]=156;let xe=0;for(;ce>se;)fe[ge++]=0,fe[ge++]=255,fe[ge++]=255,fe[ge++]=0,fe[ge++]=0,fe.set(te.subarray(xe,xe+se),ge),ge+=se,xe+=se,ce-=se;fe[ge++]=1,fe[ge++]=ce&255,fe[ge++]=ce>>8&255,fe[ge++]=~ce&65535&255,fe[ge++]=(~ce&65535)>>8&255,fe.set(te.subarray(xe),ge),ge+=te.length-xe;const _e=O(te,0,te.length);return fe[ge++]=_e>>24&255,fe[ge++]=_e>>16&255,fe[ge++]=_e>>8&255,fe[ge++]=_e&255,fe}function G(te,ce,se,le){const fe=te.width,ge=te.height;let xe,_e,Ce;const ae=te.data;switch(ce){case o.ImageKind.GRAYSCALE_1BPP:_e=0,xe=1,Ce=fe+7>>3;break;case o.ImageKind.RGB_24BPP:_e=2,xe=8,Ce=fe*3;break;case o.ImageKind.RGBA_32BPP:_e=6,xe=8,Ce=fe*4;break;default:throw new Error("invalid format")}const B=new Uint8Array((1+Ce)*ge);let I=0,q=0;for(let R=0;R<ge;++R)B[I++]=0,B.set(ae.subarray(q,q+Ce),I),q+=Ce,I+=Ce;if(ce===o.ImageKind.GRAYSCALE_1BPP&&le){I=0;for(let R=0;R<ge;R++){I++;for(let U=0;U<Ce;U++)B[I++]^=255}}const K=new Uint8Array([fe>>24&255,fe>>16&255,fe>>8&255,fe&255,ge>>24&255,ge>>16&255,ge>>8&255,ge&255,xe,_e,0,0,0]),Q=M(B),$=S.length+A*3+K.length+Q.length,Z=new Uint8Array($);let J=0;return Z.set(S,J),J+=S.length,F("IHDR",K,Z,J),J+=A+K.length,F("IDATA",Q,Z,J),J+=A+Q.length,F("IEND",new Uint8Array(0),Z,J),g(Z,"image/png",se)}return function(ce,se,le){const fe=ce.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:ce.kind;return G(ce,fe,se,le)}}();class y{constructor(){this.fontSizeScale=1,this.fontWeight=u.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=u.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,w){this.x=A,this.y=w}}let P=0,T=0,k=0;e.SVGGraphics=c=class{constructor(S,A,w=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new y,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=S,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!w,this._operatorIdMapping=[];for(const E in o.OPS)this._operatorIdMapping[o.OPS[E]]=E}getObject(S,A=null){return typeof S=="string"?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):A}save(){this.transformStack.push(this.transformMatrix);const S=this.current;this.extraStack.push(S),this.current=S.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(S){this.save(),this.executeOpTree(S),this.restore()}loadDependencies(S){const A=S.fnArray,w=S.argsArray;for(let E=0,F=A.length;E<F;E++)if(A[E]===o.OPS.dependency)for(const O of w[E]){const M=O.startsWith("g_")?this.commonObjs:this.objs,V=new Promise(G=>{M.get(O,G)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(S,A,w,E,F,O){const M=[S,A,w,E,F,O];this.transformMatrix=o.Util.transform(this.transformMatrix,M),this.tgrp=null}getSVG(S,A){this.viewport=A;const w=this._initialize(A);return this.loadDependencies(S).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(S)),w))}convertOpList(S){const A=this._operatorIdMapping,w=S.argsArray,E=S.fnArray,F=[];for(let O=0,M=E.length;O<M;O++){const V=E[O];F.push({fnId:V,fn:A[V],args:w[O]})}return _(F)}executeOpTree(S){for(const A of S){const w=A.fn,E=A.fnId,F=A.args;switch(E|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(F);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case o.OPS.setFont:this.setFont(F);break;case o.OPS.showText:this.showText(F[0]);break;case o.OPS.showSpacedText:this.showText(F[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(F[0],F[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case o.OPS.setHScale:this.setHScale(F[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case o.OPS.setTextRise:this.setTextRise(F[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case o.OPS.setLineWidth:this.setLineWidth(F[0]);break;case o.OPS.setLineJoin:this.setLineJoin(F[0]);break;case o.OPS.setLineCap:this.setLineCap(F[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case o.OPS.setFillColorN:this.setFillColorN(F);break;case o.OPS.shadingFill:this.shadingFill(F[0]);break;case o.OPS.setDash:this.setDash(F[0],F[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case o.OPS.setFlatness:this.setFlatness(F[0]);break;case o.OPS.setGState:this.setGState(F[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case o.OPS.constructPath:this.constructPath(F[0],F[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,o.warn)(`Unimplemented operator ${w}`);break}}}setWordSpacing(S){this.current.wordSpacing=S}setCharSpacing(S){this.current.charSpacing=S}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(S,A,w,E,F,O){const M=this.current;M.textMatrix=M.lineMatrix=[S,A,w,E,F,O],M.textMatrixScale=Math.hypot(S,A),M.x=M.lineX=0,M.y=M.lineY=0,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${b(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",b(-M.y)),M.txtElement=this.svgFactory.createElement("svg:text"),M.txtElement.append(M.tspan)}beginText(){const S=this.current;S.x=S.lineX=0,S.y=S.lineY=0,S.textMatrix=o.IDENTITY_MATRIX,S.lineMatrix=o.IDENTITY_MATRIX,S.textMatrixScale=1,S.tspan=this.svgFactory.createElement("svg:tspan"),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtgrp=this.svgFactory.createElement("svg:g"),S.xcoords=[],S.ycoords=[]}moveText(S,A){const w=this.current;w.x=w.lineX+=S,w.y=w.lineY+=A,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${b(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",b(-w.y))}showText(S){const A=this.current,w=A.font,E=A.fontSize;if(E===0)return;const F=A.fontSizeScale,O=A.charSpacing,M=A.wordSpacing,V=A.fontDirection,G=A.textHScale*V,te=w.vertical,ce=te?1:-1,se=w.defaultVMetrics,le=E*A.fontMatrix[0];let fe=0;for(const _e of S){if(_e===null){fe+=V*M;continue}else if(typeof _e=="number"){fe+=ce*_e*E/1e3;continue}const Ce=(_e.isSpace?M:0)+O,ae=_e.fontChar;let B,I,q=_e.width;if(te){let Q;const $=_e.vmetric||se;Q=_e.vmetric?$[1]:q*.5,Q=-Q*le;const Z=$[2]*le;q=$?-$[0]:q,B=Q/F,I=(fe+Z)/F}else B=fe/F,I=0;(_e.isInFont||w.missingFile)&&(A.xcoords.push(A.x+B),te&&A.ycoords.push(-A.y+I),A.tspan.textContent+=ae);let K;te?K=q*le-Ce*V:K=q*le+Ce*V,fe+=K}A.tspan.setAttributeNS(null,"x",A.xcoords.map(b).join(" ")),te?A.tspan.setAttributeNS(null,"y",A.ycoords.map(b).join(" ")):A.tspan.setAttributeNS(null,"y",b(-A.y)),te?A.y-=fe:A.x+=fe*G,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${b(A.fontSize)}px`),A.fontStyle!==u.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==u.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const ge=A.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(ge===o.TextRenderingMode.FILL||ge===o.TextRenderingMode.FILL_STROKE?(A.fillColor!==u.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),ge===o.TextRenderingMode.STROKE||ge===o.TextRenderingMode.FILL_STROKE){const _e=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,_e)}let xe=A.textMatrix;A.textRise!==0&&(xe=xe.slice(),xe[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${x(xe)} scale(${b(G)}, -1)`),A.txtElement.setAttributeNS(h,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(S,A){this.setLeading(-A),this.moveText(S,A)}addFontStyle(S){if(!S.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=g(S.data,S.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${S.loadedName}"; src: url(${A}); }
`}setFont(S){const A=this.current,w=this.commonObjs.get(S[0]);let E=S[1];A.font=w,this.embedFonts&&!w.missingFile&&!this.embeddedFonts[w.loadedName]&&(this.addFontStyle(w),this.embeddedFonts[w.loadedName]=w),A.fontMatrix=w.fontMatrix||o.FONT_IDENTITY_MATRIX;let F="normal";w.black?F="900":w.bold&&(F="bold");const O=w.italic?"italic":"normal";E<0?(E=-E,A.fontDirection=-1):A.fontDirection=1,A.fontSize=E,A.fontFamily=w.loadedName,A.fontWeight=F,A.fontStyle=O,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",b(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const S=this.current;S.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=S.txtElement)!=null&&A.hasChildNodes())&&(S.element=S.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(S){S>0&&(this.current.lineWidth=S)}setLineCap(S){this.current.lineCap=d[S]}setLineJoin(S){this.current.lineJoin=p[S]}setMiterLimit(S){this.current.miterLimit=S}setStrokeAlpha(S){this.current.strokeAlpha=S}setStrokeRGBColor(S,A,w){this.current.strokeColor=o.Util.makeHexColor(S,A,w)}setFillAlpha(S){this.current.fillAlpha=S}setFillRGBColor(S,A,w){this.current.fillColor=o.Util.makeHexColor(S,A,w),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(S){this.current.strokeColor=this._makeColorN_Pattern(S)}setFillColorN(S){this.current.fillColor=this._makeColorN_Pattern(S)}shadingFill(S){const A=this.viewport.width,w=this.viewport.height,E=o.Util.inverseTransform(this.transformMatrix),F=o.Util.applyTransform([0,0],E),O=o.Util.applyTransform([0,w],E),M=o.Util.applyTransform([A,0],E),V=o.Util.applyTransform([A,w],E),G=Math.min(F[0],O[0],M[0],V[0]),te=Math.min(F[1],O[1],M[1],V[1]),ce=Math.max(F[0],O[0],M[0],V[0]),se=Math.max(F[1],O[1],M[1],V[1]),le=this.svgFactory.createElement("svg:rect");le.setAttributeNS(null,"x",G),le.setAttributeNS(null,"y",te),le.setAttributeNS(null,"width",ce-G),le.setAttributeNS(null,"height",se-te),le.setAttributeNS(null,"fill",this._makeShadingPattern(S)),this.current.fillAlpha<1&&le.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(le)}_makeColorN_Pattern(S){return S[0]==="TilingPattern"?this._makeTilingPattern(S):this._makeShadingPattern(S)}_makeTilingPattern(S){const A=S[1],w=S[2],E=S[3]||o.IDENTITY_MATRIX,[F,O,M,V]=S[4],G=S[5],te=S[6],ce=S[7],se=`shading${k++}`,[le,fe,ge,xe]=o.Util.normalizeRect([...o.Util.applyTransform([F,O],E),...o.Util.applyTransform([M,V],E)]),[_e,Ce]=o.Util.singularValueDecompose2dScale(E),ae=G*_e,B=te*Ce,I=this.svgFactory.createElement("svg:pattern");I.setAttributeNS(null,"id",se),I.setAttributeNS(null,"patternUnits","userSpaceOnUse"),I.setAttributeNS(null,"width",ae),I.setAttributeNS(null,"height",B),I.setAttributeNS(null,"x",`${le}`),I.setAttributeNS(null,"y",`${fe}`);const q=this.svg,K=this.transformMatrix,Q=this.current.fillColor,$=this.current.strokeColor,Z=this.svgFactory.create(ge-le,xe-fe);if(this.svg=Z,this.transformMatrix=E,ce===2){const J=o.Util.makeHexColor(...A);this.current.fillColor=J,this.current.strokeColor=J}return this.executeOpTree(this.convertOpList(w)),this.svg=q,this.transformMatrix=K,this.current.fillColor=Q,this.current.strokeColor=$,I.append(Z.childNodes[0]),this.defs.append(I),`url(#${se})`}_makeShadingPattern(S){switch(typeof S=="string"&&(S=this.objs.get(S)),S[0]){case"RadialAxial":const A=`shading${k++}`,w=S[3];let E;switch(S[1]){case"axial":const F=S[4],O=S[5];E=this.svgFactory.createElement("svg:linearGradient"),E.setAttributeNS(null,"id",A),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"x1",F[0]),E.setAttributeNS(null,"y1",F[1]),E.setAttributeNS(null,"x2",O[0]),E.setAttributeNS(null,"y2",O[1]);break;case"radial":const M=S[4],V=S[5],G=S[6],te=S[7];E=this.svgFactory.createElement("svg:radialGradient"),E.setAttributeNS(null,"id",A),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"cx",V[0]),E.setAttributeNS(null,"cy",V[1]),E.setAttributeNS(null,"r",te),E.setAttributeNS(null,"fx",M[0]),E.setAttributeNS(null,"fy",M[1]),E.setAttributeNS(null,"fr",G);break;default:throw new Error(`Unknown RadialAxial type: ${S[1]}`)}for(const F of w){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",F[0]),O.setAttributeNS(null,"stop-color",F[1]),E.append(O)}return this.defs.append(E),`url(#${A})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${S[0]}`)}}setDash(S,A){this.current.dashArray=S,this.current.dashPhase=A}constructPath(S,A){const w=this.current;let E=w.x,F=w.y,O=[],M=0;for(const V of S)switch(V|0){case o.OPS.rectangle:E=A[M++],F=A[M++];const G=A[M++],te=A[M++],ce=E+G,se=F+te;O.push("M",b(E),b(F),"L",b(ce),b(F),"L",b(ce),b(se),"L",b(E),b(se),"Z");break;case o.OPS.moveTo:E=A[M++],F=A[M++],O.push("M",b(E),b(F));break;case o.OPS.lineTo:E=A[M++],F=A[M++],O.push("L",b(E),b(F));break;case o.OPS.curveTo:E=A[M+4],F=A[M+5],O.push("C",b(A[M]),b(A[M+1]),b(A[M+2]),b(A[M+3]),b(E),b(F)),M+=6;break;case o.OPS.curveTo2:O.push("C",b(E),b(F),b(A[M]),b(A[M+1]),b(A[M+2]),b(A[M+3])),E=A[M+2],F=A[M+3],M+=4;break;case o.OPS.curveTo3:E=A[M+2],F=A[M+3],O.push("C",b(A[M]),b(A[M+1]),b(E),b(F),b(E),b(F)),M+=4;break;case o.OPS.closePath:O.push("Z");break}O=O.join(" "),w.path&&S.length>0&&S[0]!==o.OPS.rectangle&&S[0]!==o.OPS.moveTo?O=w.path.getAttributeNS(null,"d")+O:(w.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(w.path)),w.path.setAttributeNS(null,"d",O),w.path.setAttributeNS(null,"fill","none"),w.element=w.path,w.setCurrentPoint(E,F)}endPath(){const S=this.current;if(S.path=null,!this.pendingClip)return;if(!S.element){this.pendingClip=null;return}const A=`clippath${P++}`,w=this.svgFactory.createElement("svg:clipPath");w.setAttributeNS(null,"id",A),w.setAttributeNS(null,"transform",x(this.transformMatrix));const E=S.element.cloneNode(!0);if(this.pendingClip==="evenodd"?E.setAttributeNS(null,"clip-rule","evenodd"):E.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,w.append(E),this.defs.append(w),S.activeClipUrl){S.clipGroup=null;for(const F of this.extraStack)F.clipGroup=null;w.setAttributeNS(null,"clip-path",S.activeClipUrl)}S.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(S){this.pendingClip=S}closePath(){const S=this.current;if(S.path){const A=`${S.path.getAttributeNS(null,"d")}Z`;S.path.setAttributeNS(null,"d",A)}}setLeading(S){this.current.leading=-S}setTextRise(S){this.current.textRise=S}setTextRenderingMode(S){this.current.textRenderingMode=S}setHScale(S){this.current.textHScale=S/100}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(const[A,w]of S)switch(A){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w);break;case"CA":this.setStrokeAlpha(w);break;case"ca":this.setFillAlpha(w);break;default:(0,o.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const S=this.current;S.element&&(S.element.setAttributeNS(null,"fill",S.fillColor),S.element.setAttributeNS(null,"fill-opacity",S.fillAlpha),this.endPath())}stroke(){const S=this.current;S.element&&(this._setStrokeAttributes(S.element),S.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(S,A=1){const w=this.current;let E=w.dashArray;A!==1&&E.length>0&&(E=E.map(function(F){return A*F})),S.setAttributeNS(null,"stroke",w.strokeColor),S.setAttributeNS(null,"stroke-opacity",w.strokeAlpha),S.setAttributeNS(null,"stroke-miterlimit",b(w.miterLimit)),S.setAttributeNS(null,"stroke-linecap",w.lineCap),S.setAttributeNS(null,"stroke-linejoin",w.lineJoin),S.setAttributeNS(null,"stroke-width",b(A*w.lineWidth)+"px"),S.setAttributeNS(null,"stroke-dasharray",E.map(b).join(" ")),S.setAttributeNS(null,"stroke-dashoffset",b(A*w.dashPhase)+"px")}eoFill(){var S;(S=this.current.element)==null||S.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var S;(S=this.current.element)==null||S.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width","1px"),S.setAttributeNS(null,"height","1px"),S.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(S)}paintImageXObject(S){const A=this.getObject(S);if(!A){(0,o.warn)(`Dependent image with object ID ${S} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(S,A){const w=S.width,E=S.height,F=m(S,this.forceDataSchema,!!A),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",b(w)),O.setAttributeNS(null,"height",b(E)),this.current.element=O,this.clip("nonzero");const M=this.svgFactory.createElement("svg:image");M.setAttributeNS(f,"xlink:href",F),M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y",b(-E)),M.setAttributeNS(null,"width",b(w)+"px"),M.setAttributeNS(null,"height",b(E)+"px"),M.setAttributeNS(null,"transform",`scale(${b(1/w)} ${b(-1/E)})`),A?A.append(M):this._ensureTransformGroup().append(M)}paintImageMaskXObject(S){const A=this.getObject(S.data,S);if(A.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const w=this.current,E=A.width,F=A.height,O=w.fillColor;w.maskId=`mask${T++}`;const M=this.svgFactory.createElement("svg:mask");M.setAttributeNS(null,"id",w.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",b(E)),V.setAttributeNS(null,"height",b(F)),V.setAttributeNS(null,"fill",O),V.setAttributeNS(null,"mask",`url(#${w.maskId})`),this.defs.append(M),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(A,M)}paintFormXObjectBegin(S,A){if(Array.isArray(S)&&S.length===6&&this.transform(S[0],S[1],S[2],S[3],S[4],S[5]),A){const w=A[2]-A[0],E=A[3]-A[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",A[0]),F.setAttributeNS(null,"y",A[1]),F.setAttributeNS(null,"width",b(w)),F.setAttributeNS(null,"height",b(E)),this.current.element=F,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(S){const A=this.svgFactory.create(S.width,S.height),w=this.svgFactory.createElement("svg:defs");A.append(w),this.defs=w;const E=this.svgFactory.createElement("svg:g");return E.setAttributeNS(null,"transform",x(S.transform)),A.append(E),this.svg=E,A}_ensureClipGroup(){if(!this.current.clipGroup){const S=this.svgFactory.createElement("svg:g");S.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(S),this.current.clipGroup=S}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",x(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(a){var e=__webpack_module_cache__[a];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[a]={exports:{}};return __webpack_modules__[a](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var a=__webpack_exports__;Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(a,"AnnotationEditorLayer",{enumerable:!0,get:function(){return l.AnnotationEditorLayer}}),Object.defineProperty(a,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(a,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(a,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return c.AnnotationEditorUIManager}}),Object.defineProperty(a,"AnnotationLayer",{enumerable:!0,get:function(){return u.AnnotationLayer}}),Object.defineProperty(a,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(a,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(a,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(a,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(a,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(a,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(a,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(a,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(a,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(a,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(a,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(a,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(a,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(a,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(a,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(a,"SVGGraphics",{enumerable:!0,get:function(){return f.SVGGraphics}}),Object.defineProperty(a,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(a,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(a,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(a,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(a,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(a,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(a,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(a,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(a,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(a,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(a,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(a,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(a,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(a,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(a,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(a,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(a,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(a,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(a,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),l=__w_pdfjs_require__(27),c=__w_pdfjs_require__(5),u=__w_pdfjs_require__(32),h=__w_pdfjs_require__(14),f=__w_pdfjs_require__(35),d=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=pdfExports;var pdf_1=pdf,pdf$1=getDefaultExportFromCjs(pdf_1);const pdfjsWorker=""+new URL("pdf.worker-Bqoq8frB.js",import.meta.url).href;pdf$1.GlobalWorkerOptions.workerSrc=pdfjsWorker;async function myfunc(a,e,n=1){const o=await(await pdf$1.getDocument(a).promise).getPage(n),c=o.getViewport({scale:1}),u=window.devicePixelRatio||1,h=e.getContext("2d");e.width=Math.floor(c.width*u),e.height=Math.floor(c.height*u),e.style.width=Math.floor(c.width)+"px",e.style.height=Math.floor(c.height)+"px";const f=u!==1?[u,0,0,u,0,0]:null;await o.render({canvasContext:h,transform:f,viewport:c})}var root_2$e=template("<button></button>"),root$s=template('<div class="svelte-14ujl6a"><span class="font-bold svelte-14ujl6a">Seite:</span> <!></div>');function PdfButtonsPager(a,e){push(e,!0);const n=prop(e,"G",7);var s=root$s(),o=sibling(child(s),2);await_block(o,()=>getpagesNums(n().o),null,(l,c)=>{var u=comment$1(),h=first_child(u);each(h,17,()=>Array(get$3(c)),index,(f,d,p)=>{var g=root_2$e();g.__click=()=>n().currentPage=p+1,g.textContent=p+1,template_effect(()=>set_class(g,1,clsx([n().currentPage==p+1&&"btn-outline","btn","transition-none"]),"svelte-14ujl6a")),append(f,g)}),append(l,u)}),append(a,s),pop()}delegate(["click"]);const logo$3=a=>{var e=root_1$g();append(a,e)},label$3="Zuordnung",prefix$3=label$3.slice(0,1),text$3="Zuordnung";var root_1$g=template(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M48.2 66.8c-.1-.8-.2-1.7-.2-2.5l0-.2c0-8.8 7.2-16 16-16c.9 0 1.9 .1 2.8 .2C74.3 49.5 80 56.1 80 64c0 8.8-7.2 16-16 16c-7.9 0-14.5-5.7-15.8-13.2zM0 64c0 26.9 16.5 49.9 40 59.3l0 105.3C16.5 238.1 0 261.1 0 288c0 35.3 28.7 64 64 64c26.9 0 49.9-16.5 59.3-40l201.3 0c9.5 23.5 32.5 40 59.3 40c35.3 0 64-28.7 64-64c0-26.9-16.5-49.9-40-59.3l0-105.3c23.5-9.5 40-32.5 40-59.3c0-35.3-28.7-64-64-64c-26.9 0-49.9 16.5-59.3 40L123.3 40C113.9 16.5 90.9 0 64 0C28.7 0 0 28.7 0 64zm368 0a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM324.7 88c6.5 16 19.3 28.9 35.3 35.3l0 105.3c-16 6.5-28.9 19.3-35.3 35.3l-201.3 0c-6.5-16-19.3-28.9-35.3-35.3l0-105.3c16-6.5 28.9-19.3 35.3-35.3l201.3 0zM384 272a16 16 0 1 1 0 32 16 16 0 1 1 0-32zM80 288c0 7.9-5.7 14.5-13.2 15.8c-.8 .1-1.7 .2-2.5 .2l-.2 0c-8.8 0-16-7.2-16-16c0-.9 .1-1.9 .2-2.8C49.5 277.7 56.1 272 64 272c8.8 0 16 7.2 16 16zm391.3-40l45.4 0c6.5 16 19.3 28.9 35.3 35.3l0 105.3c-16 6.5-28.9 19.3-35.3 35.3l-201.3 0c-6.5-16-19.3-28.9-35.3-35.3l0-36.7-48 0 0 36.7c-23.5 9.5-40 32.5-40 59.3c0 35.3 28.7 64 64 64c26.9 0 49.9-16.5 59.3-40l201.3 0c9.5 23.5 32.5 40 59.3 40c35.3 0 64-28.7 64-64c0-26.9-16.5-49.9-40-59.3l0-105.3c23.5-9.5 40-32.5 40-59.3c0-35.3-28.7-64-64-64c-26.9 0-49.9 16.5-59.3 40L448 200l0 16.4c9.8 8.8 17.8 19.5 23.3 31.6zm88.9-26.7a16 16 0 1 1 31.5 5.5 16 16 0 1 1 -31.5-5.5zM271.8 450.7a16 16 0 1 1 -31.5-5.5 16 16 0 1 1 31.5 5.5zm307-18.5a16 16 0 1 1 -5.5 31.5 16 16 0 1 1 5.5-31.5z"></path></svg> <style>svg {
      box-sizing: content-box;
      height: calc(33% / 1);
      padding-top: 1rem;
      padding-bottom: 1rem;
      margin-left: auto;
      margin-right: auto;
    }</style>`,1),on_click$3=(a,e,n)=>{e().location=get$3(n).sid.replace("F","Z")},root_3$7=template('<tr class="odd:bg-[#f9f9f9] dark:odd:bg-[#333] [&amp;_a]:text-[#0031a9] [&amp;_a]:dark:text-[#2fafff]"><td class="text-right"> </td><td> </td><td><button>Anzeigen</button></td></tr>'),root_2$d=template('<table class="[&amp;_th,&amp;_td]:p-2"><thead><tr><th>Kennzahl</th><th class="text-left">Name</th><th>Anzeigen</th></tr></thead><tbody></tbody></table> <div class="text-center text-gray-400 m-4">Keine weiteren Einträge</div>',1),on_click_1$2=(a,e)=>{e().o=null,e().location="Z"},on_click_2$1=(a,e,n,s,o)=>{set(e,0),set(n,0),set(s,0),set(o,0)},root_6$2=template('<tr class="odd:bg-[#f9f9f9] dark:odd:bg-[#333] odd:hover:bg-green-200 hover:bg-green-200 cursor-pointer"><td> </td><td> </td><td> </td></tr>'),root_5$5=template('<div class="flex"><h1 class="flex-auto"> </h1> <button class="btn">❌ Schliessen</button></div> <div class="[&amp;_th,&amp;_td]:align-top [&amp;_th]:text-left flex flex-auto *:flex-min flex-col h-full"><div class="flex h-[80vh]"><div class="flex flex-col"><canvas></canvas> <canvas id="mytest2"></canvas> <!></div> <table class="flex-auto"><thead><tr><th>Name</th><th>Expression</th><th>Value</th></tr></thead><tbody></tbody></table></div></div>',1),root_7$5=template('<div class="text-center text-gray-400">Keine Einträge</div>'),root$r=template('<div class="flex flex-col h-full"><!> <!></div>');function _2_Associations_panel(a,e){push(e,!0);const n=prop(e,"G",7);function s(k){if(n().o.associations){for(const{where:S,from:A}of n().o.associations)if(S==k)return A}}let o=state(proxy([])),l=null,c=null;const u=k=>{user_effect(()=>(l=k,myfunc(n().o.pdf,k,n().currentPage),()=>{}))};let h=state(0),f=state(0),d=state(0),p=state(0);const g=k=>{user_effect(()=>{if(c=k,c.width="1190",c.height="1683",c.style.width="595px",c.style.height="841px",get$3(h)>0||get$3(f)>0||get$3(d)>0||get$3(p)>0){const S=c.getContext("2d");S.fillStyle="rgba(0,0,0,0.5)",S.fillRect(0,0,1190,1683),S.clearRect(get$3(h)*2,1683-get$3(f)*2-40,get$3(d)*2,get$3(p)*2)}return()=>{}})};user_effect(()=>{n().o&&(async()=>set(o,await pdfListformsonpage(n().o.pdf,n().currentPage-1),!0))()});const m="text-white bg-[#063FC0] focus:ring-4 focus:outline-none focus:ring-blue-300 font-bold rounded-none text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:focus:ring-blue-800 cursor-pointer";user_effect(()=>{n().selectedField!=null&&(l.getContext("2d"),get$3(o)[n().selectedField])});var y=root$r(),_=child(y);{var b=k=>{var S=root_2$d(),A=first_child(S),w=child(A),E=child(w),F=child(E);set_style(F,"",{},{width:"1px"});var O=sibling(F,2);set_style(O,"",{},{width:"1px"});var M=sibling(w);each(M,21,()=>Object.values(n().formulare),index,(V,G)=>{var te=root_3$7(),ce=child(te),se=child(ce),le=sibling(ce),fe=child(le),ge=sibling(le),xe=child(ge);set_class(xe,1,clsx(m)),xe.__click=[on_click$3,n,G],template_effect(()=>{set_text(se,get$3(G).id),set_text(fe,get$3(G).title)}),append(V,te)}),append(k,S)},x=(k,S)=>{{var A=w=>{var E=root_5$5(),F=first_child(E),O=child(F),M=child(O),V=sibling(O,2);V.__click=[on_click_1$2,n];var G=sibling(F,2),te=child(G),ce=child(te),se=child(ce);action(se,_e=>u==null?void 0:u(_e));var le=sibling(se,2);le.__click=[on_click_2$1,h,f,d,p],set_style(le,"",{},{position:"absolute"}),action(le,_e=>g==null?void 0:g(_e));var fe=sibling(le,2);PdfButtonsPager(fe,{get G(){return n()}});var ge=sibling(ce,2),xe=sibling(child(ge));each(xe,21,()=>get$3(o),index,(_e,Ce,ae)=>{var B=root_6$2();B.__click=()=>{n().selectedField=ae,set(h,get$3(Ce).rectangle.x,!0),set(f,get$3(Ce).rectangle.y,!0),set(d,get$3(Ce).rectangle.width,!0),set(p,get$3(Ce).rectangle.height,!0)};var I=child(B),q=child(I),K=sibling(I),Q=child(K),$=sibling(K),Z=child($);template_effect((J,R)=>{set_text(q,get$3(Ce).name),set_text(Q,J),set_text(Z,R)},[()=>s(get$3(Ce).name),()=>evaled(s(get$3(Ce).name),n().fields)]),append(_e,B)}),template_effect(()=>set_text(M,n().o.title)),append(w,E)};if_block(k,w=>{n().o&&w(A)},S)}};if_block(_,k=>{n().o?k(x,!1):k(b)})}var P=sibling(_,2);{var T=k=>{var S=root_7$5();append(k,S)};if_block(P,k=>{n().formulare.length==0&&k(T)})}append(a,y),pop()}delegate(["click"]);const __vite_glob_0_1=Object.freeze(Object.defineProperty({__proto__:null,default:_2_Associations_panel,label:label$3,logo:logo$3,prefix:prefix$3,text:text$3},Symbol.toStringTag,{value:"Module"}));var root$q=template('<div class="card bg-base-100 w-96 shadow-lg m-8 flex-auto"><div class="card-body"><h1 class="card-title"> </h1> <table class="table"><thead><tr><th>Name</th><th>Wert</th></tr></thead><tbody><tr><td>URL</td><td><a class="underline"> </a></td></tr><tr><td>Jurisdiktion</td><td> </td></tr></tbody></table> <div class="card-actions justify-end"><button class="btn btn-primary">Bestellen</button></div></div></div>');function Datatable(a,e){push(e,!0);var n=root$q(),s=child(n),o=child(s),l=child(o),c=sibling(o,2),u=sibling(child(c)),h=child(u),f=sibling(child(h)),d=child(f),p=child(d),g=sibling(h),m=sibling(child(g)),y=child(m);template_effect(()=>{set_text(l,`Formular: ${e.file.title??""}`),set_attribute(d,"href",e.file.url),set_text(p,e.file.url),set_text(y,e.file.jurisdiction)}),append(a,n),pop()}const logo$2=a=>{var e=root_1$f();append(a,e)},label$2="Forms",prefix$2=label$2.slice(0,1),text$2="Formulare";var root_1$f=template(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M320 464c8.8 0 16-7.2 16-16l0-288-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16l256 0zM0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64z"></path></svg> <style>svg {
      box-sizing: content-box;
      height: calc(33% / 1);
      padding-top: 1rem;
      padding-bottom: 1rem;
      margin-left: auto;
      margin-right: auto;
    }</style>`,1),on_click$2=(a,e,n)=>{e().location=get$3(n).sid},root_3$6=template('<tr class="odd:bg-[#f9f9f9] dark:odd:bg-[#333] [&amp;_a]:text-[#0031a9] [&amp;_a]:dark:text-[#2fafff]"><td class="text-right"> </td><td> </td><td> </td><td><button>Anzeigen</button></td></tr>'),root_2$c=template('<table class="[&amp;_th,&amp;_td]:p-2"><thead><tr><th>Kennzahl</th><th class="text-left">Name</th><th class="text-left">Jurisdiktion</th><th>Finalisieren</th></tr></thead><tbody></tbody></table> <div class="text-center text-gray-400 m-4">Keine weiteren Einträge</div>',1),on_click_1$1=(a,e)=>{e().o=null,e().location="F"},root_4$5=template('<div class="flex"><h1 class="flex-auto"> </h1> <button class="btn">❌ Schliessen</button></div> <div class="[&amp;_th,&amp;_td]:align-top [&amp;_th]:text-left flex flex-auto *:flex-min h-0"><!> <iframe class="border w-[50%]" title="Pdf Output"></iframe></div>',1),root_5$4=template('<div class="text-center text-gray-400">Keine Einträge</div>'),root$p=template('<div class="flex flex-col h-full"><!> <!></div>');function _3_Forms_panel(a,e){push(e,!0);const n=prop(e,"G",7);let s=state("");user_effect(()=>{n().o&&(set(s,"data:text/plain,"),makepdf(n().o.pdf,n().fields,n().o.associations).then(p=>{set(s,p,!0)}))});const o="text-white bg-[#063FC0] focus:ring-4 focus:outline-none focus:ring-blue-300 font-bold rounded-none text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:focus:ring-blue-800 cursor-pointer";var l=root$p(),c=child(l);{var u=p=>{var g=root_2$c(),m=first_child(g),y=child(m),_=child(y),b=child(_);set_style(b,"",{},{width:"1px"});var x=sibling(b,3);set_style(x,"",{},{width:"1px"});var P=sibling(y);each(P,21,()=>Object.values(n().formulare),index,(T,k)=>{var S=root_3$6(),A=child(S),w=child(A),E=sibling(A),F=child(E),O=sibling(E),M=child(O),V=sibling(O),G=child(V);set_class(G,1,clsx(o)),G.__click=[on_click$2,n,k],template_effect(()=>{set_text(w,get$3(k).id),set_text(F,get$3(k).title),set_text(M,get$3(k).jurisdiction)}),append(T,S)}),append(p,g)},h=p=>{var g=root_4$5(),m=first_child(g),y=child(m),_=child(y),b=sibling(y,2);b.__click=[on_click_1$1,n];var x=sibling(m,2),P=child(x);Datatable(P,{get file(){return n().o}});var T=sibling(P,2);template_effect(()=>{set_text(_,n().o.title),set_attribute(T,"src",get$3(s))}),append(p,g)};if_block(c,p=>{n().o?p(h,!1):p(u)})}var f=sibling(c,2);{var d=p=>{var g=root_5$4();append(p,g)};if_block(f,p=>{n().formulare.length==0&&p(d)})}append(a,l),pop()}delegate(["click"]);const __vite_glob_0_2=Object.freeze(Object.defineProperty({__proto__:null,default:_3_Forms_panel,label:label$2,logo:logo$2,prefix:prefix$2,text:text$2},Symbol.toStringTag,{value:"Module"}));enable_legacy_mode_flag();let rangeFrom=[],rangeTo=[];(()=>{let a="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<a.length;e++)(e%2?rangeTo:rangeFrom).push(n=n+a[e])})();function isExtendingChar(a){if(a<768)return!1;for(let e=0,n=rangeFrom.length;;){let s=e+n>>1;if(a<rangeFrom[s])n=s;else if(a>=rangeTo[s])e=s+1;else return!0;if(e==n)return!1}}function isRegionalIndicator(a){return a>=127462&&a<=127487}const ZWJ=8205;function findClusterBreak$1(a,e,n=!0,s=!0){return(n?nextClusterBreak:prevClusterBreak)(a,e,s)}function nextClusterBreak(a,e,n){if(e==a.length)return e;e&&surrogateLow$1(a.charCodeAt(e))&&surrogateHigh$1(a.charCodeAt(e-1))&&e--;let s=codePointAt$1(a,e);for(e+=codePointSize$1(s);e<a.length;){let o=codePointAt$1(a,e);if(s==ZWJ||o==ZWJ||n&&isExtendingChar(o))e+=codePointSize$1(o),s=o;else if(isRegionalIndicator(o)){let l=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt$1(a,c));)l++,c-=2;if(l%2==0)break;e+=2}else break}return e}function prevClusterBreak(a,e,n){for(;e>0;){let s=nextClusterBreak(a,e-2,n);if(s<e)return s;e--}return 0}function codePointAt$1(a,e){let n=a.charCodeAt(e);if(!surrogateHigh$1(n)||e+1==a.length)return n;let s=a.charCodeAt(e+1);return surrogateLow$1(s)?(n-55296<<10)+(s-56320)+65536:n}function surrogateLow$1(a){return a>=56320&&a<57344}function surrogateHigh$1(a){return a>=55296&&a<56320}function codePointSize$1(a){return a<65536?1:2}let Text$1=class nn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,s){[e,n]=clip(this,e,n);let o=[];return this.decompose(0,e,o,2),s.length&&s.decompose(0,s.length,o,3),this.decompose(n,this.length,o,1),TextNode.from(o,this.length-(n-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=clip(this,e,n);let s=[];return this.decompose(e,n,s,0),TextNode.from(s,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),o=new RawTextCursor(this),l=new RawTextCursor(e);for(let c=n,u=n;;){if(o.next(c),l.next(c),c=0,o.lineBreak!=l.lineBreak||o.done!=l.done||o.value!=l.value)return!1;if(u+=o.value.length,o.done||u>=s)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,n=this.length){return new PartialTextCursor(this,e,n)}iterLines(e,n){let s;if(e==null)s=this.iter();else{n==null&&(n=this.lines+1);let o=this.line(e).from;s=this.iterRange(o,Math.max(o,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new LineCursor(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?nn.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}};class TextLeaf extends Text$1{constructor(e,n=textLength(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,s,o){for(let l=0;;l++){let c=this.text[l],u=o+c.length;if((n?s:u)>=e)return new Line(o,u,s,c);o=u+1,s++}}decompose(e,n,s,o){let l=e<=0&&n>=this.length?this:new TextLeaf(sliceText(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(o&1){let c=s.pop(),u=appendText(l.text,c.text.slice(),0,l.length);if(u.length<=32)s.push(new TextLeaf(u,c.length+l.length));else{let h=u.length>>1;s.push(new TextLeaf(u.slice(0,h)),new TextLeaf(u.slice(h)))}}else s.push(l)}replace(e,n,s){if(!(s instanceof TextLeaf))return super.replace(e,n,s);[e,n]=clip(this,e,n);let o=appendText(this.text,appendText(s.text,sliceText(this.text,0,e)),n),l=this.length+s.length-(n-e);return o.length<=32?new TextLeaf(o,l):TextNode.from(TextLeaf.split(o,[]),l)}sliceString(e,n=this.length,s=`
`){[e,n]=clip(this,e,n);let o="";for(let l=0,c=0;l<=n&&c<this.text.length;c++){let u=this.text[c],h=l+u.length;l>e&&c&&(o+=s),e<h&&n>l&&(o+=u.slice(Math.max(0,e-l),n-l)),l=h+1}return o}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let s=[],o=-1;for(let l of e)s.push(l),o+=l.length+1,s.length==32&&(n.push(new TextLeaf(s,o)),s=[],o=-1);return o>-1&&n.push(new TextLeaf(s,o)),n}}class TextNode extends Text$1{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,n,s,o){for(let l=0;;l++){let c=this.children[l],u=o+c.length,h=s+c.lines-1;if((n?h:u)>=e)return c.lineInner(e,n,s,o);o=u+1,s=h+1}}decompose(e,n,s,o){for(let l=0,c=0;c<=n&&l<this.children.length;l++){let u=this.children[l],h=c+u.length;if(e<=h&&n>=c){let f=o&((c<=e?1:0)|(h>=n?2:0));c>=e&&h<=n&&!f?s.push(u):u.decompose(e-c,n-c,s,f)}c=h+1}}replace(e,n,s){if([e,n]=clip(this,e,n),s.lines<this.lines)for(let o=0,l=0;o<this.children.length;o++){let c=this.children[o],u=l+c.length;if(e>=l&&n<=u){let h=c.replace(e-l,n-l,s),f=this.lines-c.lines+h.lines;if(h.lines<f>>4&&h.lines>f>>6){let d=this.children.slice();return d[o]=h,new TextNode(d,this.length-(n-e)+s.length)}return super.replace(l,u,h)}l=u+1}return super.replace(e,n,s)}sliceString(e,n=this.length,s=`
`){[e,n]=clip(this,e,n);let o="";for(let l=0,c=0;l<this.children.length&&c<=n;l++){let u=this.children[l],h=c+u.length;c>e&&l&&(o+=s),e<h&&n>c&&(o+=u.sliceString(e-c,n-c,s)),c=h+1}return o}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof TextNode))return 0;let s=0,[o,l,c,u]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=n,l+=n){if(o==c||l==u)return s;let h=this.children[o],f=e.children[l];if(h!=f)return s+h.scanIdentical(f,n);s+=h.length+1}}static from(e,n=e.reduce((s,o)=>s+o.length+1,-1)){let s=0;for(let m of e)s+=m.lines;if(s<32){let m=[];for(let y of e)y.flatten(m);return new TextLeaf(m,n)}let o=Math.max(32,s>>5),l=o<<1,c=o>>1,u=[],h=0,f=-1,d=[];function p(m){let y;if(m.lines>l&&m instanceof TextNode)for(let _ of m.children)p(_);else m.lines>c&&(h>c||!h)?(g(),u.push(m)):m instanceof TextLeaf&&h&&(y=d[d.length-1])instanceof TextLeaf&&m.lines+y.lines<=32?(h+=m.lines,f+=m.length+1,d[d.length-1]=new TextLeaf(y.text.concat(m.text),y.length+1+m.length)):(h+m.lines>o&&g(),h+=m.lines,f+=m.length+1,d.push(m))}function g(){h!=0&&(u.push(d.length==1?d[0]:TextNode.from(d,f)),f=-1,h=d.length=0)}for(let m of e)p(m);return g(),u.length==1?u[0]:new TextNode(u,n)}}Text$1.empty=new TextLeaf([""],0);function textLength(a){let e=-1;for(let n of a)e+=n.length+1;return e}function appendText(a,e,n=0,s=1e9){for(let o=0,l=0,c=!0;l<a.length&&o<=s;l++){let u=a[l],h=o+u.length;h>=n&&(h>s&&(u=u.slice(0,s-o)),o<n&&(u=u.slice(n-o)),c?(e[e.length-1]+=u,c=!1):e.push(u)),o=h+1}return e}function sliceText(a,e,n){return appendText(a,[""],e,n)}class RawTextCursor{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,o=this.nodes[s],l=this.offsets[s],c=l>>1,u=o instanceof TextLeaf?o.text.length:o.children.length;if(c==(n>0?u:0)){if(s==0)return this.done=!0,this.value="",this;n>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(n>0?0:1)){if(this.offsets[s]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof TextLeaf){let h=o.text[c+(n<0?-1:0)];if(this.offsets[s]+=n,h.length>Math.max(0,e))return this.value=e==0?h:n>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=o.children[c+(n<0?-1:0)];e>h.length?(e-=h.length,this.offsets[s]+=n):(n<0&&this.offsets[s]--,this.nodes.push(h),this.offsets.push(n>0?1:(h instanceof TextLeaf?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,n,s){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,n>s?-1:1),this.pos=n>s?e.length:0,this.from=Math.min(n,s),this.to=Math.max(n,s)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let s=n<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*n,this.value=o.length<=s?o:n<0?o.slice(o.length-s):o.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:s,value:o}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text$1.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,n,s,o){this.from=e,this.to=n,this.number=s,this.text=o}get length(){return this.to-this.from}}function clip(a,e,n){return e=Math.max(0,Math.min(a.length,e)),[e,Math.max(e,Math.min(a.length,n))]}function findClusterBreak(a,e,n=!0,s=!0){return findClusterBreak$1(a,e,n,s)}function surrogateLow(a){return a>=56320&&a<57344}function surrogateHigh(a){return a>=55296&&a<56320}function codePointAt(a,e){let n=a.charCodeAt(e);if(!surrogateHigh(n)||e+1==a.length)return n;let s=a.charCodeAt(e+1);return surrogateLow(s)?(n-55296<<10)+(s-56320)+65536:n}function fromCodePoint(a){return a<=65535?String.fromCharCode(a):(a-=65536,String.fromCharCode((a>>10)+55296,(a&1023)+56320))}function codePointSize(a){return a<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(a){return a[a.Simple=0]="Simple",a[a.TrackDel=1]="TrackDel",a[a.TrackBefore=2]="TrackBefore",a[a.TrackAfter=3]="TrackAfter",a}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let s=this.sections[n+1];e+=s<0?this.sections[n]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,s=0,o=0;n<this.sections.length;){let l=this.sections[n++],c=this.sections[n++];c<0?(e(s,o,l),o+=l):o+=c,s+=l}}iterChangedRanges(e,n=!1){iterChanges(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?e.push(s,o):e.push(o,s)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,n=!1){return e.empty?this:mapSet(this,e,n)}mapPos(e,n=-1,s=MapMode.Simple){let o=0,l=0;for(let c=0;c<this.sections.length;){let u=this.sections[c++],h=this.sections[c++],f=o+u;if(h<0){if(f>e)return l+(e-o);l+=u}else{if(s!=MapMode.Simple&&f>=e&&(s==MapMode.TrackDel&&o<e&&f>e||s==MapMode.TrackBefore&&o<e||s==MapMode.TrackAfter&&f>e))return null;if(f>e||f==e&&n<0&&!u)return e==o||n<0?l:l+h;l+=h}o=f}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return l}touchesRange(e,n=e){for(let s=0,o=0;s<this.sections.length&&o<=n;){let l=this.sections[s++],c=this.sections[s++],u=o+l;if(c>=0&&o<=n&&u>=e)return o<e&&u>n?"cover":!0;o=u}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];e+=(e?" ":"")+s+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(n,s,o,l,c)=>e=e.replace(o,o+(s-n),c),!1),e}mapDesc(e,n=!1){return mapSet(this,e,n,!0)}invert(e){let n=this.sections.slice(),s=[];for(let o=0,l=0;o<n.length;o+=2){let c=n[o],u=n[o+1];if(u>=0){n[o]=u,n[o+1]=c;let h=o>>1;for(;s.length<h;)s.push(Text$1.empty);s.push(c?e.slice(l,l+c):Text$1.empty)}l+=c}return new ChangeSet(n,s)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,n=!1){return e.empty?this:mapSet(this,e,n,!0)}iterChanges(e,n=!1){iterChanges(this,e,n)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let n=[],s=[],o=[],l=new SectionIter(this);e:for(let c=0,u=0;;){let h=c==e.length?1e9:e[c++];for(;u<h||u==h&&l.len==0;){if(l.done)break e;let d=Math.min(l.len,h-u);addSection(o,d,-1);let p=l.ins==-1?-1:l.off==0?l.ins:0;addSection(n,d,p),p>0&&addInsert(s,n,l.text),l.forward(d),u+=d}let f=e[c++];for(;u<f;){if(l.done)break e;let d=Math.min(l.len,f-u);addSection(n,d,-1),addSection(o,d,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(d),u+=d}}return{changes:new ChangeSet(n,s),filtered:ChangeDesc.create(o)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let s=this.sections[n],o=this.sections[n+1];o<0?e.push(s):o==0?e.push([s]):e.push([s].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,s){let o=[],l=[],c=0,u=null;function h(d=!1){if(!d&&!o.length)return;c<n&&addSection(o,n-c,-1);let p=new ChangeSet(o,l);u=u?u.compose(p.map(u)):p,o=[],l=[],c=0}function f(d){if(Array.isArray(d))for(let p of d)f(p);else if(d instanceof ChangeSet){if(d.length!=n)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${n})`);h(),u=u?u.compose(d.map(u)):d}else{let{from:p,to:g=p,insert:m}=d;if(p>g||p<0||g>n)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${n})`);let y=m?typeof m=="string"?Text$1.of(m.split(s||DefaultSplit)):m:Text$1.empty,_=y.length;if(p==g&&_==0)return;p<c&&h(),p>c&&addSection(o,p-c,-1),addSection(o,g-p,_),addInsert(l,o,y),c=g}}return f(e),h(!u),u}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],s=[];for(let o=0;o<e.length;o++){let l=e[o];if(typeof l=="number")n.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((c,u)=>u&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)n.push(l[0],0);else{for(;s.length<o;)s.push(Text$1.empty);s[o]=Text$1.of(l.slice(1)),n.push(l[0],s[o].length)}}}return new ChangeSet(n,s)}static createSet(e,n){return new ChangeSet(e,n)}}function addSection(a,e,n,s=!1){if(e==0&&n<=0)return;let o=a.length-2;o>=0&&n<=0&&n==a[o+1]?a[o]+=e:o>=0&&e==0&&a[o]==0?a[o+1]+=n:s?(a[o]+=e,a[o+1]+=n):a.push(e,n)}function addInsert(a,e,n){if(n.length==0)return;let s=e.length-2>>1;if(s<a.length)a[a.length-1]=a[a.length-1].append(n);else{for(;a.length<s;)a.push(Text$1.empty);a.push(n)}}function iterChanges(a,e,n){let s=a.inserted;for(let o=0,l=0,c=0;c<a.sections.length;){let u=a.sections[c++],h=a.sections[c++];if(h<0)o+=u,l+=u;else{let f=o,d=l,p=Text$1.empty;for(;f+=u,d+=h,h&&s&&(p=p.append(s[c-2>>1])),!(n||c==a.sections.length||a.sections[c+1]<0);)u=a.sections[c++],h=a.sections[c++];e(o,f,l,d,p),o=f,l=d}}}function mapSet(a,e,n,s=!1){let o=[],l=s?[]:null,c=new SectionIter(a),u=new SectionIter(e);for(let h=-1;;){if(c.done&&u.len||u.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&u.ins==-1){let f=Math.min(c.len,u.len);addSection(o,f,-1),c.forward(f),u.forward(f)}else if(u.ins>=0&&(c.ins<0||h==c.i||c.off==0&&(u.len<c.len||u.len==c.len&&!n))){let f=u.len;for(addSection(o,u.ins,-1);f;){let d=Math.min(c.len,f);c.ins>=0&&h<c.i&&c.len<=d&&(addSection(o,0,c.ins),l&&addInsert(l,o,c.text),h=c.i),c.forward(d),f-=d}u.next()}else if(c.ins>=0){let f=0,d=c.len;for(;d;)if(u.ins==-1){let p=Math.min(d,u.len);f+=p,d-=p,u.forward(p)}else if(u.ins==0&&u.len<d)d-=u.len,u.next();else break;addSection(o,f,h<c.i?c.ins:0),l&&h<c.i&&addInsert(l,o,c.text),h=c.i,c.forward(c.len-d)}else{if(c.done&&u.done)return l?ChangeSet.createSet(o,l):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}}function composeSets(a,e,n=!1){let s=[],o=n?[]:null,l=new SectionIter(a),c=new SectionIter(e);for(let u=!1;;){if(l.done&&c.done)return o?ChangeSet.createSet(s,o):ChangeDesc.create(s);if(l.ins==0)addSection(s,l.len,0,u),l.next();else if(c.len==0&&!c.done)addSection(s,0,c.ins,u),o&&addInsert(o,s,c.text),c.next();else{if(l.done||c.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,c.len),f=s.length;if(l.ins==-1){let d=c.ins==-1?-1:c.off?0:c.ins;addSection(s,h,d,u),o&&d&&addInsert(o,s,c.text)}else c.ins==-1?(addSection(s,l.off?0:l.len,h,u),o&&addInsert(o,s,l.textBit(h))):(addSection(s,l.off?0:l.len,c.off?0:c.ins,u),o&&!c.off&&addInsert(o,s,c.text));u=(l.ins>h||c.ins>=0&&c.len>h)&&(u||s.length>f),l.forward2(h),c.forward(h)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Text$1.empty:e[n]}textBit(e){let{inserted:n}=this.set,s=this.i-2>>1;return s>=n.length&&!e?Text$1.empty:n[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,n,s){this.from=e,this.to=n,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let s,o;return this.empty?s=o=e.mapPos(this.from,n):(s=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),s==this.from&&o==this.to?this:new SelectionRange(s,o,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return EditorSelection.range(e,n);let s=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return EditorSelection.range(this.anchor,s)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,n,s){return new SelectionRange(e,n,s)}}class EditorSelection{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:EditorSelection.create(this.ranges.map(s=>s.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,n=!0){return EditorSelection.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let s=this.ranges.slice();return s[n]=e,EditorSelection.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(n=>SelectionRange.fromJSON(n)),e.main)}static single(e,n=e){return new EditorSelection([EditorSelection.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,o=0;o<e.length;o++){let l=e[o];if(l.empty?l.from<=s:l.from<s)return EditorSelection.normalized(e.slice(),n);s=l.to}return new EditorSelection(e,n)}static cursor(e,n=0,s,o){return SelectionRange.create(e,e,(n==0?0:n<0?8:16)|(s==null?7:Math.min(6,s))|(o??16777215)<<6)}static range(e,n,s,o){let l=(s??16777215)<<6|(o==null?7:Math.min(6,o));return n<e?SelectionRange.create(n,e,48|l):SelectionRange.create(e,n,(n>e?8:0)|l)}static normalized(e,n=0){let s=e[n];e.sort((o,l)=>o.from-l.from),n=e.indexOf(s);for(let o=1;o<e.length;o++){let l=e[o],c=e[o-1];if(l.empty?l.from<=c.to:l.from<c.to){let u=c.from,h=Math.max(l.to,c.to);o<=n&&n--,e.splice(--o,2,l.anchor>l.head?EditorSelection.range(h,u):EditorSelection.range(u,h))}}return new EditorSelection(e,n)}}function checkSelection(a,e){for(let n of a.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,n,s,o,l){this.combine=e,this.compareInput=n,this.compare=s,this.isStatic=o,this.id=nextID++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new Facet(e.combine||(n=>n),e.compareInput||((n,s)=>n===s),e.compare||(e.combine?(n,s)=>n===s:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,n)}from(e,n){return n||(n=s=>s),this.compute([e],s=>n(s.field(e)))}}function sameArray$1(a,e){return a==e||a.length==e.length&&a.every((n,s)=>n===e[s])}class FacetProvider{constructor(e,n,s,o){this.dependencies=e,this.facet=n,this.type=s,this.value=o,this.id=nextID++}dynamicSlot(e){var n;let s=this.value,o=this.facet.compareInput,l=this.id,c=e[l]>>1,u=this.type==2,h=!1,f=!1,d=[];for(let p of this.dependencies)p=="doc"?h=!0:p=="selection"?f=!0:(((n=e[p.id])!==null&&n!==void 0?n:1)&1)==0&&d.push(e[p.id]);return{create(p){return p.values[c]=s(p),1},update(p,g){if(h&&g.docChanged||f&&(g.docChanged||g.selection)||ensureAll(p,d)){let m=s(p);if(u?!compareArray(m,p.values[c],o):!o(m,p.values[c]))return p.values[c]=m,1}return 0},reconfigure:(p,g)=>{let m,y=g.config.address[l];if(y!=null){let _=getAddr(g,y);if(this.dependencies.every(b=>b instanceof Facet?g.facet(b)===p.facet(b):b instanceof StateField?g.field(b,!1)==p.field(b,!1):!0)||(u?compareArray(m=s(p),_,o):o(m=s(p),_)))return p.values[c]=_,0}else m=s(p);return p.values[c]=m,1}}}}function compareArray(a,e,n){if(a.length!=e.length)return!1;for(let s=0;s<a.length;s++)if(!n(a[s],e[s]))return!1;return!0}function ensureAll(a,e){let n=!1;for(let s of e)ensureAddr(a,s)&1&&(n=!0);return n}function dynamicFacetSlot(a,e,n){let s=n.map(h=>a[h.id]),o=n.map(h=>h.type),l=s.filter(h=>!(h&1)),c=a[e.id]>>1;function u(h){let f=[];for(let d=0;d<s.length;d++){let p=getAddr(h,s[d]);if(o[d]==2)for(let g of p)f.push(g);else f.push(p)}return e.combine(f)}return{create(h){for(let f of s)ensureAddr(h,f);return h.values[c]=u(h),1},update(h,f){if(!ensureAll(h,l))return 0;let d=u(h);return e.compare(d,h.values[c])?0:(h.values[c]=d,1)},reconfigure(h,f){let d=ensureAll(h,s),p=f.config.facets[e.id],g=f.facet(e);if(p&&!d&&sameArray$1(n,p))return h.values[c]=g,0;let m=u(h);return e.compare(m,g)?(h.values[c]=g,0):(h.values[c]=m,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,n,s,o,l){this.id=e,this.createF=n,this.updateF=s,this.compareF=o,this.spec=l,this.provides=void 0}static define(e){let n=new StateField(nextID++,e.create,e.update,e.compare||((s,o)=>s===o),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(initField).find(s=>s.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:s=>(s.values[n]=this.create(s),1),update:(s,o)=>{let l=s.values[n],c=this.updateF(l,o);return this.compareF(l,c)?0:(s.values[n]=c,1)},reconfigure:(s,o)=>{let l=s.facet(initField),c=o.facet(initField),u;return(u=l.find(h=>h.field==this))&&u!=c.find(h=>h.field==this)?(s.values[n]=u.create(s),1):o.config.address[this.id]!=null?(s.values[n]=o.field(this),0):(s.values[n]=this.create(s),1)}}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(a){return e=>new PrecExtension(e,a)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,n){this.inner=e,this.prec=n}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,n){this.compartment=e,this.inner=n}}class Configuration{constructor(e,n,s,o,l,c){for(this.base=e,this.compartments=n,this.dynamicSlots=s,this.address=o,this.staticValues=l,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,s){let o=[],l=Object.create(null),c=new Map;for(let g of flatten(e,n,c))g instanceof StateField?o.push(g):(l[g.facet.id]||(l[g.facet.id]=[])).push(g);let u=Object.create(null),h=[],f=[];for(let g of o)u[g.id]=f.length<<1,f.push(m=>g.slot(m));let d=s==null?void 0:s.config.facets;for(let g in l){let m=l[g],y=m[0].facet,_=d&&d[g]||[];if(m.every(b=>b.type==0))if(u[y.id]=h.length<<1|1,sameArray$1(_,m))h.push(s.facet(y));else{let b=y.combine(m.map(x=>x.value));h.push(s&&y.compare(b,s.facet(y))?s.facet(y):b)}else{for(let b of m)b.type==0?(u[b.id]=h.length<<1|1,h.push(b.value)):(u[b.id]=f.length<<1,f.push(x=>b.dynamicSlot(x)));u[y.id]=f.length<<1,f.push(b=>dynamicFacetSlot(b,y,m))}}let p=f.map(g=>g(u));return new Configuration(e,c,p,u,h,l)}}function flatten(a,e,n){let s=[[],[],[],[],[]],o=new Map;function l(c,u){let h=o.get(c);if(h!=null){if(h<=u)return;let f=s[h].indexOf(c);f>-1&&s[h].splice(f,1),c instanceof CompartmentInstance&&n.delete(c.compartment)}if(o.set(c,u),Array.isArray(c))for(let f of c)l(f,u);else if(c instanceof CompartmentInstance){if(n.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(c.compartment)||c.inner;n.set(c.compartment,f),l(f,u)}else if(c instanceof PrecExtension)l(c.inner,c.prec);else if(c instanceof StateField)s[u].push(c),c.provides&&l(c.provides,u);else if(c instanceof FacetProvider)s[u].push(c),c.facet.extensions&&l(c.facet.extensions,Prec_.default);else{let f=c.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(f,u)}}return l(a,Prec_.default),s.reduce((c,u)=>c.concat(u))}function ensureAddr(a,e){if(e&1)return 2;let n=e>>1,s=a.status[n];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;a.status[n]=4;let o=a.computeSlot(a,a.config.dynamicSlots[n]);return a.status[n]=2|o}function getAddr(a,e){return e&1?a.config.staticValues[e>>1]:a.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:a=>a.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:a=>a.length?a[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:a=>a.length?a[0]:!1});class Annotation{constructor(e,n){this.type=e,this.value=n}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new StateEffect(this.type,n)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let s=[];for(let o of e){let l=o.map(n);l&&s.push(l)}return s}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,n,s,o,l,c){this.startState=e,this.changes=n,this.selection=s,this.effects=o,this.annotations=l,this.scrollIntoView=c,this._doc=null,this._state=null,s&&checkSelection(s,n.newLength),l.some(u=>u.type==Transaction.time)||(this.annotations=l.concat(Transaction.time.of(Date.now())))}static create(e,n,s,o,l,c){return new Transaction(e,n,s,o,l,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Transaction.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(a,e){let n=[];for(let s=0,o=0;;){let l,c;if(s<a.length&&(o==e.length||e[o]>=a[s]))l=a[s++],c=a[s++];else if(o<e.length)l=e[o++],c=e[o++];else return n;!n.length||n[n.length-1]<l?n.push(l,c):n[n.length-1]<c&&(n[n.length-1]=c)}}function mergeTransaction(a,e,n){var s;let o,l,c;return n?(o=e.changes,l=ChangeSet.empty(e.changes.length),c=a.changes.compose(e.changes)):(o=e.changes.map(a.changes),l=a.changes.mapDesc(e.changes,!0),c=a.changes.compose(o)),{changes:c,selection:e.selection?e.selection.map(l):(s=a.selection)===null||s===void 0?void 0:s.map(o),effects:StateEffect.mapEffects(a.effects,o).concat(StateEffect.mapEffects(e.effects,l)),annotations:a.annotations.length?a.annotations.concat(e.annotations):e.annotations,scrollIntoView:a.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(a,e,n){let s=e.selection,o=asArray$1(e.annotations);return e.userEvent&&(o=o.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],n,a.facet(lineSeparator)),selection:s&&(s instanceof EditorSelection?s:EditorSelection.single(s.anchor,s.head)),effects:asArray$1(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(a,e,n){let s=resolveTransactionInner(a,e.length?e[0]:{},a.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(n=!1);let c=!!e[l].sequential;s=mergeTransaction(s,resolveTransactionInner(a,e[l],c?s.changes.newLength:a.doc.length),c)}let o=Transaction.create(a,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return extendTransaction(n?filterTransaction(o):o)}function filterTransaction(a){let e=a.startState,n=!0;for(let o of e.facet(changeFilter)){let l=o(a);if(l===!1){n=!1;break}Array.isArray(l)&&(n=n===!0?l:joinRanges(n,l))}if(n!==!0){let o,l;if(n===!1)l=a.changes.invertedDesc,o=ChangeSet.empty(e.doc.length);else{let c=a.changes.filter(n);o=c.changes,l=c.filtered.mapDesc(c.changes).invertedDesc}a=Transaction.create(e,o,a.selection&&a.selection.map(l),StateEffect.mapEffects(a.effects,l),a.annotations,a.scrollIntoView)}let s=e.facet(transactionFilter);for(let o=s.length-1;o>=0;o--){let l=s[o](a);l instanceof Transaction?a=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Transaction?a=l[0]:a=resolveTransaction(e,asArray$1(l),!1)}return a}function extendTransaction(a){let e=a.startState,n=e.facet(transactionExtender),s=a;for(let o=n.length-1;o>=0;o--){let l=n[o](a);l&&Object.keys(l).length&&(s=mergeTransaction(s,resolveTransactionInner(e,l,a.changes.newLength),!0))}return s==a?a:Transaction.create(e,a.changes,a.selection,s.effects,s.annotations,s.scrollIntoView)}const none$2=[];function asArray$1(a){return a==null?none$2:Array.isArray(a)?a:[a]}var CharCategory=function(a){return a[a.Word=0]="Word",a[a.Space=1]="Space",a[a.Other=2]="Other",a}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(a){}function hasWordChar(a){if(wordChar)return wordChar.test(a);for(let e=0;e<a.length;e++){let n=a[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(a){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let n=0;n<a.length;n++)if(e.indexOf(a[n])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,n,s,o,l,c){this.config=e,this.doc=n,this.selection=s,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=l,c&&(c._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)ensureAddr(this,u<<1);this.computeSlot=null}field(e,n=!0){let s=this.config.address[e.id];if(s==null){if(n)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,s),getAddr(this,s)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let n=this.config,{base:s,compartments:o}=n;for(let u of e.effects)u.is(Compartment.reconfigure)?(n&&(o=new Map,n.compartments.forEach((h,f)=>o.set(f,h)),n=null),o.set(u.value.compartment,u.value.extension)):u.is(StateEffect.reconfigure)?(n=null,s=u.value):u.is(StateEffect.appendConfig)&&(n=null,s=asArray$1(s).concat(u.value));let l;n?l=e.startState.values.slice():(n=Configuration.resolve(s,o,this),l=new EditorState(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(h,f)=>f.reconfigure(h,this),null).values);let c=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(n,e.newDoc,c,l,(u,h)=>h.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:EditorSelection.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,s=e(n.ranges[0]),o=this.changes(s.changes),l=[s.range],c=asArray$1(s.effects);for(let u=1;u<n.ranges.length;u++){let h=e(n.ranges[u]),f=this.changes(h.changes),d=f.map(o);for(let g=0;g<u;g++)l[g]=l[g].map(d);let p=o.mapDesc(f,!0);l.push(h.range.map(p)),o=o.compose(d),c=StateEffect.mapEffects(c,d).concat(StateEffect.mapEffects(asArray$1(h.effects),p))}return{changes:o,selection:EditorSelection.create(l,n.mainIndex),effects:c}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text$1.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ensureAddr(this,n),getAddr(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let o=e[s];o instanceof StateField&&this.config.address[o.id]!=null&&(n[s]=o.spec.toJSON(this.field(e[s]),this))}return n}static fromJSON(e,n={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(s){for(let l in s)if(Object.prototype.hasOwnProperty.call(e,l)){let c=s[l],u=e[l];o.push(c.init(h=>c.spec.fromJSON(u,h)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:n.extensions?o.concat([n.extensions]):o})}static create(e={}){let n=Configuration.resolve(e.extensions||[],new Map),s=e.doc instanceof Text$1?e.doc:Text$1.of((e.doc||"").split(n.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(o,s.length),n.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(n,s,o,n.dynamicSlots.map(()=>null),(l,c)=>c.create(l),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...n){for(let s of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(s,o)=>{if(o=="$")return"$";let l=+(o||1);return!l||l>n.length?s:n[l-1]})),e}languageDataAt(e,n,s=-1){let o=[];for(let l of this.facet(languageData))for(let c of l(this,n,s))Object.prototype.hasOwnProperty.call(c,e)&&o.push(c[e]);return o}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:s,length:o}=this.doc.lineAt(e),l=this.charCategorizer(e),c=e-s,u=e-s;for(;c>0;){let h=findClusterBreak(n,c,!1);if(l(n.slice(h,c))!=CharCategory.Word)break;c=h}for(;u<o;){let h=findClusterBreak(n,u);if(l(n.slice(u,h))!=CharCategory.Word)break;u=h}return c==u?null:EditorSelection.range(c+s,u+s)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:a=>a.length?a[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(a,e){let n=Object.keys(a),s=Object.keys(e);return n.length==s.length&&n.every(o=>a[o]==e[o])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(a,e,n={}){let s={};for(let o of a)for(let l of Object.keys(o)){let c=o[l],u=s[l];if(u===void 0)s[l]=c;else if(!(u===c||c===void 0))if(Object.hasOwnProperty.call(n,l))s[l]=n[l](u,c);else throw new Error("Config merge conflict for field "+l)}for(let o in e)s[o]===void 0&&(s[o]=e[o]);return s}class RangeValue{eq(e){return this==e}range(e,n=e){return Range$1.create(e,n,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class an{constructor(e,n,s){this.from=e,this.to=n,this.value=s}static create(e,n,s){return new an(e,n,s)}};function cmpRange(a,e){return a.from-e.from||a.value.startSide-e.value.startSide}class Chunk{constructor(e,n,s,o){this.from=e,this.to=n,this.value=s,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,n,s,o=0){let l=s?this.to:this.from;for(let c=o,u=l.length;;){if(c==u)return c;let h=c+u>>1,f=l[h]-e||(s?this.value[h].endSide:this.value[h].startSide)-n;if(h==c)return f>=0?c:u;f>=0?u=h:c=h+1}}between(e,n,s,o){for(let l=this.findIndex(n,-1e9,!0),c=this.findIndex(s,1e9,!1,l);l<c;l++)if(o(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,n){let s=[],o=[],l=[],c=-1,u=-1;for(let h=0;h<this.value.length;h++){let f=this.value[h],d=this.from[h]+e,p=this.to[h]+e,g,m;if(d==p){let y=n.mapPos(d,f.startSide,f.mapMode);if(y==null||(g=m=y,f.startSide!=f.endSide&&(m=n.mapPos(d,f.endSide),m<g)))continue}else if(g=n.mapPos(d,f.startSide),m=n.mapPos(p,f.endSide),g>m||g==m&&f.startSide>0&&f.endSide<=0)continue;(m-g||f.endSide-f.startSide)<0||(c<0&&(c=g),f.point&&(u=Math.max(u,m-g)),s.push(f),o.push(g-c),l.push(m-c))}return{mapped:s.length?new Chunk(o,l,s,u):null,pos:c}}}class RangeSet{constructor(e,n,s,o){this.chunkPos=e,this.chunk=n,this.nextLayer=s,this.maxPoint=o}static create(e,n,s,o){return new RangeSet(e,n,s,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:s=!1,filterFrom:o=0,filterTo:l=this.length}=e,c=e.filter;if(n.length==0&&!c)return this;if(s&&(n=n.slice().sort(cmpRange)),this.isEmpty)return n.length?RangeSet.of(n):this;let u=new LayerCursor(this,null,-1).goto(0),h=0,f=[],d=new RangeSetBuilder;for(;u.value||h<n.length;)if(h<n.length&&(u.from-n[h].from||u.startSide-n[h].value.startSide)>=0){let p=n[h++];d.addInner(p.from,p.to,p.value)||f.push(p)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(h==n.length||this.chunkEnd(u.chunkIndex)<n[h].from)&&(!c||o>this.chunkEnd(u.chunkIndex)||l<this.chunkPos[u.chunkIndex])&&d.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!c||o>u.to||l<u.from||c(u.from,u.to,u.value))&&(d.addInner(u.from,u.to,u.value)||f.push(Range$1.create(u.from,u.to,u.value))),u.next());return d.finishInner(this.nextLayer.isEmpty&&!f.length?RangeSet.empty:this.nextLayer.update({add:f,filter:c,filterFrom:o,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],s=[],o=-1;for(let c=0;c<this.chunk.length;c++){let u=this.chunkPos[c],h=this.chunk[c],f=e.touchesRange(u,u+h.length);if(f===!1)o=Math.max(o,h.maxPoint),n.push(h),s.push(e.mapPos(u));else if(f===!0){let{mapped:d,pos:p}=h.map(u,e);d&&(o=Math.max(o,d.maxPoint),n.push(d),s.push(p))}}let l=this.nextLayer.map(e);return n.length==0?l:new RangeSet(s,n,l||RangeSet.empty,o)}between(e,n,s){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],c=this.chunk[o];if(n>=l&&e<=l+c.length&&c.between(l,e-l,n-l,s)===!1)return}this.nextLayer.between(e,n,s)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return HeapCursor.from(e).goto(n)}static compare(e,n,s,o,l=-1){let c=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=l),u=n.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=l),h=findSharedChunks(c,u,s),f=new SpanCursor(c,h,l),d=new SpanCursor(u,h,l);s.iterGaps((p,g,m)=>compare(f,p,d,g,m,o)),s.empty&&s.length==0&&compare(f,0,d,0,0,o)}static eq(e,n,s=0,o){o==null&&(o=999999999);let l=e.filter(d=>!d.isEmpty&&n.indexOf(d)<0),c=n.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(l.length!=c.length)return!1;if(!l.length)return!0;let u=findSharedChunks(l,c),h=new SpanCursor(l,u,0).goto(s),f=new SpanCursor(c,u,0).goto(s);for(;;){if(h.to!=f.to||!sameValues(h.active,f.active)||h.point&&(!f.point||!h.point.eq(f.point)))return!1;if(h.to>o)return!0;h.next(),f.next()}}static spans(e,n,s,o,l=-1){let c=new SpanCursor(e,null,l).goto(n),u=n,h=c.openStart;for(;;){let f=Math.min(c.to,s);if(c.point){let d=c.activeForPoint(c.to),p=c.pointFrom<n?d.length+1:c.point.startSide<0?d.length:Math.min(d.length,h);o.point(u,f,c.point,d,p,c.pointRank),h=Math.min(c.openEnd(f),d.length)}else f>u&&(o.span(u,f,c.active,h),h=c.openEnd(f));if(c.to>s)return h+(c.point&&c.to>s?1:0);u=c.to,c.next()}}static of(e,n=!1){let s=new RangeSetBuilder;for(let o of e instanceof Range$1?[e]:n?lazySort(e):e)s.add(o.from,o.to,o.value);return s.finish()}static join(e){if(!e.length)return RangeSet.empty;let n=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let o=e[s];o!=RangeSet.empty;o=o.nextLayer)n=new RangeSet(o.chunkPos,o.chunk,n,Math.max(o.maxPoint,n.maxPoint));return n}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(a){if(a.length>1)for(let e=a[0],n=1;n<a.length;n++){let s=a[n];if(cmpRange(e,s)>0)return a.slice().sort(cmpRange);e=s}return a}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,s){this.addInner(e,n,s)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,n,s)}addInner(e,n,s){let o=e-this.lastTo||s.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=n,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let s=n.value.length-1;return this.last=n.value[s],this.lastFrom=n.from[s]+e,this.lastTo=n.to[s]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function findSharedChunks(a,e,n){let s=new Map;for(let l of a)for(let c=0;c<l.chunk.length;c++)l.chunk[c].maxPoint<=0&&s.set(l.chunk[c],l.chunkPos[c]);let o=new Set;for(let l of e)for(let c=0;c<l.chunk.length;c++){let u=s.get(l.chunk[c]);u!=null&&(n?n.mapPos(u):u)==l.chunkPos[c]&&!(n!=null&&n.touchesRange(u,u+l.chunk[c].length))&&o.add(l.chunk[c])}return o}class LayerCursor{constructor(e,n,s,o=0){this.layer=e,this.skip=n,this.minPoint=s,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,s){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!s||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],s=e+n.from[this.rangeIndex];if(this.from=s,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,n=null,s=-1){let o=[];for(let l=0;l<e.length;l++)for(let c=e[l];!c.isEmpty;c=c.nextLayer)c.maxPoint>=s&&o.push(new LayerCursor(c,n,s,l));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let s of this.heap)s.goto(e,n);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);return this.next(),this}forward(e,n){for(let s of this.heap)s.forward(e,n);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(a,e){for(let n=a[e];;){let s=(e<<1)+1;if(s>=a.length)break;let o=a[s];if(s+1<a.length&&o.compare(a[s+1])>=0&&(o=a[s+1],s++),n.compare(o)<0)break;a[s]=n,a[e]=o,e=s}}class SpanCursor{constructor(e,n,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,n,s)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let n=0,{value:s,to:o,rank:l}=this.cursor;for(;n<this.activeRank.length&&(l-this.activeRank[n]||o-this.activeTo[n])>0;)n++;insert(this.active,n,s),insert(this.activeTo,n,o),insert(this.activeRank,n,l),e&&insert(e,n,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),s&&remove(s,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(s),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let o=s.length-1;o>=0&&s[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&n.push(this.active[s]);return n.reverse()}openEnd(e){let n=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)n++;return n}}function compare(a,e,n,s,o,l){a.goto(e),n.goto(s);let c=s+o,u=s,h=s-e;for(;;){let f=a.to+h-n.to,d=f||a.endSide-n.endSide,p=d<0?a.to+h:n.to,g=Math.min(p,c);if(a.point||n.point?a.point&&n.point&&(a.point==n.point||a.point.eq(n.point))&&sameValues(a.activeForPoint(a.to),n.activeForPoint(n.to))||l.comparePoint(u,g,a.point,n.point):g>u&&!sameValues(a.active,n.active)&&l.compareRange(u,g,a.active,n.active),p>c)break;(f||a.openEnd!=n.openEnd)&&l.boundChange&&l.boundChange(p),u=p,d<=0&&a.next(),d>=0&&n.next()}}function sameValues(a,e){if(a.length!=e.length)return!1;for(let n=0;n<a.length;n++)if(a[n]!=e[n]&&!a[n].eq(e[n]))return!1;return!0}function remove(a,e){for(let n=e,s=a.length-1;n<s;n++)a[n]=a[n+1];a.pop()}function insert(a,e,n){for(let s=a.length-1;s>=e;s--)a[s+1]=a[s];a[e]=n}function findMinIndex(a,e){let n=-1,s=1e9;for(let o=0;o<e.length;o++)(e[o]-s||a[o].endSide-a[n].endSide)<0&&(n=o,s=e[o]);return n}function countColumn(a,e,n=a.length){let s=0;for(let o=0;o<n&&o<a.length;)a.charCodeAt(o)==9?(s+=e-s%e,o++):(s++,o=findClusterBreak(a,o));return s}function findColumn(a,e,n,s){for(let o=0,l=0;;){if(l>=e)return o;if(o==a.length)break;l+=a.charCodeAt(o)==9?n-l%n:1,o=findClusterBreak(a,o)}return s===!0?-1:a.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,n){this.rules=[];let{finish:s}=n||{};function o(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function l(c,u,h,f){let d=[],p=/^@(\w+)\b/.exec(c[0]),g=p&&p[1]=="keyframes";if(p&&u==null)return h.push(c[0]+";");for(let m in u){let y=u[m];if(/&/.test(m))l(m.split(/,\s*/).map(_=>c.map(b=>_.replace(/&/,b))).reduce((_,b)=>_.concat(b)),y,h);else if(y&&typeof y=="object"){if(!p)throw new RangeError("The value of a property ("+m+") should be a primitive value.");l(o(m),y,d,g)}else y!=null&&d.push(m.replace(/_.*/,"").replace(/[A-Z]/g,_=>"-"+_.toLowerCase())+": "+y+";")}(d.length||g)&&h.push((s&&!p&&!f?c.map(s):c).join(", ")+" {"+d.join(" ")+"}")}for(let c in e)l(o(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,n,s){let o=e[SET],l=s&&s.nonce;o?l&&o.setNonce(l):o=new StyleSet(e,l),o.mount(Array.isArray(n)?n:[n],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,n){let s=e.ownerDocument||e,o=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&o.CSSStyleSheet){let l=adoptedSet.get(s);if(l)return e[SET]=l;this.sheet=new o.CSSStyleSheet,adoptedSet.set(s,this)}else this.styleTag=s.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[SET]=this}mount(e,n){let s=this.sheet,o=0,l=0;for(let c=0;c<e.length;c++){let u=e[c],h=this.modules.indexOf(u);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,u),s)for(let f=0;f<u.rules.length;f++)s.insertRule(u.rules[f],o++)}else{for(;l<h;)o+=this.modules[l++].rules.length;o+=u.rules.length,l++}}if(s)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let c="";for(let h=0;h<this.modules.length;h++)c+=this.modules[h].getRules()+`
`;this.styleTag.textContent=c;let u=n.head||n;this.styleTag.parentNode!=u&&u.insertBefore(this.styleTag,u.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(a){var e=mac&&a.metaKey&&a.shiftKey&&!a.ctrlKey&&!a.altKey||ie$1&&a.shiftKey&&a.key&&a.key.length==1||a.key=="Unidentified",n=!e&&a.key||(a.shiftKey?shift:base)[a.keyCode]||a.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function getSelection(a){let e;return a.nodeType==11?e=a.getSelection?a:a.ownerDocument:e=a,e.getSelection()}function contains(a,e){return e?a==e||a.contains(e.nodeType!=1?e.parentNode:e):!1}function hasSelection(a,e){if(!e.anchorNode)return!1;try{return contains(a,e.anchorNode)}catch{return!1}}function clientRectsFor(a){return a.nodeType==3?textRange(a,0,a.nodeValue.length).getClientRects():a.nodeType==1?a.getClientRects():[]}function isEquivalentPosition(a,e,n,s){return n?scanFor(a,e,n,s,-1)||scanFor(a,e,n,s,1):!1}function domIndex(a){for(var e=0;;e++)if(a=a.previousSibling,!a)return e}function isBlockElement(a){return a.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}function scanFor(a,e,n,s,o){for(;;){if(a==n&&e==s)return!0;if(e==(o<0?0:maxOffset(a))){if(a.nodeName=="DIV")return!1;let l=a.parentNode;if(!l||l.nodeType!=1)return!1;e=domIndex(a)+(o<0?0:1),a=l}else if(a.nodeType==1){if(a=a.childNodes[e+(o<0?-1:0)],a.nodeType==1&&a.contentEditable=="false")return!1;e=o<0?maxOffset(a):0}else return!1}}function maxOffset(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}function flattenRect(a,e){let n=e?a.left:a.right;return{left:n,right:n,top:a.top,bottom:a.bottom}}function windowRect(a){let e=a.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:a.innerWidth,top:0,bottom:a.innerHeight}}function getScale(a,e){let n=e.width/a.offsetWidth,s=e.height/a.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-a.offsetWidth)<1)&&(n=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-a.offsetHeight)<1)&&(s=1),{scaleX:n,scaleY:s}}function scrollRectIntoView(a,e,n,s,o,l,c,u){let h=a.ownerDocument,f=h.defaultView||window;for(let d=a,p=!1;d&&!p;)if(d.nodeType==1){let g,m=d==h.body,y=1,_=1;if(m)g=windowRect(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(p=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let P=d.getBoundingClientRect();({scaleX:y,scaleY:_}=getScale(d,P)),g={left:P.left,right:P.left+d.clientWidth*y,top:P.top,bottom:P.top+d.clientHeight*_}}let b=0,x=0;if(o=="nearest")e.top<g.top?(x=e.top-(g.top+c),n>0&&e.bottom>g.bottom+x&&(x=e.bottom-g.bottom+c)):e.bottom>g.bottom&&(x=e.bottom-g.bottom+c,n<0&&e.top-x<g.top&&(x=e.top-(g.top+c)));else{let P=e.bottom-e.top,T=g.bottom-g.top;x=(o=="center"&&P<=T?e.top+P/2-T/2:o=="start"||o=="center"&&n<0?e.top-c:e.bottom-T+c)-g.top}if(s=="nearest"?e.left<g.left?(b=e.left-(g.left+l),n>0&&e.right>g.right+b&&(b=e.right-g.right+l)):e.right>g.right&&(b=e.right-g.right+l,n<0&&e.left<g.left+b&&(b=e.left-(g.left+l))):b=(s=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:s=="start"==u?e.left-l:e.right-(g.right-g.left)+l)-g.left,b||x)if(m)f.scrollBy(b,x);else{let P=0,T=0;if(x){let k=d.scrollTop;d.scrollTop+=x/_,T=(d.scrollTop-k)*_}if(b){let k=d.scrollLeft;d.scrollLeft+=b/y,P=(d.scrollLeft-k)*y}e={left:e.left-P,top:e.top-T,right:e.right-P,bottom:e.bottom-T},P&&Math.abs(P-b)<1&&(s="nearest"),T&&Math.abs(T-x)<1&&(o="nearest")}if(m)break;(e.top<g.top||e.bottom>g.bottom||e.left<g.left||e.right>g.right)&&(e={left:Math.max(e.left,g.left),right:Math.min(e.right,g.right),top:Math.max(e.top,g.top),bottom:Math.min(e.bottom,g.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function scrollableParents(a){let e=a.ownerDocument,n,s;for(let o=a.parentNode;o&&!(o==e.body||n&&s);)if(o.nodeType==1)!s&&o.scrollHeight>o.clientHeight&&(s=o),!n&&o.scrollWidth>o.clientWidth&&(n=o),o=o.assignedSlot||o.parentNode;else if(o.nodeType==11)o=o.host;else break;return{x:n,y:s}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:s}=e;this.set(n,Math.min(e.anchorOffset,n?maxOffset(n):0),s,Math.min(e.focusOffset,s?maxOffset(s):0))}set(e,n,s,o){this.anchorNode=e,this.anchorOffset=n,this.focusNode=s,this.focusOffset=o}}let preventScrollSupported=null;function focusPreventScroll(a){if(a.setActive)return a.setActive();if(preventScrollSupported)return a.focus(preventScrollSupported);let e=[];for(let n=a;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(a.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let n=0;n<e.length;){let s=e[n++],o=e[n++],l=e[n++];s.scrollTop!=o&&(s.scrollTop=o),s.scrollLeft!=l&&(s.scrollLeft=l)}}}let scratchRange;function textRange(a,e,n=e){let s=scratchRange||(scratchRange=document.createRange());return s.setEnd(a,n),s.setStart(a,e),s}function dispatchKey(a,e,n,s){let o={key:e,code:e,keyCode:n,which:n,cancelable:!0};s&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=s);let l=new KeyboardEvent("keydown",o);l.synthetic=!0,a.dispatchEvent(l);let c=new KeyboardEvent("keyup",o);return c.synthetic=!0,a.dispatchEvent(c),l.defaultPrevented||c.defaultPrevented}function getRoot(a){for(;a;){if(a&&(a.nodeType==9||a.nodeType==11&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}function clearAttributes(a){for(;a.attributes.length;)a.removeAttributeNode(a.attributes[0])}function atElementStart(a,e){let n=e.focusNode,s=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=s)return!1;for(s=Math.min(s,maxOffset(n));;)if(s){if(n.nodeType!=1)return!1;let o=n.childNodes[s-1];o.contentEditable=="false"?s--:(n=o,s=maxOffset(n))}else{if(n==a)return!0;s=domIndex(n),n=n.parentNode}}function isScrolledToBottom(a){return a.scrollTop>Math.max(1,a.scrollHeight-a.clientHeight-4)}function textNodeBefore(a,e){for(let n=a,s=e;;){if(n.nodeType==3&&s>0)return{node:n,offset:s};if(n.nodeType==1&&s>0){if(n.contentEditable=="false")return null;n=n.childNodes[s-1],s=maxOffset(n)}else if(n.parentNode&&!isBlockElement(n))s=domIndex(n),n=n.parentNode;else return null}}function textNodeAfter(a,e){for(let n=a,s=e;;){if(n.nodeType==3&&s<n.nodeValue.length)return{node:n,offset:s};if(n.nodeType==1&&s<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[s],s=0}else if(n.parentNode&&!isBlockElement(n))s=domIndex(n)+1,n=n.parentNode;else return null}}class DOMPos{constructor(e,n,s=!0){this.node=e,this.offset=n,this.precise=s}static before(e,n){return new DOMPos(e.parentNode,domIndex(e),n)}static after(e,n){return new DOMPos(e.parentNode,domIndex(e)+1,n)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let s of this.children){if(s==e)return n;n+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let s=this.dom,o=null,l;for(let c of this.children){if(c.flags&7){if(!c.dom&&(l=o?o.nextSibling:s.firstChild)){let u=ContentView.get(l);(!u||!u.parent&&u.canReuseDOM(c))&&c.reuseDOM(l)}c.sync(e,n),c.flags&=-8}if(l=o?o.nextSibling:s.firstChild,n&&!n.written&&n.node==s&&l!=c.dom&&(n.written=!0),c.dom.parentNode==s)for(;l&&l!=c.dom;)l=rm$1(l);else s.insertBefore(c.dom,l);o=c.dom}for(l=o?o.nextSibling:s.firstChild,l&&n&&n.node==s&&(n.written=!0);l;)l=rm$1(l)}else if(this.flags&1)for(let s of this.children)s.flags&7&&(s.sync(e,n),s.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let s;if(e==this.dom)s=this.dom.childNodes[n];else{let o=maxOffset(e)==0?0:n==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;o==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?o=-1:o=1),e=l}o<0?s=e:s=e.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!ContentView.get(s);)s=s.nextSibling;if(!s)return this.length;for(let o=0,l=0;;o++){let c=this.children[o];if(c.dom==s)return l;l+=c.length+c.breakAfter}}domBoundsAround(e,n,s=0){let o=-1,l=-1,c=-1,u=-1;for(let h=0,f=s,d=s;h<this.children.length;h++){let p=this.children[h],g=f+p.length;if(f<e&&g>n)return p.domBoundsAround(e,n,f);if(g>=e&&o==-1&&(o=h,l=f),f>n&&p.dom.parentNode==this.dom){c=h,u=d;break}d=g,f=g+p.breakAfter}return{from:l,to:u<0?s+this.length:u,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,s=noChildren){this.markDirty();for(let o=e;o<n;o++){let l=this.children[o];l.parent==this&&s.indexOf(l)<0&&l.destroy()}s.length<250?this.children.splice(e,n-e,...s):this.children=[].concat(this.children.slice(0,e),s,this.children.slice(n));for(let o=0;o<s.length;o++)s[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,s,o,l,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(a){let e=a.nextSibling;return a.parentNode.removeChild(a),e}class ChildCursor{constructor(e,n,s){this.children=e,this.pos=n,this.i=s,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function replaceRange(a,e,n,s,o,l,c,u,h){let{children:f}=a,d=f.length?f[e]:null,p=l.length?l[l.length-1]:null,g=p?p.breakAfter:c;if(!(e==s&&d&&!c&&!g&&l.length<2&&d.merge(n,o,l.length?p:null,n==0,u,h))){if(s<f.length){let m=f[s];m&&(o<m.length||m.breakAfter&&(p!=null&&p.breakAfter))?(e==s&&(m=m.split(o),o=0),!g&&p&&m.merge(0,o,p,!0,0,h)?l[l.length-1]=m:((o||m.children.length&&!m.children[0].length)&&m.merge(0,o,null,!1,0,h),l.push(m))):m!=null&&m.breakAfter&&(p?p.breakAfter=1:c=1),s++}for(d&&(d.breakAfter=c,n>0&&(!c&&l.length&&d.merge(n,d.length,l[0],!1,u,0)?d.breakAfter=l.shift().breakAfter:(n<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(n,d.length,null,!1,u,0),e++));e<s&&l.length;)if(f[s-1].become(l[l.length-1]))s--,l.pop(),h=l.length?0:u;else if(f[e].become(l[0]))e++,l.shift(),u=l.length?0:h;else break;!l.length&&e&&s<f.length&&!f[e-1].breakAfter&&f[s].merge(0,0,f[e-1],!1,u,h)&&e--,(e<s||l.length)&&a.replaceChildren(e,s,l)}}function mergeChildrenInto(a,e,n,s,o,l){let c=a.childCursor(),{i:u,off:h}=c.findPos(n,1),{i:f,off:d}=c.findPos(e,-1),p=e-n;for(let g of s)p+=g.length;a.length+=p,replaceRange(a,f,d,u,h,s,0,o,l)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,s){return this.flags&8||s&&(!(s instanceof TextView)||this.length-(n-e)+s.length>MaxJoinLen||s.flags&8)?!1:(this.text=this.text.slice(0,e)+(s?s.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,n,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return textCoords(this.dom,e,n)}}class MarkView extends ContentView{constructor(e,n=[],s=0){super(),this.mark=e,this.children=n,this.length=s;for(let o of n)o.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,s,o,l,c){return s&&(!(s instanceof MarkView&&s.mark.eq(this.mark))||e&&l<=0||n<this.length&&c<=0)?!1:(mergeChildrenInto(this,e,n,s?s.children.slice():[],l-1,c-1),this.markDirty(),!0)}split(e){let n=[],s=0,o=-1,l=0;for(let u of this.children){let h=s+u.length;h>e&&n.push(s<e?u.split(e-s):u),o<0&&s>=e&&(o=l),s=h,l++}let c=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new MarkView(this.mark,n,c)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,n){return coordsInChildren(this,e,n)}}function textCoords(a,e,n){let s=a.nodeValue.length;e>s&&(e=s);let o=e,l=e,c=0;e==0&&n<0||e==s&&n>=0?browser.chrome||browser.gecko||(e?(o--,c=1):l<s&&(l++,c=-1)):n<0?o--:l<s&&l++;let u=textRange(a,o,l).getClientRects();if(!u.length)return null;let h=u[(c?c<0:n>=0)?0:u.length-1];return browser.safari&&!c&&h.width==0&&(h=Array.prototype.find.call(u,f=>f.width)||h),c?flattenRect(h,c<0):h||null}class WidgetView extends ContentView{static create(e,n,s){return new WidgetView(e,n,s)}constructor(e,n,s){super(),this.widget=e,this.length=n,this.side=s,this.prevWidget=null}split(e){let n=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,s,o,l,c){return s&&(!(s instanceof WidgetView)||!this.widget.compare(s.widget)||e>0&&l<=0||n<this.length&&c<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-n),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text$1.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,s=n&&n.state.doc,o=this.posAtStart;return s?s.slice(o,o+this.length):Text$1.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let s=this.widget.coordsAt(this.dom,e,n);if(s)return s;let o=this.dom.getClientRects(),l=null;if(!o.length)return null;let c=this.side?this.side<0:e>0;for(let u=c?o.length-1:0;l=o[u],!(e>0?u==0:u==o.length-1||l.top<l.bottom);u+=c?-1:1);return flattenRect(l,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text$1.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(a,e){let n=a.dom,{children:s}=a,o=0;for(let l=0;o<s.length;o++){let c=s[o],u=l+c.length;if(!(u==l&&c.getSide()<=0)){if(e>l&&e<u&&c.dom.parentNode==n)return c.domAtPos(e-l);if(e<=l)break;l=u}}for(let l=o;l>0;l--){let c=s[l-1];if(c.dom.parentNode==n)return c.domAtPos(c.length)}for(let l=o;l<s.length;l++){let c=s[l];if(c.dom.parentNode==n)return c.domAtPos(0)}return new DOMPos(n,0)}function joinInlineInto(a,e,n){let s,{children:o}=a;n>0&&e instanceof MarkView&&o.length&&(s=o[o.length-1])instanceof MarkView&&s.mark.eq(e.mark)?joinInlineInto(s,e.children[0],n-1):(o.push(e),e.setParent(a)),a.length+=e.length}function coordsInChildren(a,e,n){let s=null,o=-1,l=null,c=-1;function u(f,d){for(let p=0,g=0;p<f.children.length&&g<=d;p++){let m=f.children[p],y=g+m.length;y>=d&&(m.children.length?u(m,d-g):(!l||l.isHidden&&(n>0||onSameLine(l,m)))&&(y>d||g==y&&m.getSide()>0)?(l=m,c=d-g):(g<d||g==y&&m.getSide()<0&&!m.isHidden)&&(s=m,o=d-g)),g=y}}u(a,e);let h=(n<0?s:l)||s||l;return h?h.coordsAt(Math.max(0,h==s?o:c),n):fallbackRect(a)}function fallbackRect(a){let e=a.dom.lastChild;if(!e)return a.dom.getBoundingClientRect();let n=clientRectsFor(e);return n[n.length-1]||null}function onSameLine(a,e){let n=a.coordsAt(0,1),s=e.coordsAt(0,1);return n&&s&&s.top<n.bottom}function combineAttrs(a,e){for(let n in a)n=="class"&&e.class?e.class+=" "+a.class:n=="style"&&e.style?e.style+=";"+a.style:e[n]=a[n];return e}const noAttrs$1=Object.create(null);function attrsEq(a,e,n){if(a==e)return!0;a||(a=noAttrs$1),e||(e=noAttrs$1);let s=Object.keys(a),o=Object.keys(e);if(s.length-(n&&s.indexOf(n)>-1?1:0)!=o.length-(n&&o.indexOf(n)>-1?1:0))return!1;for(let l of s)if(l!=n&&(o.indexOf(l)==-1||a[l]!==e[l]))return!1;return!0}function updateAttrs(a,e,n){let s=!1;if(e)for(let o in e)n&&o in n||(s=!0,o=="style"?a.style.cssText="":a.removeAttribute(o));if(n)for(let o in n)e&&e[o]==n[o]||(s=!0,o=="style"?a.style.cssText=n[o]:a.setAttribute(o,n[o]));return s}function getAttrs(a){let e=Object.create(null);for(let n=0;n<a.attributes.length;n++){let s=a.attributes[n];e[s.name]=s.value}return e}class WidgetType{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(a){return a[a.Text=0]="Text",a[a.WidgetBefore=1]="WidgetBefore",a[a.WidgetAfter=2]="WidgetAfter",a[a.WidgetRange=3]="WidgetRange",a}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,n,s,o){super(),this.startSide=e,this.endSide=n,this.widget=s,this.spec=o}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return n+=s&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new PointDecoration(e,n,n,s,e.widget||null,!1)}static replace(e){let n=!!e.block,s,o;if(e.isBlockGap)s=-5e8,o=4e8;else{let{start:l,end:c}=getInclusive(e,n);s=(l?n?-3e8:-1:5e8)-1,o=(c?n?2e8:1:-6e8)+1}return new PointDecoration(e,s,o,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,n=!1){return RangeSet.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:n,end:s}=getInclusive(e);super(n?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,s;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((s=e.attrs)===null||s===void 0?void 0:s.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,n,s,o,l,c){super(n,s,l,e),this.block=o,this.isReplace=c,this.mapMode=o?n<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}PointDecoration.prototype.point=!0;function getInclusive(a,e=!1){let{inclusiveStart:n,inclusiveEnd:s}=a;return n==null&&(n=a.inclusive),s==null&&(s=a.inclusive),{start:n??e,end:s??e}}function widgetsEq(a,e){return a==e||!!(a&&e&&a.compare(e))}function addRange(a,e,n,s=0){let o=n.length-1;o>=0&&n[o]+s>=a?n[o]=Math.max(n[o],e):n.push(a,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,s,o,l,c){if(s){if(!(s instanceof LineView))return!1;this.dom||s.transferDOM(this)}return o&&this.setDeco(s?s.attrs:null),mergeChildrenInto(this,e,n,s?s.children.slice():[],l,c),!0}split(e){let n=new LineView;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:s,off:o}=this.childPos(e);o&&(n.append(this.children[s].split(o),0),this.children[s].merge(o,this.children[s].length,null,!1,0,0),s++);for(let l=s;l<this.children.length;l++)n.append(this.children[l],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){joinInlineInto(this,e,n)}addLineDeco(e){let n=e.spec.attributes,s=e.spec.class;n&&(this.attrs=combineAttrs(n,this.attrs||{})),s&&(this.attrs=combineAttrs({class:s},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var s;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let o=this.dom.lastChild;for(;o&&ContentView.get(o)instanceof MarkView;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((s=ContentView.get(o))===null||s===void 0?void 0:s.isEditable)==!1&&(!browser.ios||!this.children.some(l=>l instanceof TextView))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let s of this.children){if(!(s instanceof TextView)||/[^ -~]/.test(s.text))return null;let o=clientRectsFor(s.dom);if(o.length!=1)return null;e+=o[0].width,n=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let s=coordsInChildren(this,e,n);if(!this.children.length&&s&&this.parent){let{heightOracle:o}=this.parent.view.viewState,l=s.bottom-s.top;if(Math.abs(l-o.lineHeight)<2&&o.textHeight<l){let c=(l-o.textHeight)/2;return{top:s.top+c,bottom:s.bottom-c,left:s.left,right:s.left}}}return s}become(e){return e instanceof LineView&&this.children.length==0&&e.children.length==0&&attrsEq(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let s=0,o=0;s<e.children.length;s++){let l=e.children[s],c=o+l.length;if(c>=n){if(l instanceof LineView)return l;if(c>n)break}o=c+l.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,n,s){super(),this.widget=e,this.length=n,this.deco=s,this.breakAfter=0,this.prevWidget=null}merge(e,n,s,o,l,c){return s&&(!(s instanceof BlockWidgetView)||!this.widget.compare(s.widget)||e>0&&l<=0||n<this.length&&c<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let s=new BlockWidgetView(this.widget,n,this.deco);return s.breakAfter=this.breakAfter,s}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text$1.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let s=this.widget.coordsAt(this.dom,e,n);return s||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:s}=this.deco;return n==s?!1:e<0?n<0:s>0}}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(e,n,s,o){this.doc=e,this.pos=n,this.end=s,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,n,s){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:c,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-s)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+o)),n),s),this.atCursorPos=!0,this.textOff+=o,e-=o,s=0}}span(e,n,s,o){this.buildText(n-e,s,o),this.pos=n,this.openStart<0&&(this.openStart=o)}point(e,n,s,o,l,c){if(this.disallowBlockEffectsFor[c]&&s instanceof PointDecoration){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=n-e;if(s instanceof PointDecoration)if(s.block)s.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(s.widget||NullWidget.block,u,s));else{let h=WidgetView.create(s.widget||NullWidget.inline,u,u?0:s.startSide),f=this.atCursorPos&&!h.isEditable&&l<=o.length&&(e<n||s.startSide>0),d=!h.isEditable&&(e<n||l>o.length||s.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!f&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),f&&(p.append(wrapMarks(new WidgetBufferView(1),o),l),l=o.length+Math.max(0,l-o.length)),p.append(wrapMarks(h,o),l),this.atCursorPos=d,this.pendingBuffer=d?e<n||l>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=l)}static build(e,n,s,o,l){let c=new ContentBuilder(e,n,s,l);return c.openEnd=RangeSet.spans(o,n,s,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(a,e){for(let n of e)a=new MarkView(n,[a],a.length);return a}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(a){return a[a.LTR=0]="LTR",a[a.RTL=1]="RTL",a}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(a){let e=[];for(let n=0;n<a.length;n++)e.push(1<<+a[n]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let a of["()","[]","{}"]){let e=a.charCodeAt(0),n=a.charCodeAt(1);Brackets[e]=n,Brackets[n]=-e}function charType(a){return a<=247?LowTypes[a]:1424<=a&&a<=1524?2:1536<=a&&a<=1785?ArabicTypes[a-1536]:1774<=a&&a<=2220?4:8192<=a&&a<=8204?256:64336<=a&&a<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,n,s){this.from=e,this.to=n,this.level=s}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,s,o){let l=-1;for(let c=0;c<e.length;c++){let u=e[c];if(u.from<=n&&u.to>=n){if(u.level==s)return c;(l<0||(o!=0?o<0?u.from<n:u.to>n:e[l].level>u.level))&&(l=c)}}if(l<0)throw new RangeError("Index out of range");return l}}function isolatesEq(a,e){if(a.length!=e.length)return!1;for(let n=0;n<a.length;n++){let s=a[n],o=e[n];if(s.from!=o.from||s.to!=o.to||s.direction!=o.direction||!isolatesEq(s.inner,o.inner))return!1}return!0}const types=[];function computeCharTypes(a,e,n,s,o){for(let l=0;l<=s.length;l++){let c=l?s[l-1].to:e,u=l<s.length?s[l].from:n,h=l?256:o;for(let f=c,d=h,p=h;f<u;f++){let g=charType(a.charCodeAt(f));g==512?g=d:g==8&&p==4&&(g=16),types[f]=g==4?2:g,g&7&&(p=g),d=g}for(let f=c,d=h,p=h;f<u;f++){let g=types[f];if(g==128)f<u-1&&d==types[f+1]&&d&24?g=types[f]=d:types[f]=256;else if(g==64){let m=f+1;for(;m<u&&types[m]==64;)m++;let y=f&&d==8||m<n&&types[m]==8?p==1?1:8:256;for(let _=f;_<m;_++)types[_]=y;f=m-1}else g==8&&p==1&&(types[f]=1);d=g,g&7&&(p=g)}}}function processBracketPairs(a,e,n,s,o){let l=o==1?2:1;for(let c=0,u=0,h=0;c<=s.length;c++){let f=c?s[c-1].to:e,d=c<s.length?s[c].from:n;for(let p=f,g,m,y;p<d;p++)if(m=Brackets[g=a.charCodeAt(p)])if(m<0){for(let _=u-3;_>=0;_-=3)if(BracketStack[_+1]==-m){let b=BracketStack[_+2],x=b&2?o:b&4?b&1?l:o:0;x&&(types[p]=types[BracketStack[_]]=x),u=_;break}}else{if(BracketStack.length==189)break;BracketStack[u++]=p,BracketStack[u++]=g,BracketStack[u++]=h}else if((y=types[p])==2||y==1){let _=y==o;h=_?0:1;for(let b=u-3;b>=0;b-=3){let x=BracketStack[b+2];if(x&2)break;if(_)BracketStack[b+2]|=2;else{if(x&4)break;BracketStack[b+2]|=4}}}}}function processNeutrals(a,e,n,s){for(let o=0,l=s;o<=n.length;o++){let c=o?n[o-1].to:a,u=o<n.length?n[o].from:e;for(let h=c;h<u;){let f=types[h];if(f==256){let d=h+1;for(;;)if(d==u){if(o==n.length)break;d=n[o++].to,u=o<n.length?n[o].from:e}else if(types[d]==256)d++;else break;let p=l==1,g=(d<e?types[d]:s)==1,m=p==g?p?1:2:s;for(let y=d,_=o,b=_?n[_-1].to:a;y>h;)y==b&&(y=n[--_].from,b=_?n[_-1].to:a),types[--y]=m;h=d}else l=f,h++}}}function emitSpans(a,e,n,s,o,l,c){let u=s%2?2:1;if(s%2==o%2)for(let h=e,f=0;h<n;){let d=!0,p=!1;if(f==l.length||h<l[f].from){let _=types[h];_!=u&&(d=!1,p=_==16)}let g=!d&&u==1?[]:null,m=d?s:s+1,y=h;e:for(;;)if(f<l.length&&y==l[f].from){if(p)break e;let _=l[f];if(!d)for(let b=_.to,x=f+1;;){if(b==n)break e;if(x<l.length&&l[x].from==b)b=l[x++].to;else{if(types[b]==u)break e;break}}if(f++,g)g.push(_);else{_.from>h&&c.push(new BidiSpan(h,_.from,m));let b=_.direction==LTR!=!(m%2);computeSectionOrder(a,b?s+1:s,o,_.inner,_.from,_.to,c),h=_.to}y=_.to}else{if(y==n||(d?types[y]!=u:types[y]==u))break;y++}g?emitSpans(a,h,y,s+1,o,g,c):h<y&&c.push(new BidiSpan(h,y,m)),h=y}else for(let h=n,f=l.length;h>e;){let d=!0,p=!1;if(!f||h>l[f-1].to){let _=types[h-1];_!=u&&(d=!1,p=_==16)}let g=!d&&u==1?[]:null,m=d?s:s+1,y=h;e:for(;;)if(f&&y==l[f-1].to){if(p)break e;let _=l[--f];if(!d)for(let b=_.from,x=f;;){if(b==e)break e;if(x&&l[x-1].to==b)b=l[--x].from;else{if(types[b-1]==u)break e;break}}if(g)g.push(_);else{_.to<h&&c.push(new BidiSpan(_.to,h,m));let b=_.direction==LTR!=!(m%2);computeSectionOrder(a,b?s+1:s,o,_.inner,_.from,_.to,c),h=_.from}y=_.from}else{if(y==e||(d?types[y-1]!=u:types[y-1]==u))break;y--}g?emitSpans(a,y,h,s+1,o,g,c):y<h&&c.push(new BidiSpan(y,h,m)),h=y}}function computeSectionOrder(a,e,n,s,o,l,c){let u=e%2?2:1;computeCharTypes(a,o,l,s,u),processBracketPairs(a,o,l,s,u),processNeutrals(o,l,s,u),emitSpans(a,o,l,e,n,s,c)}function computeOrder(a,e,n){if(!a)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!n.length&&!BidiRE.test(a))return trivialOrder(a.length);if(n.length)for(;a.length>types.length;)types[types.length]=256;let s=[],o=e==LTR?0:1;return computeSectionOrder(a,o,o,n,0,a.length,s),s}function trivialOrder(a){return[new BidiSpan(0,a,0)]}let movedOver="";function moveVisually(a,e,n,s,o){var l;let c=s.head-a.from,u=BidiSpan.find(e,c,(l=s.bidiLevel)!==null&&l!==void 0?l:-1,s.assoc),h=e[u],f=h.side(o,n);if(c==f){let g=u+=o?1:-1;if(g<0||g>=e.length)return null;h=e[u=g],c=h.side(!o,n),f=h.side(o,n)}let d=findClusterBreak(a.text,c,h.forward(o,n));(d<h.from||d>h.to)&&(d=f),movedOver=a.text.slice(Math.min(c,d),Math.max(c,d));let p=u==(o?e.length-1:0)?null:e[u+(o?1:-1)];return p&&d==f&&p.level+(o?0:1)<h.level?EditorSelection.cursor(p.side(!o,n)+a.from,p.forward(o,n)?1:-1,p.level):EditorSelection.cursor(d+a.from,h.forward(o,n)?-1:1,h.level)}function autoDirection(a,e,n){for(let s=e;s<n;s++){let o=charType(a.charCodeAt(s));if(o==1)return LTR;if(o==2||o==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:a=>a.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:a=>a.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,n="nearest",s="nearest",o=5,l=5,c=!1){this.range=e,this.y=n,this.x=s,this.yMargin=o,this.xMargin=l,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(a,e)=>a.map(e)}),setEditContextFormatting=StateEffect.define();function logException(a,e,n){let s=a.facet(exceptionSink);s.length?s[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const editable=Facet.define({combine:a=>a.length?a[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,n,s,o,l){this.id=e,this.create=n,this.domEventHandlers=s,this.domEventObservers=o,this.extension=l(this)}static define(e,n){const{eventHandlers:s,eventObservers:o,provide:l,decorations:c}=n||{};return new ViewPlugin(nextPluginID++,e,s,o,u=>{let h=[viewPlugin.of(u)];return c&&h.push(decorations.of(f=>{let d=f.plugin(u);return d?c(d):Decoration.none})),l&&h.push(l(u)),h})}static fromClass(e,n){return ViewPlugin.define(s=>new e(s),n)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(s){if(logException(n.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){logException(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(s){logException(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(a,e){let n=a.state.facet(bidiIsolatedRanges);if(!n.length)return n;let s=n.map(l=>l instanceof Function?l(a):l),o=[];return RangeSet.spans(s,e.from,e.to,{point(){},span(l,c,u,h){let f=l-e.from,d=c-e.from,p=o;for(let g=u.length-1;g>=0;g--,h--){let m=u[g].spec.bidiIsolate,y;if(m==null&&(m=autoDirection(e.text,f,d)),h>0&&p.length&&(y=p[p.length-1]).to==f&&y.direction==m)y.to=d,p=y.inner;else{let _={from:f,to:d,direction:m,inner:[]};p.push(_),p=_.inner}}}}),o}const scrollMargins=Facet.define();function getScrollMargins(a){let e=0,n=0,s=0,o=0;for(let l of a.state.facet(scrollMargins)){let c=l(a);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(n=Math.max(n,c.right)),c.top!=null&&(s=Math.max(s,c.top)),c.bottom!=null&&(o=Math.max(o,c.bottom)))}return{left:e,right:n,top:s,bottom:o}}const styleModule=Facet.define();class ChangedRange{constructor(e,n,s,o){this.fromA=e,this.toA=n,this.fromB=s,this.toB=o}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,s=this;for(;n>0;n--){let o=e[n-1];if(!(o.fromA>s.toA)){if(o.toA<s.fromA)break;s=s.join(o),e.splice(n-1,1)}}return e.splice(n,0,s),e}static extendWithRanges(e,n){if(n.length==0)return e;let s=[];for(let o=0,l=0,c=0,u=0;;o++){let h=o==e.length?null:e[o],f=c-u,d=h?h.fromB:1e9;for(;l<n.length&&n[l]<d;){let p=n[l],g=n[l+1],m=Math.max(u,p),y=Math.min(d,g);if(m<=y&&new ChangedRange(m+f,y+f,m,y).addToSet(s),g>d)break;l+=2}if(!h)return s;new ChangedRange(h.fromA,h.toA,h.fromB,h.toB).addToSet(s),c=h.toA,u=h.toB}}}class ViewUpdate{constructor(e,n,s){this.view=e,this.state=n,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let l of s)this.changes=this.changes.compose(l.changes);let o=[];this.changes.iterChangedRanges((l,c,u,h)=>o.push(new ChangedRange(l,c,u,h))),this.changedRanges=o}static create(e,n,s){return new ViewUpdate(e,n,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:f,toA:d})=>d<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?o=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(o=e.state.selection.main.head));let l=o>-1?findCompositionRange(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:d}=this.hasComposition;s=new ChangedRange(f,d,e.changes.mapPos(f,-1),e.changes.mapPos(d,1)).addToSet(s.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(browser.ie||browser.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,u=this.updateDeco(),h=findChangedDeco(c,u,e.changes);return s=ChangedRange.extendWithRanges(s,h),!(this.flags&7)&&s.length==0?!1:(this.updateInner(s,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,s){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,s);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||o.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&l.push(c.dom);o.updateGaps(l)}updateChildren(e,n,s){let o=s?s.range.addToSet(e.slice()):e,l=this.childCursor(n);for(let c=o.length-1;;c--){let u=c>=0?o[c]:null;if(!u)break;let{fromA:h,toA:f,fromB:d,toB:p}=u,g,m,y,_;if(s&&s.range.fromB<p&&s.range.toB>d){let k=ContentBuilder.build(this.view.state.doc,d,s.range.fromB,this.decorations,this.dynamicDecorationMap),S=ContentBuilder.build(this.view.state.doc,s.range.toB,p,this.decorations,this.dynamicDecorationMap);m=k.breakAtStart,y=k.openStart,_=S.openEnd;let A=this.compositionView(s);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),k.content.length&&A.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),g=k.content.concat(A).concat(S.content)}else({content:g,breakAtStart:m,openStart:y,openEnd:_}=ContentBuilder.build(this.view.state.doc,d,p,this.decorations,this.dynamicDecorationMap));let{i:b,off:x}=l.findPos(f,1),{i:P,off:T}=l.findPos(h,-1);replaceRange(this,P,T,b,x,g,m,y,_)}s&&this.fixCompositionDOM(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let s of n.effects)s.is(setEditContextFormatting)&&(this.editContextFormatting=s.value)}compositionView(e){let n=new TextView(e.text.nodeValue);n.flags|=8;for(let{deco:o}of e.marks)n=new MarkView(o,[n],n.length);let s=new LineView;return s.append(n,0),s}fixCompositionDOM(e){let n=(l,c)=>{c.flags|=8|(c.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(c);let u=ContentView.get(l);u&&u!=c&&(u.dom=null),c.setDOM(l)},s=this.childPos(e.range.fromB,1),o=this.children[s.i];n(e.line,o);for(let l=e.marks.length-1;l>=-1;l--)s=o.childPos(s.off,1),o=o.children[s.i],n(l>=0?e.marks[l].node:e.text,o)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let s=this.view.root.activeElement,o=s==this.dom,l=!o&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(s&&this.dom.contains(s));if(!(o||n||l))return;let c=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(u.anchor)),f=u.empty?h:this.moveToLine(this.domAtPos(u.head));if(browser.gecko&&u.empty&&!this.hasComposition&&betweenUneditable(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=f=new DOMPos(p,0),c=!0}let d=this.view.observer.selectionRange;(c||!d.focusNode||(!isEquivalentPosition(h.node,h.offset,d.anchorNode,d.anchorOffset)||!isEquivalentPosition(f.node,f.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,u))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(d.focusNode)&&inUneditable(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=getSelection(this.view.root);if(p)if(u.empty){if(browser.gecko){let g=nextToUneditable(h.node,h.offset);if(g&&g!=3){let m=(g==1?textNodeBefore:textNodeAfter)(h.node,h.offset);m&&(h=new DOMPos(m.node,m.offset))}}p.collapse(h.node,h.offset),u.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=u.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(f.node,f.offset)}catch{}}else{let g=document.createRange();u.anchor>u.head&&([h,f]=[f,h]),g.setEnd(f.node,f.offset),g.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(g)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(h,f)),this.impreciseAnchor=h.precise?null:new DOMPos(d.anchorNode,d.anchorOffset),this.impreciseHead=f.precise?null:new DOMPos(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,s=getSelection(e.root),{anchorNode:o,anchorOffset:l}=e.observer.selectionRange;if(!s||!n.empty||!n.assoc||!s.modify)return;let c=LineView.find(this,n.head);if(!c)return;let u=c.posAtStart;if(n.head==u||n.head==u+c.length)return;let h=this.coordsAt(n.head,-1),f=this.coordsAt(n.head,1);if(!h||!f||h.bottom>f.top)return;let d=this.domAtPos(n.head+n.assoc);s.collapse(d.node,d.offset),s.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=n.from&&s.collapse(o,l)}moveToLine(e){let n=this.dom,s;if(e.node!=n)return e;for(let o=e.offset;!s&&o<n.childNodes.length;o++){let l=ContentView.get(n.childNodes[o]);l instanceof LineView&&(s=l.domAtPos(0))}for(let o=e.offset-1;!s&&o>=0;o--){let l=ContentView.get(n.childNodes[o]);l instanceof LineView&&(s=l.domAtPos(l.length))}return s?new DOMPos(s.node,s.offset,!0):e}nearest(e){for(let n=e;n;){let s=ContentView.get(n);if(s&&s.rootView==this)return s;n=n.parentNode}return null}posFromDOM(e,n){let s=this.nearest(e);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(e,n)+s.posAtStart}domAtPos(e){let{i:n,off:s}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let o=this.children[n];if(s<o.length||o instanceof LineView)break;n++,s=0}return this.children[n].domAtPos(s)}coordsAt(e,n){let s=null,o=0;for(let l=this.length,c=this.children.length-1;c>=0;c--){let u=this.children[c],h=l-u.breakAfter,f=h-u.length;if(h<e)break;if(f<=e&&(f<e||u.covers(-1))&&(h>e||u.covers(1))&&(!s||u instanceof LineView&&!(s instanceof LineView&&n>=0)))s=u,o=f;else if(s&&f==e&&h==e&&u instanceof BlockWidgetView&&Math.abs(n)<2){if(u.deco.startSide<0)break;c&&(s=null)}l=f}return s?s.coordsAt(e-o,n):null}coordsForChar(e){let{i:n,off:s}=this.childPos(e,1),o=this.children[n];if(!(o instanceof LineView))return null;for(;o.children.length;){let{i:u,off:h}=o.childPos(s,1);for(;;u++){if(u==o.children.length)return null;if((o=o.children[u]).length)break}s=h}if(!(o instanceof TextView))return null;let l=findClusterBreak(o.text,s);if(l==s)return null;let c=textRange(o.dom,s,l).getClientRects();for(let u=0;u<c.length;u++){let h=c[u];if(u==c.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let n=[],{from:s,to:o}=e,l=this.view.contentDOM.clientWidth,c=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,h=this.view.textDirection==Direction.LTR;for(let f=0,d=0;d<this.children.length;d++){let p=this.children[d],g=f+p.length;if(g>o)break;if(f>=s){let m=p.dom.getBoundingClientRect();if(n.push(m.height),c){let y=p.dom.lastChild,_=y?clientRectsFor(y):[];if(_.length){let b=_[_.length-1],x=h?b.right-m.left:m.right-b.left;x>u&&(u=x,this.minWidth=l,this.minWidthFrom=f,this.minWidthTo=g)}}}f=g+p.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let l of this.children)if(l instanceof LineView){let c=l.measureTextSize();if(c)return c}let e=document.createElement("div"),n,s,o;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=clientRectsFor(e.firstChild)[0];n=e.getBoundingClientRect().height,s=l?l.width/27:7,o=l?l.height:n,e.remove()}),{lineHeight:n,charWidth:s,textHeight:o}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ChildCursor(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let s=0,o=0;;o++){let l=o==n.viewports.length?null:n.viewports[o],c=l?l.from-1:this.length;if(c>s){let u=(n.lineBlockAt(c).bottom-n.lineBlockAt(s).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(u),block:!0,inclusive:!0,isBlockGap:!0}).range(s,c))}if(!l)break;s=l.to+1}return Decoration.set(e)}updateDeco(){let e=1,n=this.view.state.facet(decorations).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),s=!1,o=this.view.state.facet(outerDecorations).map((l,c)=>{let u=typeof l=="function";return u&&(s=!0),u?l(this.view):l});for(o.length&&(this.dynamicDecorationMap[e++]=s,n.push(RangeSet.join(o))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(scrollHandler))try{if(f(this.view,e.range,e))return!0}catch(d){logException(this.view.state,d,"scroll handler")}let{range:n}=e,s=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),o;if(!s)return;!n.empty&&(o=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(s={left:Math.min(s.left,o.left),top:Math.min(s.top,o.top),right:Math.max(s.right,o.right),bottom:Math.max(s.bottom,o.bottom)});let l=getScrollMargins(this.view),c={left:s.left-l.left,top:s.top-l.top,right:s.right+l.right,bottom:s.bottom+l.bottom},{offsetWidth:u,offsetHeight:h}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,u),-u),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Direction.LTR)}}function betweenUneditable(a){return a.node.nodeType==1&&a.node.firstChild&&(a.offset==0||a.node.childNodes[a.offset-1].contentEditable=="false")&&(a.offset==a.node.childNodes.length||a.node.childNodes[a.offset].contentEditable=="false")}function findCompositionNode(a,e){let n=a.observer.selectionRange;if(!n.focusNode)return null;let s=textNodeBefore(n.focusNode,n.focusOffset),o=textNodeAfter(n.focusNode,n.focusOffset),l=s||o;if(o&&s&&o.node!=s.node){let u=ContentView.get(o.node);if(!u||u instanceof TextView&&u.text!=o.node.nodeValue)l=o;else if(a.docView.lastCompositionAfterCursor){let h=ContentView.get(s.node);!h||h instanceof TextView&&h.text!=s.node.nodeValue||(l=o)}}if(a.docView.lastCompositionAfterCursor=l!=s,!l)return null;let c=e-l.offset;return{from:c,to:c+l.node.nodeValue.length,node:l.node}}function findCompositionRange(a,e,n){let s=findCompositionNode(a,n);if(!s)return null;let{node:o,from:l,to:c}=s,u=o.nodeValue;if(/[\n\r]/.test(u)||a.state.doc.sliceString(s.from,s.to)!=u)return null;let h=e.invertedDesc,f=new ChangedRange(h.mapPos(l),h.mapPos(c),l,c),d=[];for(let p=o.parentNode;;p=p.parentNode){let g=ContentView.get(p);if(g instanceof MarkView)d.push({node:p,deco:g.mark});else{if(g instanceof LineView||p.nodeName=="DIV"&&p.parentNode==a.contentDOM)return{range:f,text:o,marks:d,line:p};if(p!=a.contentDOM)d.push({node:p,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(p),tagName:p.tagName.toLowerCase()})});else return null}}}function nextToUneditable(a,e){return a.nodeType!=1?0:(e&&a.childNodes[e-1].contentEditable=="false"?1:0)|(e<a.childNodes.length&&a.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,n){addRange(e,n,this.changes)}comparePoint(e,n){addRange(e,n,this.changes)}boundChange(e){addRange(e,e,this.changes)}};function findChangedDeco(a,e,n){let s=new DecorationComparator$1;return RangeSet.compare(a,e,n,s),s.changes}function inUneditable(a,e){for(let n=a;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function touchesComposition(a,e){let n=!1;return e&&a.iterChangedRanges((s,o)=>{s<e.to&&o>e.from&&(n=!0)}),n}function groupAt(a,e,n=1){let s=a.charCategorizer(e),o=a.doc.lineAt(e),l=e-o.from;if(o.length==0)return EditorSelection.cursor(e);l==0?n=1:l==o.length&&(n=-1);let c=l,u=l;n<0?c=findClusterBreak(o.text,l,!1):u=findClusterBreak(o.text,l);let h=s(o.text.slice(c,u));for(;c>0;){let f=findClusterBreak(o.text,c,!1);if(s(o.text.slice(f,c))!=h)break;c=f}for(;u<o.length;){let f=findClusterBreak(o.text,u);if(s(o.text.slice(u,f))!=h)break;u=f}return EditorSelection.range(c+o.from,u+o.from)}function getdx(a,e){return e.left>a?e.left-a:Math.max(0,a-e.right)}function getdy(a,e){return e.top>a?e.top-a:Math.max(0,a-e.bottom)}function yOverlap(a,e){return a.top<e.bottom-1&&a.bottom>e.top+1}function upTop(a,e){return e<a.top?{top:e,left:a.left,right:a.right,bottom:a.bottom}:a}function upBot(a,e){return e>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:e}:a}function domPosAtCoords(a,e,n){let s,o,l,c,u=!1,h,f,d,p;for(let y=a.firstChild;y;y=y.nextSibling){let _=clientRectsFor(y);for(let b=0;b<_.length;b++){let x=_[b];o&&yOverlap(o,x)&&(x=upTop(upBot(x,o.bottom),o.top));let P=getdx(e,x),T=getdy(n,x);if(P==0&&T==0)return y.nodeType==3?domPosInText(y,e,n):domPosAtCoords(y,e,n);if(!s||c>T||c==T&&l>P){s=y,o=x,l=P,c=T;let k=T?n<x.top?-1:1:P?e<x.left?-1:1:0;u=!k||(k>0?b<_.length-1:b>0)}P==0?n>x.bottom&&(!d||d.bottom<x.bottom)?(h=y,d=x):n<x.top&&(!p||p.top>x.top)&&(f=y,p=x):d&&yOverlap(d,x)?d=upBot(d,x.bottom):p&&yOverlap(p,x)&&(p=upTop(p,x.top))}}if(d&&d.bottom>=n?(s=h,o=d):p&&p.top<=n&&(s=f,o=p),!s)return{node:a,offset:0};let g=Math.max(o.left,Math.min(o.right,e));if(s.nodeType==3)return domPosInText(s,g,n);if(u&&s.contentEditable!="false")return domPosAtCoords(s,g,n);let m=Array.prototype.indexOf.call(a.childNodes,s)+(e>=(o.left+o.right)/2?1:0);return{node:a,offset:m}}function domPosInText(a,e,n){let s=a.nodeValue.length,o=-1,l=1e9,c=0;for(let u=0;u<s;u++){let h=textRange(a,u,u+1).getClientRects();for(let f=0;f<h.length;f++){let d=h[f];if(d.top==d.bottom)continue;c||(c=e-d.left);let p=(d.top>n?d.top-n:n-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&p<l){let g=e>=(d.left+d.right)/2,m=g;if((browser.chrome||browser.gecko)&&textRange(a,u).getBoundingClientRect().left==d.right&&(m=!g),p<=0)return{node:a,offset:u+(m?1:0)};o=u+(m?1:0),l=p}}}return{node:a,offset:o>-1?o:c>0?a.nodeValue.length:0}}function posAtCoords(a,e,n,s=-1){var o,l;let c=a.contentDOM.getBoundingClientRect(),u=c.top+a.viewState.paddingTop,h,{docHeight:f}=a.viewState,{x:d,y:p}=e,g=p-u;if(g<0)return 0;if(g>f)return a.state.doc.length;for(let k=a.viewState.heightOracle.textHeight/2,S=!1;h=a.elementAtHeight(g),h.type!=BlockType.Text;)for(;g=s>0?h.bottom+k:h.top-k,!(g>=0&&g<=f);){if(S)return n?null:0;S=!0,s=-s}p=u+g;let m=h.from;if(m<a.viewport.from)return a.viewport.from==0?0:n?null:posAtCoordsImprecise(a,c,h,d,p);if(m>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:n?null:posAtCoordsImprecise(a,c,h,d,p);let y=a.dom.ownerDocument,_=a.root.elementFromPoint?a.root:y,b=_.elementFromPoint(d,p);b&&!a.contentDOM.contains(b)&&(b=null),b||(d=Math.max(c.left+1,Math.min(c.right-1,d)),b=_.elementFromPoint(d,p),b&&!a.contentDOM.contains(b)&&(b=null));let x,P=-1;if(b&&((o=a.docView.nearest(b))===null||o===void 0?void 0:o.isEditable)!=!1){if(y.caretPositionFromPoint){let k=y.caretPositionFromPoint(d,p);k&&({offsetNode:x,offset:P}=k)}else if(y.caretRangeFromPoint){let k=y.caretRangeFromPoint(d,p);k&&({startContainer:x,startOffset:P}=k,(!a.contentDOM.contains(x)||browser.safari&&isSuspiciousSafariCaretResult(x,P,d)||browser.chrome&&isSuspiciousChromeCaretResult(x,P,d))&&(x=void 0))}x&&(P=Math.min(maxOffset(x),P))}if(!x||!a.docView.dom.contains(x)){let k=LineView.find(a.docView,m);if(!k)return g>h.top+h.height/2?h.to:h.from;({node:x,offset:P}=domPosAtCoords(k.dom,d,p))}let T=a.docView.nearest(x);if(!T)return null;if(T.isWidget&&((l=T.dom)===null||l===void 0?void 0:l.nodeType)==1){let k=T.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?T.posAtStart:T.posAtEnd}else return T.localPosFromDOM(x,P)+T.posAtStart}function posAtCoordsImprecise(a,e,n,s,o){let l=Math.round((s-e.left)*a.defaultCharacterWidth);if(a.lineWrapping&&n.height>a.defaultLineHeight*1.5){let u=a.viewState.heightOracle.textHeight,h=Math.floor((o-n.top-(a.defaultLineHeight-u)*.5)/u);l+=h*a.viewState.heightOracle.lineLength}let c=a.state.sliceDoc(n.from,n.to);return n.from+findColumn(c,l,a.state.tabSize)}function isSuspiciousSafariCaretResult(a,e,n){let s;if(a.nodeType!=3||e!=(s=a.nodeValue.length))return!1;for(let o=a.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return textRange(a,s-1,s).getBoundingClientRect().left>n}function isSuspiciousChromeCaretResult(a,e,n){if(e!=0)return!1;for(let o=a;;){let l=o.parentNode;if(!l||l.nodeType!=1||l.firstChild!=o)return!1;if(l.classList.contains("cm-line"))break;o=l}let s=a.nodeType==1?a.getBoundingClientRect():textRange(a,0,Math.max(a.nodeValue.length,1)).getBoundingClientRect();return n-s.left>5}function blockAt(a,e,n){let s=a.lineBlockAt(e);if(Array.isArray(s.type)){let o;for(let l of s.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!o||l.type==BlockType.Text&&(o.type!=l.type||(n<0?l.from<e:l.to>e)))&&(o=l)}}return o||s}return s}function moveToLineBoundary(a,e,n,s){let o=blockAt(a,e.head,e.assoc||-1),l=!s||o.type!=BlockType.Text||!(a.lineWrapping||o.widgetLineBreaks)?null:a.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(l){let c=a.dom.getBoundingClientRect(),u=a.textDirectionAt(o.from),h=a.posAtCoords({x:n==(u==Direction.LTR)?c.right-1:c.left+1,y:(l.top+l.bottom)/2});if(h!=null)return EditorSelection.cursor(h,n?-1:1)}return EditorSelection.cursor(n?o.to:o.from,n?-1:1)}function moveByChar(a,e,n,s){let o=a.state.doc.lineAt(e.head),l=a.bidiSpans(o),c=a.textDirectionAt(o.from);for(let u=e,h=null;;){let f=moveVisually(o,l,c,u,n),d=movedOver;if(!f){if(o.number==(n?a.state.doc.lines:1))return u;d=`
`,o=a.state.doc.line(o.number+(n?1:-1)),l=a.bidiSpans(o),f=a.visualLineSide(o,!n)}if(h){if(!h(d))return u}else{if(!s)return f;h=s(d)}u=f}}function byGroup(a,e,n){let s=a.state.charCategorizer(e),o=s(n);return l=>{let c=s(l);return o==CharCategory.Space&&(o=c),o==c}}function moveVertically(a,e,n,s){let o=e.head,l=n?1:-1;if(o==(n?a.state.doc.length:0))return EditorSelection.cursor(o,e.assoc);let c=e.goalColumn,u,h=a.contentDOM.getBoundingClientRect(),f=a.coordsAtPos(o,e.assoc||-1),d=a.documentTop;if(f)c==null&&(c=f.left-h.left),u=l<0?f.top:f.bottom;else{let m=a.viewState.lineBlockAt(o);c==null&&(c=Math.min(h.right-h.left,a.defaultCharacterWidth*(o-m.from))),u=(l<0?m.top:m.bottom)+d}let p=h.left+c,g=s??a.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let y=u+(g+m)*l,_=posAtCoords(a,{x:p,y},!1,l);if(y<h.top||y>h.bottom||(l<0?_<o:_>o)){let b=a.docView.coordsForChar(_),x=!b||y<b.top?-1:1;return EditorSelection.cursor(_,x,void 0,c)}}}function skipAtomicRanges(a,e,n){for(;;){let s=0;for(let o of a)o.between(e-1,e+1,(l,c,u)=>{if(e>l&&e<c){let h=s||n||(e-l<c-e?-1:1);e=h<0?l:c,s=h}});if(!s)return e}}function skipAtoms(a,e,n){let s=skipAtomicRanges(a.state.facet(atomicRanges).map(o=>o(a)),n.from,e.head>n.from?-1:1);return s==n.from?n:EditorSelection.cursor(s,s<n.from?1:-1)}const LineBreakPlaceholder="￿";class DOMReader{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,n){if(!e)return this;let s=e.parentNode;for(let o=e;;){this.findPointBefore(s,o);let l=this.text.length;this.readNode(o);let c=o.nextSibling;if(c==n)break;let u=ContentView.get(o),h=ContentView.get(c);(u&&h?u.breakAfter:(u?u.breakAfter:isBlockElement(o))||isBlockElement(c)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>l)&&this.lineBreak(),o=c}return this.findPointBefore(s,n),this}readTextNode(e){let n=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,n.length));for(let s=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,c=1,u;if(this.lineSeparator?(l=n.indexOf(this.lineSeparator,s),c=this.lineSeparator.length):(u=o.exec(n))&&(l=u.index,c=u[0].length),this.append(n.slice(s,l<0?n.length:l)),l<0)break;if(this.lineBreak(),c>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=c-1);s=l+c}}readNode(e){if(e.cmIgnore)return;let n=ContentView.get(e),s=n&&n.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let o=s.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==n&&(s.pos=this.text.length)}findPointInside(e,n){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(isAtEnd(e,s.node,s.offset)?n:0))}}function isAtEnd(a,e,n){for(;;){if(!e||n<maxOffset(e))return!1;if(e==a)return!0;n=domIndex(e)+1,e=e.parentNode}}class DOMPoint{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class DOMChange{constructor(e,n,s,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:l,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,s,0))){let u=l||c?[]:selectionPoints(e),h=new DOMReader(u,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=selectionFromPoints(u,this.bounds.from)}else{let u=e.observer.selectionRange,h=l&&l.node==u.focusNode&&l.offset==u.focusOffset||!contains(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),f=c&&c.node==u.anchorNode&&c.offset==u.anchorOffset||!contains(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset),d=e.viewport;if((browser.ios||browser.chrome)&&e.state.selection.main.empty&&h!=f&&(d.from>0||d.to<e.state.doc.length)){let p=Math.min(h,f),g=Math.max(h,f),m=d.from-p,y=d.to-g;(m==0||m==1||p==0)&&(y==0||y==-1||g==e.state.doc.length)&&(h=0,f=e.state.doc.length)}this.newSel=EditorSelection.single(f,h)}}}function applyDOMChange(a,e){let n,{newSel:s}=e,o=a.state.selection.main,l=a.inputState.lastKeyTime>Date.now()-100?a.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:u}=e.bounds,h=o.from,f=null;(l===8||browser.android&&e.text.length<u-c)&&(h=o.to,f="end");let d=findDiff(a.state.doc.sliceString(c,u,LineBreakPlaceholder),e.text,h-c,f);d&&(browser.chrome&&l==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&d.toB--,n={from:c+d.from,to:c+d.toA,insert:Text$1.of(e.text.slice(d.from,d.toB).split(LineBreakPlaceholder))})}else s&&(!a.hasFocus&&a.state.facet(editable)||s.main.eq(o))&&(s=null);if(!n&&!s)return!1;if(!n&&e.typeOver&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:a.state.doc.slice(o.from,o.to)}:(browser.mac||browser.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&a.contentDOM.getAttribute("autocorrect")=="off"?(s&&n.insert.length==2&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),n={from:n.from,to:n.to,insert:Text$1.of([n.insert.toString().replace("."," ")])}):n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:a.state.doc.slice(o.from,n.from).append(n.insert).append(a.state.doc.slice(n.to,o.to))}:browser.chrome&&n&&n.from==n.to&&n.from==o.head&&n.insert.toString()==`
 `&&a.lineWrapping&&(s&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),n={from:o.from,to:o.to,insert:Text$1.of([" "])}),n)return applyDOMChangeInner(a,n,s,l);if(s&&!s.main.eq(o)){let c=!1,u="select";return a.inputState.lastSelectionTime>Date.now()-50&&(a.inputState.lastSelectionOrigin=="select"&&(c=!0),u=a.inputState.lastSelectionOrigin),a.dispatch({selection:s,scrollIntoView:c,userEvent:u}),!0}else return!1}function applyDOMChangeInner(a,e,n,s=-1){if(browser.ios&&a.inputState.flushIOSKey(e))return!0;let o=a.state.selection.main;if(browser.android&&(e.to==o.to&&(e.from==o.from||e.from==o.from-1&&a.state.sliceDoc(e.from,o.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dispatchKey(a.contentDOM,"Enter",13)||(e.from==o.from-1&&e.to==o.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>o.head)&&dispatchKey(a.contentDOM,"Backspace",8)||e.from==o.from&&e.to==o.to+1&&e.insert.length==0&&dispatchKey(a.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();a.inputState.composing>=0&&a.inputState.composing++;let c,u=()=>c||(c=applyDefaultInsert(a,e,n));return a.state.facet(inputHandler$1).some(h=>h(a,e.from,e.to,l,u))||a.dispatch(u()),!0}function applyDefaultInsert(a,e,n){let s,o=a.state,l=o.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&a.inputState.composing<0){let u=l.from<e.from?o.sliceDoc(l.from,e.from):"",h=l.to>e.to?o.sliceDoc(e.to,l.to):"";s=o.replaceSelection(a.state.toText(u+e.insert.sliceString(0,void 0,a.state.lineBreak)+h))}else{let u=o.changes(e),h=n&&n.main.to<=u.newLength?n.main:void 0;if(o.selection.ranges.length>1&&a.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let f=a.state.sliceDoc(e.from,e.to),d,p=n&&findCompositionNode(a,n.main.head);if(p){let y=e.insert.length-(e.to-e.from);d={from:p.from,to:p.to-y}}else d=a.state.doc.lineAt(l.head);let g=l.to-e.to,m=l.to-l.from;s=o.changeByRange(y=>{if(y.from==l.from&&y.to==l.to)return{changes:u,range:h||y.map(u)};let _=y.to-g,b=_-f.length;if(y.to-y.from!=m||a.state.sliceDoc(b,_)!=f||y.to>=d.from&&y.from<=d.to)return{range:y};let x=o.changes({from:b,to:_,insert:e.insert}),P=y.to-l.to;return{changes:x,range:h?EditorSelection.range(Math.max(0,h.anchor+P),Math.max(0,h.head+P)):y.map(x)}})}else s={changes:u,selection:h&&o.selection.replaceRange(h)}}let c="input.type";return(a.composing||a.inputState.compositionPendingChange&&a.inputState.compositionEndedAt>Date.now()-50)&&(a.inputState.compositionPendingChange=!1,c+=".compose",a.inputState.compositionFirstChange&&(c+=".start",a.inputState.compositionFirstChange=!1)),o.update(s,{userEvent:c,scrollIntoView:!0})}function findDiff(a,e,n,s){let o=Math.min(a.length,e.length),l=0;for(;l<o&&a.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==o&&a.length==e.length)return null;let c=a.length,u=e.length;for(;c>0&&u>0&&a.charCodeAt(c-1)==e.charCodeAt(u-1);)c--,u--;if(s=="end"){let h=Math.max(0,l-Math.min(c,u));n-=c+h-l}if(c<l&&a.length<e.length){let h=n<=l&&n>=c?l-n:0;l-=h,u=l+(u-c),c=l}else if(u<l){let h=n<=l&&n>=u?l-n:0;l-=h,c=l+(c-u),u=l}return{from:l,toA:c,toB:u}}function selectionPoints(a){let e=[];if(a.root.activeElement!=a.contentDOM)return e;let{anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l}=a.observer.selectionRange;return n&&(e.push(new DOMPoint(n,s)),(o!=n||l!=s)&&e.push(new DOMPoint(o,l))),e}function selectionFromPoints(a,e){if(a.length==0)return null;let n=a[0].pos,s=a.length==2?a[1].pos:n;return n>-1&&s>-1?EditorSelection.single(n+e,s+e):null}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let s=this.handlers[e];if(s){for(let o of s.observers)o(this.view,n);for(let o of s.handlers){if(n.defaultPrevented)break;if(o(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=computeHandlers(e),s=this.handlers,o=this.view.contentDOM;for(let l in n)if(l!="scroll"){let c=!n[l].handlers.length,u=s[l];u&&c!=!u.handlers.length&&(o.removeEventListener(l,this.handleEvent),u=null),u||o.addEventListener(l,this.handleEvent,{passive:c})}for(let l in s)l!="scroll"&&!n[l]&&o.removeEventListener(l,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=PendingKeys.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(a,e){return(n,s)=>{try{return e.call(a,s,n)}catch(o){logException(n.state,o)}}}function computeHandlers(a){let e=Object.create(null);function n(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of a){let o=s.spec;if(o&&o.domEventHandlers)for(let l in o.domEventHandlers){let c=o.domEventHandlers[l];c&&n(l).handlers.push(bindHandler(s.value,c))}if(o&&o.domEventObservers)for(let l in o.domEventObservers){let c=o.domEventObservers[l];c&&n(l).observers.push(bindHandler(s.value,c))}}for(let s in handlers)n(s).handlers.push(handlers[s]);for(let s in observers)n(s).observers.push(observers[s]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(a){return Math.max(0,a)*.7+8}function dist(a,e){return Math.max(Math.abs(a.clientX-e.clientX),Math.abs(a.clientY-e.clientY))}class MouseSelection{constructor(e,n,s,o){this.view=e,this.startEvent=n,this.style=s,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,n),this.dragging=isInPrimarySelection(e,n)&&getClickType(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,s=0,o=0,l=0,c=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:u}=this.scrollParents.y.getBoundingClientRect());let h=getScrollMargins(this.view);e.clientX-h.left<=o+dragScrollMargin?n=-dragScrollSpeed(o-e.clientX):e.clientX+h.right>=c-dragScrollMargin&&(n=dragScrollSpeed(e.clientX-c)),e.clientY-h.top<=l+dragScrollMargin?s=-dragScrollSpeed(l-e.clientY):e.clientY+h.bottom>=u-dragScrollMargin&&(s=dragScrollSpeed(e.clientY-u)),this.setScrollSpeed(n,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let s=0;s<e.ranges.length;s++){let o=e.ranges[s],l=null;if(o.empty){let c=skipAtomicRanges(this.atoms,o.from,0);c!=o.from&&(l=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,o.from,-1),u=skipAtomicRanges(this.atoms,o.to,1);(c!=o.from||u!=o.to)&&(l=EditorSelection.range(o.from==o.anchor?c:u,o.from==o.head?c:u))}l&&(n||(n=e.ranges.slice()),n[s]=l)}return n?EditorSelection.create(n,e.mainIndex):e}select(e){let{view:n}=this,s=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(a,e){let n=a.state.facet(clickAddsSelectionRange);return n.length?n[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(a,e){let n=a.state.facet(dragMovesSelection$1);return n.length?n[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(a,e){let{main:n}=a.state.selection;if(n.empty)return!1;let s=getSelection(a.root);if(!s||s.rangeCount==0)return!0;let o=s.getRangeAt(0).getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(a,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,s;n!=a.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(s=ContentView.get(n))&&s.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(a){let e=a.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{a.focus(),n.remove(),doPaste(a,n.value)},50)}function textFilter(a,e,n){for(let s of a.facet(e))n=s(n,a);return n}function doPaste(a,e){e=textFilter(a.state,clipboardInputFilter,e);let{state:n}=a,s,o=1,l=n.toText(e),c=l.lines==n.selection.ranges.length;if(lastLinewiseCopy!=null&&n.selection.ranges.every(h=>h.empty)&&lastLinewiseCopy==l.toString()){let h=-1;s=n.changeByRange(f=>{let d=n.doc.lineAt(f.from);if(d.from==h)return{range:f};h=d.from;let p=n.toText((c?l.line(o++).text:e)+n.lineBreak);return{changes:{from:d.from,insert:p},range:EditorSelection.cursor(f.from+p.length)}})}else c?s=n.changeByRange(h=>{let f=l.line(o++);return{changes:{from:h.from,to:h.to,insert:f.text},range:EditorSelection.cursor(h.from+f.length)}}):s=n.replaceSelection(l);a.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=a=>{a.inputState.lastScrollTop=a.scrollDOM.scrollTop,a.inputState.lastScrollLeft=a.scrollDOM.scrollLeft};handlers.keydown=(a,e)=>(a.inputState.setSelectionOrigin("select"),e.keyCode==27&&a.inputState.tabFocusMode!=0&&(a.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(a,e)=>{a.inputState.lastTouchTime=Date.now(),a.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=a=>{a.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(a,e)=>{if(a.observer.flush(),a.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let s of a.state.facet(mouseSelectionStyle))if(n=s(a,e),n)break;if(!n&&e.button==0&&(n=basicMouseSelection(a,e)),n){let s=!a.hasFocus;a.inputState.startMouseSelection(new MouseSelection(a,e,n,s)),s&&a.observer.ignore(()=>{focusPreventScroll(a.contentDOM);let l=a.root.activeElement;l&&!l.contains(a.contentDOM)&&l.blur()});let o=a.inputState.mouseSelection;if(o)return o.start(e),o.dragging===!1}return!1};function rangeForClick(a,e,n,s){if(s==1)return EditorSelection.cursor(e,n);if(s==2)return groupAt(a.state,e,n);{let o=LineView.find(a.docView,e),l=a.state.doc.lineAt(o?o.posAtEnd:e),c=o?o.posAtStart:l.from,u=o?o.posAtEnd:l.to;return u<a.state.doc.length&&u==l.to&&u++,EditorSelection.range(c,u)}}let inside=(a,e,n)=>e>=n.top&&e<=n.bottom&&a>=n.left&&a<=n.right;function findPositionSide(a,e,n,s){let o=LineView.find(a.docView,e);if(!o)return 1;let l=e-o.posAtStart;if(l==0)return 1;if(l==o.length)return-1;let c=o.coordsAt(l,-1);if(c&&inside(n,s,c))return-1;let u=o.coordsAt(l,1);return u&&inside(n,s,u)?1:c&&c.bottom>=s?-1:1}function queryPos(a,e){let n=a.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:findPositionSide(a,n,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(a){if(!BadMouseDetail)return a.detail;let e=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=a,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||n>Date.now()-400&&Math.abs(e.clientX-a.clientX)<2&&Math.abs(e.clientY-a.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(a,e){let n=queryPos(a,e),s=getClickType(e),o=a.state.selection;return{update(l){l.docChanged&&(n.pos=l.changes.mapPos(n.pos),o=o.map(l.changes))},get(l,c,u){let h=queryPos(a,l),f,d=rangeForClick(a,h.pos,h.bias,s);if(n.pos!=h.pos&&!c){let p=rangeForClick(a,n.pos,n.bias,s),g=Math.min(p.from,d.from),m=Math.max(p.to,d.to);d=g<d.from?EditorSelection.range(g,m):EditorSelection.range(m,g)}return c?o.replaceRange(o.main.extend(d.from,d.to)):u&&s==1&&o.ranges.length>1&&(f=removeRangeAround(o,h.pos))?f:u?o.addRange(d):EditorSelection.create([d])}}}function removeRangeAround(a,e){for(let n=0;n<a.ranges.length;n++){let{from:s,to:o}=a.ranges[n];if(s<=e&&o>=e)return EditorSelection.create(a.ranges.slice(0,n).concat(a.ranges.slice(n+1)),a.mainIndex==n?0:a.mainIndex-(a.mainIndex>n?1:0))}return null}handlers.dragstart=(a,e)=>{let{selection:{main:n}}=a.state;if(e.target.draggable){let o=a.docView.nearest(e.target);if(o&&o.isWidget){let l=o.posAtStart,c=l+o.length;(l>=n.to||c<=n.from)&&(n=EditorSelection.range(l,c))}}let{inputState:s}=a;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",textFilter(a.state,clipboardOutputFilter,a.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=a=>(a.inputState.draggedContent=null,!1);function dropText(a,e,n,s){if(n=textFilter(a.state,clipboardInputFilter,n),!n)return;let o=a.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=a.inputState,c=s&&l&&dragMovesSelection(a,e)?{from:l.from,to:l.to}:null,u={from:o,insert:n},h=a.state.changes(c?[c,u]:u);a.focus(),a.dispatch({changes:h,selection:{anchor:h.mapPos(o,-1),head:h.mapPos(o,1)},userEvent:c?"move.drop":"input.drop"}),a.inputState.draggedContent=null}handlers.drop=(a,e)=>{if(!e.dataTransfer)return!1;if(a.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let s=Array(n.length),o=0,l=()=>{++o==n.length&&dropText(a,e,s.filter(c=>c!=null).join(a.state.lineBreak),!1)};for(let c=0;c<n.length;c++){let u=new FileReader;u.onerror=l,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(s[c]=u.result),l()},u.readAsText(n[c])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return dropText(a,e,s,!0),!0}return!1};handlers.paste=(a,e)=>{if(a.state.readOnly)return!0;a.observer.flush();let n=brokenClipboardAPI?null:e.clipboardData;return n?(doPaste(a,n.getData("text/plain")||n.getData("text/uri-list")),!0):(capturePaste(a),!1)};function captureCopy(a,e){let n=a.dom.parentNode;if(!n)return;let s=n.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),a.focus()},50)}function copiedRange(a){let e=[],n=[],s=!1;for(let o of a.selection.ranges)o.empty||(e.push(a.sliceDoc(o.from,o.to)),n.push(o));if(!e.length){let o=-1;for(let{from:l}of a.selection.ranges){let c=a.doc.lineAt(l);c.number>o&&(e.push(c.text),n.push({from:c.from,to:Math.min(a.doc.length,c.to+1)})),o=c.number}s=!0}return{text:textFilter(a,clipboardOutputFilter,e.join(a.lineBreak)),ranges:n,linewise:s}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(a,e)=>{let{text:n,ranges:s,linewise:o}=copiedRange(a.state);if(!n&&!o)return!1;lastLinewiseCopy=o?n:null,e.type=="cut"&&!a.state.readOnly&&a.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let l=brokenClipboardAPI?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",n),!0):(captureCopy(a,n),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(a,e){let n=[];for(let s of a.facet(focusChangeEffect)){let o=s(a,e);o&&n.push(o)}return n.length?a.update({effects:n,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(a){setTimeout(()=>{let e=a.hasFocus;if(e!=a.inputState.notifiedFocused){let n=focusChangeTransaction(a.state,e);n?a.dispatch(n):a.update([])}},10)}observers.focus=a=>{a.inputState.lastFocusTime=Date.now(),!a.scrollDOM.scrollTop&&(a.inputState.lastScrollTop||a.inputState.lastScrollLeft)&&(a.scrollDOM.scrollTop=a.inputState.lastScrollTop,a.scrollDOM.scrollLeft=a.inputState.lastScrollLeft),updateForFocusChange(a)};observers.blur=a=>{a.observer.clearSelectionRange(),updateForFocusChange(a)};observers.compositionstart=observers.compositionupdate=a=>{a.observer.editContext||(a.inputState.compositionFirstChange==null&&(a.inputState.compositionFirstChange=!0),a.inputState.composing<0&&(a.inputState.composing=0))};observers.compositionend=a=>{a.observer.editContext||(a.inputState.composing=-1,a.inputState.compositionEndedAt=Date.now(),a.inputState.compositionPendingKey=!0,a.inputState.compositionPendingChange=a.observer.pendingRecords().length>0,a.inputState.compositionFirstChange=null,browser.chrome&&browser.android?a.observer.flushSoon():a.inputState.compositionPendingChange?Promise.resolve().then(()=>a.observer.flush()):setTimeout(()=>{a.inputState.composing<0&&a.docView.hasComposition&&a.update([])},50))};observers.contextmenu=a=>{a.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(a,e)=>{var n,s;if(e.inputType=="insertReplacementText"&&a.observer.editContext){let l=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),c=e.getTargetRanges();if(l&&c.length){let u=c[0],h=a.posAtDOM(u.startContainer,u.startOffset),f=a.posAtDOM(u.endContainer,u.endOffset);return applyDOMChangeInner(a,{from:h,to:f,insert:a.state.toText(l)},null),!0}}let o;if(browser.chrome&&browser.android&&(o=PendingKeys.find(l=>l.inputType==e.inputType))&&(a.observer.delayAndroidKey(o.key,o.keyCode),o.key=="Backspace"||o.key=="Delete")){let l=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>l+10&&a.hasFocus&&(a.contentDOM.blur(),a.focus())},100)}return browser.ios&&e.inputType=="deleteContentForward"&&a.observer.flushSoon(),browser.safari&&e.inputType=="insertText"&&a.inputState.composing>=0&&setTimeout(()=>observers.compositionend(a,e),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(a){appliedFirefoxHack.has(a)||(appliedFirefoxHack.add(a),a.addEventListener("copy",()=>{}),a.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text$1.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let s=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((n-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let s=0;s<e.length;s++){let o=e[s];o<0?s++:this.heightSamples[Math.floor(o*10)]||(n=!0,this.heightSamples[Math.floor(o*10)]=!0)}return n}refresh(e,n,s,o,l,c){let u=wrappingWhiteSpace.indexOf(e)>-1,h=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=n,this.charWidth=s,this.textHeight=o,this.lineLength=l,h){this.heightSamples={};for(let f=0;f<c.length;f++){let d=c[f];d<0?f++:this.heightSamples[Math.floor(d*10)]=!0}}return h}}class MeasuredHeights{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,n,s,o,l){this.from=e,this.length=n,this.top=s,this.height=o,this._content=l}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var QueryType$1=function(a){return a[a.ByPos=0]="ByPos",a[a.ByHeight=1]="ByHeight",a[a.ByPosNoHeight=2]="ByPosNoHeight",a}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,n,s=2){this.length=e,this.height=n,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,n,s){return HeightMap.of(s)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,s,o){let l=this,c=s.doc;for(let u=o.length-1;u>=0;u--){let{fromA:h,toA:f,fromB:d,toB:p}=o[u],g=l.lineAt(h,QueryType$1.ByPosNoHeight,s.setDoc(n),0,0),m=g.to>=f?g:l.lineAt(f,QueryType$1.ByPosNoHeight,s,0,0);for(p+=m.to-f,f=m.to;u>0&&g.from<=o[u-1].toA;)h=o[u-1].fromA,d=o[u-1].fromB,u--,h<g.from&&(g=l.lineAt(h,QueryType$1.ByPosNoHeight,s,0,0));d+=g.from-h,h=g.from;let y=NodeBuilder.build(s.setDoc(c),e,d,p);l=replace(l,l.replace(h,f,y))}return l.updateHeight(s,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let n=0,s=e.length,o=0,l=0;for(;;)if(n==s)if(o>l*2){let u=e[n-1];u.break?e.splice(--n,1,u.left,null,u.right):e.splice(--n,1,u.left,u.right),s+=1+u.break,o-=u.size}else if(l>o*2){let u=e[s];u.break?e.splice(s,1,u.left,null,u.right):e.splice(s,1,u.left,u.right),s+=2+u.break,l-=u.size}else break;else if(o<l){let u=e[n++];u&&(o+=u.size)}else{let u=e[--s];u&&(l+=u.size)}let c=0;return e[n-1]==null?(c=1,n--):e[n]==null&&(c=1,s++),new HeightMapBranch(HeightMap.of(e.slice(0,n)),c,HeightMap.of(e.slice(s)))}}function replace(a,e){return a==e?a:(a.constructor!=e.constructor&&(heightChangeFlag=!0),e)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,n,s){super(e,n),this.deco=s}blockAt(e,n,s,o){return new BlockInfo(o,this.length,s,this.height,this.deco||0)}lineAt(e,n,s,o,l){return this.blockAt(0,s,o,l)}forEachLine(e,n,s,o,l,c){e<=l+this.length&&n>=l&&c(this.blockAt(0,s,o,l))}updateHeight(e,n=0,s=!1,o){return o&&o.from<=n&&o.more&&this.setHeight(o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,s,o){return new BlockInfo(o,this.length,s,this.height,this.breaks)}replace(e,n,s){let o=s[0];return s.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(s)}updateHeight(e,n=0,s=!1,o){return o&&o.from<=n&&o.more?this.setHeight(o.heights[o.index++]):(s||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,n){let s=e.doc.lineAt(n).number,o=e.doc.lineAt(n+this.length).number,l=o-s+1,c,u=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);c=h/l,this.length>l+1&&(u=(this.height-h)/(this.length-l-1))}else c=this.height/l;return{firstLine:s,lastLine:o,perLine:c,perChar:u}}blockAt(e,n,s,o){let{firstLine:l,lastLine:c,perLine:u,perChar:h}=this.heightMetrics(n,o);if(n.lineWrapping){let f=o+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),d=n.doc.lineAt(f),p=u+d.length*h,g=Math.max(s,e-p/2);return new BlockInfo(d.from,d.length,g,p,0)}else{let f=Math.max(0,Math.min(c-l,Math.floor((e-s)/u))),{from:d,length:p}=n.doc.line(l+f);return new BlockInfo(d,p,s+u*f,u,0)}}lineAt(e,n,s,o,l){if(n==QueryType$1.ByHeight)return this.blockAt(e,s,o,l);if(n==QueryType$1.ByPosNoHeight){let{from:m,to:y}=s.doc.lineAt(e);return new BlockInfo(m,y-m,0,0,0)}let{firstLine:c,perLine:u,perChar:h}=this.heightMetrics(s,l),f=s.doc.lineAt(e),d=u+f.length*h,p=f.number-c,g=o+u*p+h*(f.from-l-p);return new BlockInfo(f.from,f.length,Math.max(o,Math.min(g,o+this.height-d)),d,0)}forEachLine(e,n,s,o,l,c){e=Math.max(e,l),n=Math.min(n,l+this.length);let{firstLine:u,perLine:h,perChar:f}=this.heightMetrics(s,l);for(let d=e,p=o;d<=n;){let g=s.doc.lineAt(d);if(d==e){let y=g.number-u;p+=h*y+f*(e-l-y)}let m=h+f*g.length;c(new BlockInfo(g.from,g.length,p,m,0)),p+=m,d=g.to+1}}replace(e,n,s){let o=this.length-n;if(o>0){let l=s[s.length-1];l instanceof HeightMapGap?s[s.length-1]=new HeightMapGap(l.length+o):s.push(null,new HeightMapGap(o-1))}if(e>0){let l=s[0];l instanceof HeightMapGap?s[0]=new HeightMapGap(e+l.length):s.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(s)}decomposeLeft(e,n){n.push(new HeightMapGap(e-1),null)}decomposeRight(e,n){n.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,n=0,s=!1,o){let l=n+this.length;if(o&&o.from<=n+this.length&&o.more){let c=[],u=Math.max(n,o.from),h=-1;for(o.from>n&&c.push(new HeightMapGap(o.from-n-1).updateHeight(e,n));u<=l&&o.more;){let d=e.doc.lineAt(u).length;c.length&&c.push(null);let p=o.heights[o.index++];h==-1?h=p:Math.abs(p-h)>=Epsilon&&(h=-2);let g=new HeightMapText(d,p);g.outdated=!1,c.push(g),u+=d+1}u<=l&&c.push(null,new HeightMapGap(l-u).updateHeight(e,u));let f=HeightMap.of(c);return(h<0||Math.abs(f.height-this.height)>=Epsilon||Math.abs(h-this.heightMetrics(e,n).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,f)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,n,s){super(e.length+n+s.length,e.height+s.height,n|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,n,s,o){let l=s+this.left.height;return e<l?this.left.blockAt(e,n,s,o):this.right.blockAt(e,n,l,o+this.left.length+this.break)}lineAt(e,n,s,o,l){let c=o+this.left.height,u=l+this.left.length+this.break,h=n==QueryType$1.ByHeight?e<c:e<u,f=h?this.left.lineAt(e,n,s,o,l):this.right.lineAt(e,n,s,c,u);if(this.break||(h?f.to<u:f.from>u))return f;let d=n==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return h?f.join(this.right.lineAt(u,d,s,c,u)):this.left.lineAt(u,d,s,o,l).join(f)}forEachLine(e,n,s,o,l,c){let u=o+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,n,s,o,l,c),n>=h&&this.right.forEachLine(e,n,s,u,h,c);else{let f=this.lineAt(h,QueryType$1.ByPos,s,o,l);e<f.from&&this.left.forEachLine(e,f.from-1,s,o,l,c),f.to>=e&&f.from<=n&&c(f),n>f.to&&this.right.forEachLine(f.to+1,n,s,u,h,c)}}replace(e,n,s){let o=this.left.length+this.break;if(n<o)return this.balanced(this.left.replace(e,n,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,n-o,s));let l=[];e>0&&this.decomposeLeft(e,l);let c=l.length;for(let u of s)l.push(u);if(e>0&&mergeGaps(l,c-1),n<this.length){let u=l.length;this.decomposeRight(n,l),mergeGaps(l,u)}return HeightMap.of(l)}decomposeLeft(e,n){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(s++,e>=s&&n.push(null)),e>s&&this.right.decomposeLeft(e-s,n)}decomposeRight(e,n){let s=this.left.length,o=s+this.break;if(e>=o)return this.right.decomposeRight(e-o,n);e<s&&this.left.decomposeRight(e,n),this.break&&e<o&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?HeightMap.of(this.break?[e,null,n]:[e,n]):(this.left=replace(this.left,e),this.right=replace(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,s=!1,o){let{left:l,right:c}=this,u=n+l.length+this.break,h=null;return o&&o.from<=n+l.length&&o.more?h=l=l.updateHeight(e,n,s,o):l.updateHeight(e,n,s),o&&o.from<=u+c.length&&o.more?h=c=c.updateHeight(e,u,s,o):c.updateHeight(e,u,s),h?this.balanced(l,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(a,e){let n,s;a[e]==null&&(n=a[e-1])instanceof HeightMapGap&&(s=a[e+1])instanceof HeightMapGap&&a.splice(e-1,3,new HeightMapGap(n.length+1+s.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let s=Math.min(n,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(s-this.pos,-1)),this.writtenTo=s,n>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,s){if(e<n||s.heightRelevant){let o=s.widget?s.widget.estimatedHeight:0,l=s.widget?s.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let c=n-e;s.block?this.addBlock(new HeightMapBlock(c,o,s)):(c||l||o>=relevantWidgetHeight)&&this.addLineDeco(o,l,c)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let s=new HeightMapGap(n-e);return this.oracle.doc.lineAt(e).to==n&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let n=new HeightMapText(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,s){let o=this.ensureLine();o.length+=s,o.collapsed+=s,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=n,this.writtenTo=this.pos=this.pos+s}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,s),s+=o?o.length:1;return this.nodes}static build(e,n,s,o){let l=new NodeBuilder(s,e);return RangeSet.spans(n,s,o,l,0),l.finish(s)}}function heightRelevantDecoChanges(a,e,n){let s=new DecorationComparator;return RangeSet.compare(a,e,n,s,0),s.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,s,o){(e<n||s&&s.heightRelevant||o&&o.heightRelevant)&&addRange(e,n,this.changes,5)}}function visiblePixelRange(a,e){let n=a.getBoundingClientRect(),s=a.ownerDocument,o=s.defaultView||window,l=Math.max(0,n.left),c=Math.min(o.innerWidth,n.right),u=Math.max(0,n.top),h=Math.min(o.innerHeight,n.bottom);for(let f=a.parentNode;f&&f!=s.body;)if(f.nodeType==1){let d=f,p=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&p.overflow!="visible"){let g=d.getBoundingClientRect();l=Math.max(l,g.left),c=Math.min(c,g.right),u=Math.max(u,g.top),h=Math.min(f==a.parentNode?o.innerHeight:h,g.bottom)}f=p.position=="absolute"||p.position=="fixed"?d.offsetParent:d.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:l-n.left,right:Math.max(l,c)-n.left,top:u-(n.top+e),bottom:Math.max(u,h)-(n.top+e)}}function inWindow(a){let e=a.getBoundingClientRect(),n=a.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function fullPixelRange(a,e){let n=a.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class LineGap{constructor(e,n,s,o){this.from=e,this.to=n,this.size=s,this.displaySize=o}static same(e,n){if(e.length!=n.length)return!1;for(let s=0;s<e.length;s++){let o=e[s],l=n[s];if(o.from!=l.from||o.to!=l.to||o.size!=l.size)return!1}return!0}draw(e,n){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(contentAttributes).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(n),this.stateDeco=e.facet(decorations).filter(s=>typeof s!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let s=0;s<=1;s++){let o=s?n.head:n.anchor;if(!e.some(({from:l,to:c})=>o>=l&&o<=c)){let{from:l,to:c}=this.lineBlockAt(o);e.push(new Viewport(l,c))}}return this.viewports=e.sort((s,o)=>s.from-o.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,n=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(d=>typeof d!="function");let o=e.changedRanges,l=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(s,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=c||heightChangeFlag)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=c);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<h.from||n.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,n));let f=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,s=window.getComputedStyle(n),o=this.heightOracle,l=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(l),u=n.getBoundingClientRect(),h=c||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let f=0,d=0;if(u.width&&u.height){let{scaleX:k,scaleY:S}=getScale(n,u);(k>.005&&Math.abs(this.scaleX-k)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=k,this.scaleY=S,f|=16,c=h=!0)}let p=(parseInt(s.paddingTop)||0)*this.scaleY,g=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let y=(this.printing?fullPixelRange:visiblePixelRange)(n,this.paddingTop),_=y.top-this.pixelViewport.top,b=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let x=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(x!=this.inView&&(this.inView=x,x&&(h=!0)),!this.inView&&!this.scrollTarget&&!inWindow(e.dom))return 0;let P=u.width;if((this.contentDOMWidth!=P||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),h){let k=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(k)&&(c=!0),c||o.lineWrapping&&Math.abs(P-this.contentDOMWidth)>o.charWidth){let{lineHeight:S,charWidth:A,textHeight:w}=e.docView.measureTextSize();c=S>0&&o.refresh(l,S,A,w,P/A,k),c&&(e.docView.minWidth=0,f|=16)}_>0&&b>0?d=Math.max(_,b):_<0&&b<0&&(d=Math.min(_,b)),clearHeightChangeFlag();for(let S of this.viewports){let A=S.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(S);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,c,new MeasuredHeights(S.from,A))}heightChangeFlag&&(f|=2)}let T=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),f|=this.updateForViewport()),(f&2||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,l=this.heightOracle,{visibleTop:c,visibleBottom:u}=this,h=new Viewport(o.lineAt(c-s*1e3,QueryType$1.ByHeight,l,0,0).from,o.lineAt(u+(1-s)*1e3,QueryType$1.ByHeight,l,0,0).to);if(n){let{head:f}=n.range;if(f<h.from||f>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=o.lineAt(f,QueryType$1.ByPos,l,0,0),g;n.y=="center"?g=(p.top+p.bottom)/2-d/2:n.y=="start"||n.y=="nearest"&&f<h.from?g=p.top:g=p.bottom-d,h=new Viewport(o.lineAt(g-1e3/2,QueryType$1.ByHeight,l,0,0).from,o.lineAt(g+d+1e3/2,QueryType$1.ByHeight,l,0,0).to)}}return h}mapViewport(e,n){let s=n.mapPos(e.from,-1),o=n.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(s,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},s=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:u}=this;return(e==0||o<=c-Math.max(10,Math.min(-s,250)))&&(n==this.state.doc.length||l>=u+Math.max(10,Math.min(s,250)))&&o>c-2*1e3&&l<u+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let s=[];for(let o of e)n.touchesRange(o.from,o.to)||s.push(new LineGap(n.mapPos(o.from),n.mapPos(o.to),o.size,o.displaySize));return s}ensureLineGaps(e,n){let s=this.heightOracle.lineWrapping,o=s?1e4:2e3,l=o>>1,c=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!s)return[];let u=[],h=(d,p,g,m)=>{if(p-d<l)return;let y=this.state.selection.main,_=[y.from];y.empty||_.push(y.to);for(let x of _)if(x>d&&x<p){h(d,x-10,g,m),h(x+10,p,g,m);return}let b=find(e,x=>x.from>=g.from&&x.to<=g.to&&Math.abs(x.from-d)<l&&Math.abs(x.to-p)<l&&!_.some(P=>x.from<P&&x.to>P));if(!b){if(p<g.to&&n&&s&&n.visibleRanges.some(T=>T.from<=p&&T.to>=p)){let T=n.moveToLineBoundary(EditorSelection.cursor(p),!1,!0).head;T>d&&(p=T)}let x=this.gapSize(g,d,p,m),P=s||x<2e6?x:2e6;b=new LineGap(d,p,x,P)}u.push(b)},f=d=>{if(d.length<c||d.type!=BlockType.Text)return;let p=lineStructure(d.from,d.to,this.stateDeco);if(p.total<c)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,m,y;if(s){let _=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,x;if(g!=null){let P=findFraction(p,g),T=((this.visibleBottom-this.visibleTop)/2+_)/d.height;b=P-T,x=P+T}else b=(this.visibleTop-d.top-_)/d.height,x=(this.visibleBottom-d.top+_)/d.height;m=findPosition(p,b),y=findPosition(p,x)}else{let _=p.total*this.heightOracle.charWidth,b=o*this.heightOracle.charWidth,x=0;if(_>2e6)for(let A of e)A.from>=d.from&&A.from<d.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+x<this.pixelViewport.left&&(x=A.size-A.displaySize);let P=this.pixelViewport.left+x,T=this.pixelViewport.right+x,k,S;if(g!=null){let A=findFraction(p,g),w=((T-P)/2+b)/_;k=A-w,S=A+w}else k=(P-b)/_,S=(T+b)/_;m=findPosition(p,k),y=findPosition(p,S)}m>d.from&&h(d.from,m,d,p),y<d.to&&h(y,d.to,d,p)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(f):f(d);return u}gapSize(e,n,s,o){let l=findFraction(o,s)-findFraction(o,n);return this.heightOracle.lineWrapping?e.height*l:o.total*this.heightOracle.charWidth*l}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let s=[];RangeSet.spans(n,this.viewport.from,this.viewport.to,{span(l,c){s.push({from:l,to:c})},point(){}},20);let o=0;if(s.length!=this.visibleRanges.length)o=12;else for(let l=0;l<s.length&&!(o&8);l++){let c=this.visibleRanges[l],u=s[l];(c.from!=u.from||c.to!=u.to)&&(o|=4,e&&e.mapPos(c.from,-1)==u.from&&e.mapPos(c.to,1)==u.to||(o|=8))}return this.visibleRanges=s,o}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,n){this.from=e,this.to=n}}function lineStructure(a,e,n){let s=[],o=a,l=0;return RangeSet.spans(n,a,e,{span(){},point(c,u){c>o&&(s.push({from:o,to:c}),l+=c-o),o=u}},20),o<e&&(s.push({from:o,to:e}),l+=e-o),{total:l,ranges:s}}function findPosition({total:a,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let s=Math.floor(a*n);for(let o=0;;o++){let{from:l,to:c}=e[o],u=c-l;if(s<=u)return l+s;s-=u}}function findFraction(a,e){let n=0;for(let{from:s,to:o}of a.ranges){if(e<=o){n+=e-s;break}n+=o-s}return n/a.total}function find(a,e){for(let n of a)if(e(n))return n}const IdScaler={toDOM(a){return a},fromDOM(a){return a},scale:1,eq(a){return a==this}};class BigScaler{constructor(e,n,s){let o=0,l=0,c=0;this.viewports=s.map(({from:u,to:h})=>{let f=n.lineAt(u,QueryType$1.ByPos,e,0,0).top,d=n.lineAt(h,QueryType$1.ByPos,e,0,0).bottom;return o+=d-f,{from:u,to:h,top:f,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(n.height-o);for(let u of this.viewports)u.domTop=c+(u.top-l)*this.scale,c=u.domBottom=u.domTop+(u.bottom-u.top),l=u.bottom}toDOM(e){for(let n=0,s=0,o=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.top)return o+(e-s)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);s=l.bottom,o=l.domBottom}}fromDOM(e){for(let n=0,s=0,o=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.domTop)return s+(e-o)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);s=l.bottom,o=l.domBottom}}eq(e){return e instanceof BigScaler?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,s)=>n.from==e.viewports[s].from&&n.to==e.viewports[s].to):!1}}function scaleBlock(a,e){if(e.scale==1)return a;let n=e.toDOM(a.top),s=e.toDOM(a.bottom);return new BlockInfo(a.from,a.length,n,s-n,Array.isArray(a._content)?a._content.map(o=>scaleBlock(o,e)):a._content)}const theme=Facet.define({combine:a=>a.join(" ")}),darkTheme=Facet.define({combine:a=>a.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(a,e,n){return new StyleModule(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,o=>{if(o=="&")return a;if(!n||!n[o])throw new RangeError(`Unsupported selector: ${o}`);return n[o]}):a+" "+s}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,s)=>n!=e[s]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,o=this.selectionRange;if(s.state.facet(editable)?s.root.activeElement!=this.dom:!hasSelection(this.dom,o))return;let l=o.anchorNode&&s.docView.nearest(o.anchorNode);if(l&&l.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!s.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=getSelection(e.root);if(!n)return!1;let s=browser.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,n)||n;if(!s||this.selectionRange.eq(s))return!1;let o=hasSelection(this.dom,s);return o&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),o&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let s=this.dom;s;)if(s.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=n)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var s;if(!this.delayedAndroidKey){let o=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&dispatchKey(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,s=-1,o=!1;for(let l of e){let c=this.readMutation(l);c&&(c.typeOver&&(o=!0),n==-1?{from:n,to:s}=c:(n=Math.min(c.from,n),s=Math.max(c.to,s)))}return{from:n,to:s,typeOver:o}}readChange(){let{from:e,to:n,typeOver:s}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new DOMChange(this.view,e,n,s);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let s=this.view.state,o=applyDOMChange(this.view,n);return this.view.state==s&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),o}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let s=findChild(n,e.previousSibling||e.target.previousSibling,-1),o=findChild(n,e.nextSibling||e.target.nextSibling,1);return{from:s?n.posAfter(s):n.posAtStart,to:o?n.posBefore(o):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,n,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(a,e,n){for(;e;){let s=ContentView.get(e);if(s&&s.parent==a)return s;let o=e.parentNode;e=o!=a.dom?o:n>0?e.nextSibling:e.previousSibling}return null}function buildSelectionRangeFromRange(a,e){let n=e.startContainer,s=e.startOffset,o=e.endContainer,l=e.endOffset,c=a.docView.domAtPos(a.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,o,l)&&([n,s,o,l]=[o,l,n,s]),{anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l}}function safariSelectionRangeHack(a,e){if(e.getComposedRanges){let o=e.getComposedRanges(a.root)[0];if(o)return buildSelectionRangeFromRange(a,o)}let n=null;function s(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return a.contentDOM.addEventListener("beforeinput",s,!0),a.dom.ownerDocument.execCommand("indent"),a.contentDOM.removeEventListener("beforeinput",s,!0),n?buildSelectionRangeFromRange(a,n):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let o=e.state.selection.main,{anchor:l,head:c}=o,u=this.toEditorPos(s.updateRangeStart),h=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:u,drifted:!1});let f={from:u,to:h,insert:Text$1.of(s.text.split(`
`))};if(f.from==this.from&&l<this.from?f.from=l:f.to==this.to&&l>this.to&&(f.to=l),f.from==f.to&&!f.insert.length){let d=EditorSelection.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));d.main.eq(o)||e.dispatch({selection:d,userEvent:"select"});return}if((browser.mac||browser.android)&&f.from==c-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:u,to:h,insert:Text$1.of([s.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let d=this.to-this.from+(f.to-f.from+f.insert.length);applyDOMChangeInner(e,f,EditorSelection.single(this.toEditorPos(s.selectionStart,d),this.toEditorPos(s.selectionEnd,d)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=s=>{let o=[],l=null;for(let c=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);c<u;c++){let h=e.coordsForChar(c);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,o.push(l)}n.updateCharacterBounds(s.rangeStart,o)},this.handlers.textformatupdate=s=>{let o=[];for(let l of s.getTextFormats()){let c=l.underlineStyle,u=l.underlineThickness;if(c!="None"&&u!="None"){let h=this.toEditorPos(l.rangeStart),f=this.toEditorPos(l.rangeEnd);if(h<f){let d=`text-decoration: underline ${c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${u=="Thin"?1:2}px`;o.push(Decoration.mark({attributes:{style:d}}).range(h,f))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(o))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)n.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let o=getSelection(s.root);o&&o.rangeCount&&this.editContext.updateSelectionBounds(o.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,s=!1,o=this.pendingContextChange;return e.changes.iterChanges((l,c,u,h,f)=>{if(s)return;let d=f.length-(c-l);if(o&&c>=o.to)if(o.from==l&&o.to==c&&o.insert.eq(f)){o=this.pendingContextChange=null,n+=d,this.to+=d;return}else o=null,this.revertPending(e.state);if(l+=n,c+=n,c<=this.from)this.from+=d,this.to+=d;else if(l<this.to){if(l<this.from||c>this.to||this.to-this.from+f.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(c),f.toString()),this.to+=d}n+=d}),o&&!s&&this.revertPending(e.state),!s}update(e){let n=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(o=>!o.isUserEvent("input.type")&&o.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),o=this.toContextPos(n.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=o)&&this.editContext.updateSelection(s,o)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(o=>o.forEach(l=>s(l,this)))||(o=>this.update(o)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(o=>new PluginInstance(o));for(let o of this.plugins)o.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,s=!1,o,l=this.state;for(let g of e){if(g.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=g.state}if(this.destroyed){this.viewState.state=l;return}let c=this.hasFocus,u=0,h=null;e.some(g=>g.annotation(isFocusChange))?(this.inputState.notifiedFocused=c,u=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,h=focusChangeTransaction(l,c),h||(u=1));let f=this.observer.delayedAndroidKey,d=null;if(f?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(d=null)):this.observer.clear(),l.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(l);o=ViewUpdate.create(this,l,e),o.flags|=u;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(p&&(p=p.map(g.changes)),g.scrollIntoView){let{main:m}=g.state.selection;p=new ScrollTarget(m.empty?m:EditorSelection.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of g.effects)m.is(scrollIntoView$1)&&(p=m.value.clip(this.state))}this.viewState.update(o,p),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),n=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme)!=o.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(n||s||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!o.empty)for(let g of this.state.facet(updateListener))try{g(o)}catch(m){logException(this.state,m,"update listener")}(h||d)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),d&&!applyDOMChange(this,d)&&f.force&&dispatchKey(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(s=>new PluginInstance(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(viewPlugin),s=e.state.facet(viewPlugin);if(n!=s){let o=[];for(let l of s){let c=n.indexOf(l);if(c<0)o.push(new PluginInstance(l));else{let u=this.plugins[c];u.mustUpdate=e,o.push(u)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);n!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(s){logException(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,s=this.scrollDOM,o=s.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:c}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(c<0)if(isScrolledToBottom(s))l=-1,c=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(o);l=m.from,c=m.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];h&4||([this.measureRequests,f]=[f,this.measureRequests]);let d=f.map(m=>{try{return m.read(this)}catch(y){return logException(this.state,y),BadMeasure}}),p=ViewUpdate.create(this,this.state,[]),g=!1;p.flags|=h,n?n.flags|=h:n=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p),g&&this.docViewUpdate());for(let m=0;m<f.length;m++)if(d[m]!=BadMeasure)try{let y=f[m];y.write&&y.write(d[m],this)}catch(y){logException(this.state,y)}if(g&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=-1;continue}else{let y=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-c;if(y>1||y<-1){o=o+y,s.scrollTop=o/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let u of this.state.facet(updateListener))u(n)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,n);let s=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,n),l=updateAttrs(this.dom,this.editorAttrs,e);return o||l});return this.editorAttrs=e,this.contentAttrs=n,s}showAnnouncements(e){let n=!0;for(let s of e)for(let o of s.effects)if(o.is(EditorView.announce)){n&&(this.announceDOM.textContent=""),n=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(s=>s.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,s){return skipAtoms(this,e,moveByChar(this,e,n,s))}moveByGroup(e,n){return skipAtoms(this,e,moveByChar(this,e,n,s=>byGroup(this,e.head,s)))}visualLineSide(e,n){let s=this.bidiSpans(e),o=this.textDirectionAt(e.from),l=s[n?s.length-1:0];return EditorSelection.cursor(l.side(n,o)+e.from,l.forward(!n,o)?1:-1)}moveToLineBoundary(e,n,s=!0){return moveToLineBoundary(this,e,n,s)}moveVertically(e,n,s){return skipAtoms(this,e,moveVertically(this,e,n,s))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),posAtCoords(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let s=this.docView.coordsAt(e,n);if(!s||s.left==s.right)return s;let o=this.state.doc.lineAt(e),l=this.bidiSpans(o),c=l[BidiSpan.find(l,e-o.from,-1,n)];return flattenRect(s,c.dir==Direction.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let n=this.textDirectionAt(e.from),s;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==n&&(l.fresh||isolatesEq(l.isolates,s=getIsolatedRanges(this,e))))return l.order;s||(s=getIsolatedRanges(this,e));let o=computeOrder(e.text,n,s);return this.bidiCache.push(new CachedOrder(e.from,e.to,n,s,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(s.from),"start","start",s.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,n){let s=StyleModule.newName(),o=[theme.of(s),styleModule.of(buildTheme(`.${s}`,e))];return n&&n.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var n;let s=e.querySelector(".cm-content"),o=s&&ContentView.get(s)||ContentView.get(e);return((n=o==null?void 0:o.rootView)===null||n===void 0?void 0:n.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:a=>a.length?a[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,n,s,o,l,c){this.from=e,this.to=n,this.dir=s,this.isolates=o,this.fresh=l,this.order=c}static update(e,n){if(n.empty&&!e.some(l=>l.fresh))return e;let s=[],o=e.length?e[e.length-1].dir:Direction.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let c=e[l];c.dir==o&&!n.touchesRange(c.from,c.to)&&s.push(new CachedOrder(n.mapPos(c.from,1),n.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return s}}function attrsFromFacet(a,e,n){for(let s=a.state.facet(e),o=s.length-1;o>=0;o--){let l=s[o],c=typeof l=="function"?l(a):l;c&&combineAttrs(c,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(a,e){const n=a.split(/-(?!$)/);let s=n[n.length-1];s=="Space"&&(s=" ");let o,l,c,u;for(let h=0;h<n.length-1;++h){const f=n[h];if(/^(cmd|meta|m)$/i.test(f))u=!0;else if(/^a(lt)?$/i.test(f))o=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))c=!0;else if(/^mod$/i.test(f))e=="mac"?u=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return o&&(s="Alt-"+s),l&&(s="Ctrl-"+s),u&&(s="Meta-"+s),c&&(s="Shift-"+s),s}function modifiers(a,e,n){return e.altKey&&(a="Alt-"+a),e.ctrlKey&&(a="Ctrl-"+a),e.metaKey&&(a="Meta-"+a),n!==!1&&e.shiftKey&&(a="Shift-"+a),a}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(a,e){return runHandlers(getKeymap(e.state),a,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(a){let e=a.facet(keymap),n=Keymaps.get(e);return n||Keymaps.set(e,n=buildKeymap(e.reduce((s,o)=>s.concat(o),[]))),n}function runScopeHandlers(a,e,n){return runHandlers(getKeymap(a.state),e,a,n)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(a,e=currentPlatform){let n=Object.create(null),s=Object.create(null),o=(c,u)=>{let h=s[c];if(h==null)s[c]=u;else if(h!=u)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},l=(c,u,h,f,d)=>{var p,g;let m=n[c]||(n[c]=Object.create(null)),y=u.split(/ (?!$)/).map(x=>normalizeKeyName(x,e));for(let x=1;x<y.length;x++){let P=y.slice(0,x).join(" ");o(P,!0),m[P]||(m[P]={preventDefault:!0,stopPropagation:!1,run:[T=>{let k=storedPrefix={view:T,prefix:P,scope:c};return setTimeout(()=>{storedPrefix==k&&(storedPrefix=null)},PrefixTimeout),!0}]})}let _=y.join(" ");o(_,!1);let b=m[_]||(m[_]={preventDefault:!1,stopPropagation:!1,run:((g=(p=m._any)===null||p===void 0?void 0:p.run)===null||g===void 0?void 0:g.slice())||[]});h&&b.run.push(h),f&&(b.preventDefault=!0),d&&(b.stopPropagation=!0)};for(let c of a){let u=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let f of u){let d=n[f]||(n[f]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=c;for(let g in d)d[g].run.push(m=>p(m,currentKeyEvent))}let h=c[e]||c.key;if(h)for(let f of u)l(f,h,c.run,c.preventDefault,c.stopPropagation),c.shift&&l(f,"Shift-"+h,c.shift,c.preventDefault,c.stopPropagation)}return n}let currentKeyEvent=null;function runHandlers(a,e,n,s){currentKeyEvent=e;let o=keyName(e),l=codePointAt(o,0),c=codePointSize(l)==o.length&&o!=" ",u="",h=!1,f=!1,d=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==s&&(u=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(f=!0,storedPrefix=null));let p=new Set,g=b=>{if(b){for(let x of b.run)if(!p.has(x)&&(p.add(x),x(n)))return b.stopPropagation&&(d=!0),!0;b.preventDefault&&(b.stopPropagation&&(d=!0),f=!0)}return!1},m=a[s],y,_;return m&&(g(m[u+modifiers(o,e,!c)])?h=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(y=base[e.keyCode])&&y!=o?(g(m[u+modifiers(y,e,!0)])||e.shiftKey&&(_=shift[e.keyCode])!=o&&_!=y&&g(m[u+modifiers(_,e,!1)]))&&(h=!0):c&&e.shiftKey&&g(m[u+modifiers(o,e,!0)])&&(h=!0),!h&&g(m._any)&&(h=!0)),f&&(h=!0),h&&d&&e.stopPropagation(),currentKeyEvent=null,h}class RectangleMarker{constructor(e,n,s,o,l){this.className=e,this.left=n,this.top=s,this.width=o,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,s){if(s.empty){let o=e.coordsAtPos(s.head,s.assoc||1);if(!o)return[];let l=getBase(e);return[new RectangleMarker(n,o.left-l.left,o.top-l.top,null,o.bottom-o.top)]}else return rectanglesForRange(e,n,s)}}function getBase(a){let e=a.scrollDOM.getBoundingClientRect();return{left:(a.textDirection==Direction.LTR?e.left:e.right-a.scrollDOM.clientWidth*a.scaleX)-a.scrollDOM.scrollLeft*a.scaleX,top:e.top-a.scrollDOM.scrollTop*a.scaleY}}function wrappedLine(a,e,n,s){let o=a.coordsAtPos(e,n*2);if(!o)return s;let l=a.dom.getBoundingClientRect(),c=(o.top+o.bottom)/2,u=a.posAtCoords({x:l.left+1,y:c}),h=a.posAtCoords({x:l.right-1,y:c});return u==null||h==null?s:{from:Math.max(s.from,Math.min(u,h)),to:Math.min(s.to,Math.max(u,h))}}function rectanglesForRange(a,e,n){if(n.to<=a.viewport.from||n.from>=a.viewport.to)return[];let s=Math.max(n.from,a.viewport.from),o=Math.min(n.to,a.viewport.to),l=a.textDirection==Direction.LTR,c=a.contentDOM,u=c.getBoundingClientRect(),h=getBase(a),f=c.querySelector(".cm-line"),d=f&&window.getComputedStyle(f),p=u.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),g=u.right-(d?parseInt(d.paddingRight):0),m=blockAt(a,s,1),y=blockAt(a,o,-1),_=m.type==BlockType.Text?m:null,b=y.type==BlockType.Text?y:null;if(_&&(a.lineWrapping||m.widgetLineBreaks)&&(_=wrappedLine(a,s,1,_)),b&&(a.lineWrapping||y.widgetLineBreaks)&&(b=wrappedLine(a,o,-1,b)),_&&b&&_.from==b.from&&_.to==b.to)return P(T(n.from,n.to,_));{let S=_?T(n.from,null,_):k(m,!1),A=b?T(null,n.to,b):k(y,!0),w=[];return(_||m).to<(b||y).from-(_&&b?1:0)||m.widgetLineBreaks>1&&S.bottom+a.defaultLineHeight/2<A.top?w.push(x(p,S.bottom,g,A.top)):S.bottom<A.top&&a.elementAtHeight((S.bottom+A.top)/2).type==BlockType.Text&&(S.bottom=A.top=(S.bottom+A.top)/2),P(S).concat(w).concat(P(A))}function x(S,A,w,E){return new RectangleMarker(e,S-h.left,A-h.top,w-S,E-A)}function P({top:S,bottom:A,horizontal:w}){let E=[];for(let F=0;F<w.length;F+=2)E.push(x(w[F],S,w[F+1],A));return E}function T(S,A,w){let E=1e9,F=-1e9,O=[];function M(te,ce,se,le,fe){let ge=a.coordsAtPos(te,te==w.to?-2:2),xe=a.coordsAtPos(se,se==w.from?2:-2);!ge||!xe||(E=Math.min(ge.top,xe.top,E),F=Math.max(ge.bottom,xe.bottom,F),fe==Direction.LTR?O.push(l&&ce?p:ge.left,l&&le?g:xe.right):O.push(!l&&le?p:xe.left,!l&&ce?g:ge.right))}let V=S??w.from,G=A??w.to;for(let te of a.visibleRanges)if(te.to>V&&te.from<G)for(let ce=Math.max(te.from,V),se=Math.min(te.to,G);;){let le=a.state.doc.lineAt(ce);for(let fe of a.bidiSpans(le)){let ge=fe.from+le.from,xe=fe.to+le.from;if(ge>=se)break;xe>ce&&M(Math.max(ge,ce),S==null&&ge<=V,Math.min(xe,se),A==null&&xe>=G,fe.dir)}if(ce=le.to+1,ce>=se)break}return O.length==0&&M(V,S==null,G,A==null,a.textDirection),{top:E,bottom:F,horizontal:O}}function k(S,A){let w=u.top+(A?S.top:S.bottom);return{top:w,bottom:w,horizontal:[]}}}function sameMarker(a,e){return a.constructor==e.constructor&&a.eq(e)}class LayerView{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,s=e.facet(layerOrder);for(;n<s.length&&s[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,s)=>!sameMarker(n,this.drawn[s]))){let n=this.dom.firstChild,s=0;for(let o of e)o.update&&n&&o.constructor&&this.drawn[s].constructor&&o.update(n,this.drawn[s])?(n=n.nextSibling,s++):this.dom.insertBefore(o.draw(),n);for(;n;){let o=n.nextSibling;n.remove(),n=o}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(a){return[ViewPlugin.define(e=>new LayerView(e,a)),layerOrder.of(a)]}const selectionConfig=Facet.define({combine(a){return combineConfig(a,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function drawSelection(a={}){return[selectionConfig.of(a),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(a){return a.startState.facet(selectionConfig)!=a.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(a){let{state:e}=a,n=e.facet(selectionConfig),s=[];for(let o of e.selection.ranges){let l=o==e.selection.main;if(o.empty||n.drawRangeCursor){let c=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=o.empty?o:EditorSelection.cursor(o.head,o.head>o.anchor?-1:1);for(let h of RectangleMarker.forRange(a,c,u))s.push(h)}}return s},update(a,e){a.transactions.some(s=>s.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=configChanged(a);return n&&setBlinkRate(a.state,e),a.docChanged||a.selectionSet||n},mount(a,e){setBlinkRate(e.state,a)},class:"cm-cursorLayer"});function setBlinkRate(a,e){e.style.animationDuration=a.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(a){return a.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(a,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(a,e){return a.docChanged||a.selectionSet||a.viewportChanged||configChanged(a)},class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=StateEffect.define({map(a,e){return a==null?null:e.mapPos(a)}}),dropCursorPos=StateField.define({create(){return null},update(a,e){return a!=null&&(a=e.changes.mapPos(a)),e.effects.reduce((n,s)=>s.is(setDropCursorPos)?s.value:n,a)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(a){var e;let n=a.state.field(dropCursorPos);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(a.startState.field(dropCursorPos)!=n||a.docChanged||a.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:a}=this,e=a.state.field(dropCursorPos),n=e!=null&&a.coordsAtPos(e);if(!n)return null;let s=a.scrollDOM.getBoundingClientRect();return{left:n.left-s.left+a.scrollDOM.scrollLeft*a.scaleX,top:n.top-s.top+a.scrollDOM.scrollTop*a.scaleY,height:n.bottom-n.top}}drawCursor(a){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;a?(this.cursor.style.left=a.left/e+"px",this.cursor.style.top=a.top/n+"px",this.cursor.style.height=a.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(a){this.view.state.field(dropCursorPos)!=a&&this.view.dispatch({effects:setDropCursorPos.of(a)})}},{eventObservers:{dragover(a){this.setDropPos(this.view.posAtCoords({x:a.clientX,y:a.clientY}))},dragleave(a){(a.target==this.view.contentDOM||!this.view.contentDOM.contains(a.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(a,e,n,s,o){e.lastIndex=0;for(let l=a.iterRange(n,s),c=n,u;!l.next().done;c+=l.value.length)if(!l.lineBreak)for(;u=e.exec(l.value);)o(c+u.index,u)}function matchRanges(a,e){let n=a.visibleRanges;if(n.length==1&&n[0].from==a.viewport.from&&n[0].to==a.viewport.to)return n;let s=[];for(let{from:o,to:l}of n)o=Math.max(a.state.doc.lineAt(o).from,o-e),l=Math.min(a.state.doc.lineAt(l).to,l+e),s.length&&s[s.length-1].to>=o?s[s.length-1].to=l:s.push({from:o,to:l});return s}class MatchDecorator{constructor(e){const{regexp:n,decoration:s,decorate:o,boundary:l,maxLength:c=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,o)this.addMatch=(u,h,f,d)=>o(d,f,f+u[0].length,u,h);else if(typeof s=="function")this.addMatch=(u,h,f,d)=>{let p=s(u,h,f);p&&d(f,f+u[0].length,p)};else if(s)this.addMatch=(u,h,f,d)=>d(f,f+u[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=c}createDeco(e){let n=new RangeSetBuilder,s=n.add.bind(n);for(let{from:o,to:l}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,o,l,(c,u)=>this.addMatch(u,e,c,s));return n.finish()}updateDeco(e,n){let s=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((l,c,u,h)=>{h>=e.view.viewport.from&&u<=e.view.viewport.to&&(s=Math.min(u,s),o=Math.max(h,o))}),e.viewportMoved||o-s>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,n.map(e.changes),s,o):n}updateRange(e,n,s,o){for(let l of e.visibleRanges){let c=Math.max(l.from,s),u=Math.min(l.to,o);if(u>c){let h=e.state.doc.lineAt(c),f=h.to<u?e.state.doc.lineAt(u):h,d=Math.max(l.from,h.from),p=Math.min(l.to,f.to);if(this.boundary){for(;c>h.from;c--)if(this.boundary.test(h.text[c-1-h.from])){d=c;break}for(;u<f.to;u++)if(this.boundary.test(f.text[u-f.from])){p=u;break}}let g=[],m,y=(_,b,x)=>g.push(x.range(_,b));if(h==f)for(this.regexp.lastIndex=d-h.from;(m=this.regexp.exec(h.text))&&m.index<p-h.from;)this.addMatch(m,e,m.index+h.from,y);else iterMatches(e.state.doc,this.regexp,d,p,(_,b)=>this.addMatch(b,e,_,y));n=n.update({filterFrom:d,filterTo:p,filter:(_,b)=>_<d||b>p,add:g})}}return n}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var a;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((a=e.tabSize)!==null&&a!==void 0?a:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(a){let e=combineConfig(a,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(a={}){return[specialCharConfig.of(a),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(a.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(a)}makeDecorator(a){return new MatchDecorator({regexp:a.specialChars,decoration:(e,n,s)=>{let{doc:o}=n.state,l=codePointAt(e[0],0);if(l==9){let c=o.lineAt(s),u=n.state.tabSize,h=countColumn(c.text,u,s-c.from);return Decoration.replace({widget:new TabWidget((u-h%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Decoration.replace({widget:new SpecialCharWidget(a,l)}))},boundary:a.replaceTabs?void 0:/[^]/})}update(a){let e=a.state.facet(specialCharConfig);a.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(a.view)):this.decorations=this.decorator.updateDeco(a,this.decorations)}},{decorations:a=>a.decorations}))}const DefaultPlaceholder="•";function placeholder$1(a){return a>=32?DefaultPlaceholder:a==10?"␤":String.fromCharCode(9216+a)}class SpecialCharWidget extends WidgetType{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=placeholder$1(this.code),s=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,s,n);if(o)return o;let l=document.createElement("span");return l.textContent=n,l.title=s,l.setAttribute("aria-label",s),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(a){this.decorations=this.getDeco(a)}update(a){(a.docChanged||a.selectionSet)&&(this.decorations=this.getDeco(a.view))}getDeco(a){let e=-1,n=[];for(let s of a.state.selection.ranges){let o=a.lineBlockAt(s.head);o.from>e&&(n.push(lineDeco.range(o.from)),e=o.from)}return Decoration.set(n)}},{decorations:a=>a.decorations});class Placeholder extends WidgetType{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?n.setAttribute("aria-label","placeholder "+this.content):n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?clientRectsFor(e.firstChild):[];if(!n.length)return null;let s=window.getComputedStyle(e.parentNode),o=flattenRect(n[0],s.direction!="rtl"),l=parseInt(s.lineHeight);return o.bottom-o.top>l*1.5?{left:o.left,right:o.right,top:o.top,bottom:o.top+l}:o}ignoreEvent(){return!1}}function placeholder(a){return ViewPlugin.fromClass(class{constructor(e){this.view=e,this.placeholder=a?Decoration.set([Decoration.widget({widget:new Placeholder(a),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:e=>e.decorations})}const MaxOff=2e3;function rectangleFor(a,e,n){let s=Math.min(e.line,n.line),o=Math.max(e.line,n.line),l=[];if(e.off>MaxOff||n.off>MaxOff||e.col<0||n.col<0){let c=Math.min(e.off,n.off),u=Math.max(e.off,n.off);for(let h=s;h<=o;h++){let f=a.doc.line(h);f.length<=u&&l.push(EditorSelection.range(f.from+c,f.to+u))}}else{let c=Math.min(e.col,n.col),u=Math.max(e.col,n.col);for(let h=s;h<=o;h++){let f=a.doc.line(h),d=findColumn(f.text,c,a.tabSize,!0);if(d<0)l.push(EditorSelection.cursor(f.to));else{let p=findColumn(f.text,u,a.tabSize);l.push(EditorSelection.range(f.from+d,f.from+p))}}}return l}function absoluteColumn(a,e){let n=a.coordsAtPos(a.viewport.from);return n?Math.round(Math.abs((n.left-e)/a.defaultCharacterWidth)):-1}function getPos(a,e){let n=a.posAtCoords({x:e.clientX,y:e.clientY},!1),s=a.state.doc.lineAt(n),o=n-s.from,l=o>MaxOff?-1:o==s.length?absoluteColumn(a,e.clientX):countColumn(s.text,a.state.tabSize,n-s.from);return{line:s.number,col:l,off:o}}function rectangleSelectionStyle(a,e){let n=getPos(a,e),s=a.state.selection;return n?{update(o){if(o.docChanged){let l=o.changes.mapPos(o.startState.doc.line(n.line).from),c=o.state.doc.lineAt(l);n={line:c.number,col:n.col,off:Math.min(n.off,c.length)},s=s.map(o.changes)}},get(o,l,c){let u=getPos(a,o);if(!u)return s;let h=rectangleFor(a.state,n,u);return h.length?c?EditorSelection.create(h.concat(s.ranges)):EditorSelection.create(h):s}}:null}function rectangularSelection(a){let e=n=>n.altKey&&n.button==0;return EditorView.mouseSelectionStyle.of((n,s)=>e(s)?rectangleSelectionStyle(n,s):null)}const keys={Alt:[18,a=>!!a.altKey],Control:[17,a=>!!a.ctrlKey],Shift:[16,a=>!!a.shiftKey],Meta:[91,a=>!!a.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(a={}){let[e,n]=keys[a.key||"Alt"],s=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventObservers:{keydown(o){this.set(o.keyCode==e||n(o))},keyup(o){(o.keyCode==e||!n(o))&&this.set(!1)},mousemove(o){this.set(n(o))}}});return[s,EditorView.contentAttributes.of(o=>{var l;return!((l=o.plugin(s))===null||l===void 0)&&l.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(e,n,s,o){this.facet=n,this.createTooltipView=s,this.removeTooltipView=o,this.input=e.state.facet(n),this.tooltips=this.input.filter(c=>c);let l=null;this.tooltipViews=this.tooltips.map(c=>l=s(c,l))}update(e,n){var s;let o=e.state.facet(this.facet),l=o.filter(h=>h);if(o===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let c=[],u=n?[]:null;for(let h=0;h<l.length;h++){let f=l[h],d=-1;if(f){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==f.create&&(d=p)}if(d<0)c[h]=this.createTooltipView(f,h?c[h-1]:null),u&&(u[h]=!!f.above);else{let p=c[h]=this.tooltipViews[d];u&&(u[h]=n[d]),p.update&&p.update(e)}}}for(let h of this.tooltipViews)c.indexOf(h)<0&&(this.removeTooltipView(h),(s=h.destroy)===null||s===void 0||s.call(h));return n&&(u.forEach((h,f)=>n[f]=h),n.length=u.length),this.input=o,this.tooltips=l,this.tooltipViews=c,!0}}function windowSpace(a){let e=a.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const tooltipConfig=Facet.define({combine:a=>{var e,n,s;return{position:browser.ios?"absolute":((e=a.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=a.find(o=>o.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((s=a.find(o=>o.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=a.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=a.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(a,showTooltip,(n,s)=>this.createTooltip(n,s),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),a.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let a of this.manager.tooltipViews)this.intersectionObserver.observe(a.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(a){a.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(a,this.above);e&&this.observeIntersection();let n=e||a.geometryChanged,s=a.state.facet(tooltipConfig);if(s.position!=this.position&&!this.madeAbsolute){this.position=s.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;n=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(a,e){let n=a.create(this.view),s=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),a.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let o=document.createElement("div");o.className="cm-tooltip-arrow",n.dom.appendChild(o)}return n.dom.style.position=this.position,n.dom.style.top=Outside,n.dom.style.left="0px",this.container.insertBefore(n.dom,s),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var a,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let s of this.manager.tooltipViews)s.dom.remove(),(a=s.destroy)===null||a===void 0||a.call(s);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let a=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:l}=this.manager.tooltipViews[0];if(browser.gecko)n=l.offsetParent!=this.container.ownerDocument.body;else if(l.style.top==Outside&&l.style.left=="0px"){let c=l.getBoundingClientRect();n=Math.abs(c.top+1e4)>1||Math.abs(c.left)>1}}if(n||this.position=="absolute")if(this.parent){let l=this.parent.getBoundingClientRect();l.width&&l.height&&(a=l.width/this.parent.offsetWidth,e=l.height/this.parent.offsetHeight)}else({scaleX:a,scaleY:e}=this.view.viewState);let s=this.view.scrollDOM.getBoundingClientRect(),o=getScrollMargins(this.view);return{visible:{left:s.left+o.left,top:s.top+o.top,right:s.right-o.right,bottom:s.bottom-o.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((l,c)=>{let u=this.manager.tooltipViews[c];return u.getCoords?u.getCoords(l.pos):this.view.coordsAtPos(l.pos)}),size:this.manager.tooltipViews.map(({dom:l})=>l.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:a,scaleY:e,makeAbsolute:n}}writeMeasure(a){var e;if(a.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{visible:n,space:s,scaleX:o,scaleY:l}=a,c=[];for(let u=0;u<this.manager.tooltips.length;u++){let h=this.manager.tooltips[u],f=this.manager.tooltipViews[u],{dom:d}=f,p=a.pos[u],g=a.size[u];if(!p||h.clip!==!1&&(p.bottom<=Math.max(n.top,s.top)||p.top>=Math.min(n.bottom,s.bottom)||p.right<Math.max(n.left,s.left)-.1||p.left>Math.min(n.right,s.right)+.1)){d.style.top=Outside;continue}let m=h.arrow?f.dom.querySelector(".cm-tooltip-arrow"):null,y=m?7:0,_=g.right-g.left,b=(e=knownHeight.get(f))!==null&&e!==void 0?e:g.bottom-g.top,x=f.offset||noOffset,P=this.view.textDirection==Direction.LTR,T=g.width>s.right-s.left?P?s.left:s.right-g.width:P?Math.max(s.left,Math.min(p.left-(m?14:0)+x.x,s.right-_)):Math.min(Math.max(s.left,p.left-_+(m?14:0)-x.x),s.right-_),k=this.above[u];!h.strictSide&&(k?p.top-b-y-x.y<s.top:p.bottom+b+y+x.y>s.bottom)&&k==s.bottom-p.bottom>p.top-s.top&&(k=this.above[u]=!k);let S=(k?p.top-s.top:s.bottom-p.bottom)-y;if(S<b&&f.resize!==!1){if(S<this.view.defaultLineHeight){d.style.top=Outside;continue}knownHeight.set(f,b),d.style.height=(b=S)/l+"px"}else d.style.height&&(d.style.height="");let A=k?p.top-b-y-x.y:p.bottom+y+x.y,w=T+_;if(f.overlap!==!0)for(let E of c)E.left<w&&E.right>T&&E.top<A+b&&E.bottom>A&&(A=k?E.top-b-2-y:E.bottom+y+2);if(this.position=="absolute"?(d.style.top=(A-a.parent.top)/l+"px",setLeftStyle(d,(T-a.parent.left)/o)):(d.style.top=A/l+"px",setLeftStyle(d,T/o)),m){let E=p.left+(P?x.x:-x.x)-(T+14-7);m.style.left=E/o+"px"}f.overlap!==!0&&c.push({left:T,top:A,right:w,bottom:A+b}),d.classList.toggle("cm-tooltip-above",k),d.classList.toggle("cm-tooltip-below",!k),f.positioned&&f.positioned(a.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let a of this.manager.tooltipViews)a.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(a,e){let n=parseInt(a.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(a.style.left=e+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:a=>a.reduce((e,n)=>e.concat(n),[])});class HoverTooltipHost{static create(e){return new HoverTooltipHost(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,(n,s)=>this.createHostedView(n,s),n=>n.dom.remove())}createHostedView(e,n){let s=e.create(this.view);return s.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(s.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&s.mount&&s.mount(this.view),s}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let s of this.manager.tooltipViews){let o=s[e];if(o!==void 0){if(n===void 0)n=o;else if(n!==o)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],a=>{let e=a.facet(showHoverTooltip);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var s;return(s=n.end)!==null&&s!==void 0?s:n.pos})),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class HoverPlugin{constructor(e,n,s,o,l){this.view=e,this.source=n,this.field=s,this.setHover=o,this.hoverTime=l,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,s=e.docView.nearest(n.target);if(!s)return;let o,l=1;if(s instanceof WidgetView)o=s.posAtStart;else{if(o=e.posAtCoords(n),o==null)return;let u=e.coordsAtPos(o);if(!u||n.y<u.top||n.y>u.bottom||n.x<u.left-e.defaultCharacterWidth||n.x>u.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(o)).find(d=>d.from<=o&&d.to>=o),f=h&&h.dir==Direction.RTL?-1:1;l=n.x<u.left?-f:f}let c=this.source(e,o,l);if(c!=null&&c.then){let u=this.pending={pos:o};c.then(h=>{this.pending==u&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>logException(e.state,h,"hover tooltip"))}else c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])})}get tooltip(){let e=this.view.plugin(tooltipPlugin),n=e?e.manager.tooltips.findIndex(s=>s.create==HoverTooltipHost.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,s;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:o,tooltip:l}=this;if(o.length&&l&&!isInTooltip(l.dom,e)||this.pending){let{pos:c}=o[0]||this.pending,u=(s=(n=o[0])===null||n===void 0?void 0:n.end)!==null&&s!==void 0?s:c;(c==u?this.view.posAtCoords(this.lastMove)!=c:!isOverRange(this.view,c,u,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:s}=this;s&&s.dom.contains(e.relatedTarget)?this.watchTooltipLeave(s.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=s=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(s.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(a,e){let{left:n,right:s,top:o,bottom:l}=a.getBoundingClientRect(),c;if(c=a.querySelector(".cm-tooltip-arrow")){let u=c.getBoundingClientRect();o=Math.min(u.top,o),l=Math.max(u.bottom,l)}return e.clientX>=n-tooltipMargin&&e.clientX<=s+tooltipMargin&&e.clientY>=o-tooltipMargin&&e.clientY<=l+tooltipMargin}function isOverRange(a,e,n,s,o,l){let c=a.scrollDOM.getBoundingClientRect(),u=a.documentTop+a.documentPadding.top+a.contentHeight;if(c.left>s||c.right<s||c.top>o||Math.min(c.bottom,u)<o)return!1;let h=a.posAtCoords({x:s,y:o},!1);return h>=e&&h<=n}function hoverTooltip(a,e={}){let n=StateEffect.define(),s=StateField.define({create(){return[]},update(o,l){if(o.length&&(e.hideOnChange&&(l.docChanged||l.selection)?o=[]:e.hideOn&&(o=o.filter(c=>!e.hideOn(l,c))),l.docChanged)){let c=[];for(let u of o){let h=l.changes.mapPos(u.pos,-1,MapMode.TrackDel);if(h!=null){let f=Object.assign(Object.create(null),u);f.pos=h,f.end!=null&&(f.end=l.changes.mapPos(f.end)),c.push(f)}}o=c}for(let c of l.effects)c.is(n)&&(o=c.value),c.is(closeHoverTooltipEffect)&&(o=[]);return o},provide:o=>showHoverTooltip.from(o)});return{active:s,extension:[s,ViewPlugin.define(o=>new HoverPlugin(o,a,s,n,e.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(a,e){let n=a.plugin(tooltipPlugin);if(!n)return null;let s=n.manager.tooltips.indexOf(e);return s<0?null:n.manager.tooltipViews[s]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(a){let e,n;for(let s of a)e=e||s.topContainer,n=n||s.bottomContainer;return{topContainer:e,bottomContainer:n}}});function getPanel(a,e){let n=a.plugin(panelPlugin),s=n?n.specs.indexOf(e):-1;return s>-1?n.panels[s]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(a){this.input=a.state.facet(showPanel),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(a));let e=a.state.facet(panelConfig);this.top=new PanelGroup(a,!0,e.topContainer),this.bottom=new PanelGroup(a,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(a){let e=a.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(a.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(a.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=a.state.facet(showPanel);if(n!=this.input){let s=n.filter(h=>h),o=[],l=[],c=[],u=[];for(let h of s){let f=this.specs.indexOf(h),d;f<0?(d=h(a.view),u.push(d)):(d=this.panels[f],d.update&&d.update(a)),o.push(d),(d.top?l:c).push(d)}this.specs=s,this.panels=o,this.top.sync(l),this.bottom.sync(c);for(let h of u)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let s of this.panels)s.update&&s.update(a)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:a=>EditorView.scrollMargins.of(e=>{let n=e.plugin(a);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class PanelGroup{constructor(e,n,s){this.view=e,this.top=n,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(a){let e=a.nextSibling;return a.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(a){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),a))]}const unfixGutters=Facet.define({combine:a=>a.some(e=>e)});function gutters(a){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.prevViewport=a.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=a.state.facet(activeGutters).map(e=>new SingleGutterView(a,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!a.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),a.scrollDOM.insertBefore(this.dom,a.contentDOM)}update(a){if(this.updateGutters(a)){let e=this.prevViewport,n=a.view.viewport,s=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(s<(n.to-n.from)*.8)}a.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=a.view.viewport}syncGutters(a){let e=this.dom.nextSibling;a&&this.dom.remove();let n=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),s=[],o=this.gutters.map(l=>new UpdateContext(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(l.type)){let c=!0;for(let u of l.type)if(u.type==BlockType.Text&&c){advanceCursor(n,s,u.from);for(let h of o)h.line(this.view,u,s);c=!1}else if(u.widget)for(let h of o)h.widget(this.view,u)}else if(l.type==BlockType.Text){advanceCursor(n,s,l.from);for(let c of o)c.line(this.view,l,s)}else if(l.widget)for(let c of o)c.widget(this.view,l);for(let l of o)l.finish();a&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(a){let e=a.startState.facet(activeGutters),n=a.state.facet(activeGutters),s=a.docChanged||a.heightChanged||a.viewportChanged||!RangeSet.eq(a.startState.facet(gutterLineClass),a.state.facet(gutterLineClass),a.view.viewport.from,a.view.viewport.to);if(e==n)for(let o of this.gutters)o.update(a)&&(s=!0);else{s=!0;let o=[];for(let l of n){let c=e.indexOf(l);c<0?o.push(new SingleGutterView(this.view,l)):(this.gutters[c].update(a),o.push(this.gutters[c]))}for(let l of this.gutters)l.dom.remove(),o.indexOf(l)<0&&l.destroy();for(let l of o)this.dom.appendChild(l.dom);this.gutters=o}return s}destroy(){for(let a of this.gutters)a.destroy();this.dom.remove()}},{provide:a=>EditorView.scrollMargins.of(e=>{let n=e.plugin(a);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Direction.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function asArray(a){return Array.isArray(a)?a:[a]}function advanceCursor(a,e,n){for(;a.value&&a.from<=n;)a.from==n&&e.push(a.value),a.next()}class UpdateContext{constructor(e,n,s){this.gutter=e,this.height=s,this.i=0,this.cursor=RangeSet.iter(e.markers,n.from)}addElement(e,n,s){let{gutter:o}=this,l=(n.top-this.height)/e.scaleY,c=n.height/e.scaleY;if(this.i==o.elements.length){let u=new GutterElement(e,c,l,s);o.elements.push(u),o.dom.appendChild(u.dom)}else o.elements[this.i].update(e,c,l,s);this.height=n.bottom,this.i++}line(e,n,s){let o=[];advanceCursor(this.cursor,o,n.from),s.length&&(o=o.concat(s));let l=this.gutter.config.lineMarker(e,n,o);l&&o.unshift(l);let c=this.gutter;o.length==0&&!c.config.renderEmptyElements||this.addElement(e,n,o)}widget(e,n){let s=this.gutter.config.widgetMarker(e,n.widget,n),o=s?[s]:null;for(let l of e.state.facet(gutterWidgetClass)){let c=l(e,n.widget,n);c&&(o||(o=[])).push(c)}o&&this.addElement(e,n,o)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class SingleGutterView{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in n.domEventHandlers)this.dom.addEventListener(s,o=>{let l=o.target,c;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();c=(h.top+h.bottom)/2}else c=o.clientY;let u=e.lineBlockAtHeight(c-e.documentTop);n.domEventHandlers[s](e,u,o)&&o.preventDefault()});this.markers=asArray(n.markers(e)),n.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let s=e.view.viewport;return!RangeSet.eq(this.markers,n,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,n,s,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,s,o)}update(e,n,s,o){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),sameMarkers(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,n){let s="cm-gutterElement",o=this.dom.firstChild;for(let l=0,c=0;;){let u=c,h=l<n.length?n[l++]:null,f=!1;if(h){let d=h.elementClass;d&&(s+=" "+d);for(let p=c;p<this.markers.length;p++)if(this.markers[p].compare(h)){u=p,f=!0;break}}else u=this.markers.length;for(;c<u;){let d=this.markers[c++];if(d.toDOM){d.destroy(o);let p=o.nextSibling;o.remove(),o=p}}if(!h)break;h.toDOM&&(f?o=o.nextSibling:this.dom.insertBefore(h.toDOM(e),o)),f&&c++}this.dom.className=s,this.markers=n}destroy(){this.setMarkers(null,[])}}function sameMarkers(a,e){if(a.length!=e.length)return!1;for(let n=0;n<a.length;n++)if(!a[n].compare(e[n]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(a){return combineConfig(a,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let s=Object.assign({},e);for(let o in n){let l=s[o],c=n[o];s[o]=l?(u,h,f)=>l(u,h,f)||c(u,h,f):c}return s}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(a,e){return a.state.facet(lineNumberConfig).formatNumber(e,a.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],a=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,n,s){return s.some(o=>o.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,s)=>{for(let o of e.state.facet(lineNumberWidgetMarker)){let l=o(e,n,s);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,n){let s=formatNumber(n.view,maxLineNumber(n.view.state.doc.lines));return s==e.number?e:new NumberMarker(s)},domEventHandlers:a.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(a={}){return[lineNumberConfig.of(a),gutters(),lineNumberGutter]}function maxLineNumber(a){let e=9;for(;e<a;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],a=>{let e=[],n=-1;for(let s of a.selection.ranges){let o=a.doc.lineAt(s.head).from;o>n&&(n=o,e.push(activeLineGutterMarker.range(o)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,n){this.from=e,this.to=n}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),n=>{let s=e(n);return s===void 0?null:[this,s]}}}NodeProp.closedBy=new NodeProp({deserialize:a=>a.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:a=>a.split(" ")});NodeProp.group=new NodeProp({deserialize:a=>a.split(" ")});NodeProp.isolate=new NodeProp({deserialize:a=>{if(a&&a!="rtl"&&a!="ltr"&&a!="auto")throw new RangeError("Invalid value for isolate: "+a);return a||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,n,s){this.tree=e,this.overlay=n,this.parser=s}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(e,n,s,o=0){this.name=e,this.props=n,this.id=s,this.flags=o}static define(e){let n=e.props&&e.props.length?Object.create(null):noProps,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new NodeType(e.name||"",n,e.id,s);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(o)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[l[0].id]=l[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(NodeProp.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let s in e)for(let o of s.split(" "))n[o]=e[s];return s=>{for(let o=s.prop(NodeProp.group),l=-1;l<(o?o.length:0);l++){let c=n[l<0?s.name:o[l]];if(c)return c}}}}NodeType.none=new NodeType("",Object.create(null),0,8);const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(a){a[a.ExcludeBuffers=1]="ExcludeBuffers",a[a.IncludeAnonymous=2]="IncludeAnonymous",a[a.IgnoreMounts=4]="IgnoreMounts",a[a.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,n,s,o,l){if(this.type=e,this.children=n,this.positions=s,this.length=o,this.props=null,l&&l.length){this.props=Object.create(null);for(let[c,u]of l)this.props[typeof c=="number"?c:c.id]=u}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let s of this.children){let o=s.toString();o&&(n&&(n+=","),n+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,n=0,s=0){let o=CachedNode.get(this)||this.topNode,l=new TreeCursor(o);return l.moveTo(e,n),CachedNode.set(this,l._tree),l}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,n=0){let s=resolveNode(CachedNode.get(this)||this.topNode,e,n,!1);return CachedNode.set(this,s),s}resolveInner(e,n=0){let s=resolveNode(CachedInnerNode.get(this)||this.topNode,e,n,!0);return CachedInnerNode.set(this,s),s}resolveStack(e,n=0){return stackIterator(this,e,n)}iterate(e){let{enter:n,leave:s,from:o=0,to:l=this.length}=e,c=e.mode||0,u=(c&IterMode.IncludeAnonymous)>0;for(let h=this.cursor(c|IterMode.IncludeAnonymous);;){let f=!1;if(h.from<=l&&h.to>=o&&(!u&&h.type.isAnonymous||n(h)!==!1)){if(h.firstChild())continue;f=!0}for(;f&&s&&(u||!h.type.isAnonymous)&&s(h),!h.nextSibling();){if(!h.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(n,s,o)=>new Tree(this.type,n,s,o,this.propValues),e.makeTree||((n,s,o)=>new Tree(NodeType.none,n,s,o)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,n,s){this.buffer=e,this.length=n,this.set=s}get type(){return NodeType.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],s=this.buffer[e+3],o=this.set.types[n],l=o.name;if(/\W/.test(l)&&!o.isError&&(l=JSON.stringify(l)),e+=4,s==e)return l;let c=[];for(;e<s;)c.push(this.childString(e)),e=this.buffer[e+3];return l+"("+c.join(",")+")"}findChild(e,n,s,o,l){let{buffer:c}=this,u=-1;for(let h=e;h!=n&&!(checkSide(l,o,c[h+1],c[h+2])&&(u=h,s>0));h=c[h+3]);return u}slice(e,n,s){let o=this.buffer,l=new Uint16Array(n-e),c=0;for(let u=e,h=0;u<n;){l[h++]=o[u++],l[h++]=o[u++]-s;let f=l[h++]=o[u++]-s;l[h++]=o[u++]-e,c=Math.max(c,f)}return new TreeBuffer(l,c,this.set)}}function checkSide(a,e,n,s){switch(a){case-2:return n<e;case-1:return s>=e&&n<e;case 0:return n<e&&s>e;case 1:return n<=e&&s>e;case 2:return s>e;case 4:return!0}}function resolveNode(a,e,n,s){for(var o;a.from==a.to||(n<1?a.from>=e:a.from>e)||(n>-1?a.to<=e:a.to<e);){let c=!s&&a instanceof TreeNode&&a.index<0?null:a.parent;if(!c)return a;a=c}let l=s?0:IterMode.IgnoreOverlays;if(s)for(let c=a,u=c.parent;u;c=u,u=c.parent)c instanceof TreeNode&&c.index<0&&((o=u.enter(e,n,l))===null||o===void 0?void 0:o.from)!=c.from&&(a=u);for(;;){let c=a.enter(e,n,l);if(!c)return a;a=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,n=null,s=null){let o=getChildren(this,e,n,s);return o.length?o[0]:null}getChildren(e,n=null,s=null){return getChildren(this,e,n,s)}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),s=this;for(;n;){let o=n.lastChild;if(!o||o.to!=n.to)break;o.type.isError&&o.from==o.to?(s=n,n=o.prevSibling):n=o}return s}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,n,s,o){super(),this._tree=e,this.from=n,this.index=s,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,s,o,l=0){for(let c=this;;){for(let{children:u,positions:h}=c._tree,f=n>0?u.length:-1;e!=f;e+=n){let d=u[e],p=h[e]+c.from;if(checkSide(o,s,p,p+d.length)){if(d instanceof TreeBuffer){if(l&IterMode.ExcludeBuffers)continue;let g=d.findChild(0,d.buffer.length,n,s-p,o);if(g>-1)return new BufferNode(new BufferContext(c,d,e,p),null,g)}else if(l&IterMode.IncludeAnonymous||!d.type.isAnonymous||hasChild(d)){let g;if(!(l&IterMode.IgnoreMounts)&&(g=MountedTree.get(d))&&!g.overlay)return new TreeNode(g.tree,p,e,c);let m=new TreeNode(d,p,e,c);return l&IterMode.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(n<0?d.children.length-1:0,n,s,o)}}}if(l&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+n:e=n<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,s=0){let o;if(!(s&IterMode.IgnoreOverlays)&&(o=MountedTree.get(this._tree))&&o.overlay){let l=e-this.from;for(let{from:c,to:u}of o.overlay)if((n>0?c<=l:c<l)&&(n<0?u>=l:u>l))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(a,e,n,s){let o=a.cursor(),l=[];if(!o.firstChild())return l;if(n!=null){for(let c=!1;!c;)if(c=o.type.is(n),!o.nextSibling())return l}for(;;){if(s!=null&&o.type.is(s))return l;if(o.type.is(e)&&l.push(o.node),!o.nextSibling())return s==null?l:[]}}function matchNodeContext(a,e,n=e.length-1){for(let s=a;n>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[n]&&e[n]!=s.name)return!1;n--}}return!0}class BufferContext{constructor(e,n,s,o){this.parent=e,this.buffer=n,this.index=s,this.start=o}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,s){super(),this.context=e,this._parent=n,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,n,s){let{buffer:o}=this.context,l=o.findChild(this.index+4,o.buffer[this.index+3],e,n-this.context.start,s);return l<0?null:new BufferNode(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,s=0){if(s&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,l=o.findChild(this.index+4,o.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return l<0?null:new BufferNode(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:s}=this.context,o=this.index+4,l=s.buffer[this.index+3];if(l>o){let c=s.buffer[this.index+1];e.push(s.slice(o,l,c)),n.push(0)}return new Tree(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(a){if(!a.length)return null;let e=0,n=a[0];for(let l=1;l<a.length;l++){let c=a[l];(c.from>n.from||c.to<n.to)&&(n=c,e=l)}let s=n instanceof TreeNode&&n.index<0?null:n.parent,o=a.slice();return s?o[e]=s:o.splice(e,1),new StackIterator(o,n)}class StackIterator{constructor(e,n){this.heads=e,this.node=n}get next(){return iterStack(this.heads)}}function stackIterator(a,e,n){let s=a.resolveInner(e,n),o=null;for(let l=s instanceof TreeNode?s:s.context.parent;l;l=l.parent)if(l.index<0){let c=l.parent;(o||(o=[s])).push(c.resolve(e,n)),l=c}else{let c=MountedTree.get(l.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let u=new TreeNode(c.tree,c.overlay[0].from+l.from,-1,l);(o||(o=[s])).push(resolveNode(u,e,n,!1))}}return o?iterStack(o):s}class TreeCursor{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:s,buffer:o}=this.buffer;return this.type=n||o.set.types[o.buffer[e]],this.from=s+o.buffer[e+1],this.to=s+o.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,s,this.mode));let{buffer:o}=this.buffer,l=o.findChild(this.index+4,o.buffer[this.index+3],e,n-this.buffer.start,s);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,s=this.mode){return this.buffer?s&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,s=this.stack.length-1;if(e<0){let o=s<0?0:this.stack[s]+4;if(this.index!=o)return this.yieldBuf(n.findChild(o,this.index,-1,0,4))}else{let o=n.buffer[this.index+3];if(o<(s<0?n.buffer.length:n.buffer[this.stack[s]+3]))return this.yieldBuf(o)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,s,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(o.buffer.buffer[l+3]<this.index)return!1;({index:n,parent:s}=o)}else({index:n,_parent:s}=this._tree);for(;s;{index:n,_parent:s}=s)if(n>-1)for(let l=n+e,c=e<0?-1:s._tree.children.length;l!=c;l+=e){let u=s._tree.children[l];if(this.mode&IterMode.IncludeAnonymous||u instanceof TreeBuffer||!u.type.isAnonymous||hasChild(u))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,s=0;if(e&&e.context==this.buffer)e:for(let o=this.index,l=this.stack.length;l>=0;){for(let c=e;c;c=c._parent)if(c.index==o){if(o==this.index)return c;n=c,s=l+1;break e}o=this.stack[--l]}for(let o=s;o<this.stack.length;o++)n=new BufferNode(this.buffer,n,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let s=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(o=!0)}for(;;){if(o&&n&&n(this),o=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,o=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:n}=this.buffer,{types:s}=n.set;for(let o=e.length-1,l=this.stack.length-1;o>=0;l--){if(l<0)return matchNodeContext(this._tree,e,o);let c=s[n.buffer[this.stack[l]]];if(!c.isAnonymous){if(e[o]&&e[o]!=c.name)return!1;o--}}return!0}}function hasChild(a){return a.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(a){var e;let{buffer:n,nodeSet:s,maxBufferLength:o=DefaultBufferLength,reused:l=[],minRepeatType:c=s.types.length}=a,u=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,h=s.types,f=0,d=0;function p(S,A,w,E,F,O){let{id:M,start:V,end:G,size:te}=u,ce=d,se=f;for(;te<0;)if(u.next(),te==-1){let _e=l[M];w.push(_e),E.push(V-S);return}else if(te==-3){f=M;return}else if(te==-4){d=M;return}else throw new RangeError(`Unrecognized record size: ${te}`);let le=h[M],fe,ge,xe=V-S;if(G-V<=o&&(ge=b(u.pos-A,F))){let _e=new Uint16Array(ge.size-ge.skip),Ce=u.pos-ge.size,ae=_e.length;for(;u.pos>Ce;)ae=x(ge.start,_e,ae);fe=new TreeBuffer(_e,G-ge.start,s),xe=ge.start-S}else{let _e=u.pos-te;u.next();let Ce=[],ae=[],B=M>=c?M:-1,I=0,q=G;for(;u.pos>_e;)B>=0&&u.id==B&&u.size>=0?(u.end<=q-o&&(y(Ce,ae,V,I,u.end,q,B,ce,se),I=Ce.length,q=u.end),u.next()):O>2500?g(V,_e,Ce,ae):p(V,_e,Ce,ae,B,O+1);if(B>=0&&I>0&&I<Ce.length&&y(Ce,ae,V,I,V,q,B,ce,se),Ce.reverse(),ae.reverse(),B>-1&&I>0){let K=m(le,se);fe=balanceRange(le,Ce,ae,0,Ce.length,0,G-V,K,K)}else fe=_(le,Ce,ae,G-V,ce-G,se)}w.push(fe),E.push(xe)}function g(S,A,w,E){let F=[],O=0,M=-1;for(;u.pos>A;){let{id:V,start:G,end:te,size:ce}=u;if(ce>4)u.next();else{if(M>-1&&G<M)break;M<0&&(M=te-o),F.push(V,G,te),O++,u.next()}}if(O){let V=new Uint16Array(O*4),G=F[F.length-2];for(let te=F.length-3,ce=0;te>=0;te-=3)V[ce++]=F[te],V[ce++]=F[te+1]-G,V[ce++]=F[te+2]-G,V[ce++]=ce;w.push(new TreeBuffer(V,F[2]-G,s)),E.push(G-S)}}function m(S,A){return(w,E,F)=>{let O=0,M=w.length-1,V,G;if(M>=0&&(V=w[M])instanceof Tree){if(!M&&V.type==S&&V.length==F)return V;(G=V.prop(NodeProp.lookAhead))&&(O=E[M]+V.length+G)}return _(S,w,E,F,O,A)}}function y(S,A,w,E,F,O,M,V,G){let te=[],ce=[];for(;S.length>E;)te.push(S.pop()),ce.push(A.pop()+w-F);S.push(_(s.types[M],te,ce,O-F,V-O,G)),A.push(F-w)}function _(S,A,w,E,F,O,M){if(O){let V=[NodeProp.contextHash,O];M=M?[V].concat(M):[V]}if(F>25){let V=[NodeProp.lookAhead,F];M=M?[V].concat(M):[V]}return new Tree(S,A,w,E,M)}function b(S,A){let w=u.fork(),E=0,F=0,O=0,M=w.end-o,V={size:0,start:0,skip:0};e:for(let G=w.pos-S;w.pos>G;){let te=w.size;if(w.id==A&&te>=0){V.size=E,V.start=F,V.skip=O,O+=4,E+=4,w.next();continue}let ce=w.pos-te;if(te<0||ce<G||w.start<M)break;let se=w.id>=c?4:0,le=w.start;for(w.next();w.pos>ce;){if(w.size<0)if(w.size==-3)se+=4;else break e;else w.id>=c&&(se+=4);w.next()}F=le,E+=te,O+=se}return(A<0||E==S)&&(V.size=E,V.start=F,V.skip=O),V.size>4?V:void 0}function x(S,A,w){let{id:E,start:F,end:O,size:M}=u;if(u.next(),M>=0&&E<c){let V=w;if(M>4){let G=u.pos-(M-4);for(;u.pos>G;)w=x(S,A,w)}A[--w]=V,A[--w]=O-S,A[--w]=F-S,A[--w]=E}else M==-3?f=E:M==-4&&(d=E);return w}let P=[],T=[];for(;u.pos>0;)p(a.start||0,a.bufferStart||0,P,T,-1,0);let k=(e=a.length)!==null&&e!==void 0?e:P.length?T[0]+P[0].length:0;return new Tree(h[a.topID],P.reverse(),T.reverse(),k)}const nodeSizeCache=new WeakMap;function nodeSize(a,e){if(!a.isAnonymous||e instanceof TreeBuffer||e.type!=a)return 1;let n=nodeSizeCache.get(e);if(n==null){n=1;for(let s of e.children){if(s.type!=a||!(s instanceof Tree)){n=1;break}n+=nodeSize(a,s)}nodeSizeCache.set(e,n)}return n}function balanceRange(a,e,n,s,o,l,c,u,h){let f=0;for(let y=s;y<o;y++)f+=nodeSize(a,e[y]);let d=Math.ceil(f*1.5/8),p=[],g=[];function m(y,_,b,x,P){for(let T=b;T<x;){let k=T,S=_[T],A=nodeSize(a,y[T]);for(T++;T<x;T++){let w=nodeSize(a,y[T]);if(A+w>=d)break;A+=w}if(T==k+1){if(A>d){let w=y[k];m(w.children,w.positions,0,w.children.length,_[k]+P);continue}p.push(y[k])}else{let w=_[T-1]+y[T-1].length-S;p.push(balanceRange(a,y,_,k,T,S,w,null,h))}g.push(S+P-l)}}return m(e,n,s,o,0),(u||h)(p,g,c)}class TreeFragment{constructor(e,n,s,o,l=!1,c=!1){this.from=e,this.to=n,this.tree=s,this.offset=o,this.open=(l?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],s=!1){let o=[new TreeFragment(0,e.length,e,0,!1,s)];for(let l of n)l.to>e.length&&o.push(l);return o}static applyChanges(e,n,s=128){if(!n.length)return e;let o=[],l=1,c=e.length?e[0]:null;for(let u=0,h=0,f=0;;u++){let d=u<n.length?n[u]:null,p=d?d.fromA:1e9;if(p-h>=s)for(;c&&c.from<p;){let g=c;if(h>=g.from||p<=g.to||f){let m=Math.max(g.from,h)-f,y=Math.min(g.to,p)-f;g=m>=y?null:new TreeFragment(m,y,g.tree,g.offset+f,u>0,!!d)}if(g&&o.push(g),c.to>p)break;c=l<e.length?e[l++]:null}if(!d)break;h=d.toA,f=d.toA-d.toB}return o}}class Parser{startParse(e,n,s){return typeof e=="string"&&(e=new StringInput(e)),s=s?s.length?s.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,n||[],s)}parse(e,n,s){let o=this.startParse(e,n,s);for(;;){let l=o.advance();if(l)return l}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,n,s,o){this.name=e,this.set=n,this.base=s,this.modified=o,this.id=nextTagID++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let s=typeof e=="string"?e:"?";if(e instanceof Tag&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let o=new Tag(s,[],null,[]);if(o.set.push(o),n)for(let l of n.set)o.set.push(l);return o}static defineModifier(e){let n=new Modifier(e);return s=>s.modified.indexOf(n)>-1?s:Modifier.get(s.base||s,s.modified.concat(n).sort((o,l)=>o.id-l.id))}}let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,n){if(!n.length)return e;let s=n[0].instances.find(u=>u.base==e&&sameArray(n,u.modified));if(s)return s;let o=[],l=new Tag(e.name,o,e,n);for(let u of n)u.instances.push(l);let c=powerSet(n);for(let u of e.set)if(!u.modified.length)for(let h of c)o.push(Modifier.get(u,h));return l}}function sameArray(a,e){return a.length==e.length&&a.every((n,s)=>n==e[s])}function powerSet(a){let e=[[]];for(let n=0;n<a.length;n++)for(let s=0,o=e.length;s<o;s++)e.push(e[s].concat(a[n]));return e.sort((n,s)=>s.length-n.length)}function styleTags(a){let e=Object.create(null);for(let n in a){let s=a[n];Array.isArray(s)||(s=[s]);for(let o of n.split(" "))if(o){let l=[],c=2,u=o;for(let p=0;;){if(u=="..."&&p>0&&p+3==o.length){c=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!g)throw new RangeError("Invalid path: "+o);if(l.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==o.length)break;let m=o[p++];if(p==o.length&&m=="!"){c=0;break}if(m!="/")throw new RangeError("Invalid path: "+o);u=o.slice(p)}let h=l.length-1,f=l[h];if(!f)throw new RangeError("Invalid path: "+o);let d=new Rule(s,c,h>0?l.slice(0,h):null);e[f]=d.sort(e[f])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,n,s,o){this.tags=e,this.mode=n,this.context=s,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(a,e){let n=Object.create(null);for(let l of a)if(!Array.isArray(l.tag))n[l.tag.id]=l.class;else for(let c of l.tag)n[c.id]=l.class;let{scope:s,all:o=null}=e||{};return{style:l=>{let c=o;for(let u of l)for(let h of u.set){let f=n[h.id];if(f){c=c?c+" "+f:f;break}}return c},scope:s}}function highlightTags(a,e){let n=null;for(let s of a){let o=s.style(e);o&&(n=n?n+" "+o:o)}return n}function highlightTree(a,e,n,s=0,o=a.length){let l=new HighlightBuilder(s,Array.isArray(e)?e:[e],n);l.highlightRange(a.cursor(),s,o,"",l.highlighters),l.flush(o)}class HighlightBuilder{constructor(e,n,s){this.at=e,this.highlighters=n,this.span=s,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,s,o,l){let{type:c,from:u,to:h}=e;if(u>=s||h<=n)return;c.isTop&&(l=this.highlighters.filter(m=>!m.scope||m.scope(c)));let f=o,d=getStyleTags(e)||Rule.empty,p=highlightTags(l,d.tags);if(p&&(f&&(f+=" "),f+=p,d.mode==1&&(o+=(o?" ":"")+p)),this.startSpan(Math.max(n,u),f),d.opaque)return;let g=e.tree&&e.tree.prop(NodeProp.mounted);if(g&&g.overlay){let m=e.node.enter(g.overlay[0].from+u,1),y=this.highlighters.filter(b=>!b.scope||b.scope(g.tree.type)),_=e.firstChild();for(let b=0,x=u;;b++){let P=b<g.overlay.length?g.overlay[b]:null,T=P?P.from+u:h,k=Math.max(n,x),S=Math.min(s,T);if(k<S&&_)for(;e.from<S&&(this.highlightRange(e,k,S,o,l),this.startSpan(Math.min(S,e.to),f),!(e.to>=T||!e.nextSibling())););if(!P||T>s)break;x=P.to+u,x>n&&(this.highlightRange(m.cursor(),Math.max(n,P.from+u),Math.min(s,x),"",y),this.startSpan(Math.min(s,x),f))}_&&e.parent()}else if(e.firstChild()){g&&(o="");do if(!(e.to<=n)){if(e.from>=s)break;this.highlightRange(e,n,s,o,l),this.startSpan(Math.min(s,e.to),f)}while(e.nextSibling());e.parent()}}}function getStyleTags(a){let e=a.type.prop(ruleNodeProp);for(;e&&e.context&&!a.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let a in tags){let e=tags[a];e instanceof Tag&&(e.name=a)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp,sublanguageProp=new NodeProp;class Language{constructor(e,n,s=[],o=""){this.data=e,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=n,this.extension=[language.of(this),EditorState.languageData.of((l,c,u)=>{let h=topNodeAt(l,c,u),f=h.type.prop(languageDataProp);if(!f)return[];let d=l.facet(f),p=h.type.prop(sublanguageProp);if(p){let g=h.resolve(c-h.from,u);for(let m of p)if(m.test(g,l)){let y=l.facet(m.facet);return m.type=="replace"?y:y.concat(d)}}return d})].concat(s)}isActiveAt(e,n,s=-1){return topNodeAt(e,n,s).type.prop(languageDataProp)==this.data}findRegions(e){let n=e.facet(language);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let s=[],o=(l,c)=>{if(l.prop(languageDataProp)==this.data){s.push({from:c,to:c+l.length});return}let u=l.prop(NodeProp.mounted);if(u){if(u.tree.prop(languageDataProp)==this.data){if(u.overlay)for(let h of u.overlay)s.push({from:h.from+c,to:h.to+c});else s.push({from:c,to:c+l.length});return}else if(u.overlay){let h=s.length;if(o(u.tree,u.overlay[0].from+c),s.length>h)return}}for(let h=0;h<l.children.length;h++){let f=l.children[h];f instanceof Tree&&o(f,l.positions[h]+c)}};return o(syntaxTree(e),0),s}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(a,e,n){let s=a.facet(language),o=syntaxTree(a).topNode;if(!s||s.allowsNesting)for(let l=o;l;l=l.enter(e,n,IterMode.ExcludeBuffers))l.type.isTop&&(o=l);return o}function syntaxTree(a){let e=a.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let s=this.cursorPos-this.string.length;return e<s||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-s,n-s)}}let currentContext=null;class ParseContext{constructor(e,n,s=[],o,l,c,u,h){this.parser=e,this.state=n,this.fragments=s,this.tree=o,this.treeLen=l,this.viewport=c,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,n,s){return new ParseContext(e,n,[],Tree.empty,0,s,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Tree.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=currentContext;currentContext=this;try{return e()}finally{currentContext=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cutFragments(e,n.from,n.to);return e}changes(e,n){let{fragments:s,tree:o,treeLen:l,viewport:c,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((f,d,p,g)=>h.push({fromA:f,toA:d,fromB:p,toB:g})),s=TreeFragment.applyChanges(s,h),o=Tree.empty,l=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){u=[];for(let f of this.skipped){let d=e.mapPos(f.from,1),p=e.mapPos(f.to,-1);d<p&&u.push({from:d,to:p})}}}return new ParseContext(this.parser,n,s,o,l,c,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:o,to:l}=this.skipped[s];o<e.to&&l>e.from&&(this.fragments=cutFragments(this.fragments,o,l),this.skipped.splice(s--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Parser{createParse(n,s,o){let l=o[0].from,c=o[o.length-1].to;return{parsedPos:l,advance(){let h=currentContext;if(h){for(let f of o)h.tempSkipped.push(f);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=c,new Tree(NodeType.none,[],[],c-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return currentContext}}function cutFragments(a,e,n){return TreeFragment.applyChanges(a,[{fromA:e,toA:n,fromB:e,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,s)||n.takeTree(),new LanguageState(n)}static init(e){let n=Math.min(3e3,e.doc.length),s=ParseContext.create(e.facet(language).parser,e,{from:0,to:n});return s.work(20,n)||s.takeTree(),new LanguageState(s)}}Language.state=StateField.define({create:LanguageState.init,update(a,e){for(let n of e.effects)if(n.is(Language.setState))return n.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):a.apply(e)}});let requestIdle=a=>{let e=setTimeout(()=>a(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=a=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(a,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Language.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Language.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:o}}=this.view,l=s.field(Language.state);if(l.tree==l.context.tree&&l.context.isDone(o+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<o&&s.doc.length>o+1e3,h=l.context.work(()=>isInputPending&&isInputPending()||Date.now()>c,o+(u?0:1e5));this.chunkBudget-=Date.now()-n,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(l.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>logException(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(a){return a.length?a[0]:null},enables:a=>[Language.state,parseWorker,EditorView.contentAttributes.compute([a],e=>{let n=e.facet(a);return n&&n.name?{"data-language":n.name}:{}})]}),indentService=Facet.define(),indentUnit=Facet.define({combine:a=>{if(!a.length)return"  ";let e=a[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(a[0]));return e}});function getIndentUnit(a){let e=a.facet(indentUnit);return e.charCodeAt(0)==9?a.tabSize*e.length:e.length}function indentString(a,e){let n="",s=a.tabSize,o=a.facet(indentUnit)[0];if(o=="	"){for(;e>=s;)n+="	",e-=s;o=" "}for(let l=0;l<e;l++)n+=o;return n}function getIndentation(a,e){a instanceof EditorState&&(a=new IndentContext(a));for(let s of a.state.facet(indentService)){let o=s(a,e);if(o!==void 0)return o}let n=syntaxTree(a.state);return n.length>=e?syntaxIndentation(a,n,e):null}class IndentContext{constructor(e,n={}){this.state=e,this.options=n,this.unit=getIndentUnit(e)}lineAt(e,n=1){let s=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:l}=this.options;return o!=null&&o>=s.from&&o<=s.to?l&&o==e?{text:"",from:e}:(n<0?o<e:o<=e)?{text:s.text.slice(o-s.from),from:o}:{text:s.text.slice(0,o-s.from),from:s.from}:s}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:o}=this.lineAt(e,n);return s.slice(e-o,Math.min(s.length,e+100-o))}column(e,n=1){let{text:s,from:o}=this.lineAt(e,n),l=this.countColumn(s,e-o),c=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return c>-1&&(l+=c-this.countColumn(s,s.search(/\S|$/))),l}countColumn(e,n=e.length){return countColumn(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:s,from:o}=this.lineAt(e,n),l=this.options.overrideIndentation;if(l){let c=l(o);if(c>-1)return c}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(a,e,n){let s=e.resolveStack(n),o=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(o!=s.node){let l=[];for(let c=o;c&&!(c.from==s.node.from&&c.type==s.node.type);c=c.parent)l.push(c);for(let c=l.length-1;c>=0;c--)s={node:l[c],next:s}}return indentFor(s,a,n)}function indentFor(a,e,n){for(let s=a;s;s=s.next){let o=indentStrategy(s.node);if(o)return o(TreeIndentContext.create(e,n,s))}return 0}function ignoreClosed(a){return a.pos==a.options.simulateBreak&&a.options.simulateDoubleBreak}function indentStrategy(a){let e=a.type.prop(indentNodeProp);if(e)return e;let n=a.firstChild,s;if(n&&(s=n.type.prop(NodeProp.closedBy))){let o=a.lastChild,l=o&&s.indexOf(o.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,l&&!ignoreClosed(c)?o.from:void 0)}return a.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,n,s){super(e.state,e.options),this.base=e,this.pos=n,this.context=s}get node(){return this.context.node}static create(e,n,s){return new TreeIndentContext(e,n,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(n.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(isParent(s,e))break;n=this.state.doc.lineAt(s.from)}return this.lineIndent(n.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(a,e){for(let n=e;n;n=n.parent)if(a==n)return!0;return!1}function bracketedAligned(a){let e=a.node,n=e.childAfter(e.from),s=e.lastChild;if(!n)return null;let o=a.options.simulateBreak,l=a.state.doc.lineAt(n.from),c=o==null||o<=l.from?l.to:Math.min(l.to,o);for(let u=n.to;;){let h=e.childAfter(u);if(!h||h==s)return null;if(!h.type.isSkipped){if(h.from>=c)return null;let f=/^ */.exec(l.text.slice(n.to-l.from))[0].length;return{from:n.from,to:n.to+f}}u=h.to}}function delimitedStrategy(a,e,n,s,o){let l=a.textAfter,c=l.match(/^\s*/)[0].length,u=o==a.pos+c,h=bracketedAligned(a);return h?u?a.column(h.from):a.column(h.to):a.baseIndent+(u?0:a.unit*n)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(a=>{if(!a.docChanged||!a.isUserEvent("input.type")&&!a.isUserEvent("input.complete"))return a;let e=a.startState.languageDataAt("indentOnInput",a.startState.selection.main.head);if(!e.length)return a;let n=a.newDoc,{head:s}=a.newSelection.main,o=n.lineAt(s);if(s>o.from+DontIndentBeyond)return a;let l=n.sliceString(o.from,s);if(!e.some(f=>f.test(l)))return a;let{state:c}=a,u=-1,h=[];for(let{head:f}of c.selection.ranges){let d=c.doc.lineAt(f);if(d.from==u)continue;u=d.from;let p=getIndentation(c,d.from);if(p==null)continue;let g=/^\s*/.exec(d.text)[0],m=indentString(c,p);g!=m&&h.push({from:d.from,to:d.from+g.length,insert:m})}return h.length?[a,{changes:h,sequential:!0}]:a})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function syntaxFolding(a,e,n){let s=syntaxTree(a);if(s.length<n)return null;let o=s.resolveStack(n,1),l=null;for(let c=o;c;c=c.next){let u=c.node;if(u.to<=n||u.from>n)continue;if(l&&u.from<e)break;let h=u.type.prop(foldNodeProp);if(h&&(u.to<s.length-50||s.length==a.doc.length||!isUnfinished(u))){let f=h(u,a);f&&f.from<=n&&f.from>=e&&f.to>n&&(l=f)}}return l}function isUnfinished(a){let e=a.lastChild;return e&&e.to==a.to&&e.type.isError}function foldable(a,e,n){for(let s of a.facet(foldService)){let o=s(a,e,n);if(o)return o}return syntaxFolding(a,e,n)}function mapRange(a,e){let n=e.mapPos(a.from,1),s=e.mapPos(a.to,-1);return n>=s?void 0:{from:n,to:s}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(a){let e=[];for(let{head:n}of a.state.selection.ranges)e.some(s=>s.from<=n&&s.to>=n)||e.push(a.lineBlockAt(n));return e}const foldState=StateField.define({create(){return Decoration.none},update(a,e){a=a.map(e.changes);for(let n of e.effects)if(n.is(foldEffect)&&!foldExists(a,n.value.from,n.value.to)){let{preparePlaceholder:s}=e.state.facet(foldConfig),o=s?Decoration.replace({widget:new PreparedFoldWidget(s(e.state,n.value))}):foldWidget;a=a.update({add:[o.range(n.value.from,n.value.to)]})}else n.is(unfoldEffect)&&(a=a.update({filter:(s,o)=>n.value.from!=s||n.value.to!=o,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:s}=e.selection.main;a.between(s,s,(o,l)=>{o<s&&l>s&&(n=!0)}),n&&(a=a.update({filterFrom:s,filterTo:s,filter:(o,l)=>l<=s||o>=s}))}return a},provide:a=>EditorView.decorations.from(a),toJSON(a,e){let n=[];return a.between(0,e.doc.length,(s,o)=>{n.push(s,o)}),n},fromJSON(a){if(!Array.isArray(a)||a.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<a.length;){let s=a[n++],o=a[n++];if(typeof s!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(s,o))}return Decoration.set(e,!0)}});function findFold(a,e,n){var s;let o=null;return(s=a.field(foldState,!1))===null||s===void 0||s.between(e,n,(l,c)=>{(!o||o.from>l)&&(o={from:l,to:c})}),o}function foldExists(a,e,n){let s=!1;return a.between(e,e,(o,l)=>{o==e&&l==n&&(s=!0)}),s}function maybeEnable(a,e){return a.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=a=>{for(let e of selectedLines(a)){let n=foldable(a.state,e.from,e.to);if(n)return a.dispatch({effects:maybeEnable(a.state,[foldEffect.of(n),announceFold(a,n)])}),!0}return!1},unfoldCode=a=>{if(!a.state.field(foldState,!1))return!1;let e=[];for(let n of selectedLines(a)){let s=findFold(a.state,n.from,n.to);s&&e.push(unfoldEffect.of(s),announceFold(a,s,!1))}return e.length&&a.dispatch({effects:e}),e.length>0};function announceFold(a,e,n=!0){let s=a.state.doc.lineAt(e.from).number,o=a.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${a.state.phrase(n?"Folded lines":"Unfolded lines")} ${s} ${a.state.phrase("to")} ${o}.`)}const foldAll=a=>{let{state:e}=a,n=[];for(let s=0;s<e.doc.length;){let o=a.lineBlockAt(s),l=foldable(e,o.from,o.to);l&&n.push(foldEffect.of(l)),s=(l?a.lineBlockAt(l.to):o).to+1}return n.length&&a.dispatch({effects:maybeEnable(a.state,n)}),!!n.length},unfoldAll=a=>{let e=a.state.field(foldState,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,a.state.doc.length,(s,o)=>{n.push(unfoldEffect.of({from:s,to:o}))}),a.dispatch({effects:n}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine(a){return combineConfig(a,defaultConfig)}});function codeFolding(a){return[foldState,baseTheme$1$2]}function widgetToDOM(a,e){let{state:n}=a,s=n.facet(foldConfig),o=c=>{let u=a.lineBlockAt(a.posAtDOM(c.target)),h=findFold(a.state,u.from,u.to);h&&a.dispatch({effects:unfoldEffect.of(h)}),c.preventDefault()};if(s.placeholderDOM)return s.placeholderDOM(a,o,e);let l=document.createElement("span");return l.textContent=s.placeholderText,l.setAttribute("aria-label",n.phrase("folded code")),l.title=n.phrase("unfold"),l.className="cm-foldPlaceholder",l.onclick=o,l}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(a){return widgetToDOM(a,null)}}});class PreparedFoldWidget extends WidgetType{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return widgetToDOM(e,this.value)}}const foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function foldGutter(a={}){let e=Object.assign(Object.assign({},foldGutterDefaults),a),n=new FoldMarker(e,!0),s=new FoldMarker(e,!1),o=ViewPlugin.fromClass(class{constructor(c){this.from=c.viewport.from,this.markers=this.buildMarkers(c)}update(c){(c.docChanged||c.viewportChanged||c.startState.facet(language)!=c.state.facet(language)||c.startState.field(foldState,!1)!=c.state.field(foldState,!1)||syntaxTree(c.startState)!=syntaxTree(c.state)||e.foldingChanged(c))&&(this.markers=this.buildMarkers(c.view))}buildMarkers(c){let u=new RangeSetBuilder;for(let h of c.viewportLineBlocks){let f=findFold(c.state,h.from,h.to)?s:foldable(c.state,h.from,h.to)?n:null;f&&u.add(h.from,h.from,f)}return u.finish()}}),{domEventHandlers:l}=e;return[o,gutter({class:"cm-foldGutter",markers(c){var u;return((u=c.plugin(o))===null||u===void 0?void 0:u.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(e,!1)},domEventHandlers:Object.assign(Object.assign({},l),{click:(c,u,h)=>{if(l.click&&l.click(c,u,h))return!0;let f=findFold(c.state,u.from,u.to);if(f)return c.dispatch({effects:unfoldEffect.of(f)}),!0;let d=foldable(c.state,u.from,u.to);return d?(c.dispatch({effects:foldEffect.of(d)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,n){this.specs=e;let s;function o(u){let h=StyleModule.newName();return(s||(s=Object.create(null)))["."+h]=u,h}const l=typeof n.all=="string"?n.all:n.all?o(n.all):void 0,c=n.scope;this.scope=c instanceof Language?u=>u.prop(languageDataProp)==c.data:c?u=>u==c:void 0,this.style=tagHighlighter(e.map(u=>({tag:u.tag,class:u.class||o(Object.assign({},u,{tag:null}))})),{all:l}).style,this.module=s?new StyleModule(s):null,this.themeType=n.themeType}static define(e,n){return new HighlightStyle(e,n||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(a){return a.length?[a[0]]:null}});function getHighlighters(a){let e=a.facet(highlighterFacet);return e.length?e:a.facet(fallbackHighlighter)}function syntaxHighlighting(a,e){let n=[treeHighlighter],s;return a instanceof HighlightStyle&&(a.module&&n.push(EditorView.styleModule.of(a.module)),s=a.themeType),e!=null&&e.fallback?n.push(fallbackHighlighter.of(a)):s?n.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(s=="dark")?[a]:[])):n.push(highlighterFacet.of(a)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=syntaxTree(e.state),s=getHighlighters(e.state),o=s!=getHighlighters(e.startState),{viewport:l}=e.view,c=e.changes.mapPos(this.decoratedTo,1);n.length<l.to&&!o&&n.type==this.tree.type&&c>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(n!=this.tree||e.viewportChanged||o)&&(this.tree=n,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=l.to)}buildDeco(e,n){if(!n||!this.tree.length)return Decoration.none;let s=new RangeSetBuilder;for(let{from:o,to:l}of e.visibleRanges)highlightTree(this.tree,n,(c,u,h)=>{s.add(c,u,this.markCache[h]||(this.markCache[h]=Decoration.mark({class:h})))},o,l);return s.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:a=>a.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(a){return combineConfig(a,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(a){let e=[],n=a.matched?matchingMark:nonmatchingMark;return e.push(n.range(a.start.from,a.start.to)),a.end&&e.push(n.range(a.end.from,a.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(a,e){if(!e.docChanged&&!e.selection)return a;let n=[],s=e.state.facet(bracketMatchingConfig);for(let o of e.state.selection.ranges){if(!o.empty)continue;let l=matchBrackets(e.state,o.head,-1,s)||o.head>0&&matchBrackets(e.state,o.head-1,1,s)||s.afterCursor&&(matchBrackets(e.state,o.head,1,s)||o.head<e.state.doc.length&&matchBrackets(e.state,o.head+1,-1,s));l&&(n=n.concat(s.renderMatch(l,e.state)))}return Decoration.set(n,!0)},provide:a=>EditorView.decorations.from(a)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(a={}){return[bracketMatchingConfig.of(a),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(a,e,n){let s=a.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(s)return s;if(a.name.length==1){let o=n.indexOf(a.name);if(o>-1&&o%2==(e<0?1:0))return[n[o+e]]}return null}function findHandle(a){let e=a.type.prop(bracketMatchingHandle);return e?e(a.node):a}function matchBrackets(a,e,n,s={}){let o=s.maxScanDistance||DefaultScanDist,l=s.brackets||DefaultBrackets,c=syntaxTree(a),u=c.resolveInner(e,n);for(let h=u;h;h=h.parent){let f=matchingNodes(h.type,n,l);if(f&&h.from<h.to){let d=findHandle(h);if(d&&(n>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return matchMarkedBrackets(a,e,n,h,d,f,l)}}return matchPlainBrackets(a,e,n,c,u.type,o,l)}function matchMarkedBrackets(a,e,n,s,o,l,c){let u=s.parent,h={from:o.from,to:o.to},f=0,d=u==null?void 0:u.cursor();if(d&&(n<0?d.childBefore(s.from):d.childAfter(s.to)))do if(n<0?d.to<=s.from:d.from>=s.to){if(f==0&&l.indexOf(d.type.name)>-1&&d.from<d.to){let p=findHandle(d);return{start:h,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(matchingNodes(d.type,n,c))f++;else if(matchingNodes(d.type,-n,c)){if(f==0){let p=findHandle(d);return{start:h,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}f--}}while(n<0?d.prevSibling():d.nextSibling());return{start:h,matched:!1}}function matchPlainBrackets(a,e,n,s,o,l,c){let u=n<0?a.sliceDoc(e-1,e):a.sliceDoc(e,e+1),h=c.indexOf(u);if(h<0||h%2==0!=n>0)return null;let f={from:n<0?e-1:e,to:n>0?e+1:e},d=a.doc.iterRange(e,n>0?a.doc.length:0),p=0;for(let g=0;!d.next().done&&g<=l;){let m=d.value;n<0&&(g+=m.length);let y=e+g*n;for(let _=n>0?0:m.length-1,b=n>0?m.length:-1;_!=b;_+=n){let x=c.indexOf(m[_]);if(!(x<0||s.resolveInner(y+_,1).type!=o))if(x%2==0==n>0)p++;else{if(p==1)return{start:f,end:{from:y+_,to:y+_+1},matched:x>>1==h>>1};p--}}n>0&&(g+=m.length)}return d.done?{start:f,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[a,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[a]=createTokenType(noTokens,e);function warnForPart(a,e){warned.indexOf(a)>-1||(warned.push(a),console.warn(e))}function createTokenType(a,e){let n=[];for(let u of e.split(" ")){let h=[];for(let f of u.split(".")){let d=a[f]||tags[f];d?typeof d=="function"?h.length?h=h.map(d):warnForPart(f,`Modifier ${f} used at start of tag`):h.length?warnForPart(f,`Tag ${f} used as modifier`):h=Array.isArray(d)?d:[d]:warnForPart(f,`Unknown highlighting tag ${f}`)}for(let f of h)n.push(f)}if(!n.length)return 0;let s=e.replace(/ /g,"_"),o=s+" "+n.map(u=>u.id),l=byTag[o];if(l)return l.id;let c=byTag[o]=NodeType.define({id:typeArray.length,name:s,props:[styleTags({[s]:n})]});return typeArray.push(c),c.id}Direction.RTL,Direction.LTR;const toggleComment=a=>{let{state:e}=a,n=e.doc.lineAt(e.selection.main.from),s=getConfig(a.state,n.from);return s.line?toggleLineComment(a):s.block?toggleBlockCommentByLine(a):!1};function command(a,e){return({state:n,dispatch:s})=>{if(n.readOnly)return!1;let o=a(e,n);return o?(s(n.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((a,e)=>changeBlockComment(a,e,selectedLineRanges(e)),0);function getConfig(a,e){let n=a.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(a,{open:e,close:n},s,o){let l=a.sliceDoc(s-SearchMargin,s),c=a.sliceDoc(o,o+SearchMargin),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,f=l.length-u;if(l.slice(f-e.length,f)==e&&c.slice(h,h+n.length)==n)return{open:{pos:s-u,margin:u&&1},close:{pos:o+h,margin:h&&1}};let d,p;o-s<=2*SearchMargin?d=p=a.sliceDoc(s,o):(d=a.sliceDoc(s,s+SearchMargin),p=a.sliceDoc(o-SearchMargin,o));let g=/^\s*/.exec(d)[0].length,m=/\s*$/.exec(p)[0].length,y=p.length-m-n.length;return d.slice(g,g+e.length)==e&&p.slice(y,y+n.length)==n?{open:{pos:s+g+e.length,margin:/\s/.test(d.charAt(g+e.length))?1:0},close:{pos:o-m-n.length,margin:/\s/.test(p.charAt(y-1))?1:0}}:null}function selectedLineRanges(a){let e=[];for(let n of a.selection.ranges){let s=a.doc.lineAt(n.from),o=n.to<=s.to?s:a.doc.lineAt(n.to);o.from>s.from&&o.from==n.to&&(o=n.to==s.to+1?s:a.doc.lineAt(n.to-1));let l=e.length-1;l>=0&&e[l].to>s.from?e[l].to=o.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:o.to})}return e}function changeBlockComment(a,e,n=e.selection.ranges){let s=n.map(l=>getConfig(e,l.from).block);if(!s.every(l=>l))return null;let o=n.map((l,c)=>findBlockComment(e,s[c],l.from,l.to));if(a!=2&&!o.every(l=>l))return{changes:e.changes(n.map((l,c)=>o[c]?[]:[{from:l.from,insert:s[c].open+" "},{from:l.to,insert:" "+s[c].close}]))};if(a!=1&&o.some(l=>l)){let l=[];for(let c=0,u;c<o.length;c++)if(u=o[c]){let h=s[c],{open:f,close:d}=u;l.push({from:f.pos-h.open.length,to:f.pos+f.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:l}}return null}function changeLineComment(a,e,n=e.selection.ranges){let s=[],o=-1;for(let{from:l,to:c}of n){let u=s.length,h=1e9,f=getConfig(e,l).line;if(f){for(let d=l;d<=c;){let p=e.doc.lineAt(d);if(p.from>o&&(l==c||c>p.from)){o=p.from;let g=/^\s*/.exec(p.text)[0].length,m=g==p.length,y=p.text.slice(g,g+f.length)==f?g:-1;g<p.text.length&&g<h&&(h=g),s.push({line:p,comment:y,token:f,indent:g,empty:m,single:!1})}d=p.to+1}if(h<1e9)for(let d=u;d<s.length;d++)s[d].indent<s[d].line.text.length&&(s[d].indent=h);s.length==u+1&&(s[u].single=!0)}}if(a!=2&&s.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:u,token:h,indent:f,empty:d,single:p}of s)(p||!d)&&l.push({from:u.from+f,insert:h+" "});let c=e.changes(l);return{changes:c,selection:e.selection.map(c,1)}}else if(a!=1&&s.some(l=>l.comment>=0)){let l=[];for(let{line:c,comment:u,token:h}of s)if(u>=0){let f=c.from+u,d=f+h.length;c.text[d-c.from]==" "&&d++,l.push({from:f,to:d})}return{changes:l}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(a){return combineConfig(a,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(s,o)=>e(s,o)||n(s,o)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(a,e){let n=e.state.facet(historyConfig),s=e.annotation(fromHistory);if(s){let h=HistEvent.fromTransaction(e,s.selection),f=s.side,d=f==0?a.undone:a.done;return h?d=updateBranch(d,d.length,n.minDepth,h):d=addSelection(d,e.startState.selection),new HistoryState(f==0?s.rest:d,f==0?d:s.rest)}let o=e.annotation(isolateHistory);if((o=="full"||o=="before")&&(a=a.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?a:a.addMapping(e.changes.desc);let l=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),u=e.annotation(Transaction.userEvent);return l?a=a.addChanges(l,c,u,n,e):e.selection&&(a=a.addSelection(e.startState.selection,c,u,n.newGroupDelay)),(o=="full"||o=="after")&&(a=a.isolate()),a},toJSON(a){return{done:a.done.map(e=>e.toJSON()),undone:a.undone.map(e=>e.toJSON())}},fromJSON(a){return new HistoryState(a.done.map(HistEvent.fromJSON),a.undone.map(HistEvent.fromJSON))}});function history(a={}){return[historyField_,historyConfig.of(a),EditorView.domEventHandlers({beforeinput(e,n){let s=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return s?(e.preventDefault(),s(n)):!1}})]}function cmd(a,e){return function({state:n,dispatch:s}){if(!e&&n.readOnly)return!1;let o=n.field(historyField_,!1);if(!o)return!1;let l=o.pop(a,n,e);return l?(s(l),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,n,s,o,l){this.changes=e,this.effects=n,this.mapped=s,this.startSelection=o,this.selectionsAfter=l}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,n){let s=none$1;for(let o of e.startState.facet(invertedEffects)){let l=o(e);l.length&&(s=s.concat(l))}return!s.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),s,void 0,n||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(a,e,n,s){let o=e+1>n+20?e-n-1:0,l=a.slice(o,e);return l.push(s),l}function isAdjacent(a,e){let n=[],s=!1;return a.iterChangedRanges((o,l)=>n.push(o,l)),e.iterChangedRanges((o,l,c,u)=>{for(let h=0;h<n.length;){let f=n[h++],d=n[h++];u>=f&&c<=d&&(s=!0)}}),s}function eqSelectionShape(a,e){return a.ranges.length==e.ranges.length&&a.ranges.filter((n,s)=>n.empty!=e.ranges[s].empty).length===0}function conc(a,e){return a.length?e.length?a.concat(e):a:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(a,e){if(a.length){let n=a[a.length-1],s=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return s.length&&s[s.length-1].eq(e)?a:(s.push(e),updateBranch(a,a.length-1,1e9,n.setSelAfter(s)))}else return[HistEvent.selection([e])]}function popSelection(a){let e=a[a.length-1],n=a.slice();return n[a.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function addMappingToBranch(a,e){if(!a.length)return a;let n=a.length,s=none$1;for(;n;){let o=mapEvent(a[n-1],e,s);if(o.changes&&!o.changes.empty||o.effects.length){let l=a.slice(0,n);return l[n-1]=o,l}else e=o.mapped,n--,s=o.selectionsAfter}return s.length?[HistEvent.selection(s)]:none$1}function mapEvent(a,e,n){let s=conc(a.selectionsAfter.length?a.selectionsAfter.map(u=>u.map(e)):none$1,n);if(!a.changes)return HistEvent.selection(s);let o=a.changes.map(e),l=e.mapDesc(a.changes,!0),c=a.mapped?a.mapped.composeDesc(l):l;return new HistEvent(o,StateEffect.mapEffects(a.effects,e),c,a.startSelection.map(l),s)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,n,s=0,o=void 0){this.done=e,this.undone=n,this.prevTime=s,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,n,s,o,l){let c=this.done,u=c[c.length-1];return u&&u.changes&&!u.changes.empty&&e.changes&&(!s||joinableUserEvent.test(s))&&(!u.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(l,isAdjacent(u.changes,e.changes))||s=="input.type.compose")?c=updateBranch(c,c.length-1,o.minDepth,new HistEvent(e.changes.compose(u.changes),conc(StateEffect.mapEffects(e.effects,u.changes),u.effects),u.mapped,u.startSelection,none$1)):c=updateBranch(c,c.length,o.minDepth,e),new HistoryState(c,none$1,n,s)}addSelection(e,n,s,o){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return l.length>0&&n-this.prevTime<o&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&eqSelectionShape(l[l.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,n,s)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,s){let o=e==0?this.done:this.undone;if(o.length==0)return null;let l=o[o.length-1],c=l.selectionsAfter[0]||n.selection;if(s&&l.selectionsAfter.length)return n.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(o),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let u=o.length==1?none$1:o.slice(0,o.length-1);return l.mapped&&(u=addMappingToBranch(u,l.mapped)),n.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:fromHistory.of({side:e,rest:u,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(a,e){return EditorSelection.create(a.ranges.map(e),a.mainIndex)}function setSel(a,e){return a.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:a,dispatch:e},n){let s=updateSel(a.selection,n);return s.eq(a.selection,!0)?!1:(e(setSel(a,s)),!0)}function rangeEnd(a,e){return EditorSelection.cursor(e?a.to:a.from)}function cursorByChar(a,e){return moveSel(a,n=>n.empty?a.moveByChar(n,e):rangeEnd(n,e))}function ltrAtCursor(a){return a.textDirectionAt(a.state.selection.main.head)==Direction.LTR}const cursorCharLeft=a=>cursorByChar(a,!ltrAtCursor(a)),cursorCharRight=a=>cursorByChar(a,ltrAtCursor(a));function cursorByGroup(a,e){return moveSel(a,n=>n.empty?a.moveByGroup(n,e):rangeEnd(n,e))}const cursorGroupLeft=a=>cursorByGroup(a,!ltrAtCursor(a)),cursorGroupRight=a=>cursorByGroup(a,ltrAtCursor(a));function interestingNode(a,e,n){if(e.type.prop(n))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(a.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(a,e,n){let s=syntaxTree(a).resolveInner(e.head),o=n?NodeProp.closedBy:NodeProp.openedBy;for(let h=e.head;;){let f=n?s.childAfter(h):s.childBefore(h);if(!f)break;interestingNode(a,f,o)?s=f:h=n?f.to:f.from}let l=s.type.prop(o),c,u;return l&&(c=n?matchBrackets(a,s.from,1):matchBrackets(a,s.to,-1))&&c.matched?u=n?c.end.to:c.end.from:u=n?s.to:s.from,EditorSelection.cursor(u,n?-1:1)}const cursorSyntaxLeft=a=>moveSel(a,e=>moveBySyntax(a.state,e,!ltrAtCursor(a))),cursorSyntaxRight=a=>moveSel(a,e=>moveBySyntax(a.state,e,ltrAtCursor(a)));function cursorByLine(a,e){return moveSel(a,n=>{if(!n.empty)return rangeEnd(n,e);let s=a.moveVertically(n,e);return s.head!=n.head?s:a.moveToLineBoundary(n,e)})}const cursorLineUp=a=>cursorByLine(a,!1),cursorLineDown=a=>cursorByLine(a,!0);function pageInfo(a){let e=a.scrollDOM.clientHeight<a.scrollDOM.scrollHeight-2,n=0,s=0,o;if(e){for(let l of a.state.facet(EditorView.scrollMargins)){let c=l(a);c!=null&&c.top&&(n=Math.max(c==null?void 0:c.top,n)),c!=null&&c.bottom&&(s=Math.max(c==null?void 0:c.bottom,s))}o=a.scrollDOM.clientHeight-n-s}else o=(a.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:s,selfScroll:e,height:Math.max(a.defaultLineHeight,o-5)}}function cursorByPage(a,e){let n=pageInfo(a),{state:s}=a,o=updateSel(s.selection,c=>c.empty?a.moveVertically(c,e,n.height):rangeEnd(c,e));if(o.eq(s.selection))return!1;let l;if(n.selfScroll){let c=a.coordsAtPos(s.selection.main.head),u=a.scrollDOM.getBoundingClientRect(),h=u.top+n.marginTop,f=u.bottom-n.marginBottom;c&&c.top>h&&c.bottom<f&&(l=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:c.top-h}))}return a.dispatch(setSel(s,o),{effects:l}),!0}const cursorPageUp=a=>cursorByPage(a,!1),cursorPageDown=a=>cursorByPage(a,!0);function moveByLineBoundary(a,e,n){let s=a.lineBlockAt(e.head),o=a.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?s.to:s.from)&&(o=a.moveToLineBoundary(e,n,!1)),!n&&o.head==s.from&&s.length){let l=/^\s*/.exec(a.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;l&&e.head!=s.from+l&&(o=EditorSelection.cursor(s.from+l))}return o}const cursorLineBoundaryForward=a=>moveSel(a,e=>moveByLineBoundary(a,e,!0)),cursorLineBoundaryBackward=a=>moveSel(a,e=>moveByLineBoundary(a,e,!1)),cursorLineBoundaryLeft=a=>moveSel(a,e=>moveByLineBoundary(a,e,!ltrAtCursor(a))),cursorLineBoundaryRight=a=>moveSel(a,e=>moveByLineBoundary(a,e,ltrAtCursor(a))),cursorLineStart=a=>moveSel(a,e=>EditorSelection.cursor(a.lineBlockAt(e.head).from,1)),cursorLineEnd=a=>moveSel(a,e=>EditorSelection.cursor(a.lineBlockAt(e.head).to,-1));function toMatchingBracket(a,e,n){let s=!1,o=updateSel(a.selection,l=>{let c=matchBrackets(a,l.head,-1)||matchBrackets(a,l.head,1)||l.head>0&&matchBrackets(a,l.head-1,1)||l.head<a.doc.length&&matchBrackets(a,l.head+1,-1);if(!c||!c.end)return l;s=!0;let u=c.start.from==l.head?c.end.to:c.end.from;return EditorSelection.cursor(u)});return s?(e(setSel(a,o)),!0):!1}const cursorMatchingBracket=({state:a,dispatch:e})=>toMatchingBracket(a,e);function extendSel(a,e){let n=updateSel(a.state.selection,s=>{let o=e(s);return EditorSelection.range(s.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(a.state.selection)?!1:(a.dispatch(setSel(a.state,n)),!0)}function selectByChar(a,e){return extendSel(a,n=>a.moveByChar(n,e))}const selectCharLeft=a=>selectByChar(a,!ltrAtCursor(a)),selectCharRight=a=>selectByChar(a,ltrAtCursor(a));function selectByGroup(a,e){return extendSel(a,n=>a.moveByGroup(n,e))}const selectGroupLeft=a=>selectByGroup(a,!ltrAtCursor(a)),selectGroupRight=a=>selectByGroup(a,ltrAtCursor(a)),selectSyntaxLeft=a=>extendSel(a,e=>moveBySyntax(a.state,e,!ltrAtCursor(a))),selectSyntaxRight=a=>extendSel(a,e=>moveBySyntax(a.state,e,ltrAtCursor(a)));function selectByLine(a,e){return extendSel(a,n=>a.moveVertically(n,e))}const selectLineUp=a=>selectByLine(a,!1),selectLineDown=a=>selectByLine(a,!0);function selectByPage(a,e){return extendSel(a,n=>a.moveVertically(n,e,pageInfo(a).height))}const selectPageUp=a=>selectByPage(a,!1),selectPageDown=a=>selectByPage(a,!0),selectLineBoundaryForward=a=>extendSel(a,e=>moveByLineBoundary(a,e,!0)),selectLineBoundaryBackward=a=>extendSel(a,e=>moveByLineBoundary(a,e,!1)),selectLineBoundaryLeft=a=>extendSel(a,e=>moveByLineBoundary(a,e,!ltrAtCursor(a))),selectLineBoundaryRight=a=>extendSel(a,e=>moveByLineBoundary(a,e,ltrAtCursor(a))),selectLineStart=a=>extendSel(a,e=>EditorSelection.cursor(a.lineBlockAt(e.head).from)),selectLineEnd=a=>extendSel(a,e=>EditorSelection.cursor(a.lineBlockAt(e.head).to)),cursorDocStart=({state:a,dispatch:e})=>(e(setSel(a,{anchor:0})),!0),cursorDocEnd=({state:a,dispatch:e})=>(e(setSel(a,{anchor:a.doc.length})),!0),selectDocStart=({state:a,dispatch:e})=>(e(setSel(a,{anchor:a.selection.main.anchor,head:0})),!0),selectDocEnd=({state:a,dispatch:e})=>(e(setSel(a,{anchor:a.selection.main.anchor,head:a.doc.length})),!0),selectAll=({state:a,dispatch:e})=>(e(a.update({selection:{anchor:0,head:a.doc.length},userEvent:"select"})),!0),selectLine=({state:a,dispatch:e})=>{let n=selectedLineBlocks(a).map(({from:s,to:o})=>EditorSelection.range(s,Math.min(o+1,a.doc.length)));return e(a.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:a,dispatch:e})=>{let n=updateSel(a.selection,s=>{let o=syntaxTree(a),l=o.resolveStack(s.from,1);if(s.empty){let c=o.resolveStack(s.from,-1);c.node.from>=l.node.from&&c.node.to<=l.node.to&&(l=c)}for(let c=l;c;c=c.next){let{node:u}=c;if((u.from<s.from&&u.to>=s.to||u.to>s.to&&u.from<=s.from)&&c.next)return EditorSelection.range(u.to,u.from)}return s});return n.eq(a.selection)?!1:(e(setSel(a,n)),!0)},simplifySelection=({state:a,dispatch:e})=>{let n=a.selection,s=null;return n.ranges.length>1?s=EditorSelection.create([n.main]):n.main.empty||(s=EditorSelection.create([EditorSelection.cursor(n.main.head)])),s?(e(setSel(a,s)),!0):!1};function deleteBy(a,e){if(a.state.readOnly)return!1;let n="delete.selection",{state:s}=a,o=s.changeByRange(l=>{let{from:c,to:u}=l;if(c==u){let h=e(l);h<c?(n="delete.backward",h=skipAtomic(a,h,!1)):h>c&&(n="delete.forward",h=skipAtomic(a,h,!0)),c=Math.min(c,h),u=Math.max(u,h)}else c=skipAtomic(a,c,!1),u=skipAtomic(a,u,!0);return c==u?{range:l}:{changes:{from:c,to:u},range:EditorSelection.cursor(c,c<l.head?-1:1)}});return o.changes.empty?!1:(a.dispatch(s.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?EditorView.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(a,e,n){if(a instanceof EditorView)for(let s of a.state.facet(EditorView.atomicRanges).map(o=>o(a)))s.between(e,e,(o,l)=>{o<e&&l>e&&(e=n?l:o)});return e}const deleteByChar=(a,e,n)=>deleteBy(a,s=>{let o=s.from,{state:l}=a,c=l.doc.lineAt(o),u,h;if(n&&!e&&o>c.from&&o<c.from+200&&!/[^ \t]/.test(u=c.text.slice(0,o-c.from))){if(u[u.length-1]=="	")return o-1;let f=countColumn(u,l.tabSize),d=f%getIndentUnit(l)||getIndentUnit(l);for(let p=0;p<d&&u[u.length-1-p]==" ";p++)o--;h=o}else h=findClusterBreak(c.text,o-c.from,e,e)+c.from,h==o&&c.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(h-c.from,o-c.from))&&(h=findClusterBreak(c.text,h-c.from,!1,!1)+c.from);return h}),deleteCharBackward=a=>deleteByChar(a,!1,!0),deleteCharForward=a=>deleteByChar(a,!0,!1),deleteByGroup=(a,e)=>deleteBy(a,n=>{let s=n.head,{state:o}=a,l=o.doc.lineAt(s),c=o.charCategorizer(s);for(let u=null;;){if(s==(e?l.to:l.from)){s==n.head&&l.number!=(e?o.doc.lines:1)&&(s+=e?1:-1);break}let h=findClusterBreak(l.text,s-l.from,e)+l.from,f=l.text.slice(Math.min(s,h)-l.from,Math.max(s,h)-l.from),d=c(f);if(u!=null&&d!=u)break;(f!=" "||s!=n.head)&&(u=d),s=h}return s}),deleteGroupBackward=a=>deleteByGroup(a,!1),deleteGroupForward=a=>deleteByGroup(a,!0),deleteToLineEnd=a=>deleteBy(a,e=>{let n=a.lineBlockAt(e.head).to;return e.head<n?n:Math.min(a.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=a=>deleteBy(a,e=>{let n=a.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),deleteLineBoundaryForward=a=>deleteBy(a,e=>{let n=a.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(a.state.doc.length,e.head+1)}),splitLine=({state:a,dispatch:e})=>{if(a.readOnly)return!1;let n=a.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:Text$1.of(["",""])},range:EditorSelection.cursor(s.from)}));return e(a.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:a,dispatch:e})=>{if(a.readOnly)return!1;let n=a.changeByRange(s=>{if(!s.empty||s.from==0||s.from==a.doc.length)return{range:s};let o=s.from,l=a.doc.lineAt(o),c=o==l.from?o-1:findClusterBreak(l.text,o-l.from,!1)+l.from,u=o==l.to?o+1:findClusterBreak(l.text,o-l.from,!0)+l.from;return{changes:{from:c,to:u,insert:a.doc.slice(o,u).append(a.doc.slice(c,o))},range:EditorSelection.cursor(u)}});return n.changes.empty?!1:(e(a.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(a){let e=[],n=-1;for(let s of a.selection.ranges){let o=a.doc.lineAt(s.from),l=a.doc.lineAt(s.to);if(!s.empty&&s.to==l.from&&(l=a.doc.lineAt(s.to-1)),n>=o.number){let c=e[e.length-1];c.to=l.to,c.ranges.push(s)}else e.push({from:o.from,to:l.to,ranges:[s]});n=l.number+1}return e}function moveLine(a,e,n){if(a.readOnly)return!1;let s=[],o=[];for(let l of selectedLineBlocks(a)){if(n?l.to==a.doc.length:l.from==0)continue;let c=a.doc.lineAt(n?l.to+1:l.from-1),u=c.length+1;if(n){s.push({from:l.to,to:c.to},{from:l.from,insert:c.text+a.lineBreak});for(let h of l.ranges)o.push(EditorSelection.range(Math.min(a.doc.length,h.anchor+u),Math.min(a.doc.length,h.head+u)))}else{s.push({from:c.from,to:l.from},{from:l.to,insert:a.lineBreak+c.text});for(let h of l.ranges)o.push(EditorSelection.range(h.anchor-u,h.head-u))}}return s.length?(e(a.update({changes:s,scrollIntoView:!0,selection:EditorSelection.create(o,a.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:a,dispatch:e})=>moveLine(a,e,!1),moveLineDown=({state:a,dispatch:e})=>moveLine(a,e,!0);function copyLine(a,e,n){if(a.readOnly)return!1;let s=[];for(let o of selectedLineBlocks(a))n?s.push({from:o.from,insert:a.doc.slice(o.from,o.to)+a.lineBreak}):s.push({from:o.to,insert:a.lineBreak+a.doc.slice(o.from,o.to)});return e(a.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:a,dispatch:e})=>copyLine(a,e,!1),copyLineDown=({state:a,dispatch:e})=>copyLine(a,e,!0),deleteLine=a=>{if(a.state.readOnly)return!1;let{state:e}=a,n=e.changes(selectedLineBlocks(e).map(({from:o,to:l})=>(o>0?o--:l<e.doc.length&&l++,{from:o,to:l}))),s=updateSel(e.selection,o=>{let l;if(a.lineWrapping){let c=a.lineBlockAt(o.head),u=a.coordsAtPos(o.head,o.assoc||1);u&&(l=c.bottom+a.documentTop-u.bottom+a.defaultLineHeight/2)}return a.moveVertically(o,!0,l)}).map(n);return a.dispatch({changes:n,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(a,e){if(/\(\)|\[\]|\{\}/.test(a.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=syntaxTree(a).resolveInner(e),s=n.childBefore(e),o=n.childAfter(e),l;return s&&o&&s.to<=e&&o.from>=e&&(l=s.type.prop(NodeProp.closedBy))&&l.indexOf(o.name)>-1&&a.doc.lineAt(s.to).from==a.doc.lineAt(o.from).from&&!/\S/.test(a.sliceDoc(s.to,o.from))?{from:s.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(a){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let s=e.changeByRange(o=>{let{from:l,to:c}=o,u=e.doc.lineAt(l),h=!a&&l==c&&isBetweenBrackets(e,l);a&&(l=c=(c<=u.to?u:e.doc.lineAt(c)).to);let f=new IndentContext(e,{simulateBreak:l,simulateDoubleBreak:!!h}),d=getIndentation(f,l);for(d==null&&(d=countColumn(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));c<u.to&&/\s/.test(u.text[c-u.from]);)c++;h?{from:l,to:c}=h:l>u.from&&l<u.from+100&&!/\S/.test(u.text.slice(0,l))&&(l=u.from);let p=["",indentString(e,d)];return h&&p.push(indentString(e,f.lineIndent(u.from,-1))),{changes:{from:l,to:c,insert:Text$1.of(p)},range:EditorSelection.cursor(l+1+p[1].length)}});return n(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(a,e){let n=-1;return a.changeByRange(s=>{let o=[];for(let c=s.from;c<=s.to;){let u=a.doc.lineAt(c);u.number>n&&(s.empty||s.to>u.from)&&(e(u,o,s),n=u.number),c=u.to+1}let l=a.changes(o);return{changes:o,range:EditorSelection.range(l.mapPos(s.anchor,1),l.mapPos(s.head,1))}})}const indentSelection=({state:a,dispatch:e})=>{if(a.readOnly)return!1;let n=Object.create(null),s=new IndentContext(a,{overrideIndentation:l=>{let c=n[l];return c??-1}}),o=changeBySelectedLine(a,(l,c,u)=>{let h=getIndentation(s,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let f=/^\s*/.exec(l.text)[0],d=indentString(a,h);(f!=d||u.from<l.from+f.length)&&(n[l.from]=h,c.push({from:l.from,to:l.from+f.length,insert:d}))});return o.changes.empty||e(a.update(o,{userEvent:"indent"})),!0},indentMore=({state:a,dispatch:e})=>a.readOnly?!1:(e(a.update(changeBySelectedLine(a,(n,s)=>{s.push({from:n.from,insert:a.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:a,dispatch:e})=>a.readOnly?!1:(e(a.update(changeBySelectedLine(a,(n,s)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let l=countColumn(o,a.tabSize),c=0,u=indentString(a,Math.max(0,l-getIndentUnit(a)));for(;c<o.length&&c<u.length&&o.charCodeAt(c)==u.charCodeAt(c);)c++;s.push({from:n.from+c,to:n.from+o.length,insert:u.slice(c)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=a=>(a.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(a=>({mac:a.key,run:a.run,shift:a.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var a=arguments[0];typeof a=="string"&&(a=document.createElement(a));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var o=n[s];typeof o=="string"?a.setAttribute(s,o):o!=null&&(a[s]=o)}e++}for(;e<arguments.length;e++)add(a,arguments[e]);return a}function add(a,e){if(typeof e=="string")a.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)a.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)add(a,e[n]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?a=>a.normalize("NFKD"):a=>a;class SearchCursor{constructor(e,n,s=0,o=e.length,l,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,o),this.bufferStart=s,this.normalize=l?u=>l(basicNormalize(u)):basicNormalize,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=fromCodePoint(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let o=this.normalize(n);if(o.length)for(let l=0,c=s;;l++){let u=o.charCodeAt(l),h=this.match(u,c,this.bufferPos+this.bufferStart);if(l==o.length-1){if(h)return this.value=h,this;break}c==s&&l<n.length&&n.charCodeAt(l)==u&&c++}}}match(e,n,s){let o=null;for(let l=0;l<this.matches.length;l+=2){let c=this.matches[l],u=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?o={from:this.matches[l+1],to:s}:(this.matches[l]++,u=!0)),u||(this.matches.splice(l,2),l-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?o={from:n,to:s}:this.matches.push(1,n)),o&&this.test&&!this.test(o.from,o.to,this.buffer,this.bufferStart)&&(o=null),o}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,n,s,o=0,l=e.length){if(this.text=e,this.to=l,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new MultilineRegExpCursor(e,n,s,o,l);this.re=new RegExp(n,baseFlags+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.iter=e.iter();let c=e.lineAt(o);this.curLineStart=c.from,this.matchPos=toCharEnd(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let s=this.curLineStart+n.index,o=s+n[0].length;if(this.matchPos=toCharEnd(this.text,o+(s==o?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<o||s>this.value.to)&&(!this.test||this.test(s,o,n)))return this.value={from:s,to:o,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,s){let o=flattened.get(e);if(!o||o.from>=s||o.to<=n){let u=new FlattenedDoc(n,e.sliceString(n,s));return flattened.set(e,u),u}if(o.from==n&&o.to==s)return o;let{text:l,from:c}=o;return c>n&&(l=e.sliceString(n,c)+l,c=n),o.to<s&&(l+=e.sliceString(o.to,s)),flattened.set(e,new FlattenedDoc(c,l)),new FlattenedDoc(n,l.slice(n-c,s-c))}}class MultilineRegExpCursor{constructor(e,n,s,o,l){this.text=e,this.to=l,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,o),this.re=new RegExp(n,baseFlags+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.flat=FlattenedDoc.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let s=this.flat.from+n.index,o=s+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,o,n)))return this.value={from:s,to:o,match:n},this.matchPos=toCharEnd(this.text,o+(s==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(a){try{return new RegExp(a,baseFlags),!0}catch{return!1}}function toCharEnd(a,e){if(e>=a.length)return e;let n=a.lineAt(e),s;for(;e<n.to&&(s=n.text.charCodeAt(e-n.from))>=56320&&s<57344;)e++;return e}function createLineDialog(a){let e=String(a.state.doc.lineAt(a.state.selection.main.head).number),n=crelt("input",{class:"cm-textfield",name:"line",value:e}),s=crelt("form",{class:"cm-gotoLine",onkeydown:l=>{l.keyCode==27?(l.preventDefault(),a.dispatch({effects:dialogEffect.of(!1)}),a.focus()):l.keyCode==13&&(l.preventDefault(),o())},onsubmit:l=>{l.preventDefault(),o()}},crelt("label",a.state.phrase("Go to line"),": ",n)," ",crelt("button",{class:"cm-button",type:"submit"},a.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{a.dispatch({effects:dialogEffect.of(!1)}),a.focus()},"aria-label":a.state.phrase("close"),type:"button"},["×"]));function o(){let l=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!l)return;let{state:c}=a,u=c.doc.lineAt(c.selection.main.head),[,h,f,d,p]=l,g=d?+d.slice(1):0,m=f?+f:u.number;if(f&&p){let b=m/100;h&&(b=b*(h=="-"?-1:1)+u.number/c.doc.lines),m=Math.round(c.doc.lines*b)}else f&&h&&(m=m*(h=="-"?-1:1)+u.number);let y=c.doc.line(Math.max(1,Math.min(c.doc.lines,m))),_=EditorSelection.cursor(y.from+Math.max(0,Math.min(g,y.length)));a.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(_.from,{y:"center"})],selection:_}),a.focus()}return{dom:s}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(a,e){for(let n of e.effects)n.is(dialogEffect)&&(a=n.value);return a},provide:a=>showPanel.from(a,e=>e?createLineDialog:null)}),gotoLine=a=>{let e=getPanel(a,createLineDialog);if(!e){let n=[dialogEffect.of(!0)];a.state.field(dialogField,!1)==null&&n.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),a.dispatch({effects:n}),e=getPanel(a,createLineDialog)}return e&&e.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(a){return combineConfig(a,defaultHighlightOptions,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(a){return[defaultTheme,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(a,e,n,s){return(n==0||a(e.sliceDoc(n-1,n))!=CharCategory.Word)&&(s==e.doc.length||a(e.sliceDoc(s,s+1))!=CharCategory.Word)}function insideWord(a,e,n,s){return a(e.sliceDoc(n,n+1))==CharCategory.Word&&a(e.sliceDoc(s-1,s))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(a){this.decorations=this.getDeco(a)}update(a){(a.selectionSet||a.docChanged||a.viewportChanged)&&(this.decorations=this.getDeco(a.view))}getDeco(a){let e=a.state.facet(highlightConfig),{state:n}=a,s=n.selection;if(s.ranges.length>1)return Decoration.none;let o=s.main,l,c=null;if(o.empty){if(!e.highlightWordAroundCursor)return Decoration.none;let h=n.wordAt(o.head);if(!h)return Decoration.none;c=n.charCategorizer(o.head),l=n.sliceDoc(h.from,h.to)}else{let h=o.to-o.from;if(h<e.minSelectionLength||h>200)return Decoration.none;if(e.wholeWords){if(l=n.sliceDoc(o.from,o.to),c=n.charCategorizer(o.head),!(insideWordBoundaries(c,n,o.from,o.to)&&insideWord(c,n,o.from,o.to)))return Decoration.none}else if(l=n.sliceDoc(o.from,o.to),!l)return Decoration.none}let u=[];for(let h of a.visibleRanges){let f=new SearchCursor(n.doc,l,h.from,h.to);for(;!f.next().done;){let{from:d,to:p}=f.value;if((!c||insideWordBoundaries(c,n,d,p))&&(o.empty&&d<=o.from&&p>=o.to?u.push(mainMatchDeco.range(d,p)):(d>=o.to||p<=o.from)&&u.push(matchDeco.range(d,p)),u.length>e.maxMatches))return Decoration.none}}return Decoration.set(u)}},{decorations:a=>a.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:a,dispatch:e})=>{let{selection:n}=a,s=EditorSelection.create(n.ranges.map(o=>a.wordAt(o.head)||EditorSelection.cursor(o.head)),n.mainIndex);return s.eq(n)?!1:(e(a.update({selection:s})),!0)};function findNextOccurrence(a,e){let{main:n,ranges:s}=a.selection,o=a.wordAt(n.head),l=o&&o.from==n.from&&o.to==n.to;for(let c=!1,u=new SearchCursor(a.doc,e,s[s.length-1].to);;)if(u.next(),u.done){if(c)return null;u=new SearchCursor(a.doc,e,0,Math.max(0,s[s.length-1].from-1)),c=!0}else{if(c&&s.some(h=>h.from==u.value.from))continue;if(l){let h=a.wordAt(u.value.from);if(!h||h.from!=u.value.from||h.to!=u.value.to)continue}return u.value}}const selectNextOccurrence=({state:a,dispatch:e})=>{let{ranges:n}=a.selection;if(n.some(l=>l.from===l.to))return selectWord({state:a,dispatch:e});let s=a.sliceDoc(n[0].from,n[0].to);if(a.selection.ranges.some(l=>a.sliceDoc(l.from,l.to)!=s))return!1;let o=findNextOccurrence(a,s);return o?(e(a.update({selection:a.selection.addRange(EditorSelection.range(o.from,o.to),!1),effects:EditorView.scrollIntoView(o.to)})),!0):!1},searchConfigFacet=Facet.define({combine(a){return combineConfig(a,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,n=0,s){let o=e.doc?e:EditorState.create({doc:e});return s==null&&(s=o.doc.length),this.regexp?regexpCursor(this,o,n,s):stringCursor(this,o,n,s)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(a,e,n,s){return new SearchCursor(e.doc,a.unquoted,n,s,a.caseSensitive?void 0:o=>o.toLowerCase(),a.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(a,e){return(n,s,o,l)=>((l>n||l+o.length<s)&&(l=Math.max(0,n-2),o=a.sliceString(l,Math.min(a.length,s+2))),(e(charBefore(o,n-l))!=CharCategory.Word||e(charAfter(o,n-l))!=CharCategory.Word)&&(e(charAfter(o,s-l))!=CharCategory.Word||e(charBefore(o,s-l))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,n,s){let o=stringCursor(this.spec,e,s,e.doc.length).nextOverlapping();if(o.done){let l=Math.min(e.doc.length,n+this.spec.unquoted.length);o=stringCursor(this.spec,e,0,l).nextOverlapping()}return o.done||o.value.from==n&&o.value.to==s?null:o.value}prevMatchInRange(e,n,s){for(let o=s;;){let l=Math.max(n,o-1e4-this.spec.unquoted.length),c=stringCursor(this.spec,e,l,o),u=null;for(;!c.nextOverlapping().done;)u=c.value;if(u)return u;if(l==n)return null;o-=1e4}}prevMatch(e,n,s){let o=this.prevMatchInRange(e,0,n);return o||(o=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),o&&(o.from!=n||o.to!=s)?o:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let s=stringCursor(this.spec,e,0,e.doc.length),o=[];for(;!s.next().done;){if(o.length>=n)return null;o.push(s.value)}return o}highlight(e,n,s,o){let l=stringCursor(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!l.next().done;)o(l.value.from,l.value.to)}}function regexpCursor(a,e,n,s){return new RegExpCursor(e.doc,a.search,{ignoreCase:!a.caseSensitive,test:a.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},n,s)}function charBefore(a,e){return a.slice(findClusterBreak(a,e,!1),e)}function charAfter(a,e){return a.slice(e,findClusterBreak(a,e))}function regexpWordTest(a){return(e,n,s)=>!s[0].length||(a(charBefore(s.input,s.index))!=CharCategory.Word||a(charAfter(s.input,s.index))!=CharCategory.Word)&&(a(charAfter(s.input,s.index+s[0].length))!=CharCategory.Word||a(charBefore(s.input,s.index+s[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,n,s){let o=regexpCursor(this.spec,e,s,e.doc.length).next();return o.done&&(o=regexpCursor(this.spec,e,0,n).next()),o.done?null:o.value}prevMatchInRange(e,n,s){for(let o=1;;o++){let l=Math.max(n,s-o*1e4),c=regexpCursor(this.spec,e,l,s),u=null;for(;!c.next().done;)u=c.value;if(u&&(l==n||u.from>l+10))return u;if(l==n)return null}}prevMatch(e,n,s){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let o=s.length;o>0;o--){let l=+s.slice(0,o);if(l>0&&l<e.match.length)return e.match[l]+s.slice(o)}return n})}matchAll(e,n){let s=regexpCursor(this.spec,e,0,e.doc.length),o=[];for(;!s.next().done;){if(o.length>=n)return null;o.push(s.value)}return o}highlight(e,n,s,o){let l=regexpCursor(this.spec,e,Math.max(0,n-250),Math.min(s+250,e.doc.length));for(;!l.next().done;)o(l.value.from,l.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(a){return new SearchState(defaultQuery(a).create(),null)},update(a,e){for(let n of e.effects)n.is(setSearchQuery)?a=new SearchState(n.value.create(),a.panel):n.is(togglePanel$1)&&(a=new SearchState(a.query,n.value?createSearchPanel:null));return a},provide:a=>showPanel.from(a,e=>e.panel)});class SearchState{constructor(e,n){this.query=e,this.panel=n}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.decorations=this.highlight(a.state.field(searchState))}update(a){let e=a.state.field(searchState);(e!=a.startState.field(searchState)||a.docChanged||a.selectionSet||a.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:a,panel:e}){if(!e||!a.spec.valid)return Decoration.none;let{view:n}=this,s=new RangeSetBuilder;for(let o=0,l=n.visibleRanges,c=l.length;o<c;o++){let{from:u,to:h}=l[o];for(;o<c-1&&h>l[o+1].from-2*250;)h=l[++o].to;a.highlight(n.state,u,h,(f,d)=>{let p=n.state.selection.ranges.some(g=>g.from==f&&g.to==d);s.add(f,d,p?selectedMatchMark:matchMark)})}return s.finish()}},{decorations:a=>a.decorations});function searchCommand(a){return e=>{let n=e.state.field(searchState,!1);return n&&n.query.spec.valid?a(e,n):openSearchPanel(e)}}const findNext=searchCommand((a,{query:e})=>{let{to:n}=a.state.selection.main,s=e.nextMatch(a.state,n,n);if(!s)return!1;let o=EditorSelection.single(s.from,s.to),l=a.state.facet(searchConfigFacet);return a.dispatch({selection:o,effects:[announceMatch(a,s),l.scrollToMatch(o.main,a)],userEvent:"select.search"}),selectSearchInput(a),!0}),findPrevious=searchCommand((a,{query:e})=>{let{state:n}=a,{from:s}=n.selection.main,o=e.prevMatch(n,s,s);if(!o)return!1;let l=EditorSelection.single(o.from,o.to),c=a.state.facet(searchConfigFacet);return a.dispatch({selection:l,effects:[announceMatch(a,o),c.scrollToMatch(l.main,a)],userEvent:"select.search"}),selectSearchInput(a),!0}),selectMatches=searchCommand((a,{query:e})=>{let n=e.matchAll(a.state,1e3);return!n||!n.length?!1:(a.dispatch({selection:EditorSelection.create(n.map(s=>EditorSelection.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:a,dispatch:e})=>{let n=a.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:s,to:o}=n.main,l=[],c=0;for(let u=new SearchCursor(a.doc,a.sliceDoc(s,o));!u.next().done;){if(l.length>1e3)return!1;u.value.from==s&&(c=l.length),l.push(EditorSelection.range(u.value.from,u.value.to))}return e(a.update({selection:EditorSelection.create(l,c),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((a,{query:e})=>{let{state:n}=a,{from:s,to:o}=n.selection.main;if(n.readOnly)return!1;let l=e.nextMatch(n,s,s);if(!l)return!1;let c=l,u=[],h,f,d=[];if(c.from==s&&c.to==o&&(f=n.toText(e.getReplacement(c)),u.push({from:c.from,to:c.to,insert:f}),c=e.nextMatch(n,c.from,c.to),d.push(EditorView.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(s).number)+"."))),c){let p=u.length==0||u[0].from>=l.to?0:l.to-l.from-f.length;h=EditorSelection.single(c.from-p,c.to-p),d.push(announceMatch(a,c)),d.push(n.facet(searchConfigFacet).scrollToMatch(h.main,a))}return a.dispatch({changes:u,selection:h,effects:d,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((a,{query:e})=>{if(a.state.readOnly)return!1;let n=e.matchAll(a.state,1e9).map(o=>{let{from:l,to:c}=o;return{from:l,to:c,insert:e.getReplacement(o)}});if(!n.length)return!1;let s=a.state.phrase("replaced $ matches",n.length)+".";return a.dispatch({changes:n,effects:EditorView.announce.of(s),userEvent:"input.replace.all"}),!0});function createSearchPanel(a){return a.state.facet(searchConfigFacet).createPanel(a)}function defaultQuery(a,e){var n,s,o,l,c;let u=a.selection.main,h=u.empty||u.to>u.from+100?"":a.sliceDoc(u.from,u.to);if(e&&!h)return e;let f=a.facet(searchConfigFacet);return new SearchQuery({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:f.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(s=e==null?void 0:e.caseSensitive)!==null&&s!==void 0?s:f.caseSensitive,literal:(o=e==null?void 0:e.literal)!==null&&o!==void 0?o:f.literal,regexp:(l=e==null?void 0:e.regexp)!==null&&l!==void 0?l:f.regexp,wholeWord:(c=e==null?void 0:e.wholeWord)!==null&&c!==void 0?c:f.wholeWord})}function getSearchInput(a){let e=getPanel(a,createSearchPanel);return e&&e.dom.querySelector("[main-field]")}function selectSearchInput(a){let e=getSearchInput(a);e&&e==a.root.activeElement&&e.select()}const openSearchPanel=a=>{let e=a.state.field(searchState,!1);if(e&&e.panel){let n=getSearchInput(a);if(n&&n!=a.root.activeElement){let s=defaultQuery(a.state,e.query.spec);s.valid&&a.dispatch({effects:setSearchQuery.of(s)}),n.focus(),n.select()}}else a.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(a.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=a=>{let e=a.state.field(searchState,!1);if(!e||!e.panel)return!1;let n=getPanel(a,createSearchPanel);return n&&n.dom.contains(a.root.activeElement)&&a.focus(),a.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let n=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:n.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:n.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function s(o,l,c){return crelt("button",{class:"cm-button",name:o,onclick:l,type:"button"},c)}this.dom=crelt("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,s("next",()=>findNext(e),[phrase(e,"next")]),s("prev",()=>findPrevious(e),[phrase(e,"previous")]),s("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,s("replace",()=>replaceNext(e),[phrase(e,"replace")]),s("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let n of e.transactions)for(let s of n.effects)s.is(setSearchQuery)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(a,e){return a.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(a,{from:e,to:n}){let s=a.state.doc.lineAt(e),o=a.state.doc.lineAt(n).to,l=Math.max(s.from,e-AnnounceMargin),c=Math.min(o,n+AnnounceMargin),u=a.state.sliceDoc(l,c);if(l!=s.from){for(let h=0;h<AnnounceMargin;h++)if(!Break.test(u[h+1])&&Break.test(u[h])){u=u.slice(h);break}}if(c!=o){for(let h=u.length-1;h>u.length-AnnounceMargin;h--)if(!Break.test(u[h-1])&&Break.test(u[h])){u=u.slice(0,h);break}}return EditorView.announce.of(`${a.state.phrase("current match")}. ${u} ${a.state.phrase("on line")} ${s.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(e,n,s,o){this.state=e,this.pos=n,this.explicit=s,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=syntaxTree(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),s=Math.max(n.from,this.pos-250),o=n.text.slice(s-n.from,this.pos-n.from),l=o.search(ensureAnchor(e,!1));return l<0?null:{from:s+l,to:this.pos,text:o.slice(l)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,s){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),s&&s.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(a){let e=Object.keys(a).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(a){let e=Object.create(null),n=Object.create(null);for(let{label:o}of a){e[o[0]]=!0;for(let l=1;l<o.length;l++)n[o[l]]=!0}let s=toSet(e)+toSet(n)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function completeFromList(a){let e=a.map(o=>typeof o=="string"?{label:o}:o),[n,s]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return o=>{let l=o.matchBefore(s);return l||o.explicit?{from:l?l.from:o.pos,options:e,validFor:n}:null}}class Option{constructor(e,n,s,o){this.completion=e,this.source=n,this.match=s,this.score=o}}function cur(a){return a.selection.main.from}function ensureAnchor(a,e){var n;let{source:s}=a,o=e&&s[0]!="^",l=s[s.length-1]!="$";return!o&&!l?a:new RegExp(`${o?"^":""}(?:${s})${l?"$":""}`,(n=a.flags)!==null&&n!==void 0?n:a.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(a,e,n,s){let{main:o}=a.selection,l=n-o.from,c=s-o.from;return Object.assign(Object.assign({},a.changeByRange(u=>{if(u!=o&&n!=s&&a.sliceDoc(u.from+l,u.from+c)!=a.sliceDoc(n,s))return{range:u};let h=a.toText(e);return{changes:{from:u.from+l,to:s==o.from?u.to:u.from+c,insert:h},range:EditorSelection.cursor(u.from+l+h.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(a){if(!Array.isArray(a))return a;let e=SourceCache.get(a);return e||SourceCache.set(a,e=completeFromList(a)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let s=codePointAt(e,n),o=codePointSize(s);this.chars.push(s);let l=e.slice(n,n+o),c=l.toUpperCase();this.folded.push(codePointAt(c==l?l.toLowerCase():c,0)),n+=o}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:s,any:o,precise:l,byWord:c}=this;if(n.length==1){let P=codePointAt(e,0),T=codePointSize(P),k=T==e.length?0:-100;if(P!=n[0])if(P==s[0])k+=-200;else return null;return this.ret(k,[0,T])}let u=e.indexOf(this.pattern);if(u==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=n.length,f=0;if(u<0){for(let P=0,T=Math.min(e.length,200);P<T&&f<h;){let k=codePointAt(e,P);(k==n[f]||k==s[f])&&(o[f++]=P),P+=codePointSize(k)}if(f<h)return null}let d=0,p=0,g=!1,m=0,y=-1,_=-1,b=/[a-z]/.test(e),x=!0;for(let P=0,T=Math.min(e.length,200),k=0;P<T&&p<h;){let S=codePointAt(e,P);u<0&&(d<h&&S==n[d]&&(l[d++]=P),m<h&&(S==n[m]||S==s[m]?(m==0&&(y=P),_=P+1,m++):m=0));let A,w=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(A=fromCodePoint(S))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!P||w==1&&b||k==0&&w!=0)&&(n[p]==S||s[p]==S&&(g=!0)?c[p++]=P:c.length&&(x=!1)),k=w,P+=codePointSize(S)}return p==h&&c[0]==0&&x?this.result(-100+(g?-200:0),c,e):m==h&&y==0?this.ret(-200-e.length+(_==e.length?0:-100),[0,_]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):m==h?this.ret(-900-e.length,[y,_]):p==h?this.result(-100+(g?-200:0)+-700+(x?0:-1100),c,e):n.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,n,s){let o=[],l=0;for(let c of n){let u=c+(this.astral?codePointSize(codePointAt(s,c)):1);l&&o[l-1]==c?o[l-1]=u:(o[l++]=c,o[l++]=u)}return this.ret(e-s.length,o)}}class StrictMatcher{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),s=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return s==null?null:(this.matched=[0,n.length],this.score=s+(e.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(a){return combineConfig(a,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>s=>joinClass(e(s),n(s)),optionClass:(e,n)=>s=>joinClass(e(s),n(s)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function joinClass(a,e){return a?e?a+" "+e:a:e}function defaultPositionInfo(a,e,n,s,o,l){let c=a.textDirection==Direction.RTL,u=c,h=!1,f="top",d,p,g=e.left-o.left,m=o.right-e.right,y=s.right-s.left,_=s.bottom-s.top;if(u&&g<Math.min(y,m)?u=!1:!u&&m<Math.min(y,g)&&(u=!0),y<=(u?g:m))d=Math.max(o.top,Math.min(n.top,o.bottom-_))-e.top,p=Math.min(400,u?g:m);else{h=!0,p=Math.min(400,(c?e.right:o.right-e.left)-30);let P=o.bottom-e.bottom;P>=_||P>e.top?d=n.bottom-e.top:(f="bottom",d=e.bottom-n.top)}let b=(e.bottom-e.top)/l.offsetHeight,x=(e.right-e.left)/l.offsetWidth;return{style:`${f}: ${d/b}px; max-width: ${p/x}px`,class:"cm-completionInfo-"+(h?c?"left-narrow":"right-narrow":u?"left":"right")}}function optionContent(a){let e=a.addToOptions.slice();return a.icons&&e.push({render(n){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),n.type&&s.classList.add(...n.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),s.setAttribute("aria-hidden","true"),s},position:20}),e.push({render(n,s,o,l){let c=document.createElement("span");c.className="cm-completionLabel";let u=n.displayLabel||n.label,h=0;for(let f=0;f<l.length;){let d=l[f++],p=l[f++];d>h&&c.appendChild(document.createTextNode(u.slice(h,d)));let g=c.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(u.slice(d,p))),g.className="cm-completionMatchedText",h=p}return h<u.length&&c.appendChild(document.createTextNode(u.slice(h))),c},position:50},{render(n){if(!n.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=n.detail,s},position:80}),e.sort((n,s)=>n.position-s.position).map(n=>n.render)}function rangeAroundSelected(a,e,n){if(a<=n)return{from:0,to:a};if(e<0&&(e=0),e<=a>>1){let o=Math.floor(e/n);return{from:o*n,to:(o+1)*n}}let s=Math.floor((a-e)/n);return{from:a-(s+1)*n,to:a-s*n}}class CompletionTooltip{constructor(e,n,s){this.view=e,this.stateField=n,this.applyCompletion=s,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let o=e.state.field(n),{options:l,selected:c}=o.open,u=e.state.facet(completionConfig);this.optionContent=optionContent(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=rangeAroundSelected(l.length,c,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:f}=e.state.field(n).open;for(let d=h.target,p;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(p=/-(\d+)$/.exec(d.id))&&+p[1]<f.length){this.applyCompletion(e,f[+p[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let f=e.state.field(this.stateField,!1);f&&f.tooltip&&e.state.facet(completionConfig).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(l,o.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),s!=o){let{options:l,selected:c,disabled:u}=s.open;(!o.open||o.open.options!=l)&&(this.range=rangeAroundSelected(l.length,c,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(l,s.id)),this.updateSel(),u!=((n=o.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of n.split(" "))s&&this.dom.classList.add(s);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=rangeAroundSelected(n.options.length,n.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:s}=n.options[n.selected],{info:o}=s;if(!o)return;let l=typeof o=="string"?document.createTextNode(o):o(s);if(!l)return;"then"in l?l.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,s)}).catch(c=>logException(this.view.state,c,"completion info")):this.addInfoPane(l,s)}}addInfoPane(e,n){this.destroyInfo();let s=this.info=document.createElement("div");if(s.className="cm-tooltip cm-completionInfo",e.nodeType!=null)s.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:l}=e;s.appendChild(o),this.infoDestroy=l||null}this.dom.appendChild(s),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let s=this.list.firstChild,o=this.range.from;s;s=s.nextSibling,o++)s.nodeName!="LI"||!s.id?o--:o==e?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),n=s):s.hasAttribute("aria-selected")&&s.removeAttribute("aria-selected");return n&&scrollIntoView(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),l=this.space;if(!l){let c=this.dom.ownerDocument.documentElement;l={left:0,top:0,right:c.clientWidth,bottom:c.clientHeight}}return o.top>Math.min(l.bottom,n.bottom)-10||o.bottom<Math.max(l.top,n.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,n,o,s,l,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,s){const o=document.createElement("ul");o.id=n,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions")),o.addEventListener("mousedown",c=>{c.target==o&&c.preventDefault()});let l=null;for(let c=s.from;c<s.to;c++){let{completion:u,match:h}=e[c],{section:f}=u;if(f){let g=typeof f=="string"?f:f.name;if(g!=l&&(c>s.from||s.from==0))if(l=g,typeof f!="string"&&f.header)o.appendChild(f.header(f));else{let m=o.appendChild(document.createElement("completion-section"));m.textContent=g}}const d=o.appendChild(document.createElement("li"));d.id=n+"-"+c,d.setAttribute("role","option");let p=this.optionClass(u);p&&(d.className=p);for(let g of this.optionContent){let m=g(u,this.view.state,this.view,h);m&&d.appendChild(m)}}return s.from&&o.classList.add("cm-completionListIncompleteTop"),s.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(a,e){return n=>new CompletionTooltip(n,a,e)}function scrollIntoView(a,e){let n=a.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.height/a.offsetHeight;s.top<n.top?a.scrollTop-=(n.top-s.top)/o:s.bottom>n.bottom&&(a.scrollTop+=(s.bottom-n.bottom)/o)}function score(a){return(a.boost||0)*100+(a.apply?10:0)+(a.info?5:0)+(a.type?1:0)}function sortOptions(a,e){let n=[],s=null,o=f=>{n.push(f);let{section:d}=f.completion;if(d){s||(s=[]);let p=typeof d=="string"?d:d.name;s.some(g=>g.name==p)||s.push(typeof d=="string"?{name:p}:d)}},l=e.facet(completionConfig);for(let f of a)if(f.hasResult()){let d=f.result.getMatch;if(f.result.filter===!1)for(let p of f.result.options)o(new Option(p,f.source,d?d(p):[],1e9-n.length));else{let p=e.sliceDoc(f.from,f.to),g,m=l.filterStrict?new StrictMatcher(p):new FuzzyMatcher(p);for(let y of f.result.options)if(g=m.match(y.label)){let _=y.displayLabel?d?d(y,g.matched):[]:g.matched;o(new Option(y,f.source,_,g.score+(y.boost||0)))}}}if(s){let f=Object.create(null),d=0,p=(g,m)=>{var y,_;return((y=g.rank)!==null&&y!==void 0?y:1e9)-((_=m.rank)!==null&&_!==void 0?_:1e9)||(g.name<m.name?-1:1)};for(let g of s.sort(p))d-=1e5,f[g.name]=d;for(let g of n){let{section:m}=g.completion;m&&(g.score+=f[typeof m=="string"?m:m.name])}}let c=[],u=null,h=l.compareCompletions;for(let f of n.sort((d,p)=>p.score-d.score||h(d.completion,p.completion))){let d=f.completion;!u||u.label!=d.label||u.detail!=d.detail||u.type!=null&&d.type!=null&&u.type!=d.type||u.apply!=d.apply||u.boost!=d.boost?c.push(f):score(f.completion)>score(u)&&(c[c.length-1]=f),u=f.completion}return c}class CompletionDialog{constructor(e,n,s,o,l,c){this.options=e,this.attrs=n,this.tooltip=s,this.timestamp=o,this.selected=l,this.disabled=c}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,s,o,l,c){if(o&&!c&&e.some(f=>f.isPending))return o.setDisabled();let u=sortOptions(e,n);if(!u.length)return o&&e.some(f=>f.isPending)?o.setDisabled():null;let h=n.facet(completionConfig).selectOnOpen?0:-1;if(o&&o.selected!=h&&o.selected!=-1){let f=o.options[o.selected].completion;for(let d=0;d<u.length;d++)if(u[d].completion==f){h=d;break}}return new CompletionDialog(u,makeAttrs(s,h),{pos:e.reduce((f,d)=>d.hasResult()?Math.min(f,d.from):f,1e8),create:createTooltip,above:l.aboveCursor},o?o.timestamp:Date.now(),h,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(e,n,s){this.active=e,this.id=n,this.open=s}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,s=n.facet(completionConfig),l=(s.override||n.languageDataAt("autocomplete",cur(n)).map(asSource)).map(h=>(this.active.find(d=>d.source==h)||new ActiveSource(h,this.active.some(d=>d.state!=0)?1:0)).update(e,s));l.length==this.active.length&&l.every((h,f)=>h==this.active[f])&&(l=this.active);let c=this.open,u=e.effects.some(h=>h.is(setActiveEffect));c&&e.docChanged&&(c=c.map(e.changes)),e.selection||l.some(h=>h.hasResult()&&e.changes.touchesRange(h.from,h.to))||!sameResults(l,this.active)||u?c=CompletionDialog.build(l,n,this.id,c,s,u):c&&c.disabled&&!l.some(h=>h.isPending)&&(c=null),!c&&l.every(h=>!h.isPending)&&l.some(h=>h.hasResult())&&(l=l.map(h=>h.hasResult()?new ActiveSource(h.source,0):h));for(let h of e.effects)h.is(setSelectedEffect)&&(c=c&&c.setSelected(h.value,this.id));return l==this.active&&c==this.open?this:new CompletionState(l,this.id,c)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(a,e){if(a==e)return!0;for(let n=0,s=0;;){for(;n<a.length&&!a[n].hasResult();)n++;for(;s<e.length&&!e[s].hasResult();)s++;let o=n==a.length,l=s==e.length;if(o||l)return o==l;if(a[n++].result!=e[s++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(a,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":a};return e>-1&&(n["aria-activedescendant"]=a+"-"+e),n}const none=[];function getUpdateType(a,e){if(a.isUserEvent("input.complete")){let s=a.annotation(pickedCompletion);if(s&&e.activateOnCompletion(s))return 12}let n=a.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:a.isUserEvent("delete.backward")?2:a.selection?8:a.docChanged?16:0}class ActiveSource{constructor(e,n,s=!1){this.source=e,this.state=n,this.explicit=s}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let s=getUpdateType(e,n),o=this;(s&8||s&16&&this.touches(e))&&(o=new ActiveSource(o.source,0)),s&4&&o.state==0&&(o=new ActiveSource(this.source,1)),o=o.updateFor(e,s);for(let l of e.effects)if(l.is(startCompletionEffect))o=new ActiveSource(o.source,1,l.value);else if(l.is(closeCompletionEffect))o=new ActiveSource(o.source,0);else if(l.is(setActiveEffect))for(let c of l.value)c.source==o.source&&(o=c);return o}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(cur(e.state))}}class ActiveResult extends ActiveSource{constructor(e,n,s,o,l,c){super(e,3,n),this.limit=s,this.result=o,this.from=l,this.to=c}hasResult(){return!0}updateFor(e,n){var s;if(!(n&3))return this.map(e.changes);let o=this.result;o.map&&!e.changes.empty&&(o=o.map(o,e.changes));let l=e.changes.mapPos(this.from),c=e.changes.mapPos(this.to,1),u=cur(e.state);if(u>c||!o||n&2&&(cur(e.startState)==this.from||u<this.limit))return new ActiveSource(this.source,n&4?1:0);let h=e.changes.mapPos(this.limit);return checkValid(o.validFor,e.state,l,c)?new ActiveResult(this.source,this.explicit,h,o,l,c):o.update&&(o=o.update(o,l,c,new CompletionContext(e.state,u,!1)))?new ActiveResult(this.source,this.explicit,h,o,o.from,(s=o.to)!==null&&s!==void 0?s:cur(e.state)):new ActiveSource(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ActiveResult(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function checkValid(a,e,n,s){if(!a)return!1;let o=e.sliceDoc(n,s);return typeof a=="function"?a(o,n,s,e):ensureAnchor(a,!0).test(o)}const setActiveEffect=StateEffect.define({map(a,e){return a.map(n=>n.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(a,e){return a.update(e)},provide:a=>[showTooltip.from(a,e=>e.tooltip),EditorView.contentAttributes.from(a,e=>e.attrs)]});function applyCompletion(a,e){const n=e.completion.apply||e.completion.label;let s=a.state.field(completionState).active.find(o=>o.source==e.source);return s instanceof ActiveResult?(typeof n=="string"?a.dispatch(Object.assign(Object.assign({},insertCompletionText(a.state,n,s.from,s.to)),{annotations:pickedCompletion.of(e.completion)})):n(a,e.completion,s.from,s.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(a,e="option"){return n=>{let s=n.state.field(completionState,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<n.state.facet(completionConfig).interactionDelay)return!1;let o=1,l;e=="page"&&(l=getTooltip(n,s.open.tooltip))&&(o=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:c}=s.open.options,u=s.open.selected>-1?s.open.selected+o*(a?1:-1):a?0:c-1;return u<0?u=e=="page"?0:c-1:u>=c&&(u=e=="page"?c-1:0),n.dispatch({effects:setSelectedEffect.of(u)}),!0}}const acceptCompletion=a=>{let e=a.state.field(completionState,!1);return a.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<a.state.facet(completionConfig).interactionDelay?!1:applyCompletion(a,e.open.options[e.open.selected])},startCompletion=a=>a.state.field(completionState,!1)?(a.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=a=>{let e=a.state.field(completionState,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(a.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of a.state.field(completionState).active)e.isPending&&this.startQuery(e)}update(a){let e=a.state.field(completionState),n=a.state.facet(completionConfig);if(!a.selectionSet&&!a.docChanged&&a.startState.field(completionState)==e)return;let s=a.transactions.some(l=>{let c=getUpdateType(l,n);return c&8||(l.selection||l.docChanged)&&!(c&3)});for(let l=0;l<this.running.length;l++){let c=this.running[l];if(s||c.context.abortOnDocChange&&a.docChanged||c.updates.length+a.transactions.length>MaxUpdateCount&&Date.now()-c.time>MinAbortTime){for(let u of c.context.abortListeners)try{u()}catch(h){logException(this.view.state,h)}c.context.abortListeners=null,this.running.splice(l--,1)}else c.updates.push(...a.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),a.transactions.some(l=>l.effects.some(c=>c.is(startCompletionEffect)))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(l=>l.isPending&&!this.running.some(c=>c.active.source==l.source))?setTimeout(()=>this.startUpdate(),o):-1,this.composing!=0)for(let l of a.transactions)l.isUserEvent("input.type")?this.composing=2:this.composing==2&&l.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:a}=this.view,e=a.field(completionState);for(let n of e.active)n.isPending&&!this.running.some(s=>s.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(a){let{state:e}=this.view,n=cur(e),s=new CompletionContext(e,n,a.explicit,this.view),o=new RunningQuery(a,s);this.running.push(o),Promise.resolve(a.source(s)).then(l=>{o.context.aborted||(o.done=l||null,this.scheduleAccept())},l=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,l)})}scheduleAccept(){this.running.every(a=>a.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var a;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(completionConfig),s=this.view.state.field(completionState);for(let o=0;o<this.running.length;o++){let l=this.running[o];if(l.done===void 0)continue;if(this.running.splice(o--,1),l.done){let u=cur(l.updates.length?l.updates[0].startState:this.view.state),h=Math.min(u,l.done.from+(l.active.explicit?0:1)),f=new ActiveResult(l.active.source,l.active.explicit,h,l.done,l.done.from,(a=l.done.to)!==null&&a!==void 0?a:u);for(let d of l.updates)f=f.update(d,n);if(f.hasResult()){e.push(f);continue}}let c=s.active.find(u=>u.source==l.active.source);if(c&&c.isPending)if(l.done==null){let u=new ActiveSource(l.active.source,0);for(let h of l.updates)u=u.update(h,n);u.isPending||e.push(u)}else this.startQuery(c)}(e.length||s.open&&s.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(a){let e=this.view.state.field(completionState,!1);if(e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let n=e.open&&getTooltip(this.view,e.open.tooltip);(!n||!n.dom.contains(a.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(a,e){let n=e.state.field(completionState,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||a.key.length>1||a.ctrlKey&&!(windows&&a.altKey)||a.metaKey)return!1;let s=n.open.options[n.open.selected],o=n.active.find(c=>c.source==s.source),l=s.completion.commitCharacters||o.result.commitCharacters;return l&&l.indexOf(a.key)>-1&&applyCompletion(e,s),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(a,e){let n=e.mapPos(a,-1,MapMode.TrackAfter);return n??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(a,e){if(a=a.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);a=a.update({filter:s=>s>=n.from&&s<=n.to})}for(let n of e.effects)n.is(closeBracketEffect)&&(a=a.update({add:[closedBracket.range(n.value,n.value+1)]}));return a}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>«»»«［］｛｝";function closing(a){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==a)return definedClosing.charAt(e+1);return fromCodePoint(a<128?a:a+1)}function config(a,e){return a.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((a,e,n,s)=>{if((android?a.composing:a.compositionStarted)||a.state.readOnly)return!1;let o=a.state.selection.main;if(s.length>2||s.length==2&&codePointSize(codePointAt(s,0))==1||e!=o.from||n!=o.to)return!1;let l=insertBracket(a.state,s);return l?(a.dispatch(l),!0):!1}),deleteBracketPair=({state:a,dispatch:e})=>{if(a.readOnly)return!1;let s=config(a,a.selection.main.head).brackets||defaults.brackets,o=null,l=a.changeByRange(c=>{if(c.empty){let u=prevChar(a.doc,c.head);for(let h of s)if(h==u&&nextChar(a.doc,c.head)==closing(codePointAt(h,0)))return{changes:{from:c.head-h.length,to:c.head+h.length},range:EditorSelection.cursor(c.head-h.length)}}return{range:o=c}});return o||e(a.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(a,e){let n=config(a,a.selection.main.head),s=n.brackets||defaults.brackets;for(let o of s){let l=closing(codePointAt(o,0));if(e==o)return l==o?handleSame(a,o,s.indexOf(o+o+o)>-1,n):handleOpen(a,o,l,n.before||defaults.before);if(e==l&&closedBracketAt(a,a.selection.main.from))return handleClose(a,o,l)}return null}function closedBracketAt(a,e){let n=!1;return a.field(bracketState).between(0,a.doc.length,s=>{s==e&&(n=!0)}),n}function nextChar(a,e){let n=a.sliceString(e,e+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function prevChar(a,e){let n=a.sliceString(e-2,e);return codePointSize(codePointAt(n,0))==n.length?n:n.slice(1)}function handleOpen(a,e,n,s){let o=null,l=a.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:n,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let u=nextChar(a.doc,c.head);return!u||/\s/.test(u)||s.indexOf(u)>-1?{changes:{insert:e+n,from:c.head},effects:closeBracketEffect.of(c.head+e.length),range:EditorSelection.cursor(c.head+e.length)}:{range:o=c}});return o?null:a.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(a,e,n){let s=null,o=a.changeByRange(l=>l.empty&&nextChar(a.doc,l.head)==n?{changes:{from:l.head,to:l.head+n.length,insert:n},range:EditorSelection.cursor(l.head+n.length)}:s={range:l});return s?null:a.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(a,e,n,s){let o=s.stringPrefixes||defaults.stringPrefixes,l=null,c=a.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:closeBracketEffect.of(u.to+e.length),range:EditorSelection.range(u.anchor+e.length,u.head+e.length)};let h=u.head,f=nextChar(a.doc,h),d;if(f==e){if(nodeStart(a,h))return{changes:{insert:e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)};if(closedBracketAt(a,h)){let g=n&&a.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+g.length,insert:g},range:EditorSelection.cursor(h+g.length)}}}else{if(n&&a.sliceDoc(h-2*e.length,h)==e+e&&(d=canStartStringAt(a,h-2*e.length,o))>-1&&nodeStart(a,d))return{changes:{insert:e+e+e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)};if(a.charCategorizer(h)(f)!=CharCategory.Word&&canStartStringAt(a,h,o)>-1&&!probablyInString(a,h,e,o))return{changes:{insert:e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)}}return{range:l=u}});return l?null:a.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(a,e){let n=syntaxTree(a).resolveInner(e+1);return n.parent&&n.from==e}function probablyInString(a,e,n,s){let o=syntaxTree(a).resolveInner(e,-1),l=s.reduce((c,u)=>Math.max(c,u.length),0);for(let c=0;c<5;c++){let u=a.sliceDoc(o.from,Math.min(o.to,o.from+n.length+l)),h=u.indexOf(n);if(!h||h>-1&&s.indexOf(u.slice(0,h))>-1){let d=o.firstChild;for(;d&&d.from==o.from&&d.to-d.from>n.length+h;){if(a.sliceDoc(d.to-n.length,d.to)==n)return!1;d=d.firstChild}return!0}let f=o.to==e&&o.parent;if(!f)break;o=f}return!1}function canStartStringAt(a,e,n){let s=a.charCategorizer(e);if(s(a.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let o of n){let l=e-o.length;if(a.sliceDoc(l,e)==o&&s(a.sliceDoc(l-1,l))!=CharCategory.Word)return l}return-1}function autocompletion(a={}){return[commitCharacters,completionState,completionConfig.of(a),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],a=>a.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(e,n,s){this.from=e,this.to=n,this.diagnostic=s}}class LintState{constructor(e,n,s){this.diagnostics=e,this.panel=n,this.selected=s}static init(e,n,s){let o=s.facet(lintConfig).markerFilter;o&&(e=o(e,s));let l=e.slice().sort((d,p)=>d.from-p.from||d.to-p.to),c=new RangeSetBuilder,u=[],h=0;for(let d=0;;){let p=d==l.length?null:l[d];if(!p&&!u.length)break;let g,m;for(u.length?(g=h,m=u.reduce((_,b)=>Math.min(_,b.to),p&&p.from>g?p.from:1e8)):(g=p.from,m=p.to,u.push(p),d++);d<l.length;){let _=l[d];if(_.from==g&&(_.to>_.from||_.to==g))u.push(_),d++,m=Math.min(_.to,m);else{m=Math.min(_.from,m);break}}let y=maxSeverity(u);if(u.some(_=>_.from==_.to||_.from==_.to-1&&s.doc.lineAt(_.from).to==_.from))c.add(g,g,Decoration.widget({widget:new DiagnosticWidget(y),diagnostics:u.slice()}));else{let _=u.reduce((b,x)=>x.markClass?b+" "+x.markClass:b,"");c.add(g,m,Decoration.mark({class:"cm-lintRange cm-lintRange-"+y+_,diagnostics:u.slice(),inclusiveEnd:u.some(b=>b.to>m)}))}h=m;for(let _=0;_<u.length;_++)u[_].to<=h&&u.splice(_--,1)}let f=c.finish();return new LintState(f,n,findDiagnostic(f))}}function findDiagnostic(a,e=null,n=0){let s=null;return a.between(n,1e9,(o,l,{spec:c})=>{if(!(e&&c.diagnostics.indexOf(e)<0))if(!s)s=new SelectedDiagnostic(o,l,e||c.diagnostics[0]);else{if(c.diagnostics.indexOf(s.diagnostic)<0)return!1;s=new SelectedDiagnostic(s.from,l,s.diagnostic)}}),s}function hideTooltip(a,e){let n=e.pos,s=e.end||n,o=a.state.facet(lintConfig).hideOn(a,n,s);if(o!=null)return o;let l=a.startState.doc.lineAt(e.pos);return!!(a.effects.some(c=>c.is(setDiagnosticsEffect))||a.changes.touchesRange(l.from,Math.max(l.to,s)))}function maybeEnableLint(a,e){return a.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(a,e){if(e.docChanged&&a.diagnostics.size){let n=a.diagnostics.map(e.changes),s=null,o=a.panel;if(a.selected){let l=e.changes.mapPos(a.selected.from,1);s=findDiagnostic(n,a.selected.diagnostic,l)||findDiagnostic(n,null,l)}!n.size&&o&&e.state.facet(lintConfig).autoPanel&&(o=null),a=new LintState(n,o,s)}for(let n of e.effects)if(n.is(setDiagnosticsEffect)){let s=e.state.facet(lintConfig).autoPanel?n.value.length?LintPanel.open:null:a.panel;a=LintState.init(n.value,s,e.state)}else n.is(togglePanel)?a=new LintState(a.diagnostics,n.value?LintPanel.open:null,a.selected):n.is(movePanelSelection)&&(a=new LintState(a.diagnostics,a.panel,n.value));return a},provide:a=>[showPanel.from(a,e=>e.panel),EditorView.decorations.from(a,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(a,e,n){let{diagnostics:s}=a.state.field(lintState),o,l=-1,c=-1;s.between(e-(n<0?1:0),e+(n>0?1:0),(h,f,{spec:d})=>{if(e>=h&&e<=f&&(h==f||(e>h||n>0)&&(e<f||n<0)))return o=d.diagnostics,l=h,c=f,!1});let u=a.state.facet(lintConfig).tooltipFilter;return o&&u&&(o=u(o,a.state)),o?{pos:l,end:c,above:a.state.doc.lineAt(l).to<c,create(){return{dom:diagnosticsTooltip(a,o)}}}:null}function diagnosticsTooltip(a,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(n=>renderDiagnostic(a,n,!1)))}const openLintPanel=a=>{let e=a.state.field(lintState,!1);(!e||!e.panel)&&a.dispatch({effects:maybeEnableLint(a.state,[togglePanel.of(!0)])});let n=getPanel(a,LintPanel.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=a=>{let e=a.state.field(lintState,!1);return!e||!e.panel?!1:(a.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=a=>{let e=a.state.field(lintState,!1);if(!e)return!1;let n=a.state.selection.main,s=e.diagnostics.iter(n.to+1);return!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==n.from&&s.to==n.to)?!1:(a.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(a){return Object.assign({sources:a.map(e=>e.source).filter(e=>e!=null)},combineConfig(a.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?s=>e(s)||n(s):e:n}))}});function assignKeys(a){let e=[];if(a)e:for(let{name:n}of a){for(let s=0;s<n.length;s++){let o=n[s];if(/[a-zA-Z]/.test(o)&&!e.some(l=>l.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function renderDiagnostic(a,e,n){var s;let o=n?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(a):e.message),(s=e.actions)===null||s===void 0?void 0:s.map((l,c)=>{let u=!1,h=g=>{if(g.preventDefault(),u)return;u=!0;let m=findDiagnostic(a.state.field(lintState).diagnostics,e);m&&l.apply(a,m.from,m.to)},{name:f}=l,d=o[c]?f.indexOf(o[c]):-1,p=d<0?f:[f.slice(0,d),crelt("u",f.slice(d,d+1)),f.slice(d+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${f}${d<0?"":` (access key "${o[c]})"`}.`},p)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let n=o=>{if(o.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:l}=this.items[this.selectedIndex],c=assignKeys(l.actions);for(let u=0;u<c.length;u++)if(c[u].toUpperCase().charCodeAt(0)==o.keyCode){let h=findDiagnostic(this.view.state.field(lintState).diagnostics,l);h&&l.actions[u].apply(e,h.from,h.to)}}else return;o.preventDefault()},s=o=>{for(let l=0;l<this.items.length;l++)this.items[l].dom.contains(o.target)&&this.moveSelection(l)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:s}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(lintState),s=0,o=!1,l=null,c=new Set;for(e.between(0,this.view.state.doc.length,(u,h,{spec:f})=>{for(let d of f.diagnostics){if(c.has(d))continue;c.add(d);let p=-1,g;for(let m=s;m<this.items.length;m++)if(this.items[m].diagnostic==d){p=m;break}p<0?(g=new PanelItem(this.view,d),this.items.splice(s,0,g),o=!0):(g=this.items[p],p>s&&(this.items.splice(s,p-s),o=!0)),n&&g.diagnostic==n.diagnostic?g.dom.hasAttribute("aria-selected")||(g.dom.setAttribute("aria-selected","true"),l=g):g.dom.hasAttribute("aria-selected")&&g.dom.removeAttribute("aria-selected"),s++}});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),l?(this.list.setAttribute("aria-activedescendant",l.id),this.view.requestMeasure({key:this,read:()=>({sel:l.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:h})=>{let f=h.height/this.list.offsetHeight;u.top<h.top?this.list.scrollTop-=(h.top-u.top)/f:u.bottom>h.bottom&&(this.list.scrollTop+=(u.bottom-h.bottom)/f)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function n(){let s=e;e=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;e!=s.dom;)n();e=s.dom.nextSibling}else this.list.insertBefore(s.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(lintState),s=findDiagnostic(n.diagnostics,this.items[e].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:movePanelSelection.of(s)})}static open(e){return new LintPanel(e)}}function svg(a,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(a)}</svg>')`}function underline(a){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${a}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(a){return a=="error"?4:a=="warning"?3:a=="info"?2:1}function maxSeverity(a){let e="hint",n=1;for(let s of a){let o=severityWeight(s.severity);o>n&&(n=o,e=s.severity)}return e}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],a=>{let{selected:e,panel:n}=a.field(lintState);return!e||!n||e.from==e.to?Decoration.none:Decoration.set([activeMark.range(e.from,e.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])];function debounce(a,e,n=!1){let s;return function(...l){const c=this;s?clearTimeout(s):n&&a.apply(c,l),s=setTimeout(u,e||100);function u(){n||a.apply(c,l),s=null}}}var root_1$e=template("<div></div>"),root_2$b=template('<div><div class="scm-waiting__loading scm-loading svelte-kcx0g9"><div class="scm-loading__spinner svelte-kcx0g9"></div> <p class="scm-loading__text svelte-kcx0g9">Loading editor...</p></div> <pre class="scm-pre cm-editor svelte-kcx0g9"> </pre></div>');function CodeMirror(a,e){push(e,!1);const n=mutable_source(),s=mutable_source();let o=prop(e,"class",8,""),l=prop(e,"value",12,""),c=prop(e,"basic",8,!0),u=prop(e,"lang",24,()=>{}),h=prop(e,"theme",24,()=>{}),f=prop(e,"extensions",24,()=>[]),d=prop(e,"useTab",8,!0),p=prop(e,"tabSize",8,2),g=prop(e,"styles",24,()=>{}),m=prop(e,"lineWrapping",8,!1),y=prop(e,"editable",8,!0),_=prop(e,"readonly",8,!1),b=prop(e,"placeholder",24,()=>{}),x=prop(e,"nodebounce",8,!1);const P=typeof window<"u",T=createEventDispatcher();let k=mutable_source(),S=mutable_source(),A=!1,w=!1,E=!0,F=!0;onMount(()=>{set(S,O()),T("ready",get$3(S))}),onDestroy(()=>{var _e;return(_e=get$3(S))==null?void 0:_e.destroy()});function O(){return new EditorView({parent:get$3(k),state:te(l()),dispatch(_e){get$3(S).update([_e]),!A&&_e.docChanged&&get$3(s)()}})}function M(){if(E){E=!1;return}get$3(S).dispatch({effects:StateEffect.reconfigure.of(get$3(n))}),T("reconfigure",get$3(S))}function V(_e){if(F){F=!1;return}if(w){w=!1;return}A=!0,get$3(S).setState(te(_e)),A=!1}function G(){const _e=get$3(S).state.doc.toString();_e!==l()&&(w=!0,l(_e),T("change",l()))}function te(_e){return EditorState.create({doc:_e??void 0,extensions:get$3(n)})}function ce(_e,Ce,ae,B,I,q,K,Q){const $=[indentUnit.of(" ".repeat(ae)),EditorView.editable.of(q),EditorState.readOnly.of(K)];return _e&&$.push(basicSetup),Ce&&$.push(keymap.of([indentWithTab])),I&&$.push(placeholder(I)),Q&&$.push(Q),B&&$.push(EditorView.lineWrapping),$}function se(_e,Ce){const ae=[];return Ce&&ae.push(EditorView.theme(Ce)),_e&&ae.push(_e),ae}legacy_pre_effect(()=>(deep_read_state(c()),deep_read_state(d()),deep_read_state(p()),deep_read_state(m()),deep_read_state(b()),deep_read_state(y()),deep_read_state(_()),deep_read_state(u()),deep_read_state(h()),deep_read_state(g()),deep_read_state(f())),()=>{set(n,[...ce(c(),d(),p(),m(),b(),y(),_(),u()),...se(h(),g()),...f()])}),legacy_pre_effect(()=>(get$3(S),deep_read_state(l())),()=>{get$3(S)&&V(l())}),legacy_pre_effect(()=>(get$3(S),get$3(n)),()=>{get$3(S)&&get$3(n)&&M()}),legacy_pre_effect(()=>(deep_read_state(x()),debounce),()=>{set(s,x()?G:debounce(G,300))}),legacy_pre_effect_reset(),init$1();var le=comment$1(),fe=first_child(le);{var ge=_e=>{var Ce=root_1$e();bind_this(Ce,ae=>set(k,ae),()=>get$3(k)),template_effect(()=>set_class(Ce,1,`codemirror-wrapper ${o()??""}`,"svelte-kcx0g9")),append(_e,Ce)},xe=_e=>{var Ce=root_2$b(),ae=sibling(child(Ce),2),B=child(ae);template_effect(()=>{set_class(Ce,1,`scm-waiting ${o()??""}`,"svelte-kcx0g9"),set_text(B,l())}),append(_e,Ce)};if_block(fe,_e=>{P?_e(ge):_e(xe,!1)})}append(a,le),pop()}const logo$1=a=>{var e=root_1$d();append(a,e)},label$1="Source",prefix$1=label$1.slice(0,1),text$1="Quelltext";var root_1$d=template(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M24 32c13.3 0 24 10.7 24 24l0 352c0 13.3 10.7 24 24 24l416 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L72 480c-39.8 0-72-32.2-72-72L0 56C0 42.7 10.7 32 24 32zM128 136c0-13.3 10.7-24 24-24l208 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-208 0c-13.3 0-24-10.7-24-24zm24 72l144 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-144 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 96l272 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-272 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"></path></svg> <style>svg {
      box-sizing: content-box;
      height: calc(33% / 1);
      padding-top: 1rem;
      padding-bottom: 1rem;
      margin-left: auto;
      margin-right: auto;
    }</style>`,1);function _4_Source_panel(a,e){push(e,!0);const n=prop(e,"G",7);CodeMirror(a,{get value(){return n().sourcecode},set value(s){n().sourcecode=s}}),pop()}const __vite_glob_0_3=Object.freeze(Object.defineProperty({__proto__:null,default:_4_Source_panel,label:label$1,logo:logo$1,prefix:prefix$1,text:text$1},Symbol.toStringTag,{value:"Module"}));function increment(a){set(a,a.v+1)}var wt,St,At,Nt,Jt;const wr=class wr extends Map{constructor(n){super();Re(this,Nt);Re(this,wt,new Map);Re(this,St,source(0));Re(this,At,source(0));if(n){for(var[s,o]of n)super.set(s,o);W(this,At).v=super.size}}has(n){var s=W(this,wt),o=s.get(n);if(o===void 0){var l=super.get(n);if(l!==void 0)o=source(0),s.set(n,o);else return get$3(W(this,St)),!1}return get$3(o),!0}forEach(n,s){Ee(this,Nt,Jt).call(this),super.forEach(n,s)}get(n){var s=W(this,wt),o=s.get(n);if(o===void 0){var l=super.get(n);if(l!==void 0)o=source(0),s.set(n,o);else{get$3(W(this,St));return}}return get$3(o),super.get(n)}set(n,s){var p;var o=W(this,wt),l=o.get(n),c=super.get(n),u=super.set(n,s),h=W(this,St);if(l===void 0)o.set(n,source(0)),set(W(this,At),super.size),increment(h);else if(c!==s){increment(l);var f=h.reactions===null?null:new Set(h.reactions),d=f===null||!((p=l.reactions)!=null&&p.every(g=>f.has(g)));d&&increment(h)}return u}delete(n){var s=W(this,wt),o=s.get(n),l=super.delete(n);return o!==void 0&&(s.delete(n),set(W(this,At),super.size),set(o,-1),increment(W(this,St))),l}clear(){if(super.size!==0){super.clear();var n=W(this,wt);set(W(this,At),0);for(var s of n.values())set(s,-1);increment(W(this,St)),n.clear()}}keys(){return get$3(W(this,St)),super.keys()}values(){return Ee(this,Nt,Jt).call(this),super.values()}entries(){return Ee(this,Nt,Jt).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return get$3(W(this,At)),super.size}};wt=new WeakMap,St=new WeakMap,At=new WeakMap,Nt=new WeakSet,Jt=function(){get$3(W(this,St));var n=W(this,wt);if(W(this,At).v!==n.size)for(var s of Dr(wr.prototype,this,"keys").call(this))n.has(s)||n.set(s,source(0));for(var[,o]of W(this,wt))get$3(o)};let SvelteMap=wr;const VALUE_CACHE=Symbol("siv.value-cache");function initValueCache(){return setContext(VALUE_CACHE,new SvelteMap)}function useValueCache(){return getContext(VALUE_CACHE)}function getPreviewLevel(){return getContext(Symbol.for("siv.preview-level"))??0}const OPTIONS_CONTEXT=Symbol("inspect-options"),GLOBAL_OPTIONS_CONTEXT=Symbol("inspect-global-options"),DEFAULT_OPTIONS={noanimate:!1,quotes:"single",showTypes:!0,showPreview:!0,previewDepth:1,previewEntries:3,flashOnUpdate:!0,showLength:!0,showTools:!0,stringCollapse:0,theme:"inspect",borderless:!1,customComponents:{},expandAll:!1,expandLevel:1,expandPaths:[],embedMedia:!1,elementView:"simple",renderIf:!0,parseJson:!1,onCopy:void 0,canCopy:void 0,onLog:void 0,onCollapseChange:void 0,stores:"full"},OPTIONS_KEYS=Object.keys(DEFAULT_OPTIONS);function mergeOptions(a,e={}){const n=Object.entries(a).filter(([,s])=>s!=null);return{...DEFAULT_OPTIONS,...e,...Object.fromEntries(n)}}function createOptions(a){const e=user_derived(()=>a().noanimate?0:200),n=user_derived(()=>clamp(a().expandAll?30:a().expandLevel??1,0,30));return{get value(){return a()},get transitionDuration(){return get$3(e)},get expandLevel(){return get$3(n)}}}function useOptions(){return getContext(OPTIONS_CONTEXT)}function initialize(a){setContext(OPTIONS_CONTEXT,a),initValueCache()}function getType(a,e=!1){const n=typeOf(a);if(n==="function"){if(a.toString().startsWith("class")||a.toLocaleString().startsWith("class"))return"class"}else if(n==="object")return e&&isStore(a)?"store":"object";return n}function typeOf(a){return{}.toString.call(a).slice(8,-1).replace(" ","").toLowerCase()??"undefined"}function isArray(a){return Array.isArray(a)}function isStore(a){return typeof a.subscribe=="function"}function isPromise(a){return getType(a)==="promise"}function isObject(a){return getType(a)==="object"}function stringify(a,e=2,n="single"){return typeof a=="string"&&n==="single"?`'${JSON.stringify(a,null,e).slice(1,-1)}'`:typeof a=="string"&&n==="none"?`${JSON.stringify(a,null,e).slice(1,-1)}`:JSON.stringify(a,(s,o)=>{if(typeof o=="bigint"){try{JSON.stringify(o)}catch(l){return l instanceof Error?"Caught "+l.name+": "+l.message:JSON.stringify(l)}return"< escaped bigint to avoid TypeError >"}return o},e)}function stringifyOrToString(a){const e=stringify(a,0);if(e!=="{}")return e;try{return getType(a)}catch{return getType(a)}}const stringifyPath=a=>a.map(e=>e.toString()).join(".");function collapseString(a,e){return e===0?a:e&&e<a.length?a.slice(0,e).trimEnd().trimStart()+"…":a}function descriptorPrefix(a){return[a!=null&&a.set?"set":void 0,a!=null&&a.get?"get":void 0].filter(Boolean).join("|")}function getAllProperties(a){if(a==null)return[];const e=[];for(const n in a)e.push(n);return[...new Set([...e,...Object.getOwnPropertyNames(a),...Object.getOwnPropertySymbols(a)])]}function getPropertyDescriptor(a,e){if(a){const n=Object.getOwnPropertyDescriptor(a,e);if(n)return n;{const s=Object.getPrototypeOf(a);return getPropertyDescriptor(s,e)}}else return{}}function ensureStringPath(a){let e;return Array.isArray(a)?e=stringifyPath(a):e=a,e}function matchPath(a,e){const n=e.map(s=>s.split("."));e:for(const s of n){if(a.length>s.length)continue;const o=Math.min(a.length,s.length);for(let l=0;l<o;l++)if(s[l]!=="*"&&s[l]!==String(a[l]))continue e;return!0}return!1}const neverExpandInitial=["constructor","prototype"];function shouldInitiallyExpandNode(a,e,n,s){if(neverExpandInitial.includes(a[a.length-1]))return!1;if(n||a.length<=e)return!0;if(s.length){const o=stringifyPath(a).split(".");return matchPath(o,s)}return!1}function sortProps(a){const e={},n={};return Object.entries(a).forEach(([s,o])=>{OPTIONS_KEYS.includes(s)?e[s]=o:n[s]=o}),[e,n]}function clamp(a,e,n){return Math.min(Math.max(a,e),n)}const STATE_CONTEXT_KEY=Symbol("inspect-state");function createState(a,e){function n(){e==null||e(snapshot(a))}return{get value(){return a},set value(s){a=s},setCollapse:(s,o)=>{try{const l=ensureStringPath(s);let c=!1;if(a){const u=a[l]??{};a[l]={...u,...o},c=!0}c&&a&&n()}catch(l){console.error(l)}},getCollapse(s){const o=ensureStringPath(s);return a==null?void 0:a[o]},collapseChildren:(s,o)=>{if(a){let l=!1;Object.entries(a).forEach(c=>{const[u]=c;u.split(".").length>s&&(c[1].collapsed=!0,l=!0)}),l&&n()}},expandChildren:(s,o)=>{if(a){let l=!1;const c=ensureStringPath(o);a[c].collapsed=!1,Object.entries(a).forEach(u=>{const[h]=u,f=h.split(".");h.startsWith(c)&&f.length===s+1&&(u[1].collapsed=!1,l=!0)}),l&&n()}}}}function useState(){return getContext(STATE_CONTEXT_KEY)}function CollapseStateProvider(a,e){push(e,!0);const n=proxy({}),s=createState(n,c=>{var u;return(u=e.onCollapseChange)==null?void 0:u.call(e,c)});setContext(STATE_CONTEXT_KEY,s);var o=comment$1(),l=first_child(o);snippet(l,()=>e.children),append(a,o),pop()}const linear=a=>a;function cubic_out(a){const e=a-1;return e*e*e+1}function cubic_in_out(a){return a<.5?4*a*a*a:.5*Math.pow(2*a-2,3)+1}function split_css_unit(a){const e=typeof a=="string"&&a.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[a,"px"]}function blur(a,{delay:e=0,duration:n=400,easing:s=cubic_in_out,amount:o=5,opacity:l=0}={}){const c=getComputedStyle(a),u=+c.opacity,h=c.filter==="none"?"":c.filter,f=u*(1-l),[d,p]=split_css_unit(o);return{delay:e,duration:n,easing:s,css:(g,m)=>`opacity: ${u-f*m}; filter: ${h} blur(${m*d}${p});`}}function fade(a,{delay:e=0,duration:n=400,easing:s=linear}={}){const o=+getComputedStyle(a).opacity;return{delay:e,duration:n,easing:s,css:l=>`opacity: ${l*o}`}}function fly(a,{delay:e=0,duration:n=400,easing:s=cubic_out,x:o=0,y:l=0,opacity:c=0}={}){const u=getComputedStyle(a),h=+u.opacity,f=u.transform==="none"?"":u.transform,d=h*(1-c),[p,g]=split_css_unit(o),[m,y]=split_css_unit(l);return{delay:e,duration:n,easing:s,css:(_,b)=>`
			transform: ${f} translate(${(1-_)*p}${g}, ${(1-_)*m}${y});
			opacity: ${h-d*b}`}}function slide(a,{delay:e=0,duration:n=400,easing:s=cubic_out,axis:o="y"}={}){const l=getComputedStyle(a),c=+l.opacity,u=o==="y"?"height":"width",h=parseFloat(l[u]),f=o==="y"?["top","bottom"]:["left","right"],d=f.map(x=>`${x[0].toUpperCase()}${x.slice(1)}`),p=parseFloat(l[`padding${d[0]}`]),g=parseFloat(l[`padding${d[1]}`]),m=parseFloat(l[`margin${d[0]}`]),y=parseFloat(l[`margin${d[1]}`]),_=parseFloat(l[`border${d[0]}Width`]),b=parseFloat(l[`border${d[1]}Width`]);return{delay:e,duration:n,easing:s,css:x=>`overflow: hidden;opacity: ${Math.min(x*20,1)*c};${u}: ${x*h}px;padding-${f[0]}: ${x*p}px;padding-${f[1]}: ${x*g}px;margin-${f[0]}: ${x*m}px;margin-${f[1]}: ${x*y}px;border-${f[0]}-width: ${x*_}px;border-${f[1]}-width: ${x*b}px;min-${u}: 0`}}function scale(a,{delay:e=0,duration:n=400,easing:s=cubic_out,start:o=0,opacity:l=0}={}){const c=getComputedStyle(a),u=+c.opacity,h=c.transform==="none"?"":c.transform,f=1-o,d=u*(1-l);return{delay:e,duration:n,easing:s,css:(p,g)=>`
			transform: ${h} scale(${1-f*g});
			opacity: ${u-d*g}
		`}}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function a(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,o,l;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(o=s;o--!==0;)if(!a(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(l=Object.keys(e),s=l.length,s!==Object.keys(n).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[o]))return!1;for(o=s;o--!==0;){var c=l[o];if(!a(e[c],n[c]))return!1}return!0}return e!==e&&n!==n}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const equal=getDefaultExportFromCjs$1(fastDeepEqualExports),flashOnUpdate=(a,e)=>{const{value:n,onInit:s,enabled:o=()=>!0,flashStyle:l=()=>({height:"4px",width:"4px",backgroundColor:"var(--_update-flash-color)",border:"1px solid var(--_update-flash-color",transform:"translateX(0%) scale(1, 1)",filter:"drop-shadow(0px 0px 2px var(--_update-flash-color))",borderRadius:"9999px"})}=e;let c=n(),u,h=!1;const f=d=>{if(h)return;h=!0;const p=d??l(),g=Object.keys({...p,...l()}).map(m=>[m,a.style.getPropertyValue(m)]);a.style.transition="all 0ms linear",Object.entries(p).forEach(([m,y])=>{a.style[m]=y}),u&&window.clearTimeout(u),u=window.setTimeout(()=>{a.style.transition="all 200ms ease-out",g.forEach(([m])=>{m!=="transition"&&(a.style[m]="")}),h=!1},100)};s&&s(f),user_effect(()=>{if(o()){const d=n();untrack(()=>{equal(c,d)||(a.dispatchEvent(new CustomEvent("inspectvaluechange",{bubbles:!0})),f(l()),c=d)})}})};var root$o=ns_template('<svg><path fill="currentColor" d="M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37"></path></svg>');function Caret(a,e){push(e,!0);const n=rest_props(e,["$$slots","$$events","$$legacy","value"]),s=useOptions();let o=state(void 0);function l(){var h;(h=get$3(o))==null||h({color:"var(--_child-update-flash-color)",filter:"none"})}var c=root$o();let u;return action(c,(h,f)=>flashOnUpdate==null?void 0:flashOnUpdate(h,f),()=>({value:()=>e.value??"",enabled:()=>{var h;return(h=s==null?void 0:s.value)==null?void 0:h.flashOnUpdate},flashStyle:()=>({color:"var(--_update-flash-color)",filter:"drop-shadow(0 0 4px var(--_update-flash-color))",overflow:"visible"}),onInit:h=>set(o,h,!0)})),template_effect(()=>u=set_attributes(c,u,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",...n})),append(a,c),pop({flash:l})}var root$n=template('<div class="bullet svelte-cvcw6q"><div class="dash svelte-cvcw6q"></div></div>');function Bullet(a,e){push(e,!0);let n=prop(e,"value",3,void 0),s=useOptions();var o=root$n(),l=child(o);action(l,(c,u)=>flashOnUpdate==null?void 0:flashOnUpdate(c,u),()=>({value:()=>n(),enabled:()=>s.value.flashOnUpdate})),append(a,o),pop()}var root_2$a=template('<div class="svelte-11auzr3"><!></div>'),root$m=template("<button><!></button>");function CollapseButton(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","collapsed","onchange","disabled","value","key","type"]),s=useOptions(),o=user_derived(()=>e.disabled?180:e.collapsed?0:90);function l(y){if(e.onchange)switch(y.key){case"ArrowDown":case"ArrowRight":y.preventDefault(),e.onchange(!1);break;case"ArrowUp":case"ArrowLeft":y.preventDefault(),e.onchange(!0);break}}let c=state(void 0);function u(){var y;(y=get$3(c))==null||y.flash()}let h=user_derived(()=>{var y;return(y=e.key??e.type)==null?void 0:y.toString()});var f=root$m();let d;var p=child(f);{var g=y=>{Bullet(y,{})},m=y=>{var _=root_2$a(),b=child(_);bind_this(Caret(b,{get value(){return e.value},get style(){return`rotate:${get$3(o)??""}deg; transition: rotate 125ms ease-in-out; width: 100%; height: 100%;`}}),x=>set(c,x,!0),()=>get$3(c)),transition(1,_,()=>scale,()=>({duration:s.transitionDuration})),append(y,_)};if_block(p,y=>{e.disabled?y(g):y(m,!1)})}return template_effect(()=>d=set_attributes(f,d,{"data-testid":"collapse-button",type:"button",class:"collapse","aria-label":`${e.collapsed?"expand":"collapse"} ${get$3(h)}`,title:`${e.collapsed?"expand":"collapse"} ${get$3(h)}`,disabled:e.disabled,...n,onkeydown:l},"svelte-11auzr3")),append(a,f),pop({flash:u})}var root$l=template("<button><!></button>");function NodeActionButton(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","children","onclick","busy","disabled"]),s=state(void 0);function o(){var f;(f=get$3(s))==null||f.focus()}var l=root$l(),c=f=>f.stopPropagation();let u;var h=child(l);return snippet(h,()=>e.children??noop$1),bind_this(l,f=>set(s,f),()=>get$3(s)),template_effect(()=>u=set_attributes(l,u,{type:"button",disabled:e.disabled||e.busy,"aria-busy":e.busy,...n,onclick:e.onclick,ondblclick:c},"svelte-v2isb6")),append(a,l),pop({focus:o})}var root_1$c=template("<div><!> <!></div>"),root_5$3=template("root error (see console) <!>",1),root_4$4=template('<div class="body svelte-z1o6ws"><!></div>'),root$k=template("<div><!> <!></div>");function Wrapper(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","children","class","oninspectvaluechange","heading","onhandleclick"]),s=state(!1);const o=getContext(Symbol.for("siv.fixed"));var l=root$k();let c;var u=child(l);{var h=p=>{var g=root_1$c();let m;var y=child(g);CollapseButton(y,{onclick:()=>set(s,!get$3(s)),onchange:P=>set(s,P,!0),value:!0,get collapsed(){return get$3(s)}});var _=sibling(y,2);{var b=P=>{var T=text$5();template_effect(()=>set_text(T,e.heading)),append(P,T)},x=P=>{var T=comment$1(),k=first_child(T);snippet(k,()=>e.heading),append(P,T)};if_block(_,P=>{typeof e.heading=="string"?P(b):P(x,!1)})}template_effect(P=>m=set_class(g,1,"heading svelte-z1o6ws",null,m,P),[()=>({collapsed:get$3(s)})]),append(p,g)};if_block(u,p=>{e.heading&&p(h)})}var f=sibling(u,2);{var d=p=>{var g=root_4$4(),m=child(g);boundary(m,{onerror:console.error,failed:(_,b=noop$1,x=noop$1)=>{var P=root_5$3(),T=sibling(first_child(P));NodeActionButton(T,{get onclick(){return x()},children:(k,S)=>{var A=text$5("reset");append(k,A)},$$slots:{default:!0}}),append(_,P)}},_=>{var b=comment$1(),x=first_child(b);snippet(x,()=>e.children),append(_,b)}),transition(3,g,()=>slide),append(p,g)};if_block(f,p=>{get$3(s)||p(d)})}template_effect(()=>c=set_attributes(l,c,{class:["svelte-inspect-value",o&&"in-fixed",e.class],...n},"svelte-z1o6ws")),append(a,l),pop()}class InspectError extends Error{constructor(n,s,o){super(n,o);rt(this,"errorValue");rt(this,"name","InspectError");this.errorValue=s}get value(){return this.errorValue}}function cubicOut(a){const e=a-1;return e*e*e+1}function slideXY(a,{delay:e=0,duration:n=400,easing:s=cubicOut}={}){const o=getComputedStyle(a),l=+o.opacity,c=parseFloat(o.height),u=parseFloat(o.width),h={top:parseFloat(o.paddingTop),bottom:parseFloat(o.paddingBottom),right:parseFloat(o.paddingRight),left:parseFloat(o.paddingLeft)},f={top:parseFloat(o.marginTop),bottom:parseFloat(o.marginBottom),right:parseFloat(o.marginRight),left:parseFloat(o.marginLeft)},d={top:parseFloat(o.borderTopWidth),bottom:parseFloat(o.borderBottomWidth),right:parseFloat(o.borderRightWidth),left:parseFloat(o.borderLeftWidth)};return{delay:e,duration:n,easing:s,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*l};width: ${p*u}px;height: ${p*c}px;padding-top: ${p*h.top}px;padding-bottom: ${p*h.bottom}px;padding-right: ${p*h.right}px;padding-left: ${p*h.left}px;margin-top: ${p*f.top}px;margin-bottom: ${p*f.bottom}px;margin-right: ${p*f.right}px;margin-left: ${p*f.left}px;border-top-width: ${p*d.top}px;border-bottom-width: ${p*d.bottom}px;border-right-width: ${p*d.right}px;border-left-width: ${p*d.left}px;min-height: 0;min-width: 0`}}var root_3$5=template('<span class="unit svelte-u35ohg"> </span>'),root_4$3=template('<span class="unit svelte-u35ohg"> </span>'),root_2$9=template("<!> <!>",1),root_1$b=template('<span data-testid="count" class="count svelte-u35ohg"><!></span>');function Count(a,e){push(e,!0);const n=useOptions();let s=user_derived(()=>n.value),o=user_derived(()=>get$3(s).showLength),l=user_derived(()=>{if(!get$3(o))return"";switch(e.type){case"urlsearchparams":return"size:";default:return""}}),c=user_derived(()=>{if(!get$3(o))return"";switch(e.type){case"urlsearchparams":return;case"array":case"int8array":case"uint8array":case"uint8clampedarray":case"int16array":case"uint16array":case"int32array":case"uint32array":case"float32array":case"float64array":case"bigint64array":case"biguint64array":return"items";case"string":return"chars";default:return"entries"}});var u=comment$1(),h=first_child(u);{var f=d=>{var p=root_1$b(),g=child(p);{var m=_=>{var b=root_2$9(),x=first_child(b);{var P=A=>{var w=root_3$5(),E=child(w);template_effect(()=>set_text(E,get$3(l))),append(A,w)};if_block(x,A=>{get$3(l)&&A(P)})}var T=sibling(x),k=sibling(T);{var S=A=>{var w=root_4$3(),E=child(w);template_effect(()=>set_text(E,get$3(c))),append(A,w)};if_block(k,A=>{get$3(c)&&A(S)})}template_effect(()=>set_text(T,` ${e.length??""} `)),append(_,b)},y=_=>{var b=text$5("empty");append(_,b)};if_block(g,_=>{e.length>0?_(m):_(y,!1)})}append(d,p)};if_block(h,d=>{get$3(o)&&typeof e.length=="number"&&d(f)})}append(a,u),pop()}var root_1$a=template("<span> </span>");function Type(a,e){push(e,!0);let n=prop(e,"type",3,""),s=rest_props(e,["$$slots","$$events","$$legacy","type","force"]);const o=useOptions();let l=user_derived(()=>{switch(n()){case"number":return"num";case"string":return"str";case"regexp":return"regex";case"function":return"fn";case"asyncfunction":return"async fn";case"generatorfunction":return"fn*";case"asyncgeneratorfunction":return"async fn*";case"boolean":return"bool";case"url":return"URL";case"urlsearchparams":return"URLSearch";case"map":return"Map";case"set":return"Set";case"date":return"Date";case"object":return"obj";case"array":return"arr";case"promise":return"Promise";default:return n()}});const c=["undefined","null","class","function","asyncfunction","generatorfunction","asyncgeneratorfunction","promise","readable","writable","Entry","map","set","date","url"];let u=user_derived(()=>c.includes(n()));const h=getPreviewLevel();var f=comment$1(),d=first_child(f);{var p=g=>{var m=root_1$a();let y;var _=child(m);template_effect(()=>{y=set_attributes(m,y,{"data-testid":"type",class:`type ${n()}`,title:n(),...s},"svelte-5s8ni"),set_text(_,get$3(l))}),append(g,m)};if_block(d,g=>{(n()&&o.value.showTypes&&h===0||get$3(u)||e.force)&&g(p)})}append(a,f),pop()}var root_4$2=template('<span class="prefix svelte-1pilgrq"> </span>'),root_8$2=template('<span class="whitespace svelte-1pilgrq">&sdot;</span>'),root_5$2=template("<span><!></span>"),root_3$4=template("<!> <!>",1),root_14$1=template('<span class="delim svelte-1pilgrq"> </span>'),root_2$8=template('<div class="key-outer svelte-1pilgrq"><!> <!></div>');function Key(a,e){push(e,!0);let n=prop(e,"path",19,()=>[]),s=prop(e,"delim",3,":"),o=rest_props(e,["$$slots","$$events","$$legacy","key","path","delim","prefix","disabled","onclick"]);const l=useOptions(),c=["string","number","symbol","quotedstring"],u=["bigint","regexp"],h=user_derived(()=>e.disabled?"span":"button"),f=/[^A-zÀ-ú0-9\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F_$]|[\\[\]`]/,d=getPreviewLevel();let p=user_derived(()=>{const T=getType(e.key);return T==="string"&&(e.key.match(f)||e.key==="")?"quotedstring":T}),g=user_derived(()=>e.key!=null?get$3(p)==="quotedstring"?stringify(e.key,void 0,l.value.quotes):e.key.toString():e.key),m=user_derived(()=>e.key===void 0?d>0:!0);setContext(Symbol.for("siv.key"),!0);function y(T){throw new Error("Error in Key.svelte",{cause:T})}function _(T){var k;e.disabled||(k=e.onclick)==null||k.call(e,T)}var b=comment$1(),x=first_child(b);{var P=T=>{var k=comment$1(),S=first_child(k);boundary(S,{onerror:y},A=>{var w=root_2$8(),E=child(w);element(E,()=>get$3(h),!1,(M,V)=>{let G;template_effect((xe,_e)=>G=set_attributes(M,G,{"data-testid":"key",type:get$3(h)==="button"?"button":void 0,class:["key-button",e.disabled&&"disabled"],disabled:e.disabled,"aria-label":xe,title:_e,onclick:_,...o},"svelte-1pilgrq"),[()=>{var xe;return(xe=e.key)==null?void 0:xe.toString()},()=>d===0?stringifyPath(n()):void 0]);var te=root_3$4(),ce=first_child(te);{var se=xe=>{var _e=root_4$2(),Ce=child(_e);template_effect(()=>set_text(Ce,e.prefix)),append(xe,_e)};if_block(ce,xe=>{e.prefix&&xe(se)})}var le=sibling(ce,2);{var fe=xe=>{var _e=root_5$2(),Ce=child(_e);{var ae=I=>{var q=comment$1(),K=first_child(q);each(K,17,()=>get$3(g),index,(Q,$)=>{var Z=comment$1(),J=first_child(Z);{var R=z=>{var L=root_8$2();append(z,L)},U=z=>{var L=text$5();template_effect(()=>set_text(L,get$3($))),append(z,L)};if_block(J,z=>{get$3($)===" "?z(R):z(U,!1)})}append(Q,Z)}),append(I,q)},B=I=>{var q=text$5();template_effect(K=>set_text(q,K),[()=>{var K;return(K=get$3(g))==null?void 0:K.toString()}]),append(I,q)};if_block(Ce,I=>{get$3(p)==="quotedstring"&&e.key!==""?I(ae):I(B,!1)})}template_effect(()=>set_class(_e,1,`key ${get$3(p)??""}`,"svelte-1pilgrq")),append(xe,_e)},ge=(xe,_e)=>{{var Ce=B=>{Node$1(B,{get value(){return e.key}})},ae=B=>{Type(B,{get type(){return get$3(p)},force:!0})};if_block(xe,B=>{u.includes(get$3(p))?B(Ce):B(ae,!1)},_e)}};if_block(le,xe=>{c.includes(get$3(p))?xe(fe):xe(ge,!1)})}append(V,te)});var F=sibling(E,2);{var O=M=>{var V=root_14$1(),G=child(V);template_effect(()=>set_text(G,s())),append(M,V)};if_block(F,M=>{s()&&M(O)})}append(A,w)}),append(T,k)};if_block(x,T=>{get$3(m)&&T(P)})}append(a,b),pop()}var root$j=template("<span><!></span>");function NodeNote(a,e){let n=rest_props(e,["$$slots","$$events","$$legacy","children"]);var s=root$j();let o;var l=child(s);snippet(l,()=>e.children??noop$1),template_effect(()=>o=set_attributes(s,o,{"data-testid":"note",...n},"svelte-3yfbn5")),append(a,s)}const resizable=(a,e)=>{const n=a.parentElement,s="button",o=document.createElement(s);o.dataset.dir="north",o.dataset.axis="y",o.classList.add("grabber"),o.classList.add("top");const l=document.createElement(s);l.dataset.dir="east",l.dataset.axis="x",l.classList.add("grabber"),l.classList.add("right");const c=document.createElement(s);c.dataset.dir="west",c.dataset.axis="x",c.classList.add("grabber"),c.classList.add("left");const u=document.createElement(s);u.dataset.dir="south",u.dataset.axis="y",u.classList.add("grabber"),u.classList.add("bottom"),[o,l,c,u].forEach(F=>F.tabIndex=-1);const h={bottom:u,left:c,right:l,top:o},f=user_derived(e),d=user_derived(()=>get$3(f).handles),p=user_derived(()=>fallback(get$3(f).enabled,!0));let g=state(void 0),m=state(void 0);const y=user_derived(()=>get$3(d).includes("left")||get$3(d).includes("right")),_=user_derived(()=>get$3(d).includes("top")||get$3(d).includes("bottom"));let b=[],x=null,P=null,T=null,k=[];user_effect(()=>(get$3(p)&&(get$3(d).forEach(F=>{a.appendChild(h[F]),k.push(on$1(h[F],"mousedown",S),on$1(h[F],"dblclick",E)),b.push(F)}),k.push(on$1(window,"mousemove",A),on$1(window,"mouseup",w))),()=>{k.forEach(F=>{F()}),k=[],b.forEach(F=>{a.removeChild(h[F])}),b=[]})),user_effect(()=>(get$3(p)&&(get$3(y)&&get$3(g)!=null&&(get$3(g)==null?a.style.width="":a.style.width=`${get$3(g)}px`),get$3(_)&&(get$3(m)==null?a.style.height="":a.style.height=`${get$3(m)}px`)),()=>{a.style.height="",a.style.width=""}));function S(F){x=F.target,x.classList.add("selected"),a.classList.add("resizing");const O=a.getBoundingClientRect(),M=n.getBoundingClientRect();P={width:O.width,height:O.height,left:O.left-M.left,right:M.right-O.right,top:O.top-M.top,bottom:M.bottom-O.bottom},T={x:F.pageX,y:F.pageY}}function A(F){if(!x||!T||!P)return;const O=x.dataset.dir;let M;O.match("east")&&(M=F.pageX-T.x,set(g,P.width+M)),O.match("west")&&(M=T.x-F.pageX,set(g,P.width+M)),O.match("north")&&(M=T.y-F.pageY,set(m,P.height+M)),O.match("south")&&(M=F.pageY-T.y,set(m,P.height+M))}function w(F){x&&(x.classList.remove("selected"),x=null,P=null,T=null,a.classList.remove("resizing"))}function E(F){const M=F.currentTarget.dataset.axis;M==="x"&&set(g,void 0),M==="y"&&set(m,void 0)}};var root$i=template("<button><!></button>");function NodeIconButton(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","children","onclick"]),s=state(void 0);function o(){var h;(h=get$3(s))==null||h.focus()}var l=root$i();let c;var u=child(l);return snippet(u,()=>e.children??noop$1),bind_this(l,h=>set(s,h),()=>get$3(s)),template_effect(()=>c=set_attributes(l,c,{type:"button",onclick:e.onclick,...n},"svelte-1wk7eq")),append(a,l),pop({focus:o})}var root$h=template('<div role="listitem" class="entry"><!></div>');function Entry(a,e){push(e,!0);let n=prop(e,"i",3,0),s=useOptions();var o=root$h(),l=child(o);snippet(l,()=>e.children??noop$1),template_effect(()=>set_style(o,`--i: ${n()??""}`)),transition(3,o,()=>slide,()=>({duration:s.transitionDuration})),append(a,o),pop()}var root$g=ns_template('<svg xmlns="http://www.w3.org/2000/svg" width="1.15em" height="1.15em" viewBox="0 0 16 16"><g fill="currentColor"><path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199a2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"></path></g></svg>');function LinkIcon(a){var e=root$g();append(a,e)}var root_2$7=template('<span class="value url"><!></span>'),root_1$9=template(" <!>",1);function StringValue(a,e){push(e,!0);let n=prop(e,"type",3,"string");const s=useOptions();let o=user_derived(()=>e.display!=null?e.display:e.value),l=user_derived(()=>(n()==="string"||n()==="url")&&(URL.canParse(get$3(o))||get$3(o).startsWith("/")||e.value.startsWith("data:"))),c=user_derived(()=>get$3(l)?"a":"span"),u=user_derived(()=>collapseString(get$3(o),s.value.stringCollapse));var h=comment$1(),f=first_child(h);element(f,()=>get$3(c),!1,(d,p)=>{let g;template_effect(x=>g=set_attributes(d,g,{"data-testid":"value",class:`stringvalue value ${n()??""}`,title:x,href:get$3(l)?e.value:null,target:get$3(l)?"_blank":null,rel:get$3(l)?"noreferrer":null},"svelte-z1zrfo"),[()=>stringify(e.value)]);var m=root_1$9(),y=first_child(m),_=sibling(y);{var b=x=>{var P=root_2$7(),T=child(P);LinkIcon(T),append(x,P)};if_block(_,x=>{get$3(l)&&x(b)})}template_effect(x=>set_text(y,x),[()=>stringify(get$3(u),0,s.value.quotes)]),append(p,m)}),append(a,h),pop()}var root_2$6=template("<!> <!>",1);function InspectErrorView(a,e){push(e,!0);let n=prop(e,"value",19,()=>new InspectError("")),s=prop(e,"type",3,"InspectError");setContext(Symbol.for("siv.use-defaults"),!0);const o=getContext(Symbol.for("siv.error-depth"))??0;setContext(Symbol.for("siv.error-depth"),o+1);var l=comment$1(),c=first_child(l);{var u=f=>{Expandable(f,{get value(){return n()},get key(){return e.key},get keyPrefix(){return e.keyPrefix},get path(){return e.path},get type(){return s()},length:4,showLength:!1,keepPreviewOnExpand:!0,valuePreview:p=>{var g=root_2$6(),m=first_child(g);NodeActionButton(m,{get onclick(){return e.reset},children:(_,b)=>{var x=text$5("RESET");append(_,x)},$$slots:{default:!0}});var y=sibling(m,2);StringValue(y,{type:"error",get value(){return n().message}}),append(p,g)},children:(p,g)=>{PropertyList(p,{get value(){return n()},keys:["message","value","cause","stack"],item:(y,_)=>{let b=()=>_==null?void 0:_().key,x=()=>_==null?void 0:_().descriptor;var P=comment$1(),T=first_child(P);{var k=A=>{GetterSetter(A,{get value(){return n()},get descriptor(){return x()},get key(){return b()},get path(){return e.path},usedefaults:!0})},S=A=>{Node$1(A,{get value(){return n()[b()]},get key(){return b()},get path(){return e.path},usedefaults:!0})};if_block(T,A=>{var w,E;(w=x())!=null&&w.get||(E=x())!=null&&E.set?A(k):A(S,!1)})}append(y,P)},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})},h=f=>{var d=text$5("max error depth exceeded");append(f,d)};if_block(c,f=>{o<=3?f(u):f(h,!1)})}append(a,l),pop()}const comma=a=>{var e=root_8$1();append(a,e)};var root_3$3=template('<div class="key-type-preview svelte-eux4lg"><!> <!></div>'),root_8$1=template('<span class="comma svelte-eux4lg">,</span>'),root_10$2=template("preview error. check console <!>",1),root_13$2=template("<span> </span>"),root_15=template("<!><!>",1),root_19=template("<!><!>",1),root_23$1=template("<!><!>",1),root_27=template('<!><span class="ellipsis svelte-eux4lg">&hellip;</span>',1),root_28=template("<span> </span>"),root_12$1=template('<div><!> <div class="inner svelte-eux4lg"><!></div> <!> <!></div>');function Preview(a,e){push(e,!0);const n=(F,O=noop$1,M=noop$1)=>{var V=comment$1();const G=user_derived(()=>getType(O(),g.value.stores));var te=first_child(V);{var ce=le=>{Node$1(le,{get path(){return e.path},get key(){return M()},get value(){return O()},get showKey(){return o()},get keyDelim(){return l()},get keyStyle(){return c()},get usedefaults(){return e.usedefaults}})},se=le=>{var fe=root_3$3(),ge=child(fe);{var xe=Ce=>{Key(Ce,{disabled:!0,get path(){return e.path},get key(){return M()},get delim(){return l()},get style(){return c()},allowUndefined:!0})};if_block(ge,Ce=>{o()&&Ce(xe)})}var _e=sibling(ge,2);Type(_e,{get type(){return get$3(G)},force:!0}),append(le,fe)};if_block(te,le=>{S(get$3(G))||p<get$3(_)?le(ce):le(se,!1)})}append(F,V)},s=(F,O=noop$1,M,V=noop$1)=>{var G=comment$1(),te=first_child(G);{var ce=le=>{GetterSetter(le,{get key(){return O()},get descriptor(){return V()},get value(){return e.value},get path(){return e.path}})},se=le=>{n(le,()=>{var fe;return(fe=e.value)==null?void 0:fe[O()]},O)};if_block(te,le=>{var fe,ge;(fe=V())!=null&&fe.set||(ge=V())!=null&&ge.get?le(ce):le(se,!1)})}append(F,G)};let o=prop(e,"showKey",3,!0),l=prop(e,"keyDelim",3,":"),c=prop(e,"keyStyle",3,""),u=prop(e,"startLevel",3,1),h=prop(e,"showPreview",3,!1),f=prop(e,"bracketStyle",3,""),d=rest_props(e,["$$slots","$$events","$$legacy","list","keyValue","keys","path","value","prefix","postfix","singleValue","showKey","keyDelim","keyStyle","startLevel","showPreview","class","bracketStyle","usedefaults"]);const p=getContext(Symbol.for("siv.preview-level"))??u(),g=useOptions();let m=user_derived(()=>g.value),y=user_derived(()=>get$3(m).previewEntries),_=user_derived(()=>get$3(m).previewDepth),b=user_derived(()=>get$3(m).showPreview);setContext(Symbol.for("siv.preview-level"),(p??0)+1);let x=user_derived(()=>{var F;return(F=e.list)==null?void 0:F.slice(0,get$3(y))}),P=user_derived(()=>{var F;return(F=e.keyValue)==null?void 0:F.slice(0,get$3(y))}),T=user_derived(()=>{var F;return(F=e.keys)==null?void 0:F.slice(0,get$3(y))}),k=user_derived(()=>get$3(x)&&e.list?get$3(x).length<e.list.length:get$3(P)&&e.keyValue?get$3(P).length<e.keyValue.length:get$3(T)&&e.keys?get$3(T).length<e.keys.length:!1);function S(F){return["boolean","string","number","bigint","symbol","regexp","class","undefined","null","store"].includes(F)}var A=comment$1(),w=first_child(A);{var E=F=>{var O=comment$1(),M=first_child(O);boundary(M,{onerror:G=>console.error("preview failed:",G),failed:(G,te=noop$1,ce=noop$1)=>{var se=root_10$2(),le=sibling(first_child(se));NodeActionButton(le,{get onclick(){return ce()},children:(fe,ge)=>{var xe=text$5("reset");append(fe,xe)},$$slots:{default:!0}}),append(G,se)}},G=>{var te=root_12$1();let ce;var se=child(te);{var le=q=>{var K=root_13$2();set_class(K,1,`pre level-${p??""}`,"svelte-eux4lg");var Q=child(K);template_effect(()=>{set_style(K,f()),set_text(Q,e.prefix)}),append(q,K)};if_block(se,q=>{e.prefix&&q(le)})}var fe=sibling(se,2),ge=child(fe);{var xe=q=>{var K=comment$1(),Q=first_child(K);each(Q,17,()=>get$3(T),index,($,Z,J)=>{var R=root_15();const U=user_derived(()=>getPropertyDescriptor(e.value,get$3(Z)));var z=first_child(R);s(z,()=>get$3(Z),()=>!1,()=>get$3(U));var L=sibling(z);{var j=ee=>{comma(ee)};if_block(L,ee=>{J<get$3(T).length-1&&ee(j)})}append($,R)}),append(q,K)},_e=(q,K)=>{{var Q=Z=>{var J=comment$1(),R=first_child(J);each(R,17,()=>get$3(P),index,(U,z,L,j)=>{let ee=()=>get$3(z)[0],he=()=>get$3(z)[1];var ye=root_19(),pe=first_child(ye);n(pe,he,ee);var ne=sibling(pe);{var de=me=>{comma(me)};if_block(ne,me=>{L<get$3(P).length-1&&me(de)})}append(U,ye)}),append(Z,J)},$=(Z,J)=>{{var R=z=>{var L=comment$1(),j=first_child(L);each(j,17,()=>get$3(x),index,(ee,he,ye,pe)=>{var ne=root_23$1(),de=first_child(ne);n(de,()=>get$3(he),()=>ye);var me=sibling(de);{var ve=Se=>{comma(Se)};if_block(me,Se=>{ye<get$3(x).length-1&&Se(ve)})}append(ee,ne)}),append(z,L)},U=(z,L)=>{{var j=ee=>{n(ee,()=>e.singleValue.value,()=>{})};if_block(z,ee=>{e.singleValue&&ee(j)},L)}};if_block(Z,z=>{get$3(x)?z(R):z(U,!1)},J)}};if_block(q,Z=>{get$3(P)?Z(Q):Z($,!1)},K)}};if_block(ge,q=>{get$3(T)&&e.value?q(xe):q(_e,!1)})}var Ce=sibling(fe,2);{var ae=q=>{var K=root_27(),Q=first_child(K);comma(Q),append(q,K)};if_block(Ce,q=>{get$3(k)&&q(ae)})}var B=sibling(Ce,2);{var I=q=>{var K=root_28();set_class(K,1,`post level-${p??""}`,"svelte-eux4lg");var Q=child(K);template_effect(()=>{set_style(K,f()),set_text(Q,e.postfix)}),append(q,K)};if_block(B,q=>{e.postfix&&q(I)})}template_effect(()=>ce=set_attributes(te,ce,{"data-testid":"preview",class:["preview",e.class],...d},"svelte-eux4lg")),transition(3,fe,()=>fly,()=>({y:20,opacity:0,duration:g.transitionDuration*2})),transition(3,te,()=>slide,()=>({axis:"x",duration:g.transitionDuration})),append(G,te)}),append(F,O)};if_block(w,F=>{get$3(b)&&get$3(y)>0&&h()&&F(E)})}append(a,A),pop()}async function onkeyup(a,e,n,s,o,l,c){var u;if(a.key==="Escape"){set(e,!1),set(n,""),set(s,"untouched"),await tick(),(u=get$3(o))==null||u.focus();return}if(a.key==="Enter")l();else{const h=a.currentTarget.value;if(h.length)try{set(c,JSON.parse(h),!0),set(s,"valid")}catch{set(s,"invalid")}else set(s,"untouched")}}var root_4$1=template('<input type="text" placeholder="json"> <!> <!>',1),root_10$1=template("<!> <!>",1),root_7$4=template("<!> <!>",1),root_14=template("<!> <!>",1),root_13$1=template("<!> <!>",1);function GetterSetter(a,e){push(e,!0);let n=prop(e,"path",19,()=>[]),s=rest_props(e,["$$slots","$$events","$$legacy","value","display","key","path","descriptor","children","keyPrefix","usedefaults"]);const o=useOptions(),l=getPreviewLevel(),c=useValueCache();let u=state(!1),h=state(void 0),f=state(void 0),d=state(!1),p=state(""),g=state("untouched"),m=state(void 0),y=user_derived(()=>e.key!=null&&n()?[...n(),e.key]:["root"]),_=user_derived(()=>`${e.keyPrefix??""} ${descriptorPrefix(e.descriptor)}`),b=state(void 0),x=state(void 0),P=user_derived(()=>stringifyPath(get$3(y))),T=user_derived(()=>c.has(get$3(P))),k=user_derived(()=>get$3(u)?get$3(h):get$3(T)?c.get(get$3(P)):void 0);function S(){var V;try{set(u,!0);const G=(V=e.descriptor.get)==null?void 0:V.call(e.value);set(h,G,!0),c.set(get$3(P),get$3(h))}catch(G){c.delete(get$3(P)),set(f,new InspectError("getter call failed",e.descriptor.get,{cause:G}),!0),set(u,!1)}}function A(){var V;if(get$3(g)==="valid")try{(V=e.descriptor.set)==null||V.call(e.value,get$3(m))}catch(G){set(f,new InspectError("setter call failed",e.descriptor.set,{cause:G}),!0)}finally{set(d,!1),set(p,""),set(m,void 0),set(g,"untouched")}else set(g,"invalid")}function w(){set(f,void 0),set(h,void 0),set(u,!1),c.delete(get$3(P))}var E=comment$1(),F=first_child(E);{var O=V=>{InspectErrorView(V,{get keyPrefix(){return get$3(_)},reset:w,get key(){return e.key},get path(){return get$3(y)},get value(){return get$3(f)}})},M=V=>{{const G=(te,ce)=>{let se=()=>ce==null?void 0:ce().showPreview;var le=comment$1(),fe=first_child(le);{var ge=_e=>{var Ce=root_4$1(),ae=first_child(Ce);ae.__keyup=[onkeyup,d,p,g,x,A,m],bind_this(ae,K=>set(b,K),()=>get$3(b));var B=sibling(ae,2);const I=user_derived(()=>{var K;return`set ${(K=e.key)==null?void 0:K.toString()}`});NodeActionButton(B,{get title(){return get$3(I)},onclick:()=>A(),children:(K,Q)=>{var $=text$5("set");append(K,$)},$$slots:{default:!0}});var q=sibling(B,2);NodeActionButton(q,{title:"cancel",onclick:async()=>{var K;set(d,!1),await tick(),(K=get$3(x))==null||K.focus()},children:(K,Q)=>{var $=text$5("x");append(K,$)},$$slots:{default:!0}}),template_effect(()=>set_class(ae,1,clsx(get$3(g)),"svelte-13q45g5")),transition(3,ae,()=>slide,()=>({axis:"x",duration:o.transitionDuration})),bind_value(ae,()=>get$3(p),K=>set(p,K)),append(_e,Ce)},xe=_e=>{var Ce=root_7$4(),ae=first_child(Ce);{var B=K=>{const Q=user_derived(()=>{var $;return`set ${($=e.key)==null?void 0:$.toString()}`});bind_this(NodeActionButton(K,{get title(){return get$3(Q)},onclick:async()=>{var $;set(d,!0),await tick(),($=get$3(b))==null||$.focus()},children:($,Z)=>{var J=text$5("set");append($,J)},$$slots:{default:!0}}),$=>set(x,$,!0),()=>get$3(x))};if_block(ae,K=>{e.descriptor.set&&l===0&&K(B)})}var I=sibling(ae,2);{var q=K=>{var Q=root_10$1(),$=first_child(Q);{var Z=z=>{const L=user_derived(()=>{var j;return`get ${(j=e.key)==null?void 0:j.toString()}`});NodeActionButton(z,{get title(){return get$3(L)},onclick:S,children:(j,ee)=>{var he=text$5("get");append(j,he)},$$slots:{default:!0}})};if_block($,z=>{l===0&&z(Z)})}var J=sibling($,2);const R=user_derived(()=>(get$3(T)||get$3(u))&&se()),U=user_derived(()=>({value:get$3(k)}));Preview(J,{get showPreview(){return get$3(R)},get singleValue(){return get$3(U)},style:l>0?"margin-left: -0.5em":"",bracketStyle:"color: var(--_comment-color)",showKey:!1,startLevel:0,prefix:"(",postfix:")",keyDelim:"",get path(){return get$3(y)}}),append(K,Q)};if_block(I,K=>{e.descriptor.get&&K(q)})}append(_e,Ce)};if_block(fe,_e=>{get$3(d)?_e(ge):_e(xe,!1)})}append(te,le)};Expandable(V,spread_props({get key(){return e.key},get keyPrefix(){return get$3(_)},get path(){return get$3(y)},keyDelim:l>0?"":":",get value(){return e.descriptor},showLength:!1,keepPreviewOnExpand:!0,length:1},()=>s,{valuePreview:G,children:(te,ce)=>{var se=root_13$1(),le=first_child(se);{var fe=_e=>{var Ce=root_14(),ae=first_child(Ce);Entry(ae,{i:0,children:(I,q)=>{Node$1(I,{key:"value",get value(){return get$3(k)},get path(){return get$3(y)},get usedefaults(){return e.usedefaults}})},$$slots:{default:!0}});var B=sibling(ae,2);Entry(B,{i:1,children:(I,q)=>{Node$1(I,{key:"getter",get value(){return e.descriptor.get},get path(){return get$3(y)},get usedefaults(){return e.usedefaults}})},$$slots:{default:!0}}),append(_e,Ce)};if_block(le,_e=>{e.descriptor.get&&_e(fe)})}var ge=sibling(le,2);{var xe=_e=>{Entry(_e,{i:2,children:(Ce,ae)=>{Node$1(Ce,{key:"setter",get value(){return e.descriptor.set},get path(){return get$3(y)},get usedefaults(){return e.usedefaults}})},$$slots:{default:!0}})};if_block(ge,_e=>{e.descriptor.set&&_e(xe)})}append(te,se)},$$slots:{valuePreview:!0,default:!0}}))}};if_block(F,V=>{get$3(f)?V(O):V(M,!1)})}append(a,E),pop()}delegate(["keyup"]);var root$f=template("<!> <!>",1);function PropertyList(a,e){push(e,!0);let n=prop(e,"keys",19,()=>[]);const s=50;let o=state(s),l=user_derived(()=>n().length>get$3(o)?n().slice(0,get$3(o)):n());var c=root$f(),u=first_child(c);each(u,18,()=>get$3(l),d=>d,(d,p,g)=>{const m=user_derived(()=>getPropertyDescriptor(e.value,p));Entry(d,{get i(){return get$3(g)},children:(y,_)=>{var b=comment$1(),x=first_child(b);{var P=k=>{var S=comment$1(),A=first_child(S);snippet(A,()=>e.item,()=>({key:p,index:get$3(g),descriptor:get$3(m)})),append(k,S)},T=(k,S)=>{{var A=E=>{GetterSetter(E,{get value(){return e.value},get descriptor(){return get$3(m)},get key(){return p},get path(){return e.path}})},w=E=>{const F=user_derived(()=>{var O;return(O=e.value)==null?void 0:O[p]});Node$1(E,{get value(){return get$3(F)},get key(){return p},get path(){return e.path}})};if_block(k,E=>{var F,O;(F=get$3(m))!=null&&F.get||(O=get$3(m))!=null&&O.set?E(A):E(w,!1)},S)}};if_block(x,k=>{e.item?k(P):k(T,!1)})}append(y,b)},$$slots:{default:!0}})});var h=sibling(u,2);{var f=d=>{NodeActionButton(d,{style:"margin-left: 2em; text-align: center; margin-bottom: 0.5em; width: calc(100% - 5em)",onclick:()=>{set(o,get$3(o)+s)},children:(p,g)=>{var m=text$5();template_effect(y=>set_text(m,`${y??""} more`),[()=>Math.abs(get$3(o)-n().length)]),append(p,m)},$$slots:{default:!0}})};if_block(h,d=>{get$3(l).length<n().length&&d(f)})}append(a,c),pop()}var root_1$8=template('<div class="prefix svelte-1cvtqr9"> </div>'),root$e=template("<div><!> <select><!></select></div>");function Select(a,e){push(e,!0);let n=prop(e,"value",15,void 0),s=rest_props(e,["$$slots","$$events","$$legacy","children","onclick","value","prefix"]),o=state(void 0);function l(){var m;(m=get$3(o))==null||m.focus()}var c=root$e();let u;var h=child(c);{var f=m=>{var y=root_1$8(),_=child(y);template_effect(()=>set_text(_,e.prefix)),append(m,y)};if_block(h,m=>{e.prefix&&m(f)})}var d=sibling(h,2);let p;var g=child(d);return snippet(g,()=>e.children??noop$1),bind_this(d,m=>set(o,m),()=>get$3(o)),template_effect((m,y)=>{u=set_class(c,1,"inspect-select svelte-1cvtqr9",null,u,m),p=set_attributes(d,p,{...s,[CLASS]:y},"svelte-1cvtqr9")},[()=>({"with-prefix":e.prefix}),()=>({prefixed:e.prefix!=null})]),bind_select_value(d,n),append(a,c),pop({focus:l})}const globalValues=new SvelteMap;function logToConsole(a=[],e,n){const s=[`%cInspect ${n} at ${a.join(".")}:`,"background-color: black; padding: 5px; color: hotpink; border-radius: 8px;"];console.log(...s);let o="log";n==="object"&&(o="dir");try{console[o](snapshot(e))}catch(l){console.error("[Inspect] caught error trying to log snapshot of value. retrying without cloning. error:",l),console.log("retry:",e)}}function copyToClipBoard(a){return navigator.clipboard.writeText(stringifyOrToString(a))}var root$d=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"></path></svg>');function CircleSolid(a){var e=root$d();transition(1,e,()=>scale,()=>({opacity:1})),append(a,e)}var root$c=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor"><path d="M7.06 7.5L6 8.56l4.243 4.243L6 17.046l1.06 1.06L12 13.168v-.728zm4.94 9h6V18h-6z"></path></g></svg>');function Console(a){var e=root$c();append(a,e)}var root$b=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M3 21v-5h2v3h3v2zm13 0v-2h3v-3h2v5zM3 8V3h5v2H5v3zm16 0V5h-3V3h5v5z"></path></svg>');function Fullscreen(a){var e=root$b();append(a,e)}var root$a=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6 21v-3H3v-2h5v5zm10 0v-5h5v2h-3v3zM3 8V6h3V3h2v5zm13 0V3h2v3h3v2z"></path></svg>');function FullscreenExit(a){var e=root$a();append(a,e)}var root$9=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M18 10V8h2v2zm0 2v-2h-2v2zm0-4V6h-2v2zm-2-5.16V4h2c-.63-.46-1.29-.85-2-1.16M18 4v2h2c-.58-.75-1.25-1.42-2-2m2 2v2h1.16c-.31-.71-.7-1.37-1.16-2m2 6c0-.68-.07-1.35-.2-2H20v2zm-6-6V4h-2v2zm0 10h2v-2h-2zm2 2h2v-2h-2zm-2 2h2v-2h-2zm-2 1.8c.7-.14 1.36-.36 2-.64V20h-2zm4-7.8h2v-2h-2zm-2-6h-2v2h2zm4 8h1.16c.28-.64.5-1.3.64-2H20zm-4-4h-2v2h2zm-4 6v-2h2v-2h-2v-2h2v-2h-2V8h2V6h-2V4h2V2.2c-.65-.13-1.31-.2-2-.2C6.5 2 2 6.5 2 12s4.5 10 10 10v-2h2v-2zm2 0h2v-2h-2z"></path></svg>');function OpacityIcon(a){var e=root$9();transition(1,e,()=>scale,()=>({opacity:1})),append(a,e)}let globalInspectState=proxy({mounted:[]});function onHandleClick(a,e,n,s){var o;e(!e()),set(n,!1),(o=s.onOpenChange)==null||o.call(s,e())}var root_11$1=template('<option class="svelte-11earra">left</option> <option class="svelte-11earra">center</option> <option class="svelte-11earra">right</option> <option class="svelte-11earra">full</option>',1),root_12=template('<option class="svelte-11earra">top</option> <option class="svelte-11earra">middle</option> <option class="svelte-11earra">bottom</option> <option class="svelte-11earra">full</option>',1),root_13=template('<option class="svelte-11earra">solid</option> <option class="svelte-11earra">dense</option> <option class="svelte-11earra">glassy</option> <option class="svelte-11earra">floating</option>',1),root_10=template('<div class="group svelte-11earra"><!> <!> <!></div>'),root_2$5=template('<div><div class="group svelte-11earra"><!> <!></div> <!></div>'),root_20=template('<div style="color: var(--_comment-color); text-align: center" class="svelte-11earra">no value</div>'),root_23=template('global values <div style="display: flex; align-items: center; justify-content: flex-end; gap: 0.5em; flex-basis: 100%" class="svelte-11earra"><!> <!></div>',1),root_1$7=template('<aside><button class="handle svelte-11earra" type="button"><div class="caret svelte-11earra"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="svelte-11earra"><path stroke="currentColor" stroke-linecap="butt" stroke-linejoin="bevel" d="M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37" class="svelte-11earra"></path></svg></div></button> <!> <!> <!> <!></aside>');function Panel(a,e){const n=props_id();push(e,!0);let s=prop(e,"align",15,"right full"),o=prop(e,"appearance",15,"solid"),l=prop(e,"open",15,!1),c=prop(e,"opacity",15,!1),u=prop(e,"hideToolbar",3,!1),h=prop(e,"hideGlobalValues",3,!1),f=prop(e,"resize",3,!0),d=prop(e,"openOnHover",3,!1),p=prop(e,"zIndex",3,1e3),g=prop(e,"wiggleOnUpdate",3,!0),m=rest_props(e,["$$slots","$$events","$$legacy","value","values","name","heading","align","appearance","open","opacity","hideToolbar","hideGlobalValues","resize","openOnHover","zIndex","wiggleOnUpdate","onOpenChange","children","class"]),y=state(!1),_=state(!1),b=state(!1);const x=user_derived(()=>l()?"close panel":"open panel");let P=user_derived(()=>d()&&get$3(_)||l()),T=user_derived(()=>{let[Q,$="full"]=s().split(" ");return["full","center"].includes(Q)&&(["top","bottom"].includes($)||($="top")),["full","middle"].includes($)&&(["right","left"].includes(Q)||(Q="right")),[Q,$,Q==="full"?"full-x":Q,$==="full"?"full-y":$]}),k=user_derived(()=>get$3(T)[0]),S=user_derived(()=>fallback(get$3(T)[1],"full")),A=user_derived(()=>get$3(T)[2]),w=user_derived(()=>get$3(T)[3]),E=user_derived(()=>e.values?getAllProperties(e.values):[]),F=user_derived(()=>{const Q=[];return get$3(y)?[]:(["bottom","middle"].includes(get$3(S))&&Q.push("top"),["right","center"].includes(get$3(k))&&Q.push("left"),["left","center"].includes(get$3(k))&&Q.push("right"),["top","middle"].includes(get$3(S))&&Q.push("bottom"),Q)}),O=user_derived(()=>sortProps(m)),M=user_derived(()=>get$3(O)[0]),V=user_derived(()=>get$3(O)[1]),G=getContext(GLOBAL_OPTIONS_CONTEXT),te=user_derived(()=>mergeOptions({...get$3(M)},typeof G=="function"?G():G)),ce=createOptions(()=>get$3(te)),se=user_derived(()=>ce.value),le=user_derived(()=>get$3(se).theme),fe=user_derived(()=>get$3(se).noanimate),ge=user_derived(()=>get$3(se).borderless),xe=user_derived(()=>get$3(se).onCollapseChange),_e=user_derived(()=>typeof ce.value.renderIf=="function"?!!ce.value.renderIf():!!ce.value.renderIf),Ce=user_derived(()=>[get$3(le),get$3(ge)&&"borderless",e.class]);user_effect(()=>{globalValues.keys(),untrack(()=>{g()&&ae()})}),user_effect(()=>(!h()&&get$3(_e)&&untrack(()=>globalInspectState.mounted.push(n)),()=>{globalInspectState.mounted=globalInspectState.mounted.filter(Q=>Q!==n)})),setContext(Symbol.for("siv.fixed"),!0),initialize(ce);function ae(){get$3(b)||(set(b,!0),setTimeout(()=>{set(b,!1)},500))}function B(Q,$){s(`${Q} ${$}`)}var I=comment$1(),q=first_child(I);{var K=Q=>{var $=root_1$7(),Z=()=>set(_,!0),J=()=>set(_,!1);let R;var U=child($);U.__click=[onHandleClick,l,_,e];var z=child(U),L=child(z),j=child(L),ee=sibling(U,2);{var he=Se=>{var De=root_2$5(),Me=child(De),Le=child(Me);{var qe=Pe=>{NodeIconButton(Pe,{title:"toggle opacity",onclick:()=>c(!c()),children:(Oe,re)=>{var oe=comment$1(),N=first_child(oe);{var be=D=>{OpacityIcon(D)},Ne=D=>{CircleSolid(D)};if_block(N,D=>{c()?D(be):D(Ne,!1)})}append(Oe,oe)},$$slots:{default:!0}})};if_block(Le,Pe=>{get$3(y)||Pe(qe)})}var Ke=sibling(Le,2);NodeIconButton(Ke,{title:"toggle full",onclick:()=>set(y,!get$3(y)),children:(Pe,Oe)=>{var re=comment$1(),oe=first_child(re);{var N=Ne=>{FullscreenExit(Ne)},be=Ne=>{Fullscreen(Ne)};if_block(oe,Ne=>{get$3(y)?Ne(N):Ne(be,!1)})}append(Pe,re)},$$slots:{default:!0}});var Y=sibling(Me,2);{var Te=Pe=>{var Oe=root_10(),re=child(Oe);Select(re,{prefix:"x",name:"x-position",get value(){return get$3(k)},onchange:be=>B(be.currentTarget.value,get$3(S)),children:(be,Ne)=>{var D=root_11$1(),we=sibling(first_child(D),2),Ae=sibling(we,4);template_effect((X,H)=>{we.disabled=X,Ae.disabled=H},[()=>["middle","full"].includes(get$3(S)),()=>["middle","full"].includes(get$3(S))]),append(be,D)},$$slots:{default:!0}});var oe=sibling(re,2);Select(oe,{prefix:"y",name:"y-position",get value(){return get$3(S)},onchange:be=>B(get$3(k),be.currentTarget.value),children:(be,Ne)=>{var D=root_12(),we=sibling(first_child(D),2),Ae=sibling(we,4);template_effect((X,H)=>{we.disabled=X,Ae.disabled=H},[()=>["full","center"].includes(get$3(k)),()=>["center","full"].includes(get$3(k))]),append(be,D)},$$slots:{default:!0}});var N=sibling(oe,2);Select(N,{name:"appearance",get value(){return o()},set value(be){o(be)},children:(be,Ne)=>{var D=root_13();append(be,D)},$$slots:{default:!0}}),append(Pe,Oe)};if_block(Y,Pe=>{get$3(y)||Pe(Te)})}template_effect(()=>set_class(De,1,clsx(["toolbar",get$3(S)]),"svelte-11earra")),append(Se,De)};if_block(ee,Se=>{u()||Se(he)})}var ye=sibling(ee,2);{var pe=Se=>{CollapseStateProvider(Se,{get onCollapseChange(){return get$3(xe)},children:(De,Me)=>{const Le=user_derived(()=>u()&&o()==="dense"?"border-top: none":"");Wrapper(De,{get class(){return get$3(Ce)},get heading(){return e.heading},get style(){return get$3(Le)},children:(qe,Ke)=>{var Y=comment$1(),Te=first_child(Y);{var Pe=re=>{PropertyList(re,{get value(){return e.values},get keys(){return get$3(E)}})},Oe=(re,oe)=>{{var N=Ne=>{Node$1(Ne,{get value(){return e.value},get key(){return e.name}})},be=Ne=>{var D=root_20();append(Ne,D)};if_block(re,Ne=>{e.name||e.value?Ne(N):Ne(be,!1)},oe)}};if_block(Te,re=>{e.values&&get$3(E).length?re(Pe):re(Oe,!1)})}append(qe,Y)},$$slots:{default:!0}})},$$slots:{default:!0}})};if_block(ye,Se=>{(e.value||e.name||get$3(E).length&&e.values)&&Se(pe)})}var ne=sibling(ye,2);{var de=Se=>{CollapseStateProvider(Se,{get onCollapseChange(){return get$3(xe)},children:(De,Me)=>{Wrapper(De,{get class(){return get$3(Ce)},heading:qe=>{var Ke=root_23(),Y=sibling(first_child(Ke)),Te=child(Y);NodeIconButton(Te,{onclick:()=>logToConsole(["global values"],globalValues,"map"),style:"width: 2em; height: 2em",children:(Oe,re)=>{Console(Oe)},$$slots:{default:!0}});var Pe=sibling(Te,2);NodeActionButton(Pe,{onclick:()=>globalValues.clear(),children:(Oe,re)=>{var oe=text$5("clear");append(Oe,oe)},$$slots:{default:!0}}),append(qe,Ke)},children:(qe,Ke)=>{var Y=comment$1(),Te=first_child(Y);each(Te,17,()=>globalValues,([Pe,Oe])=>Pe,(Pe,Oe)=>{let re=()=>get$3(Oe)[0],oe=()=>get$3(Oe)[1];Node$1(Pe,{get note(){return oe().note},get key(){return re()},get value(){return oe().value}})}),append(qe,Y)},$$slots:{heading:!0,default:!0}})},$$slots:{default:!0}})};if_block(ne,Se=>{globalValues.size>0&&!h()&&Se(de)})}var me=sibling(ne,2);{var ve=Se=>{var De=comment$1(),Me=first_child(De);snippet(Me,()=>e.children??noop$1),append(Se,De)};if_block(me,Se=>{e.children&&Se(ve)})}action($,(Se,De)=>resizable==null?void 0:resizable(Se,De),()=>()=>({handles:get$3(F),enabled:f()})),template_effect(()=>{R=set_attributes($,R,{oninspectvaluechange:ae,onpointerenter:Z,onpointerleave:J,class:["inspect-panel",get$3(le),get$3(y)?"full":[get$3(A),get$3(w)],o(),get$3(ge)&&"borderless",get$3(fe)&&"noanimate",c()&&"opacity",get$3(b)&&g()&&!h()&&"flash",get$3(P)&&"open",d()&&"hoverable"],...get$3(V),[STYLE]:{"z-index":p()}},"svelte-11earra"),set_attribute(U,"aria-label",get$3(x)),set_attribute(U,"title",get$3(x)),set_attribute(j,"stroke-width",d()?l()?0:80:0),set_attribute(j,"fill",d()?l()?"currentColor":"transparent":"currentColor")}),append(Q,$)};if_block(q,Q=>{get$3(_e)&&Q(K)})}append(a,I),pop()}delegate(["click"]);var root$8=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="currentColor"><path d="M9 9H4v1h5z"></path><path fill-rule="evenodd" d="m5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2zm1 2h4l1 1v4h2V3H6zm4 1H3v7h7z" clip-rule="evenodd"></path></g></svg>');function CollapseChildren(a){var e=root$8();append(a,e)}var root$7=ns_template('<svg><rect width="8" height="3" x="8" y="2" rx="1" ry="1"></rect><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path><path d="M16 4h2a2 2 0 0 1 2 2v4"></path><path d="M21 14H11"></path><path d="m15 10-4 4 4 4"></path></svg>');function Copy(a,e){let n=rest_props(e,["$$slots","$$events","$$legacy"]);var s=root$7();let o;template_effect(()=>o=set_attributes(s,o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...n})),append(a,s)}var root$6=ns_template('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="currentColor"><path d="M9 9H4v1h5z"></path><path d="M7 12V7H6v5z"></path><path fill-rule="evenodd" d="m5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2zm1 2h4l1 1v4h2V3H6zm4 1H3v7h7z" clip-rule="evenodd"></path></g></svg>');function ExpandChildren(a){var e=root$6();append(a,e)}var on_click$1=(a,e,n,s)=>get$3(e).action(get$3(n),s()),root_6$1=template('<button type="button" class="svelte-cqyme9"><!></button>'),on_click_1=(a,e)=>e(),on_click_2=(a,e)=>e(),root_7$3=template('<button type="button" title="copy value to clipboard" aria-label="copy value to clipboard"><!></button>'),root_1$6=template('<div><!> <!> <!> <button type="button" title="log value to console" aria-label="log value to console" class="svelte-cqyme9"><!></button> <!></div>');function Tools(a,e){push(e,!0);let n=prop(e,"path",19,()=>[]),s=state(!1);const o=getContext(Symbol.for("siv.fixed"));let l=useOptions(),c=user_derived(()=>l.value),u=user_derived(()=>get$3(c).onCopy),h=user_derived(()=>get$3(c).canCopy),f=user_derived(()=>get$3(c).onLog),d=user_derived(()=>get$3(c).borderless),p=user_derived(()=>get$3(c).showTools),g=useState(),m=state(!1),y=user_derived(()=>stringifyPath(n())),_=user_derived(()=>n().length),b=user_derived(()=>get$3(u)?get$3(h)?get$3(h)(e.value,e.type,n()):!0:["array","object","number","string","undefined","null","date","boolean"].includes(e.type??"")),x=user_derived(()=>g.value[stringifyPath(n())]),P=user_derived(()=>Object.entries(g.value).filter(([le])=>le.startsWith(get$3(y))&&le.split(".").length===get$3(_)+1).some(([,le])=>!le.collapsed)),T=state(void 0);function k(){set(s,!0),get$3(T)&&window.clearTimeout(get$3(T)),set(T,window.setTimeout(()=>{set(s,!1)},5e3),!0)}async function S(){let se;try{se=get$3(u)(snapshot(e.value),snapshot(e.type),snapshot(n())),isPromise(se)?await se&&k():typeof se=="boolean"&&se&&k()}catch(le){console.error("[Inspect] error running custom onCopy callback:",le),set(s,!1)}}async function A(){if(get$3(u))S();else try{await copyToClipBoard(e.value),k()}catch(se){console.error(se),set(s,!1)}}function w(){get$3(f)?get$3(f)(e.value,e.type,n()):logToConsole(n(),e.value,e.type)}let E={hint:"collapse children",action:(se,le)=>g.collapseChildren(se,le),icon:CollapseChildren},F={hint:"expand children",action:(se,le)=>g.expandChildren(se,le),icon:ExpandChildren};function O(se){if(se)return se.collapsed?F:get$3(P)?E:F}let M=user_derived(()=>O(get$3(x)));function V(){set(m,!0),globalValues.set(get$3(y),{get value(){return e.value},note:{title:"Added manually"}})}onDestroy(()=>{get$3(m)&&globalValues.delete(get$3(y))});var G=comment$1(),te=first_child(G);{var ce=se=>{var le=root_1$6();let fe;var ge=child(le);{var xe=$=>{NodeActionButton($,{title:"add to panel",onclick:V,children:(Z,J)=>{var R=text$5("+");append(Z,R)},$$slots:{default:!0}})};if_block(ge,$=>{!o&&!globalValues.has(get$3(y))&&globalInspectState.mounted.length&&$(xe)})}var _e=sibling(ge,2);{var Ce=$=>{NodeActionButton($,{title:"remove from panel",onclick:()=>globalValues.delete(get$3(y)),children:(Z,J)=>{var R=text$5("-");append(Z,R)},$$slots:{default:!0}})};if_block(_e,$=>{globalValues.has(get$3(y))&&$(Ce)})}var ae=sibling(_e,2);{var B=$=>{var Z=root_6$1();Z.__click=[on_click$1,M,_,n];var J=child(Z);component(J,()=>get$3(M).icon,(R,U)=>{U(R,{})}),template_effect(()=>{set_attribute(Z,"title",get$3(M).hint),set_attribute(Z,"aria-label",get$3(M).hint)}),transition(3,Z,()=>blur,()=>({duration:l.transitionDuration})),append($,Z)};if_block(ae,$=>{get$3(M)&&$(B)})}var I=sibling(ae,2);I.__click=[on_click_1,w];var q=child(I);Console(q);var K=sibling(I,2);{var Q=$=>{var Z=root_7$3();Z.__click=[on_click_2,A];let J;var R=child(Z);Copy(R,{}),template_effect(U=>J=set_class(Z,1,"svelte-cqyme9",null,J,U),[()=>({copied:get$3(s)})]),append($,Z)};if_block(K,$=>{get$3(b)&&$(Q)})}template_effect($=>fe=set_class(le,1,"tools svelte-cqyme9",null,fe,$),[()=>({borderless:get$3(d)})]),append(se,le)};if_block(te,se=>{get$3(p)&&se(ce)})}append(a,G),pop()}delegate(["click"]);var root_4=template("<!> <!> <!>",1),root_8=template('<div role="list" data-testid="indent"><!></div>'),root$5=template('<div><div class="indicator-and-key svelte-i90r77"><!> <!></div> <!> <!> <!></div> <!>',1);function Expandable(a,e){push(e,!0);let n=prop(e,"keyDelim",3,":"),s=prop(e,"showKey",3,!0),o=prop(e,"forceType",3,!1),l=prop(e,"keepPreviewOnExpand",3,!1),c=prop(e,"path",19,()=>[]),u=prop(e,"showLength",3,!0),h=rest_props(e,["$$slots","$$events","$$legacy","key","keyPrefix","keyDelim","keyStyle","showKey","type","length","value","valuePreview","forceType","keepPreviewOnExpand","path","showLength","children","note"]),f=state(void 0);const d=useOptions();let p=user_derived(()=>d.value),g=user_derived(()=>get$3(p).expandAll),m=user_derived(()=>get$3(p).expandPaths),y=user_derived(()=>get$3(p).showLength);const _=useState(),b=getPreviewLevel(),x=getContext(Symbol.for("siv.key"));let P=user_derived(()=>e.length===0||b>0),T=user_derived(()=>stringifyPath(c())),k=user_derived(()=>_.value[get$3(T)]),S=user_derived(()=>b?!0:get$3(k)?get$3(k).collapsed:c().length>d.expandLevel||neverExpandInitial.includes(e.key));onMount(()=>{b||_&&b===0&&(_.getCollapse(c())||_.setCollapse(c(),{collapsed:!shouldInitiallyExpandNode(c(),d.expandLevel,get$3(g),get$3(m))}))});function A(B){_.setCollapse(get$3(T),{collapsed:B})}function w(){A(!get$3(S))}function E(B){get$3(P)||(B.preventDefault(),w())}var F=root$5(),O=first_child(F);let M;var V=child(O),G=child(V);{var te=B=>{bind_this(CollapseButton(B,{get collapsed(){return get$3(S)},get value(){return e.value},get key(){return e.key},get type(){return e.type},onclick:w,onchange:I=>A(I),get disabled(){return get$3(P)}}),I=>set(f,I,!0),()=>get$3(f))};if_block(G,B=>{!b&&!x&&B(te)})}var ce=sibling(G,2);{var se=B=>{Key(B,{get disabled(){return get$3(P)},onclick:w,get delim(){return n()},get prefix(){return e.keyPrefix},get style(){return e.keyStyle},get key(){return e.key},get path(){return c()}})};if_block(ce,B=>{s()&&B(se)})}var le=sibling(V,2);{var fe=B=>{Type(B,{get type(){return e.type},get force(){return o()}})};if_block(le,B=>{x||B(fe)})}var ge=sibling(le,2);snippet(ge,()=>e.valuePreview,()=>({showPreview:get$3(S)||b>0||l()}));var xe=sibling(ge,2);{var _e=B=>{var I=root_4(),q=first_child(I);{var K=J=>{NodeNote(J,{style:"justify-self: right;",get title(){return e.note.description},children:(R,U)=>{var z=text$5();template_effect(()=>set_text(z,e.note.title)),append(R,z)},$$slots:{default:!0}})};if_block(q,J=>{e.note&&!b&&J(K)})}var Q=sibling(q,2);{var $=J=>{Count(J,{get length(){return e.length},get type(){return e.type}})};if_block(Q,J=>{u()&&get$3(y)&&J($)})}var Z=sibling(Q,2);Tools(Z,{get value(){return e.value},get path(){return c()},get collapsed(){return get$3(S)},get type(){return e.type}}),append(B,I)};if_block(xe,B=>{b||B(_e)})}var Ce=sibling(O,2);{var ae=B=>{var I=root_8(),q=child(I);snippet(q,()=>e.children),template_effect(()=>set_class(I,1,`indent ${e.type??""}`,"svelte-i90r77")),event("inspectvaluechange",I,()=>{var K;return(K=get$3(f))==null?void 0:K.flash()}),transition(3,I,()=>slideXY,()=>({duration:d.transitionDuration*2})),append(B,I)};if_block(Ce,B=>{e.children&&e.length!=null&&e.length>0&&!get$3(S)&&!b&&B(ae)})}template_effect(()=>M=set_attributes(O,M,{ondblclick:E,"data-testid":"expandable",class:["line",b&&"preview",!s()&&"nokey"],"aria-expanded":!get$3(S),...h},"svelte-i90r77")),append(a,F),pop()}var root_6=template('<span data-testid="value"> </span>'),root_7$2=template("<!> <!> <!>",1),root$4=template('<div><div class="indicator-and-key svelte-e3up72"><!> <!></div> <!> <!> <!></div>');function OneLineView(a,e){push(e,!0);let n=prop(e,"showKey",3,!0),s=prop(e,"keyDelim",3,":"),o=rest_props(e,["$$slots","$$events","$$legacy","value","display","key","showKey","keyDelim","keyPrefix","keyStyle","type","forceType","path","length","note","children"]),l=user_derived(()=>{var w,E;return e.display!=null?e.display:((E=(w=e.value)==null?void 0:w.toString)==null?void 0:E.call(w))??""}),c=user_derived(()=>{var w;return typeof e.value=="string"?e.value:e.display!=null?e.display:(w=e.value)==null?void 0:w.toString()}),u=getPreviewLevel(),h=getContext(Symbol.for("siv.key"));var f=root$4();let d;var p=child(f),g=child(p);{var m=w=>{Bullet(w,{get value(){return e.value}})};if_block(g,w=>{!u&&!h&&w(m)})}var y=sibling(g,2);{var _=w=>{Key(w,{disabled:!0,get prefix(){return e.keyPrefix},get delim(){return s()},get style(){return e.keyStyle},get key(){return e.key},get path(){return e.path}})};if_block(y,w=>{n()&&w(_)})}var b=sibling(p,2);{var x=w=>{Type(w,{get type(){return e.type},get force(){return e.forceType}})};if_block(b,w=>{h||w(x)})}var P=sibling(b,2);{var T=w=>{var E=comment$1(),F=first_child(E);snippet(F,()=>e.children),append(w,E)},k=(w,E)=>{{var F=O=>{var M=root_6(),V=child(M);template_effect(()=>{set_attribute(M,"title",get$3(c)),set_class(M,1,`value ${e.type??""}`,"svelte-e3up72"),set_text(V,get$3(l))}),append(O,M)};if_block(w,O=>{get$3(l)&&O(F)},E)}};if_block(P,w=>{e.children?w(T):w(k,!1)})}var S=sibling(P,2);{var A=w=>{var E=root_7$2(),F=first_child(E);{var O=ce=>{NodeNote(ce,{get title(){return e.note.description},children:(se,le)=>{var fe=text$5();template_effect(()=>set_text(fe,e.note.title)),append(se,fe)},$$slots:{default:!0}})};if_block(F,ce=>{e.note&&ce(O)})}var M=sibling(F,2);{var V=ce=>{Count(ce,{get length(){return e.length},get type(){return e.type}})};if_block(M,ce=>{typeof e.length=="number"&&ce(V)})}var G=sibling(M,2);{var te=ce=>{Tools(ce,{get value(){return e.value},get path(){return e.path},get type(){return e.type}})};if_block(G,ce=>{h||ce(te)})}append(w,E)};if_block(S,w=>{u||w(A)})}template_effect(w=>d=set_attributes(f,d,{"data-testid":"line",class:"line",...o,[CLASS]:w},"svelte-e3up72"),[()=>({preview:u||h,nokey:!n()})]),append(a,f),pop()}function Default(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","value","key","path"]),s=user_derived(()=>getAllProperties(e.value));var o=comment$1(),l=first_child(o);{var c=h=>{Expandable(h,spread_props({get length(){return get$3(s).length},get key(){return e.key},get path(){return e.path},get value(){return e.value}},()=>n,{valuePreview:(d,p)=>{let g=()=>p==null?void 0:p().showPreview;Preview(d,{prefix:"{",postfix:"}",get value(){return e.value},get path(){return e.path},get keys(){return get$3(s)},get showPreview(){return g()}})},children:(d,p)=>{PropertyList(d,{get keys(){return get$3(s)},get value(){return e.value},item:(m,y)=>{let _=()=>y==null?void 0:y().key,b=()=>y==null?void 0:y().descriptor;var x=comment$1(),P=first_child(x);{var T=S=>{GetterSetter(S,{get value(){return e.value},get descriptor(){return b()},get key(){return _()},get path(){return e.path}})},k=S=>{Node$1(S,{get value(){return e.value[_()]},get key(){return _()},get path(){return e.path}})};if_block(P,S=>{var A,w;(A=b())!=null&&A.get||(w=b())!=null&&w.set?S(T):S(k,!1)})}append(m,x)},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}}))},u=h=>{OneLineView(h,spread_props({get key(){return e.key},get path(){return e.path},get value(){return e.value}},()=>n))};if_block(l,h=>{get$3(s).length?h(c):h(u,!1)})}append(a,o),pop()}var core,hasRequiredCore;function requireCore(){if(hasRequiredCore)return core;hasRequiredCore=1;function a(H){return H instanceof Map?H.clear=H.delete=H.set=function(){throw new Error("map is read-only")}:H instanceof Set&&(H.add=H.clear=H.delete=function(){throw new Error("set is read-only")}),Object.freeze(H),Object.getOwnPropertyNames(H).forEach(ue=>{const ke=H[ue],Fe=typeof ke;(Fe==="object"||Fe==="function")&&!Object.isFrozen(ke)&&a(ke)}),H}class e{constructor(ue){ue.data===void 0&&(ue.data={}),this.data=ue.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(H){return H.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function s(H,...ue){const ke=Object.create(null);for(const Fe in H)ke[Fe]=H[Fe];return ue.forEach(function(Fe){for(const Be in Fe)ke[Be]=Fe[Be]}),ke}const o="</span>",l=H=>!!H.scope,c=(H,{prefix:ue})=>{if(H.startsWith("language:"))return H.replace("language:","language-");if(H.includes(".")){const ke=H.split(".");return[`${ue}${ke.shift()}`,...ke.map((Fe,Be)=>`${Fe}${"_".repeat(Be+1)}`)].join(" ")}return`${ue}${H}`};class u{constructor(ue,ke){this.buffer="",this.classPrefix=ke.classPrefix,ue.walk(this)}addText(ue){this.buffer+=n(ue)}openNode(ue){if(!l(ue))return;const ke=c(ue.scope,{prefix:this.classPrefix});this.span(ke)}closeNode(ue){l(ue)&&(this.buffer+=o)}value(){return this.buffer}span(ue){this.buffer+=`<span class="${ue}">`}}const h=(H={})=>{const ue={children:[]};return Object.assign(ue,H),ue};class f{constructor(){this.rootNode=h(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ue){this.top.children.push(ue)}openNode(ue){const ke=h({scope:ue});this.add(ke),this.stack.push(ke)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ue){return this.constructor._walk(ue,this.rootNode)}static _walk(ue,ke){return typeof ke=="string"?ue.addText(ke):ke.children&&(ue.openNode(ke),ke.children.forEach(Fe=>this._walk(ue,Fe)),ue.closeNode(ke)),ue}static _collapse(ue){typeof ue!="string"&&ue.children&&(ue.children.every(ke=>typeof ke=="string")?ue.children=[ue.children.join("")]:ue.children.forEach(ke=>{f._collapse(ke)}))}}class d extends f{constructor(ue){super(),this.options=ue}addText(ue){ue!==""&&this.add(ue)}startScope(ue){this.openNode(ue)}endScope(){this.closeNode()}__addSublanguage(ue,ke){const Fe=ue.root;ke&&(Fe.scope=`language:${ke}`),this.add(Fe)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function p(H){return H?typeof H=="string"?H:H.source:null}function g(H){return _("(?=",H,")")}function m(H){return _("(?:",H,")*")}function y(H){return _("(?:",H,")?")}function _(...H){return H.map(ke=>p(ke)).join("")}function b(H){const ue=H[H.length-1];return typeof ue=="object"&&ue.constructor===Object?(H.splice(H.length-1,1),ue):{}}function x(...H){return"("+(b(H).capture?"":"?:")+H.map(Fe=>p(Fe)).join("|")+")"}function P(H){return new RegExp(H.toString()+"|").exec("").length-1}function T(H,ue){const ke=H&&H.exec(ue);return ke&&ke.index===0}const k=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function S(H,{joinWith:ue}){let ke=0;return H.map(Fe=>{ke+=1;const Be=ke;let Ve=p(Fe),je="";for(;Ve.length>0;){const Ue=k.exec(Ve);if(!Ue){je+=Ve;break}je+=Ve.substring(0,Ue.index),Ve=Ve.substring(Ue.index+Ue[0].length),Ue[0][0]==="\\"&&Ue[1]?je+="\\"+String(Number(Ue[1])+Be):(je+=Ue[0],Ue[0]==="("&&ke++)}return je}).map(Fe=>`(${Fe})`).join(ue)}const A=/\b\B/,w="[a-zA-Z]\\w*",E="[a-zA-Z_]\\w*",F="\\b\\d+(\\.\\d+)?",O="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",M="\\b(0b[01]+)",V="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",G=(H={})=>{const ue=/^#![ ]*\//;return H.binary&&(H.begin=_(ue,/.*\b/,H.binary,/\b.*/)),s({scope:"meta",begin:ue,end:/$/,relevance:0,"on:begin":(ke,Fe)=>{ke.index!==0&&Fe.ignoreMatch()}},H)},te={begin:"\\\\[\\s\\S]",relevance:0},ce={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[te]},se={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[te]},le={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},fe=function(H,ue,ke={}){const Fe=s({scope:"comment",begin:H,end:ue,contains:[]},ke);Fe.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const Be=x("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Fe.contains.push({begin:_(/[ ]+/,"(",Be,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Fe},ge=fe("//","$"),xe=fe("/\\*","\\*/"),_e=fe("#","$"),Ce={scope:"number",begin:F,relevance:0},ae={scope:"number",begin:O,relevance:0},B={scope:"number",begin:M,relevance:0},I={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[te,{begin:/\[/,end:/\]/,relevance:0,contains:[te]}]},q={scope:"title",begin:w,relevance:0},K={scope:"title",begin:E,relevance:0},Q={begin:"\\.\\s*"+E,relevance:0};var Z=Object.freeze({__proto__:null,APOS_STRING_MODE:ce,BACKSLASH_ESCAPE:te,BINARY_NUMBER_MODE:B,BINARY_NUMBER_RE:M,COMMENT:fe,C_BLOCK_COMMENT_MODE:xe,C_LINE_COMMENT_MODE:ge,C_NUMBER_MODE:ae,C_NUMBER_RE:O,END_SAME_AS_BEGIN:function(H){return Object.assign(H,{"on:begin":(ue,ke)=>{ke.data._beginMatch=ue[1]},"on:end":(ue,ke)=>{ke.data._beginMatch!==ue[1]&&ke.ignoreMatch()}})},HASH_COMMENT_MODE:_e,IDENT_RE:w,MATCH_NOTHING_RE:A,METHOD_GUARD:Q,NUMBER_MODE:Ce,NUMBER_RE:F,PHRASAL_WORDS_MODE:le,QUOTE_STRING_MODE:se,REGEXP_MODE:I,RE_STARTERS_RE:V,SHEBANG:G,TITLE_MODE:q,UNDERSCORE_IDENT_RE:E,UNDERSCORE_TITLE_MODE:K});function J(H,ue){H.input[H.index-1]==="."&&ue.ignoreMatch()}function R(H,ue){H.className!==void 0&&(H.scope=H.className,delete H.className)}function U(H,ue){ue&&H.beginKeywords&&(H.begin="\\b("+H.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",H.__beforeBegin=J,H.keywords=H.keywords||H.beginKeywords,delete H.beginKeywords,H.relevance===void 0&&(H.relevance=0))}function z(H,ue){Array.isArray(H.illegal)&&(H.illegal=x(...H.illegal))}function L(H,ue){if(H.match){if(H.begin||H.end)throw new Error("begin & end are not supported with match");H.begin=H.match,delete H.match}}function j(H,ue){H.relevance===void 0&&(H.relevance=1)}const ee=(H,ue)=>{if(!H.beforeMatch)return;if(H.starts)throw new Error("beforeMatch cannot be used with starts");const ke=Object.assign({},H);Object.keys(H).forEach(Fe=>{delete H[Fe]}),H.keywords=ke.keywords,H.begin=_(ke.beforeMatch,g(ke.begin)),H.starts={relevance:0,contains:[Object.assign(ke,{endsParent:!0})]},H.relevance=0,delete ke.beforeMatch},he=["of","and","for","in","not","or","if","then","parent","list","value"],ye="keyword";function pe(H,ue,ke=ye){const Fe=Object.create(null);return typeof H=="string"?Be(ke,H.split(" ")):Array.isArray(H)?Be(ke,H):Object.keys(H).forEach(function(Ve){Object.assign(Fe,pe(H[Ve],ue,Ve))}),Fe;function Be(Ve,je){ue&&(je=je.map(Ue=>Ue.toLowerCase())),je.forEach(function(Ue){const He=Ue.split("|");Fe[He[0]]=[Ve,ne(He[0],He[1])]})}}function ne(H,ue){return ue?Number(ue):de(H)?0:1}function de(H){return he.includes(H.toLowerCase())}const me={},ve=H=>{console.error(H)},Se=(H,...ue)=>{console.log(`WARN: ${H}`,...ue)},De=(H,ue)=>{me[`${H}/${ue}`]||(console.log(`Deprecated as of ${H}. ${ue}`),me[`${H}/${ue}`]=!0)},Me=new Error;function Le(H,ue,{key:ke}){let Fe=0;const Be=H[ke],Ve={},je={};for(let Ue=1;Ue<=ue.length;Ue++)je[Ue+Fe]=Be[Ue],Ve[Ue+Fe]=!0,Fe+=P(ue[Ue-1]);H[ke]=je,H[ke]._emit=Ve,H[ke]._multi=!0}function qe(H){if(Array.isArray(H.begin)){if(H.skip||H.excludeBegin||H.returnBegin)throw ve("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Me;if(typeof H.beginScope!="object"||H.beginScope===null)throw ve("beginScope must be object"),Me;Le(H,H.begin,{key:"beginScope"}),H.begin=S(H.begin,{joinWith:""})}}function Ke(H){if(Array.isArray(H.end)){if(H.skip||H.excludeEnd||H.returnEnd)throw ve("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Me;if(typeof H.endScope!="object"||H.endScope===null)throw ve("endScope must be object"),Me;Le(H,H.end,{key:"endScope"}),H.end=S(H.end,{joinWith:""})}}function Y(H){H.scope&&typeof H.scope=="object"&&H.scope!==null&&(H.beginScope=H.scope,delete H.scope)}function Te(H){Y(H),typeof H.beginScope=="string"&&(H.beginScope={_wrap:H.beginScope}),typeof H.endScope=="string"&&(H.endScope={_wrap:H.endScope}),qe(H),Ke(H)}function Pe(H){function ue(je,Ue){return new RegExp(p(je),"m"+(H.case_insensitive?"i":"")+(H.unicodeRegex?"u":"")+(Ue?"g":""))}class ke{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Ue,He){He.position=this.position++,this.matchIndexes[this.matchAt]=He,this.regexes.push([He,Ue]),this.matchAt+=P(Ue)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Ue=this.regexes.map(He=>He[1]);this.matcherRe=ue(S(Ue,{joinWith:"|"}),!0),this.lastIndex=0}exec(Ue){this.matcherRe.lastIndex=this.lastIndex;const He=this.matcherRe.exec(Ue);if(!He)return null;const Je=He.findIndex((et,ht)=>ht>0&&et!==void 0),Ze=this.matchIndexes[Je];return He.splice(0,Je),Object.assign(He,Ze)}}class Fe{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Ue){if(this.multiRegexes[Ue])return this.multiRegexes[Ue];const He=new ke;return this.rules.slice(Ue).forEach(([Je,Ze])=>He.addRule(Je,Ze)),He.compile(),this.multiRegexes[Ue]=He,He}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Ue,He){this.rules.push([Ue,He]),He.type==="begin"&&this.count++}exec(Ue){const He=this.getMatcher(this.regexIndex);He.lastIndex=this.lastIndex;let Je=He.exec(Ue);if(this.resumingScanAtSamePosition()&&!(Je&&Je.index===this.lastIndex)){const Ze=this.getMatcher(0);Ze.lastIndex=this.lastIndex+1,Je=Ze.exec(Ue)}return Je&&(this.regexIndex+=Je.position+1,this.regexIndex===this.count&&this.considerAll()),Je}}function Be(je){const Ue=new Fe;return je.contains.forEach(He=>Ue.addRule(He.begin,{rule:He,type:"begin"})),je.terminatorEnd&&Ue.addRule(je.terminatorEnd,{type:"end"}),je.illegal&&Ue.addRule(je.illegal,{type:"illegal"}),Ue}function Ve(je,Ue){const He=je;if(je.isCompiled)return He;[R,L,Te,ee].forEach(Ze=>Ze(je,Ue)),H.compilerExtensions.forEach(Ze=>Ze(je,Ue)),je.__beforeBegin=null,[U,z,j].forEach(Ze=>Ze(je,Ue)),je.isCompiled=!0;let Je=null;return typeof je.keywords=="object"&&je.keywords.$pattern&&(je.keywords=Object.assign({},je.keywords),Je=je.keywords.$pattern,delete je.keywords.$pattern),Je=Je||/\w+/,je.keywords&&(je.keywords=pe(je.keywords,H.case_insensitive)),He.keywordPatternRe=ue(Je,!0),Ue&&(je.begin||(je.begin=/\B|\b/),He.beginRe=ue(He.begin),!je.end&&!je.endsWithParent&&(je.end=/\B|\b/),je.end&&(He.endRe=ue(He.end)),He.terminatorEnd=p(He.end)||"",je.endsWithParent&&Ue.terminatorEnd&&(He.terminatorEnd+=(je.end?"|":"")+Ue.terminatorEnd)),je.illegal&&(He.illegalRe=ue(je.illegal)),je.contains||(je.contains=[]),je.contains=[].concat(...je.contains.map(function(Ze){return re(Ze==="self"?je:Ze)})),je.contains.forEach(function(Ze){Ve(Ze,He)}),je.starts&&Ve(je.starts,Ue),He.matcher=Be(He),He}if(H.compilerExtensions||(H.compilerExtensions=[]),H.contains&&H.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return H.classNameAliases=s(H.classNameAliases||{}),Ve(H)}function Oe(H){return H?H.endsWithParent||Oe(H.starts):!1}function re(H){return H.variants&&!H.cachedVariants&&(H.cachedVariants=H.variants.map(function(ue){return s(H,{variants:null},ue)})),H.cachedVariants?H.cachedVariants:Oe(H)?s(H,{starts:H.starts?s(H.starts):null}):Object.isFrozen(H)?s(H):H}var oe="11.11.1";class N extends Error{constructor(ue,ke){super(ue),this.name="HTMLInjectionError",this.html=ke}}const be=n,Ne=s,D=Symbol("nomatch"),we=7,Ae=function(H){const ue=Object.create(null),ke=Object.create(null),Fe=[];let Be=!0;const Ve="Could not find the language '{}', did you forget to load/include a language module?",je={disableAutodetect:!0,name:"Plain text",contains:[]};let Ue={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function He(ze){return Ue.noHighlightRe.test(ze)}function Je(ze){let Xe=ze.className+" ";Xe+=ze.parentNode?ze.parentNode.className:"";const $e=Ue.languageDetectRe.exec(Xe);if($e){const nt=Et($e[1]);return nt||(Se(Ve.replace("{}",$e[1])),Se("Falling back to no-highlight mode for this block.",ze)),nt?$e[1]:"no-highlight"}return Xe.split(/\s+/).find(nt=>He(nt)||Et(nt))}function Ze(ze,Xe,$e){let nt="",ot="";typeof Xe=="object"?(nt=ze,$e=Xe.ignoreIllegals,ot=Xe.language):(De("10.7.0","highlight(lang, code, ...args) has been deprecated."),De("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ot=ze,nt=Xe),$e===void 0&&($e=!0);const vt={code:nt,language:ot};zt("before:highlight",vt);const kt=vt.result?vt.result:et(vt.language,vt.code,$e);return kt.code=vt.code,zt("after:highlight",kt),kt}function et(ze,Xe,$e,nt){const ot=Object.create(null);function vt(We,Ge){return We.keywords[Ge]}function kt(){if(!Ye.keywords){lt.addText(it);return}let We=0;Ye.keywordPatternRe.lastIndex=0;let Ge=Ye.keywordPatternRe.exec(it),Qe="";for(;Ge;){Qe+=it.substring(We,Ge.index);const tt=bt.case_insensitive?Ge[0].toLowerCase():Ge[0],ut=vt(Ye,tt);if(ut){const[Ct,bn]=ut;if(lt.addText(Qe),Qe="",ot[tt]=(ot[tt]||0)+1,ot[tt]<=we&&(jt+=bn),Ct.startsWith("_"))Qe+=Ge[0];else{const _n=bt.classNameAliases[Ct]||Ct;yt(Ge[0],_n)}}else Qe+=Ge[0];We=Ye.keywordPatternRe.lastIndex,Ge=Ye.keywordPatternRe.exec(it)}Qe+=it.substring(We),lt.addText(Qe)}function Ht(){if(it==="")return;let We=null;if(typeof Ye.subLanguage=="string"){if(!ue[Ye.subLanguage]){lt.addText(it);return}We=et(Ye.subLanguage,it,!0,Pr[Ye.subLanguage]),Pr[Ye.subLanguage]=We._top}else We=dt(it,Ye.subLanguage.length?Ye.subLanguage:null);Ye.relevance>0&&(jt+=We.relevance),lt.__addSublanguage(We._emitter,We.language)}function ft(){Ye.subLanguage!=null?Ht():kt(),it=""}function yt(We,Ge){We!==""&&(lt.startScope(Ge),lt.addText(We),lt.endScope())}function Ar(We,Ge){let Qe=1;const tt=Ge.length-1;for(;Qe<=tt;){if(!We._emit[Qe]){Qe++;continue}const ut=bt.classNameAliases[We[Qe]]||We[Qe],Ct=Ge[Qe];ut?yt(Ct,ut):(it=Ct,kt(),it=""),Qe++}}function Er(We,Ge){return We.scope&&typeof We.scope=="string"&&lt.openNode(bt.classNameAliases[We.scope]||We.scope),We.beginScope&&(We.beginScope._wrap?(yt(it,bt.classNameAliases[We.beginScope._wrap]||We.beginScope._wrap),it=""):We.beginScope._multi&&(Ar(We.beginScope,Ge),it="")),Ye=Object.create(We,{parent:{value:Ye}}),Ye}function kr(We,Ge,Qe){let tt=T(We.endRe,Qe);if(tt){if(We["on:end"]){const ut=new e(We);We["on:end"](Ge,ut),ut.isMatchIgnored&&(tt=!1)}if(tt){for(;We.endsParent&&We.parent;)We=We.parent;return We}}if(We.endsWithParent)return kr(We.parent,Ge,Qe)}function pn(We){return Ye.matcher.regexIndex===0?(it+=We[0],1):(er=!0,0)}function gn(We){const Ge=We[0],Qe=We.rule,tt=new e(Qe),ut=[Qe.__beforeBegin,Qe["on:begin"]];for(const Ct of ut)if(Ct&&(Ct(We,tt),tt.isMatchIgnored))return pn(Ge);return Qe.skip?it+=Ge:(Qe.excludeBegin&&(it+=Ge),ft(),!Qe.returnBegin&&!Qe.excludeBegin&&(it=Ge)),Er(Qe,We),Qe.returnBegin?0:Ge.length}function mn(We){const Ge=We[0],Qe=Xe.substring(We.index),tt=kr(Ye,We,Qe);if(!tt)return D;const ut=Ye;Ye.endScope&&Ye.endScope._wrap?(ft(),yt(Ge,Ye.endScope._wrap)):Ye.endScope&&Ye.endScope._multi?(ft(),Ar(Ye.endScope,We)):ut.skip?it+=Ge:(ut.returnEnd||ut.excludeEnd||(it+=Ge),ft(),ut.excludeEnd&&(it=Ge));do Ye.scope&&lt.closeNode(),!Ye.skip&&!Ye.subLanguage&&(jt+=Ye.relevance),Ye=Ye.parent;while(Ye!==tt.parent);return tt.starts&&Er(tt.starts,We),ut.returnEnd?0:Ge.length}function vn(){const We=[];for(let Ge=Ye;Ge!==bt;Ge=Ge.parent)Ge.scope&&We.unshift(Ge.scope);We.forEach(Ge=>lt.openNode(Ge))}let Vt={};function Tr(We,Ge){const Qe=Ge&&Ge[0];if(it+=We,Qe==null)return ft(),0;if(Vt.type==="begin"&&Ge.type==="end"&&Vt.index===Ge.index&&Qe===""){if(it+=Xe.slice(Ge.index,Ge.index+1),!Be){const tt=new Error(`0 width match regex (${ze})`);throw tt.languageName=ze,tt.badRule=Vt.rule,tt}return 1}if(Vt=Ge,Ge.type==="begin")return gn(Ge);if(Ge.type==="illegal"&&!$e){const tt=new Error('Illegal lexeme "'+Qe+'" for mode "'+(Ye.scope||"<unnamed>")+'"');throw tt.mode=Ye,tt}else if(Ge.type==="end"){const tt=mn(Ge);if(tt!==D)return tt}if(Ge.type==="illegal"&&Qe==="")return it+=`
`,1;if($t>1e5&&$t>Ge.index*3)throw new Error("potential infinite loop, way more iterations than matches");return it+=Qe,Qe.length}const bt=Et(ze);if(!bt)throw ve(Ve.replace("{}",ze)),new Error('Unknown language: "'+ze+'"');const yn=Pe(bt);let Qt="",Ye=nt||yn;const Pr={},lt=new Ue.__emitter(Ue);vn();let it="",jt=0,Pt=0,$t=0,er=!1;try{if(bt.__emitTokens)bt.__emitTokens(Xe,lt);else{for(Ye.matcher.considerAll();;){$t++,er?er=!1:Ye.matcher.considerAll(),Ye.matcher.lastIndex=Pt;const We=Ye.matcher.exec(Xe);if(!We)break;const Ge=Xe.substring(Pt,We.index),Qe=Tr(Ge,We);Pt=We.index+Qe}Tr(Xe.substring(Pt))}return lt.finalize(),Qt=lt.toHTML(),{language:ze,value:Qt,relevance:jt,illegal:!1,_emitter:lt,_top:Ye}}catch(We){if(We.message&&We.message.includes("Illegal"))return{language:ze,value:be(Xe),illegal:!0,relevance:0,_illegalBy:{message:We.message,index:Pt,context:Xe.slice(Pt-100,Pt+100),mode:We.mode,resultSoFar:Qt},_emitter:lt};if(Be)return{language:ze,value:be(Xe),illegal:!1,relevance:0,errorRaised:We,_emitter:lt,_top:Ye};throw We}}function ht(ze){const Xe={value:be(ze),illegal:!1,relevance:0,_top:je,_emitter:new Ue.__emitter(Ue)};return Xe._emitter.addText(ze),Xe}function dt(ze,Xe){Xe=Xe||Ue.languages||Object.keys(ue);const $e=ht(ze),nt=Xe.filter(Et).filter(Cr).map(ft=>et(ft,ze,!1));nt.unshift($e);const ot=nt.sort((ft,yt)=>{if(ft.relevance!==yt.relevance)return yt.relevance-ft.relevance;if(ft.language&&yt.language){if(Et(ft.language).supersetOf===yt.language)return 1;if(Et(yt.language).supersetOf===ft.language)return-1}return 0}),[vt,kt]=ot,Ht=vt;return Ht.secondBest=kt,Ht}function at(ze,Xe,$e){const nt=Xe&&ke[Xe]||$e;ze.classList.add("hljs"),ze.classList.add(`language-${nt}`)}function ct(ze){let Xe=null;const $e=Je(ze);if(He($e))return;if(zt("before:highlightElement",{el:ze,language:$e}),ze.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",ze);return}if(ze.children.length>0&&(Ue.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ze)),Ue.throwUnescapedHTML))throw new N("One of your code blocks includes unescaped HTML.",ze.innerHTML);Xe=ze;const nt=Xe.textContent,ot=$e?Ze(nt,{language:$e,ignoreIllegals:!0}):dt(nt);ze.innerHTML=ot.value,ze.dataset.highlighted="yes",at(ze,$e,ot.language),ze.result={language:ot.language,re:ot.relevance,relevance:ot.relevance},ot.secondBest&&(ze.secondBest={language:ot.secondBest.language,relevance:ot.secondBest.relevance}),zt("after:highlightElement",{el:ze,result:ot,text:nt})}function st(ze){Ue=Ne(Ue,ze)}const mt=()=>{Ut(),De("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function pt(){Ut(),De("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let It=!1;function Ut(){function ze(){Ut()}if(document.readyState==="loading"){It||window.addEventListener("DOMContentLoaded",ze,!1),It=!0;return}document.querySelectorAll(Ue.cssSelector).forEach(ct)}function sn(ze,Xe){let $e=null;try{$e=Xe(H)}catch(nt){if(ve("Language definition for '{}' could not be registered.".replace("{}",ze)),Be)ve(nt);else throw nt;$e=je}$e.name||($e.name=ze),ue[ze]=$e,$e.rawDefinition=Xe.bind(null,H),$e.aliases&&Sr($e.aliases,{languageName:ze})}function ln(ze){delete ue[ze];for(const Xe of Object.keys(ke))ke[Xe]===ze&&delete ke[Xe]}function cn(){return Object.keys(ue)}function Et(ze){return ze=(ze||"").toLowerCase(),ue[ze]||ue[ke[ze]]}function Sr(ze,{languageName:Xe}){typeof ze=="string"&&(ze=[ze]),ze.forEach($e=>{ke[$e.toLowerCase()]=Xe})}function Cr(ze){const Xe=Et(ze);return Xe&&!Xe.disableAutodetect}function un(ze){ze["before:highlightBlock"]&&!ze["before:highlightElement"]&&(ze["before:highlightElement"]=Xe=>{ze["before:highlightBlock"](Object.assign({block:Xe.el},Xe))}),ze["after:highlightBlock"]&&!ze["after:highlightElement"]&&(ze["after:highlightElement"]=Xe=>{ze["after:highlightBlock"](Object.assign({block:Xe.el},Xe))})}function hn(ze){un(ze),Fe.push(ze)}function fn(ze){const Xe=Fe.indexOf(ze);Xe!==-1&&Fe.splice(Xe,1)}function zt(ze,Xe){const $e=ze;Fe.forEach(function(nt){nt[$e]&&nt[$e](Xe)})}function dn(ze){return De("10.7.0","highlightBlock will be removed entirely in v12.0"),De("10.7.0","Please use highlightElement now."),ct(ze)}Object.assign(H,{highlight:Ze,highlightAuto:dt,highlightAll:Ut,highlightElement:ct,highlightBlock:dn,configure:st,initHighlighting:mt,initHighlightingOnLoad:pt,registerLanguage:sn,unregisterLanguage:ln,listLanguages:cn,getLanguage:Et,registerAliases:Sr,autoDetection:Cr,inherit:Ne,addPlugin:hn,removePlugin:fn}),H.debugMode=function(){Be=!1},H.safeMode=function(){Be=!0},H.versionString=oe,H.regex={concat:_,lookahead:g,either:x,optional:y,anyNumberOfTimes:m};for(const ze in Z)typeof Z[ze]=="object"&&a(Z[ze]);return Object.assign(H,Z),H},X=Ae({});return X.newInstance=()=>Ae({}),core=X,X.HighlightJS=X,X.default=X,core}var coreExports=requireCore();const HighlightJS=getDefaultExportFromCjs$1(coreExports);function xml(a){const e=a.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),s=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},l={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},c=a.inherit(l,{begin:/\(/,end:/\)/}),u=a.inherit(a.APOS_STRING_MODE,{className:"string"}),h=a.inherit(a.QUOTE_STRING_MODE,{className:"string"}),f={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:s,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[l,h,u,c,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[l,c,h,u]}]}]},a.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[h]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[f],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[f],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:f}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const hljs$1=HighlightJS.newInstance();hljs$1.configure({classPrefix:""});hljs$1.registerLanguage("xml",xml);var root_1$5=template('<code data-testid="value" class="value html hl" title=""><!></code>');function HTMLValue(a,e){push(e,!0);let n=useOptions();const s=(d,p)=>{if(d){let g=d.innerHTML?d.outerHTML.slice(0,d.outerHTML.indexOf(d.innerHTML)):d.outerHTML;return collapseString(g,p)}return""},o=d=>hljs$1.highlight(d,{language:"xml"}).value;let l=state("");const c=new MutationObserver(([d])=>{const p=s(d.target,n.value.stringCollapse);set(l,o(p),!0)});onMount(()=>{if(e.value){const d=s(e.value,n.value.stringCollapse);set(l,o(d),!0),c.observe(e.value,{attributes:!0})}return()=>{c.disconnect()}});var u=comment$1(),h=first_child(u);{var f=d=>{var p=root_1$5(),g=child(p);html(g,()=>get$3(l)),append(d,p)};if_block(h,d=>{d(f)})}append(a,u),pop()}var root_3$2=template("<!> <!>",1);function HTMLViewFull(a,e){push(e,!0);let n=prop(e,"key",3,void 0),s=rest_props(e,["$$slots","$$events","$$legacy","value","key","path","children"]),o=user_derived(()=>getAllProperties(e.value).filter(l=>!["__svelte_meta","__className","__attributes","__styles","__t"].includes(l.toString())));Expandable(a,spread_props(()=>({value:e.value,key:n(),path:e.path}),{get length(){return get$3(o).length},keepPreviewOnExpand:!1},()=>s,{valuePreview:c=>{var u=comment$1(),h=first_child(u);key_block(h,()=>e.value,f=>{HTMLValue(f,{get value(){return e.value}})}),append(c,u)},children:(c,u)=>{var h=root_3$2(),f=first_child(h);{var d=g=>{var m=comment$1(),y=first_child(m);snippet(y,()=>e.children),append(g,m)};if_block(f,g=>{e.children&&g(d)})}var p=sibling(f,2);PropertyList(p,{get keys(){return get$3(o)},get value(){return e.value},item:(m,y)=>{let _=()=>y==null?void 0:y().key,b=()=>y==null?void 0:y().descriptor;var x=comment$1(),P=first_child(x);{var T=S=>{GetterSetter(S,{get value(){return e.value},get descriptor(){return b()},get key(){return _()},get path(){return e.path}})},k=S=>{Node$1(S,{get value(){return e.value[_()]},get key(){return _()},get path(){return e.path}})};if_block(P,S=>{var A,w;(A=b())!=null&&A.get||(w=b())!=null&&w.set?S(T):S(k,!1)})}append(m,x)},$$slots:{item:!0}}),append(c,h)},$$slots:{valuePreview:!0,default:!0}})),pop()}function htmlState(a){let e=state(proxy(a));const n=new MutationObserver(([s])=>{set(e,null),set(e,s.target,!0)});return onMount(()=>(n.observe(a,{attributes:!0}),()=>{n.disconnect()})),{get ele(){return get$3(e)},destroy:()=>{n.disconnect()}}}var root_3$1=template("<!> <!>",1);function HTMLViewSimple(a,e){push(e,!0);let n=prop(e,"key",3,void 0),s=rest_props(e,["$$slots","$$events","$$legacy","value","key","path","children"]),o=state(proxy(htmlState(e.value))),l=proxy({scrollLeft:0,scrollTop:0,clientHeight:0,clientWidth:0});user_effect(()=>{const f=p=>{const g=p.target;l.scrollLeft=g.scrollLeft,l.scrollTop=g.scrollTop},d=new ResizeObserver(([p])=>{l.clientHeight=p.target.clientHeight,l.clientWidth=p.target.clientWidth,l.scrollLeft=p.target.scrollLeft,l.scrollTop=p.target.scrollTop});return e.value&&(e.value.addEventListener("scroll",f),d.observe(e.value)),()=>{e.value.removeEventListener("scroll",f),d.disconnect()}}),user_effect(()=>{e.value&&e.value!==get$3(o).ele&&(get$3(o).destroy(),set(o,htmlState(e.value),!0))});let c=user_derived(()=>get$3(o).ele?Object.entries(get$3(o).ele.attributes??{}).map(([,f])=>[f.name,f.value]).filter(([f])=>!["class","style","data"].includes(f)&&!f.startsWith("data-")):[]),u=user_derived(()=>{if(get$3(o).ele){const f=get$3(o).ele.style,d=[];for(const p in f)Object.hasOwn(f,p)&&!Number.isNaN(Number.parseInt(p))&&f.getPropertyValue(f[p])&&d.push([f[p],f.getPropertyValue(f[p])]);return d}return[]}),h=user_derived(()=>{var f;return Object.entries({...Object.fromEntries(get$3(c)),class:((f=get$3(o).ele.className)==null?void 0:f.split(" ").filter(Boolean))??[],styles:Object.fromEntries(get$3(u)),data:Object.fromEntries(Object.entries(get$3(o).ele.dataset??{})),...l,children:e.value.children}).filter(([,d])=>isArray(d)?d.length:isObject(d)?Object.entries(d).length:d!=null)});Expandable(a,spread_props(()=>({value:e.value,key:n(),path:e.path}),{get length(){return get$3(h).length},keepPreviewOnExpand:!0},()=>s,{valuePreview:d=>{var p=comment$1(),g=first_child(p);key_block(g,()=>e.value,m=>{HTMLValue(m,{get value(){return e.value}})}),append(d,p)},children:(d,p)=>{var g=root_3$1(),m=first_child(g);{var y=x=>{var P=comment$1(),T=first_child(P);snippet(T,()=>e.children),append(x,P)};if_block(m,x=>{e.children&&x(y)})}var _=sibling(m,2);const b=user_derived(()=>get$3(h).map(x=>x[0]));PropertyList(_,{get keys(){return get$3(b)},get value(){return e.value},item:(P,T)=>{let k=()=>T==null?void 0:T().key,S=()=>T==null?void 0:T().descriptor;var A=comment$1(),w=first_child(A);{var E=O=>{GetterSetter(O,{get value(){return e.value},get descriptor(){return S()},get key(){return k()},get path(){return e.path}})},F=O=>{const M=user_derived(()=>{var V;return(V=get$3(h).find(G=>G[0]===k()))==null?void 0:V[1]});Node$1(O,{get value(){return get$3(M)},get key(){return k()},get path(){return e.path}})};if_block(w,O=>{var M,V;k()==="children"&&((M=S())!=null&&M.get||(V=S())!=null&&V.set)?O(E):O(F,!1)})}append(P,A)},$$slots:{item:!0}}),append(d,g)},$$slots:{valuePreview:!0,default:!0}})),pop()}function HTMLView(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy"]);const s=useOptions();var o=comment$1(),l=first_child(o);{var c=h=>{HTMLViewSimple(h,spread_props(()=>n))},u=h=>{HTMLViewFull(h,spread_props(()=>n))};if_block(l,h=>{s.value.elementView==="simple"?h(c):h(u,!1)})}append(a,o),pop()}function ArrayView(a,e){push(e,!0);let n=prop(e,"value",19,()=>[]),s=rest_props(e,["$$slots","$$events","$$legacy","value","path","type","showKey"]);const o=getPreviewLevel();let l=user_derived(()=>getAllProperties(n()).filter(h=>typeof h=="string"?/\d+/.test(h)===!1&&h!=="length":!0)),c=user_derived(()=>[...n().keys(),...get$3(l)]);const u=user_derived(()=>e.showKey&&o===0);Expandable(a,spread_props({get value(){return n()},get length(){return n().length},get type(){return e.type},get path(){return e.path},get showKey(){return get$3(u)}},()=>s,{valuePreview:(f,d)=>{let p=()=>d==null?void 0:d().showPreview;Preview(f,{get path(){return e.path},get list(){return n()},prefix:"[",postfix:"]",get showPreview(){return p()},showKey:!1})},children:(f,d)=>{PropertyList(f,{get value(){return n()},get type(){return e.type},get keys(){return get$3(c)},item:(g,m)=>{let y=()=>m==null?void 0:m().key;const _=user_derived(()=>{var b;return(b=n())==null?void 0:b[y()]});Node$1(g,{get value(){return get$3(_)},get key(){return y()},get path(){return e.path}})},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})),pop()}var root_1$4=template("<span> </span> <!>",1);function ClassView(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]);const s=getPreviewLevel(),o=["name","length","prototype"];let l=user_derived(()=>getAllProperties(e.value));Expandable(a,spread_props(()=>({value:e.value,key:e.key,type:e.type,path:e.path}),{get length(){return get$3(l).length}},()=>n,{valuePreview:(u,h)=>{let f=()=>h==null?void 0:h().showPreview;var d=root_1$4(),p=first_child(d),g=child(p),m=sibling(p,2);{var y=_=>{Preview(_,{prefix:"{",postfix:"}",get keys(){return get$3(l)},get value(){return e.value},get showPreview(){return f()}})};if_block(m,_=>{s||_(y)})}template_effect(()=>{set_class(p,1,`value ${e.type??""}`),set_text(g,e.value.name)}),append(u,d)},children:(u,h)=>{PropertyList(u,{get keys(){return get$3(l)},get value(){return e.value},item:(d,p)=>{let g=()=>p==null?void 0:p().key,m=()=>p==null?void 0:p().descriptor;var y=comment$1(),_=first_child(y);{var b=P=>{const T=user_derived(()=>o.includes(g())?"":"static");GetterSetter(P,{get keyPrefix(){return get$3(T)},get key(){return g()},get value(){return e.value},get descriptor(){return m()},get path(){return e.path}})},x=P=>{const T=user_derived(()=>o.includes(g())?"":"static");Node$1(P,{get keyPrefix(){return get$3(T)},get key(){return g()},get value(){return e.value[g()]},get path(){return e.path}})};if_block(_,P=>{var T,k;(T=m())!=null&&T.get||(k=m())!=null&&k.set?P(b):P(x,!1)})}append(d,y)},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})),pop()}function DateView(a,e){push(e,!0);let n=user_derived(()=>Object.entries({toString:e.value.toString(),dateString:e.value.toDateString(),utcString:e.value.toUTCString(),year:e.value.getFullYear(),month:e.value.getMonth(),date:e.value.getDate(),day:e.value.getDay(),hour:e.value.getHours(),minutes:e.value.getMinutes(),seconds:e.value.getSeconds(),milliseconds:e.value.getMilliseconds(),time:e.value.getTime()}));Expandable(a,spread_props(()=>({value:e.value,key:e.key,type:e.type,path:e.path}),{get length(){return get$3(n).length},keepPreviewOnExpand:!0,showLength:!1,valuePreview:(o,l)=>{let c=()=>l==null?void 0:l().showPreview;var u=comment$1(),h=first_child(u);{var f=d=>{const p=user_derived(()=>e.value.toUTCString());StringValue(d,{get type(){return e.type},get value(){return get$3(p)}})};if_block(h,d=>{c()&&d(f)})}append(o,u)},children:(o,l)=>{var c=comment$1(),u=first_child(c);each(u,19,()=>get$3(n),([h,f])=>h,(h,f,d,p)=>{let g=()=>get$3(f)[0],m=()=>get$3(f)[1];Entry(h,{get i(){return get$3(d)},children:(y,_)=>{Node$1(y,{get value(){return m()},get key(){return g()},get path(){return e.path}})},$$slots:{default:!0}})}),append(o,c)},$$slots:{valuePreview:!0,default:!0}})),pop()}function ErrorView(a,e){push(e,!0);let n=prop(e,"type",3,"error"),s=getContext(Symbol.for("siv.use-defaults")),o=proxy(Object.entries({name:e.value.name,message:e.value.message,stack:e.value.stack,cause:e.value.cause}).filter(([,l])=>l!=null));Expandable(a,{get value(){return e.value},get key(){return e.key},get type(){return n()},get path(){return e.path},get length(){return o.length},keepPreviewOnExpand:!0,valuePreview:c=>{const u=user_derived(()=>e.value.toString());StringValue(c,{get type(){return n()},get value(){return get$3(u)}})},children:(c,u)=>{var h=comment$1(),f=first_child(h);each(f,19,()=>o,([d,p])=>d,(d,p,g,m)=>{let y=()=>get$3(p)[0],_=()=>get$3(p)[1];Entry(d,{get i(){return get$3(g)},children:(b,x)=>{Node$1(b,{get value(){return _()},get key(){return y()},get path(){return e.path},usedefaults:s??!1})},$$slots:{default:!0}})}),append(c,h)},$$slots:{valuePreview:!0,default:!0}}),pop()}const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(a){const e=a.regex,n=(fe,{after:ge})=>{const xe="</"+fe[0].slice(1);return fe.input.indexOf(xe,ge)!==-1},s=IDENT_RE,o={begin:"<>",end:"</>"},l=/<[A-Za-z0-9\\._:-]+\s*\/>/,c={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(fe,ge)=>{const xe=fe[0].length+fe.index,_e=fe.input[xe];if(_e==="<"||_e===","){ge.ignoreMatch();return}_e===">"&&(n(fe,{after:xe})||ge.ignoreMatch());let Ce;const ae=fe.input.substring(xe);if(Ce=ae.match(/^\s*=/)){ge.ignoreMatch();return}if((Ce=ae.match(/^\s+extends\s+/))&&Ce.index===0){ge.ignoreMatch();return}}},u={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},h="[0-9](_?[0-9])*",f=`\\.(${h})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${d})((${f})|\\.)?|(${f}))[eE][+-]?(${h})\\b`},{begin:`\\b(${d})\\b((${f})\\b|\\.)?|(${f})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},g={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},m={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[a.BACKSLASH_ESCAPE,g],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[a.BACKSLASH_ESCAPE,g],subLanguage:"css"}},_={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[a.BACKSLASH_ESCAPE,g],subLanguage:"graphql"}},b={className:"string",begin:"`",end:"`",contains:[a.BACKSLASH_ESCAPE,g]},P={className:"comment",variants:[a.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),a.C_BLOCK_COMMENT_MODE,a.C_LINE_COMMENT_MODE]},T=[a.APOS_STRING_MODE,a.QUOTE_STRING_MODE,m,y,_,b,{match:/\$\d+/},p];g.contains=T.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(T)});const k=[].concat(P,g.contains),S=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),A={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:S},w={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,e.concat(s,"(",e.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},O={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[A],illegal:/%/},M={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function V(fe){return e.concat("(?!",fe.join("|"),")")}const G={match:e.concat(/\b/,V([...BUILT_IN_GLOBALS,"super","import"].map(fe=>`${fe}\\s*\\(`)),s,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},te={begin:e.concat(/\./,e.lookahead(e.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ce={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},A]},se="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+a.UNDERSCORE_IDENT_RE+")\\s*=>",le={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(se)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[A]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:S,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[a.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,a.APOS_STRING_MODE,a.QUOTE_STRING_MODE,m,y,_,b,P,{match:/\$\d+/},p,E,{scope:"attr",match:s+e.lookahead(":"),relevance:0},le,{begin:"("+a.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[P,a.REGEXP_MODE,{className:"function",begin:se,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:a.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:S}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:l},{begin:c.begin,"on:begin":c.isTrulyOpeningTag,end:c.end}],subLanguage:"xml",contains:[{begin:c.begin,end:c.end,skip:!0,contains:["self"]}]}]},O,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+a.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[A,a.inherit(a.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},te,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[A]},G,M,w,ce,{match:/\$[(.]/}]}}const hljs=HighlightJS.newInstance();hljs.configure({classPrefix:""});hljs.registerLanguage("javascript",javascript);var root$3=template('<code data-testid="value"><!></code>');function FunctionBody(a,e){push(e,!0);let n=prop(e,"inline",3,!1),s=useOptions();const o=(f,d)=>hljs.highlight(collapseString(f,d),{language:"javascript"}).value;let l=user_derived(()=>o(e.value.replaceAll("	"," "),s.value.stringCollapse));var c=root$3();let u;var h=child(c);html(h,()=>get$3(l)),template_effect(f=>{set_attribute(c,"title",e.value),u=set_class(c,1,"value function hl svelte-32cevq",null,u,f)},[()=>({inline:n()})]),append(a,c),pop()}var root_3=template('<span class="preview value function svelte-15h6jgy"> </span>'),root_9$1=template('<span class="preview value function svelte-15h6jgy"> </span>');function FunctionView(a,e){push(e,!0);const n=(p,g)=>{let m=()=>g==null?void 0:g().showPreview;var y=comment$1(),_=first_child(y);{var b=x=>{var P=comment$1(),T=first_child(P);{var k=A=>{var w=root_3(),E=child(w);template_effect(()=>{set_attribute(w,"title",e.value.name),set_text(E,e.value.name)}),append(A,w)},S=(A,w)=>{{var E=F=>{FunctionBody(F,{get value(){return get$3(c)},inline:!0})};if_block(A,F=>{F(E)},w)}};if_block(T,A=>{l?A(k):A(S,!1)})}append(x,P)};if_block(_,x=>{m()&&x(b)})}append(p,y)};let s=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]),o=user_derived(()=>e.value.toString().includes(`
`));const l=getPreviewLevel(),c=user_derived(()=>{switch(e.type){case"asyncfunction":return e.value.toString().replace("async","");case"generatorfunction":return e.value.toString().replace("function*","").replace("*","");case"asyncgeneratorfunction":return e.value.toString().replace("async","").replace("function*","").replace("*","")}return e.value.toString()});var u=comment$1(),h=first_child(u);{var f=p=>{Expandable(p,spread_props({get key(){return e.key},get type(){return e.type},get path(){return e.path},get value(){return e.value},length:1,showLength:!1},()=>s,{valuePreview:(m,y)=>{let _=()=>y==null?void 0:y().showPreview;var b=comment$1(),x=first_child(b);{var P=T=>{var k=comment$1(),S=first_child(k);{var A=E=>{var F=root_9$1(),O=child(F);template_effect(()=>set_text(O,e.value.name)),append(E,F)},w=(E,F)=>{{var O=M=>{FunctionBody(M,{get value(){return get$3(c)},inline:!0})};if_block(E,M=>{M(O)},F)}};if_block(S,E=>{l?E(A):E(w,!1)})}append(T,k)};if_block(x,T=>{_()&&T(P)})}append(m,b)},children:(m,y)=>{const _=user_derived(()=>e.value.toString());FunctionBody(m,{get value(){return get$3(_)}})},$$slots:{valuePreview:!0,default:!0}}))},d=p=>{OneLineView(p,spread_props({get key(){return e.key},get type(){return e.type},get path(){return e.path},get value(){return e.value}},()=>s,{children:(g,m)=>{n(g,()=>({showPreview:!0}))},$$slots:{default:!0}}))};if_block(h,p=>{get$3(o)?p(f):p(d,!1)})}append(a,u),pop()}var root_2$4=template('<div class="image svelte-132lefk"><img class="svelte-132lefk"></div>');function HTMLImageElementView(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","value"]),s=useOptions();HTMLView(a,spread_props({get value(){return e.value}},()=>n,{children:(o,l)=>{var c=comment$1(),u=first_child(c);{var h=f=>{var d=root_2$4(),p=child(d);template_effect(()=>{set_attribute(p,"alt",e.value.alt),set_attribute(p,"src",e.value.src)}),append(f,d)};if_block(u,f=>{e.value.src&&s.value.embedMedia&&f(h)})}append(o,c)},$$slots:{default:!0}})),pop()}var root_2$3=template("<!> <!>",1),root_1$3=template("<!> <!>",1);function IteratorView(a,e){push(e,!0);let n=prop(e,"key",3,void 0),s=prop(e,"path",19,()=>[]);const o=useValueCache(),l=getPreviewLevel();let c=user_derived(()=>stringifyPath(s())),u=user_derived(()=>o.has(get$3(c))),h=state(proxy([])),f=state(!1),d=state(!1);onMount(()=>{if(get$3(u)){const m=o.get(get$3(c));m&&(set(h,m.unwrap,!0),set(d,m.done,!0))}});async function p(){set(f,!0);const{value:m,done:y}=await e.value.next();set(f,!1),typeof y=="boolean"&&set(d,y,!0),y||get$3(h).push(m),o.set(get$3(c),{unwrap:snapshot(get$3(h)),done:get$3(d)})}async function g(){set(f,!0);let m=await e.value.next(),y=0;for(;!m.done&&y<100;)y++,get$3(h).push(m.value),m=await e.value.next(),typeof m.done=="boolean"&&set(d,m.done,!0);set(f,!1),o.set(get$3(c),{unwrap:snapshot(get$3(h)),done:get$3(d)})}Expandable(a,spread_props(()=>({value:e.value,key:n(),type:e.type,path:s()}),{get length(){return get$3(h).length},get showKey(){return e.showKey},showLength:!1,valuePreview:(y,_)=>{let b=()=>_==null?void 0:_().showPreview;var x=root_1$3(),P=first_child(x);{var T=S=>{var A=root_2$3(),w=first_child(A);NodeActionButton(w,{get busy(){return get$3(f)},get disabled(){return get$3(d)},onclick:p,children:(F,O)=>{var M=text$5();template_effect(()=>set_text(M,get$3(d)?"done":"next")),append(F,M)},$$slots:{default:!0}});var E=sibling(w,2);NodeActionButton(E,{get busy(){return get$3(f)},get disabled(){return get$3(d)},onclick:g,children:(F,O)=>{var M=text$5("100");append(F,M)},$$slots:{default:!0}}),append(S,A)};if_block(P,S=>{l||S(T)})}var k=sibling(P,2);Preview(k,{get path(){return s()},get list(){return get$3(h)},prefix:"[",postfix:"]",get showPreview(){return b()},showKey:!1}),append(y,x)},children:(y,_)=>{const b=user_derived(()=>[...get$3(h).keys()]);PropertyList(y,{get value(){return get$3(h)},get keys(){return get$3(b)},item:(P,T)=>{let k=()=>T==null?void 0:T().key;Node$1(P,{get key(){return k()},get path(){return s()},get value(){return get$3(h)[k()]}})},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})),pop()}var root_5$1=template("<!> <!>",1);function MapView(a,e){push(e,!0);let n=prop(e,"key",3,void 0),s=prop(e,"path",19,()=>[]),o=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]),l=user_derived(()=>[...e.value.keys()]),c=user_derived(()=>[...e.value.entries()]);Expandable(a,spread_props(()=>({value:e.value,key:n(),type:e.type,path:s()}),{get length(){return get$3(c).length}},()=>o,{valuePreview:(h,f)=>{let d=()=>f==null?void 0:f().showPreview;Preview(h,{get keyValue(){return get$3(c)},prefix:"{",postfix:"}",keyDelim:"=>",keyStyle:"margin-right: 0.5em;",get showPreview(){return d()}})},children:(h,f)=>{PropertyList(h,{get value(){return e.value},get keys(){return get$3(l)},item:(p,g)=>{let m=()=>g==null?void 0:g().key,y=()=>g==null?void 0:g().index;const _=user_derived(()=>[m(),e.value.get(m())]),b=user_derived(()=>[...s(),y()]);Expandable(p,{get key(){return y()},type:"",get value(){return get$3(_)},get path(){return get$3(b)},length:2,showLength:!1,keepPreviewOnExpand:!0,valuePreview:(P,T)=>{let k=()=>T==null?void 0:T().showPreview;const S=user_derived(()=>[[m(),e.value.get(m())]]);Preview(P,{get keyValue(){return get$3(S)},prefix:"{",postfix:"}",keyDelim:"=>",keyStyle:"margin-right: 0.5em;",get showPreview(){return k()}})},children:(P,T)=>{var k=root_5$1(),S=first_child(k);Entry(S,{i:0,children:(w,E)=>{const F=user_derived(()=>[...s(),y()]);Node$1(w,{key:"key",get value(){return m()},get path(){return get$3(F)}})},$$slots:{default:!0}});var A=sibling(S,2);Entry(A,{i:1,children:(w,E)=>{const F=user_derived(()=>{var M;return(M=e.value)==null?void 0:M.get(m())}),O=user_derived(()=>[...s(),y()]);Node$1(w,{key:"value",get value(){return get$3(F)},get path(){return get$3(O)}})},$$slots:{default:!0}}),append(P,k)},$$slots:{valuePreview:!0,default:!0}})},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})),pop()}function ObjectView(a,e){push(e,!0);let n=prop(e,"key",3,void 0),s=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]),o=user_derived(()=>{var h,f;return((h=e.value)==null?void 0:h.constructor.name)!=="Object"?(f=e.value)==null?void 0:f.constructor.name:!1}),l=user_derived(()=>get$3(o)?get$3(o):e.type),c=user_derived(()=>[...getAllProperties(e.value).filter(h=>!["constructor","prototype"].includes(h.toString())),get$3(o)?"constructor":void 0].filter(h=>h!=null));const u=user_derived(()=>!!get$3(o));Expandable(a,spread_props({get type(){return get$3(l)},get length(){return get$3(c).length},get key(){return n()},get path(){return e.path},get value(){return e.value},get forceType(){return get$3(u)}},()=>s,{valuePreview:(f,d)=>{let p=()=>d==null?void 0:d().showPreview;Preview(f,{prefix:"{",postfix:"}",get value(){return e.value},get path(){return e.path},get keys(){return get$3(c)},get showPreview(){return p()}})},children:(f,d)=>{PropertyList(f,{get keys(){return get$3(c)},get value(){return e.value},get type(){return e.type},item:(g,m)=>{let y=()=>m==null?void 0:m().key,_=()=>m==null?void 0:m().descriptor;var b=comment$1(),x=first_child(b);{var P=k=>{GetterSetter(k,{get value(){return e.value},get descriptor(){return _()},get key(){return y()},get path(){return e.path}})},T=k=>{const S=user_derived(()=>{var A;return(A=e.value)==null?void 0:A[y()]});Node$1(k,{get value(){return get$3(S)},get key(){return y()},get path(){return e.path}})};if_block(x,k=>{var S,A;(S=_())!=null&&S.get||(A=_())!=null&&A.set?k(P):k(T,!1)})}append(g,b)},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})),pop()}var root_2$2=template('<span><span class="bracket svelte-8hc263"></span> <!> <span class="bracket svelte-8hc263"></span></span>');function PromiseView(a,e){push(e,!0);let n=prop(e,"value",19,()=>Promise.resolve()),s=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]);const o=useOptions();let l=state("pending"),c=state(void 0),u=state(void 0),h=user_derived(()=>Object.entries({state:get$3(l),result:get$3(c)}));function f(g,m){m===n()&&(set(c,g,!0),get$3(l)!=="fulfilled"&&set(l,"fulfilled"))}function d(g,m){m===n()&&(set(c,g,!0),set(l,"rejected"))}function p(g){set(l,"pending"),set(c,void 0);try{g.then(m=>f(m,g),m=>d(m,g)).catch(m=>d(m,g))}catch(m){d(m,g)}}user_effect(()=>{n(),untrack(()=>{get$3(u)!==n()&&(set(u,n(),!0),p(n()))})}),Expandable(a,spread_props(()=>({value:n(),key:e.key,type:e.type,path:e.path}),{get length(){return get$3(h).length},showLength:!1},()=>s,{valuePreview:(m,y)=>{let _=()=>y==null?void 0:y().showPreview;var b=comment$1(),x=first_child(b);key_block(x,()=>get$3(l),P=>{var T=root_2$2(),k=child(T);k.textContent="<";var S=sibling(k),A=sibling(S);{var w=F=>{const O=user_derived(()=>({value:get$3(c)}));Preview(F,{get showPreview(){return _()},prefix:":",get singleValue(){return get$3(O)},startLevel:0,showKey:!1,style:"gap:0",bracketStyle:"margin: 0; font-weight: bold"})};if_block(A,F=>{(get$3(l)==="fulfilled"||get$3(l)==="rejected")&&F(w)})}var E=sibling(A,2);E.textContent=">",template_effect(()=>{set_class(T,1,`value promise ${get$3(l)??""}`,"svelte-8hc263"),set_text(S,` ${`${get$3(l)}`} `)}),transition(1,T,()=>fade,()=>({duration:o.transitionDuration})),append(P,T)}),append(m,b)},children:(m,y)=>{var _=comment$1(),b=first_child(_);each(b,19,()=>get$3(h),([x,P])=>x,(x,P,T,k)=>{let S=()=>get$3(P)[0],A=()=>get$3(P)[1];Entry(x,{get i(){return get$3(T)},children:(w,E)=>{Node$1(w,{get value(){return A()},get key(){return S()},get path(){return e.path}})},$$slots:{default:!0}})}),append(m,_)},$$slots:{valuePreview:!0,default:!0}})),pop()}var root_1$2=template('<span data-testid="value" class="value regexp"> </span>');function RegexpView(a,e){push(e,!0);let n=prop(e,"key",3,void 0),s=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]),o=["lastIndex","dotAll","flags","global","hasIndices","ignoreCase","multiline","source","sticky","unicode","unicodeSets"];Expandable(a,spread_props({length:1,showLength:!1,get type(){return e.type},get key(){return n()},get path(){return e.path},get value(){return e.value}},()=>s,{keepPreviewOnExpand:!0,valuePreview:c=>{var u=root_1$2(),h=child(u);template_effect((f,d)=>{set_attribute(u,"title",f),set_text(h,d)},[()=>e.value.toString(),()=>e.value.toString()]),append(c,u)},children:(c,u)=>{PropertyList(c,{keys:o,get value(){return e.value},get type(){return e.type},item:(f,d)=>{let p=()=>d==null?void 0:d().key,g=()=>d==null?void 0:d().descriptor;var m=comment$1(),y=first_child(m);{var _=x=>{GetterSetter(x,{get value(){return e.value},get descriptor(){return g()},get key(){return p()},get path(){return e.path}})},b=x=>{Node$1(x,{get value(){return e.value[p()]},get key(){return p()},get path(){return e.path}})};if_block(y,x=>{var P,T;(P=g())!=null&&P.get||(T=g())!=null&&T.set?x(_):x(b,!1)})}append(f,m)},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}})),pop()}function SetView(a,e){push(e,!0);let n=user_derived(()=>[...e.value.entries()].map(([o,l])=>l)),s=user_derived(()=>get$3(n).slice(0,3));Expandable(a,spread_props(()=>({value:e.value,key:e.key,type:e.type,path:e.path}),{get length(){return get$3(n).length},valuePreview:(l,c)=>{let u=()=>c==null?void 0:c().showPreview;Preview(l,{get list(){return get$3(s)},prefix:"[",postfix:"]",showKey:!1,get showPreview(){return u()}})},children:(l,c)=>{var u=comment$1(),h=first_child(u);each(h,17,()=>get$3(n),index,(f,d,p,g)=>{Entry(f,{i:p,children:(m,y)=>{Node$1(m,{get value(){return get$3(d)},key:p,get path(){return e.path}})},$$slots:{default:!0}})}),append(l,u)},$$slots:{valuePreview:!0,default:!0}})),pop()}var root_7$1=template('<div class="embed svelte-1gz6jhs"><div class="image svelte-1gz6jhs"><img style="height: 100%" class="svelte-1gz6jhs"></div></div>'),root_9=template('<div class="embed svelte-1gz6jhs"><audio controls></audio></div>'),root_11=template('<pre class="value string multi"> </pre>');function StringView(a,e){push(e,!0);let n=prop(e,"value",3,""),s=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path","showKey"]);const o=getPreviewLevel(),l=useOptions();let c=user_derived(()=>n().includes(`
`)),u=user_derived(()=>{const x=n().startsWith("{")||n().startsWith("[");if(l.value.parseJson&&x)try{return JSON.parse(n())}catch{return}});const h=[".gif",".png",".svg",".jpg",".jpeg",".webp"],f=[".mp3",".ogg",".wav"];let d=user_derived(()=>URL.canParse(n())||n().startsWith("/")),p=user_derived(()=>h.some(x=>n().endsWith(x))&&get$3(d)||n().startsWith("data:image")),g=user_derived(()=>f.some(x=>n().endsWith(x))&&get$3(d));var m=comment$1(),y=first_child(m);{var _=x=>{const P=user_derived(()=>{var T;return(T=e.path)==null?void 0:T.toSpliced(e.path.length-1)});Node$1(x,spread_props({get value(){return get$3(u)},get path(){return get$3(P)},get key(){return e.key}},()=>s,{note:{title:"json",description:"This value was parsed from a JSON string"}}))},b=(x,P)=>{{var T=S=>{Expandable(S,spread_props(()=>({value:n(),key:e.key,type:e.type,path:e.path,showKey:e.showKey}),{get length(){return n().length},keepPreviewOnExpand:!0},()=>s,{valuePreview:(w,E)=>{let F=()=>E==null?void 0:E().showPreview;var O=comment$1(),M=first_child(O);{var V=G=>{StringValue(G,{get value(){return n()}})};if_block(M,G=>{F()&&G(V)})}append(w,O)},children:(w,E)=>{var F=comment$1(),O=first_child(F);{var M=G=>{var te=root_7$1(),ce=child(te),se=child(ce);template_effect(le=>{set_attribute(se,"alt",le),set_attribute(se,"src",n())},[()=>e.key.toString()]),append(G,te)},V=(G,te)=>{{var ce=le=>{var fe=root_9(),ge=child(fe);template_effect(()=>set_attribute(ge,"src",n())),append(le,fe)},se=(le,fe)=>{{var ge=xe=>{var _e=root_11(),Ce=child(_e);template_effect(()=>{set_attribute(_e,"title",n()),set_text(Ce,n())}),append(xe,_e)};if_block(le,xe=>{get$3(c)&&xe(ge)},fe)}};if_block(G,le=>{get$3(g)&&l.value.embedMedia?le(ce):le(se,!1)},te)}};if_block(O,G=>{get$3(p)&&l.value.embedMedia?G(M):G(V,!1)})}append(w,F)},$$slots:{valuePreview:!0,default:!0}}))},k=S=>{const A=user_derived(()=>stringify(n()));OneLineView(S,spread_props({get showKey(){return e.showKey},get key(){return e.key},get type(){return e.type},get path(){return e.path},get value(){return n()},get length(){return n().length},get title(){return get$3(A)}},()=>s,{children:(w,E)=>{StringValue(w,{get value(){return n()}})},$$slots:{default:!0}}))};if_block(x,S=>{(get$3(c)||(get$3(p)||get$3(g))&&l.value.embedMedia)&&!o?S(T):S(k,!1)},P)}};if_block(y,x=>{get$3(u)?x(_):x(b,!1)})}append(a,m),pop()}function SvelteStoreView(a,e){push(e,!0);const[n,s]=setup_stores(),o=()=>store_get(e.value,"$value",n);let l=prop(e,"key",3,void 0),c=prop(e,"path",19,()=>[]),u=rest_props(e,["$$slots","$$events","$$legacy","value","key","type","path"]);const h=useOptions();let f=user_derived(()=>h.value),d=user_derived(()=>get$3(f).stores);const p=Symbol("store-value");let g=user_derived(()=>e.value.constructor.name!=="Object"?e.value.constructor.name:!1),m=user_derived(()=>typeof e.value.set=="function"?"writable":"readable"),y=user_derived(()=>get$3(g)?get$3(g):get$3(m)),_=user_derived(()=>[p,...getAllProperties(e.value)]),b=user_derived(()=>{try{const S=e.value.subscribe(()=>{});return typeof S=="function"?(S(),!0):typeof S=="object"&&typeof S.unsubscribe=="function"?(S.unsubscribe(),!0):!1}catch{return!1}});var x=comment$1(),P=first_child(x);{var T=S=>{var A=comment$1(),w=first_child(A);{var E=O=>{Expandable(O,spread_props({get type(){return get$3(y)},get length(){return get$3(_).length},get key(){return l()},get path(){return c()},get value(){return e.value}},()=>u,{valuePreview:(V,G)=>{let te=()=>G==null?void 0:G().showPreview;const ce=user_derived(()=>({value:o()}));Preview(V,{style:"margin-left: -0.5em",showKey:!1,get singleValue(){return get$3(ce)},prefix:"(",postfix:")",startLevel:0,bracketStyle:"color: var(--_comment-color)",get showPreview(){return te()}})},children:(V,G)=>{PropertyList(V,{get keys(){return get$3(_)},get value(){return e.value},get type(){return e.type},item:(ce,se)=>{let le=()=>se==null?void 0:se().key,fe=()=>se==null?void 0:se().descriptor;var ge=comment$1(),xe=first_child(ge);{var _e=ae=>{GetterSetter(ae,{get value(){return e.value},get descriptor(){return fe()},get key(){return le()},get path(){return c()}})},Ce=(ae,B)=>{{var I=K=>{const Q=user_derived(()=>[...c(),Symbol("$")]);Node$1(K,{key:"value",keyPrefix:"$",keyStyle:"--_text-color: var(--_comment-color); gap: 0;",get value(){return o()},get path(){return get$3(Q)}})},q=K=>{Node$1(K,{get value(){return e.value[le()]},get key(){return le()},get path(){return c()}})};if_block(ae,K=>{le()===p?K(I):K(q,!1)},B)}};if_block(xe,ae=>{var B,I;(B=fe())!=null&&B.get||(I=fe())!=null&&I.set?ae(_e):ae(Ce,!1)})}append(ce,ge)},$$slots:{item:!0}})},$$slots:{valuePreview:!0,default:!0}}))},F=(O,M)=>{{var V=G=>{const te=user_derived(()=>{var ce;return(ce=c())==null?void 0:ce.toSpliced(c().length-1)});Node$1(G,spread_props({get key(){return l()},get path(){return get$3(te)},get value(){return o()}},()=>u,{note:{title:"store",description:"Value was retrieved by subscribing to a store"}}))};if_block(O,G=>{get$3(d)==="value-only"&&G(V)},M)}};if_block(w,O=>{get$3(d)==="full"||get$3(d)===!0?O(E):O(F,!1)})}append(S,A)},k=S=>{ObjectView(S,spread_props({note:{title:"invalid store",description:`subscribe function did not return a valid subscriber.
reverted to default object view.`},get value(){return e.value},get key(){return l()},type:"object",get path(){return c()}},()=>u))};if_block(P,S=>{get$3(b)?S(T):S(k,!1)})}append(a,x),pop(),s()}var root_2$1=template("<!> <!>",1);function TypedArrayView(a,e){push(e,!0);let n=prop(e,"key",3,void 0);const s=["buffer","byteLength","byteOffset","length"];function o(u){return e.value[u]}let l=user_derived(()=>s.map(u=>[u,o(u)])),c=user_derived(()=>e.value.slice(0,3));Expandable(a,spread_props(()=>({value:e.value,key:n(),type:e.type,path:e.path}),{get length(){return e.value.length},valuePreview:(h,f)=>{let d=()=>f==null?void 0:f().showPreview;Preview(h,{prefix:"[",postfix:"]",get list(){return get$3(c)},showKey:!1,get showPreview(){return d()}})},children:(h,f)=>{var d=root_2$1(),p=first_child(d);each(p,17,()=>e.value,index,(m,y,_)=>{Entry(m,{i:_,children:(b,x)=>{Node$1(b,{key:_,get value(){return get$3(y)},get path(){return e.path}})},$$slots:{default:!0}})});var g=sibling(p,2);each(g,19,()=>get$3(l),([m,y])=>m,(m,y,_,b)=>{let x=()=>get$3(y)[0],P=()=>get$3(y)[1];const T=user_derived(()=>e.value.length+get$3(_));Entry(m,{get i(){return get$3(T)},children:(k,S)=>{Node$1(k,{get key(){return x()},get value(){return P()},get path(){return e.path}})},$$slots:{default:!0}})}),append(h,d)},$$slots:{valuePreview:!0,default:!0}})),pop()}function URLSearchParamsView(a,e){push(e,!0);let n=prop(e,"value",19,()=>new URLSearchParams),s=prop(e,"key",3,void 0),o=rest_props(e,["$$slots","$$events","$$legacy","value","key","path"]),l=user_derived(()=>{let u={};for(const h of n().keys())if(!Object.hasOwn(u,h)){const f=n().getAll(h);f.length===1?u[h]=f[0]:u[h]=f}return Object.entries(u)}),c=user_derived(()=>get$3(l).slice(0,3));Expandable(a,spread_props(()=>({value:n(),key:s(),path:e.path}),{get length(){return n().size}},()=>o,{valuePreview:(h,f)=>{let d=()=>f==null?void 0:f().showPreview;Preview(h,{get keyValue(){return get$3(c)},prefix:"{",postfix:"}",get showPreview(){return d()}})},children:(h,f)=>{var d=comment$1(),p=first_child(d);each(p,19,()=>get$3(l),([g,m])=>g,(g,m,y,_)=>{let b=()=>get$3(m)[0],x=()=>get$3(m)[1];Entry(g,{get i(){return get$3(y)},children:(P,T)=>{Node$1(P,{get value(){return x()},get key(){return b()},get path(){return e.path}})},$$slots:{default:!0}})}),append(h,d)},$$slots:{valuePreview:!0,default:!0}})),pop()}function URLView(a,e){push(e,!0);let n=prop(e,"value",19,()=>new URL("")),s=user_derived(()=>n().hash),o=user_derived(()=>n().host),l=user_derived(()=>n().hostname),c=user_derived(()=>n().href),u=user_derived(()=>n().origin),h=user_derived(()=>n().searchParams),f=user_derived(()=>n().password),d=user_derived(()=>n().pathname),p=user_derived(()=>n().port),g=user_derived(()=>n().protocol),m=user_derived(()=>n().username),y=user_derived(()=>Object.entries({protocol:get$3(g),username:get$3(m),password:get$3(f),host:get$3(o),port:get$3(p),pathname:get$3(d),hash:get$3(s),hostname:get$3(l),origin:get$3(u),href:get$3(c),searchParams:get$3(h)}).filter(_=>!!_[1].toString()));Expandable(a,spread_props(()=>({value:n(),key:e.key,type:e.type,path:e.path}),{get length(){return get$3(y).length},showLength:!1,valuePreview:b=>{const x=user_derived(()=>n().toString());StringValue(b,{get type(){return e.type},get value(){return get$3(x)}})},children:(b,x)=>{var P=comment$1(),T=first_child(P);each(T,19,()=>get$3(y),([k,S])=>k,(k,S,A,w)=>{let E=()=>get$3(S)[0],F=()=>get$3(S)[1];Entry(k,{get i(){return get$3(A)},children:(O,M)=>{Node$1(O,{get value(){return F()},get key(){return E()},get path(){return e.path}})},$$slots:{default:!0}})}),append(b,P)},$$slots:{valuePreview:!0,default:!0}})),pop()}const components={symbol:[OneLineView,a=>({value:a.value,display:a.value.toString()})],number:[OneLineView],boolean:[OneLineView],undefined:[OneLineView],null:[OneLineView],regexp:[RegexpView],bigint:[OneLineView,a=>({display:a.value.toString()+"n"})],arraybuffer:[OneLineView,a=>({display:`ArrayBuffer(${a.value.byteLength})`})],setiterator:[IteratorView],arrayiterator:[IteratorView],mapiterator:[IteratorView],generator:[IteratorView],asyncgenerator:[IteratorView],weakset:[OneLineView,()=>({display:"",forceType:!0})],weakmap:[OneLineView,()=>({display:"",forceType:!0})],object:[ObjectView],store:[SvelteStoreView],array:[ArrayView],string:[StringView],function:[FunctionView],asyncfunction:[FunctionView],generatorfunction:[FunctionView],asyncgeneratorfunction:[FunctionView],class:[ClassView],date:[DateView],error:[ErrorView],map:[MapView],set:[SetView],url:[URLView],urlsearchparams:[URLSearchParamsView],htmlcollection:[Default],htmlimageelement:[HTMLImageElementView],html:[HTMLView],promise:[PromiseView],typedarray:[TypedArrayView]},typedArrays=["int8array","uint8array","uint8clampedarray","int16array","uint16array","int32array","uint32array","float32array","float64array","bigint64array","biguint64array"];function getComponent(a,e){const n={...components,...e};return typedArrays.includes(a)?n.typedarray:a.includes("iterator")?n.arrayiterator:n[a]}function getDefaultComponent(a){return typedArrays.includes(a)?components.typedarray:a.includes("iterator")?components.arrayiterator:components[a]}function Node$1(a,e){push(e,!0);let n=prop(e,"value",3,void 0),s=prop(e,"keyDelim",3,":"),o=prop(e,"path",19,()=>[]),l=prop(e,"usedefaults",3,!1),c=rest_props(e,["$$slots","$$events","$$legacy","value","key","keyDelim","path","usedefaults"]);const u=useOptions();let h=user_derived(()=>getType(n(),u.value.stores));function f(b,x,P,T){let k=getComponent(x,P?{}:T.customComponents);if(k){let[S,A,w]=k,E=A?A({value:b}):{};if(w&&!w({value:b,key:e.key,type:x,...c})){const[O,M]=getDefaultComponent(x),V=M?M({value:b}):{};return[O,V]}return[S,E]}else if(b instanceof HTMLElement)return[HTMLView,{}];return[Default,{}]}let d=user_derived(()=>f(n(),get$3(h),l(),u.value)),p=user_derived(()=>get$3(d)[0]),g=user_derived(()=>get$3(d)[1]),m=user_derived(()=>e.key!=null&&o()?[...o(),e.key]:["root"]);var y=comment$1(),_=first_child(y);boundary(_,{onerror:x=>console.error(new Error("Caught in Node.svelte",{cause:x})),failed:(x,P=noop$1,T=noop$1)=>{const k=user_derived(()=>new InspectError(`Component for value of type ${get$3(h)} failed`,n(),{cause:P()}));InspectErrorView(x,{get value(){return get$3(k)},get key(){return e.key},get path(){return get$3(m)},get reset(){return T()}})}},x=>{var P=comment$1(),T=first_child(P);component(T,()=>get$3(p),(k,S)=>{S(k,spread_props({get value(){return n()},get key(){return e.key},get keyDelim(){return s()},get type(){return get$3(h)},get path(){return get$3(m)}},()=>c,()=>get$3(g)))}),append(x,P)}),append(a,y),pop()}var root_5=template('<div style="color: var(--_comment-color); text-align: center">no value</div>');function InspectValues$1(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy"]),s=user_derived(()=>Object.entries(n)),o=getContext(Symbol.for("siv.with-options")),l=user_derived(()=>typeof o=="function"?o():{}),c=getContext(GLOBAL_OPTIONS_CONTEXT),u=user_derived(()=>mergeOptions(get$3(l),typeof c=="function"?c():c));const h=createOptions(()=>get$3(u));let f=user_derived(()=>h.value),d=user_derived(()=>get$3(f).theme),p=user_derived(()=>get$3(f).noanimate),g=user_derived(()=>get$3(f).borderless),m=user_derived(()=>get$3(f).onCollapseChange),y=user_derived(()=>fallback(get$3(l).elementAttributes,()=>({}),!0)),_=user_derived(()=>get$3(y).class),b=user_derived(()=>typeof h.value.renderIf=="function"?!!h.value.renderIf():!!h.value.renderIf);initialize(h);var x=comment$1(),P=first_child(x);{var T=k=>{CollapseStateProvider(k,{get onCollapseChange(){return get$3(m)},children:(S,A)=>{const w=user_derived(()=>[get$3(d),get$3(p)&&"noanimate",get$3(g)&&"borderless",get$3(_)]);Wrapper(S,spread_props({"data-testid":"inspect",get class(){return get$3(w)}},()=>get$3(y),{children:(E,F)=>{var O=comment$1(),M=first_child(O);each(M,17,()=>get$3(s),index,(V,G)=>{let te=()=>get$3(G)[0],ce=()=>get$3(G)[1];Node$1(V,{get value(){return ce()},get key(){return te()}})},V=>{var G=root_5();append(V,G)}),append(E,O)},$$slots:{default:!0}}))},$$slots:{default:!0}})};if_block(P,k=>{get$3(b)&&k(T)})}append(a,x),pop()}const inlineConfigProperties={DarkTheme:{theme:"dark"},LightTheme:{theme:"light"},DrakTheme:{theme:"drak"},StereoTheme:{theme:"stereo"},DefaultTheme:{theme:"inspect"},PlainTheme:{theme:"plain"},Borderless:{borderless:!0},Border:{borderless:!1},NoAnimate:{noanimate:!0},Animate:{noanimate:!1},ExpandAll:{expandAll:!0},NoTools:{showTools:!1},ShowTools:{showTools:!0},NoLength:{showLength:!1},ShowLength:{showLength:!1},NoTypes:{showTypes:!1},ShowTypes:{showTypes:!1},NoPreview:{showPreview:!1},ShowPreview:{showPreview:!1},ParseJSON:{parseJson:!0},Stores:{stores:!0},NoStores:{stores:!1},EmbedMedia:{embedMedia:!0},SingleQuotes:{quotes:"single"},DoubleQuotes:{quotes:"double"},NoQuotes:{quotes:"none"}};function createConfigurable(a,e,n=InspectValues$1){if(a.withOptions=function(s){const o=()=>({...e(),...s()});function l(...c){return setContext(Symbol.for("siv.with-options"),o),n(...c)}return createConfigurable(l,o)},!Object.hasOwn(a,"Config")){const s={config:{},get Ok(){return a.withOptions(()=>({...e(),...this.config}))}};Object.entries(inlineConfigProperties).forEach(([o,l])=>{Object.defineProperty(s,o,{get(){return this.config={...this.config,...l},this}})}),Object.defineProperty(a,"Config",{value:s})}for(let s=0;s<=10;s++)Object.hasOwn(a,`Expand${s}`)||Object.defineProperty(a,`Expand${s}`,{get:function(){return a.withOptions(()=>({...e(),expandLevel:s}))}});return Object.hasOwn(a,"ExpandAll")||Object.defineProperty(a,"ExpandAll",{get(){return a.withOptions(()=>({...e(),expandAll:!0}))}}),a}const InspectValues=createConfigurable(InspectValues$1,()=>({}));var root_7=template('<div style="color: var(--_comment-color); text-align: center">no value</div>');function Inspect$1(a,e){push(e,!0);let n=rest_props(e,["$$slots","$$events","$$legacy","value","values","name","class","heading"]),s=user_derived(()=>sortProps(n)),o=user_derived(()=>get$3(s)[0]),l=user_derived(()=>get$3(s)[1]);const c=getContext(GLOBAL_OPTIONS_CONTEXT);let u=user_derived(()=>mergeOptions(get$3(o),typeof c=="function"?c():c)),h=createOptions(()=>get$3(u)),f=user_derived(()=>h.value),d=user_derived(()=>get$3(f).theme),p=user_derived(()=>get$3(f).noanimate),g=user_derived(()=>get$3(f).borderless),m=user_derived(()=>get$3(f).onCollapseChange),y=user_derived(()=>typeof h.value.renderIf=="function"?!!h.value.renderIf():!!h.value.renderIf),_=user_derived(()=>e.values?getAllProperties(e.values):[]);initialize(h);var b=comment$1(),x=first_child(b);{var P=T=>{CollapseStateProvider(T,{get onCollapseChange(){return get$3(m)},children:(k,S)=>{const A=user_derived(()=>[e.class,get$3(d),get$3(p)&&"noanimate",get$3(g)&&"borderless"]);Wrapper(k,spread_props({"data-testid":"inspect",get class(){return get$3(A)},get heading(){return e.heading}},()=>get$3(l),{children:(w,E)=>{var F=comment$1(),O=first_child(F);{var M=G=>{PropertyList(G,{get value(){return e.values},get keys(){return get$3(_)}})},V=(G,te)=>{{var ce=le=>{Node$1(le,{get value(){return e.value},get key(){return e.name}})},se=le=>{var fe=root_7();append(le,fe)};if_block(G,le=>{e.name||e.value?le(ce):le(se,!1)},te)}};if_block(O,G=>{e.values&&get$3(_).length?G(M):G(V,!1)})}append(w,F)},$$slots:{default:!0}}))},$$slots:{default:!0}})};if_block(x,T=>{get$3(y)&&T(P)})}append(a,b),pop()}Inspect$1.Values=InspectValues;Inspect$1.Panel=Panel;const Inspect=Inspect$1,logo=a=>{var e=root_1$1();append(a,e)},label="Inspector",prefix=label.slice(0,1),text="Inspektion";var root_1$1=template(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"></path></svg> <style>svg {
      box-sizing: content-box;
      height: calc(33% / 1);
      padding-top: 1rem;
      padding-bottom: 1rem;
      margin-left: auto;
      margin-right: auto;
    }</style>`,1);function _5_Inspect_panel(a,e){Inspect(a,{get value(){return e.G},theme:"plain",borderless:!0,noanimate:!0})}const __vite_glob_0_4=Object.freeze(Object.defineProperty({__proto__:null,default:_5_Inspect_panel,label,logo,prefix,text},Symbol.toStringTag,{value:"Module"})),antrag1$1=""+new URL("antrag1-CVGA5kmm.pdf",import.meta.url).href,__vite_glob_1_0=Object.freeze(Object.defineProperty({__proto__:null,default:antrag1$1},Symbol.toStringTag,{value:"Module"})),antrag2$1=""+new URL("antrag2-CicH_Zjx.pdf",import.meta.url).href,__vite_glob_1_1=Object.freeze(Object.defineProperty({__proto__:null,default:antrag2$1},Symbol.toStringTag,{value:"Module"})),antrag3$1=""+new URL("antrag3-BRSwgkow.pdf",import.meta.url).href,__vite_glob_1_2=Object.freeze(Object.defineProperty({__proto__:null,default:antrag3$1},Symbol.toStringTag,{value:"Module"})),antrag1={title:"Erstfeststellungs-/Änderungsantrag nach dem Schwerbehindertenrecht Hessen",url:"https://rp-giessen.hessen.de/sites/rp-giessen.hessen.de/files/2025-03/erst_aenderungsantrag_2025_03_03_bf.pdf",downloadpage:"https://rp-giessen.hessen.de/antraege-und-infos-0",access_date:"2025-04-11",jurisdiction:"Hessen"},__vite_glob_2_0=Object.freeze(Object.defineProperty({__proto__:null,default:antrag1},Symbol.toStringTag,{value:"Module"})),antrag2={title:"Erstantrag und Änderungsantrag nach Schwerbehindertenrecht",url:"https://www.bezreg-muenster.de/zentralablage/dokumente/gesundheit_und_soziales/schwerbehindertenrecht/Antrag-Schwerbehindertenrecht_neu.pdf",downloadpage:"https://www.bezreg-muenster.de/de/gesundheit_und_soziales/schwerbehindertenrecht/antrag_stellen/index.html",access_date:"2025-04-11",jurisdiction:"Münster"},__vite_glob_2_1=Object.freeze(Object.defineProperty({__proto__:null,default:antrag2},Symbol.toStringTag,{value:"Module"})),antrag3={title:"Antrag auf Feststellung einer Behinderung",url:"https://www.mags.nrw/system/files/media/document/file/antrag_schwerbehinderung_2022.pdf",downloadpage:"https://www.mags.nrw/inklusionsportal-schwerbehindertenausweis",access_date:"2025-04-12",jurisdiction:"Nordrhein-Westfalen"},__vite_glob_2_2=Object.freeze(Object.defineProperty({__proto__:null,default:antrag3},Symbol.toStringTag,{value:"Module"}));class Formular{constructor(e,n,s){this._props=s,this.pdf=e,this.id=n,this.title=s.title,delete s.title,this.url=s.url,delete s.url,this.jurisdiction=s.jurisdiction,delete s.jurisdiction,this.access_date=s.access_date,delete s.access_date,this.downloadpage=s.downloadpage,delete s.downloadpage,this.associations=s.Associations,delete s.Associations}get sid(){return`F${this.id}`}}function assign(a){const e={};for(const n of a.map(s=>s.split("="))){let s=n[0];const o=decodeURI(n.slice(1).join("="));s.endsWith("*")?(s=s.slice(0,-1),s in e||(e[s]=[]),e[s].push(o)):e[s]=o}return e}function eval_source(a){let e=[];for(const n of a.split(`
`)){let[s,...o]=n.trim().split(" ");if(s=s.replace("type=",""),s=="field"){const[l,...c]=o,u=assign(c);""in u&&delete u[""];const h={};for(let[f,d]of Object.entries(u))Array.isArray(d)&&(d=JSON.stringify(d)),h[f]=d;e.push({typ:s,tag:l,...h})}else if(s=="association"){const l=assign(o);""in l&&delete l[""],e.push({typ:s,...l})}}return e}const sourcecode=`type=field input  id=nachname     label=Nachname     prefill=Mustermann crop={"x":122,"y":218,"width":120,"height":32}
type=field input  id=vorname      label=Vorname      prefill=Max        crop={"x":122,"y":287,"width":120,"height":16}
type=field input  id=geburtsdatum label=Geburtsdatum prefill=1.1.2000   crop={"x":122,"y":327,"width":60,"height":20}
type=field input  id=geburtsort   label=Geburtsort   prefill=Berlin     crop={"x":122,"y":366,"width":120,"height":16}
type=field radios id=geschlecht   label=Geschlecht   option*=Männlich   option*=Weiblich option*=Divers prefill=Männlich
type=field radios id=augenfarbe   label=Augenfarbe   option*=Grün       option*=Blau option*=Braun prefill=Grün

type=association association=antrag1 where=Name         from=nachname
type=association association=antrag1 where=Vorname      from=vorname
type=association association=antrag1 where=Geburtsdatum from=geburtsdatum
type=association association=antrag1 where=männlich     from=geschlecht=='Männlich'
type=association association=antrag1 where=weiblich     from=geschlecht=='Weiblich'
type=association association=antrag1 where=divers       from=geschlecht=='Divers'

type=association association=antrag2 where=Name%20Vorname%20ggf%20Geburtsname  from=nachname+',%20'+vorname
type=association association=antrag2 where=Geburtsdatum                        from=geburtsdatum
type=association association=antrag2 where=Gruppieren4:Auswahl7                from=geschlecht=='Männlich'
type=association association=antrag2 where=Gruppieren4:Auswahl8                from=geschlecht=='Weiblich'
type=association association=antrag2 where=Gruppieren4:Auswahl9                from=geschlecht=='Divers'
type=association association=antrag2 where=Gruppieren2:Auswahl1                from=true

type=association association=antrag3 where=Name%20der%20antragstellenden%20Person from=nachname
type=association association=antrag3 where=Vorname                                from=vorname
type=association association=antrag3 where=geboren%20am                           from=geburtsdatum
type=association association=antrag3 where=Geburtsort                             from=geburtsort
type=association association=antrag3 where=männlich                               from=geschlecht=='Männlich'
type=association association=antrag3 where=weiblich                               from=geschlecht=='Weiblich'
type=association association=antrag3 where=divers                                 from=geschlecht=='Divers'
type=association association=antrag3 where=EA                                     from=true
`,panelList=Object.values([__vite_glob_0_0,__vite_glob_0_1,__vite_glob_0_2,__vite_glob_0_3,__vite_glob_0_4]);window.pnllist=panelList;const pdfs=Object.fromEntries(Object.entries(Object.assign({"../antrag1.pdf":__vite_glob_1_0,"../antrag2.pdf":__vite_glob_1_1,"../antrag3.pdf":__vite_glob_1_2})).map(([e,n])=>[e.replace("../","").replace(".pdf",""),n.default])),tomls=Object.fromEntries(Object.entries(Object.assign({"../antrag1.toml":__vite_glob_2_0,"../antrag2.toml":__vite_glob_2_1,"../antrag3.toml":__vite_glob_2_2})).map(([e,n])=>(e=e.replace("../","").replace(".toml",""),n=n.default,n.downloadpage&&(n.downloadpage=new URL(n.downloadpage)),n.url&&(n.url=new URL(n.url)),n.access_date&&(n.access_date=new Date(n.access_date)),[e,n])));function objForStr(a){if(a.startsWith("F")){const n=`antrag${a.slice(1)}`;if(n in myGlobalState.formulare)return myGlobalState.formulare[n]}else if(a.startsWith("Z")){const n=`antrag${a.slice(1)}`;if(n in myGlobalState.formulare)return myGlobalState.formulare[n]}}function prepareFormulare(a){let e={};for(const n of Object.keys(tomls)){if(!(n in pdfs))continue;let s=tomls[n];const o=eval_source(a).filter(l=>l.typ=="association"&&n==l.association);o.length>0&&(s={...s,Associations:o}),e[n]=new Formular(pdfs[n],parseInt(n.replace("antrag","")),s)}return e}const myGlobalState=proxy({fields:{},location:location.hash.slice(1)||"Data",formulare:prepareFormulare(sourcecode),currentPage:1,selectedField:null,get o(){return objForStr(this.location)},get showPrefix(){return this.location.slice(0,1)},inputslist:[],sourcecode});window.addEventListener("hashchange",()=>{myGlobalState.location=location.hash.slice(1)});var root$2=template('<div class="p-4 bg-white text-3xl font-bold"><span style="color:#063FC0" class="svelte-ekj2vg">Forms</span><span style="color:#D11421" class="svelte-ekj2vg">2</span><span style="color:#063FC0" class="svelte-ekj2vg">Fill</span></div>');function Forms2FillLogo(a){var e=root$2();append(a,e)}var on_click=(a,e,n)=>e().location=get$3(n).label,root_1=template("<a><!> <label> </label></a>"),root$1=template('<nav class="w-[var(--sidebar-width)] fixed t-0 l-0 h-full bg-neutral-300 dark:bg-[#333] dark:text-white"><!> <!></nav>');function Sidebar(a,e){push(e,!0);const n=prop(e,"G",7);var s=root$1(),o=child(s);Forms2FillLogo(o);var l=sibling(o,2);each(l,17,()=>panelList,index,(c,u)=>{var h=root_1();h.__click=[on_click,n,u];var f=child(h);snippet(f,()=>get$3(u).logo);var d=sibling(f,2),p=child(d);template_effect(()=>{set_class(h,1,clsx([n().showPrefix==get$3(u).prefix&&"active","block","text-center"]),"svelte-1gysewf"),set_attribute(h,"href","#"+get$3(u).label),set_text(p,get$3(u).text)}),append(c,h)}),append(a,s),pop()}delegate(["click"]);var root_2=template("<div><!></div>"),root=template('<main><!> <div class="main ml-[var(--sidebar-width)] h-screen p-4 border-box [&amp;>div]:h-[calc(100vh-4rem)]"></div></main>');function App(a,e){push(e,!0),user_effect(()=>{document.location.hash=myGlobalState.location}),user_effect(()=>{myGlobalState.inputslist=eval_source(myGlobalState.sourcecode).filter(l=>l.typ=="field")}),user_effect(()=>{myGlobalState.formulare=prepareFormulare(myGlobalState.sourcecode)}),user_effect(()=>{for(const{id:l,prefill:c}of myGlobalState.inputslist)myGlobalState.fields[l]=c??""});var n=root();head(l=>{template_effect(()=>$document.title=`${myGlobalState.location??""} | Forms2Fill`)});var s=child(n);Sidebar(s,{G:myGlobalState});var o=sibling(s,2);each(o,21,()=>panelList,index,(l,c)=>{var u=root_2(),h=child(u);component(h,()=>get$3(c).default,(f,d)=>{d(f,{G:myGlobalState})}),template_effect(()=>set_class(u,1,clsx([myGlobalState.showPrefix!=get$3(c).prefix&&"hidden"]))),append(l,u)}),append(a,n),pop()}mount(App,{target:document.getElementById("app")});
